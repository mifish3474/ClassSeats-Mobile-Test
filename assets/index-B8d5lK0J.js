(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function ug(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yf={exports:{}},mi={},Jf={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=Symbol.for("react.element"),cg=Symbol.for("react.portal"),dg=Symbol.for("react.fragment"),fg=Symbol.for("react.strict_mode"),pg=Symbol.for("react.profiler"),mg=Symbol.for("react.provider"),hg=Symbol.for("react.context"),gg=Symbol.for("react.forward_ref"),vg=Symbol.for("react.suspense"),yg=Symbol.for("react.memo"),xg=Symbol.for("react.lazy"),md=Symbol.iterator;function wg(e){return e===null||typeof e!="object"?null:(e=md&&e[md]||e["@@iterator"],typeof e=="function"?e:null)}var Xf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qf=Object.assign,Zf={};function bs(e,t,n){this.props=e,this.context=t,this.refs=Zf,this.updater=n||Xf}bs.prototype.isReactComponent={};bs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ep(){}ep.prototype=bs.prototype;function Tu(e,t,n){this.props=e,this.context=t,this.refs=Zf,this.updater=n||Xf}var Iu=Tu.prototype=new ep;Iu.constructor=Tu;qf(Iu,bs.prototype);Iu.isPureReactComponent=!0;var hd=Array.isArray,tp=Object.prototype.hasOwnProperty,Ru={current:null},np={key:!0,ref:!0,__self:!0,__source:!0};function rp(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)tp.call(t,r)&&!np.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Dl,type:e,key:l,ref:o,props:s,_owner:Ru.current}}function Sg(e,t){return{$$typeof:Dl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Du(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dl}function Ng(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var gd=/\/+/g;function ta(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ng(""+e.key):t.toString(36)}function ko(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Dl:case cg:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+ta(o,0):r,hd(s)?(n="",e!=null&&(n=e.replace(gd,"$&/")+"/"),ko(s,t,n,"",function(d){return d})):s!=null&&(Du(s)&&(s=Sg(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",hd(e))for(var a=0;a<e.length;a++){l=e[a];var c=r+ta(l,a);o+=ko(l,t,n,c,s)}else if(c=wg(e),typeof c=="function")for(e=c.call(e),a=0;!(l=e.next()).done;)l=l.value,c=r+ta(l,a++),o+=ko(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function no(e,t,n){if(e==null)return e;var r=[],s=0;return ko(e,r,"","",function(l){return t.call(n,l,s++)}),r}function kg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dt={current:null},jo={transition:null},jg={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:jo,ReactCurrentOwner:Ru};function sp(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:no,forEach:function(e,t,n){no(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return no(e,function(){t++}),t},toArray:function(e){return no(e,function(t){return t})||[]},only:function(e){if(!Du(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=bs;ee.Fragment=dg;ee.Profiler=pg;ee.PureComponent=Tu;ee.StrictMode=fg;ee.Suspense=vg;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jg;ee.act=sp;ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=qf({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Ru.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)tp.call(t,c)&&!np.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Dl,type:e.type,key:s,ref:l,props:r,_owner:o}};ee.createContext=function(e){return e={$$typeof:hg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mg,_context:e},e.Consumer=e};ee.createElement=rp;ee.createFactory=function(e){var t=rp.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:gg,render:e}};ee.isValidElement=Du;ee.lazy=function(e){return{$$typeof:xg,_payload:{_status:-1,_result:e},_init:kg}};ee.memo=function(e,t){return{$$typeof:yg,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=jo.transition;jo.transition={};try{e()}finally{jo.transition=t}};ee.unstable_act=sp;ee.useCallback=function(e,t){return dt.current.useCallback(e,t)};ee.useContext=function(e){return dt.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return dt.current.useDeferredValue(e)};ee.useEffect=function(e,t){return dt.current.useEffect(e,t)};ee.useId=function(){return dt.current.useId()};ee.useImperativeHandle=function(e,t,n){return dt.current.useImperativeHandle(e,t,n)};ee.useInsertionEffect=function(e,t){return dt.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return dt.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return dt.current.useMemo(e,t)};ee.useReducer=function(e,t,n){return dt.current.useReducer(e,t,n)};ee.useRef=function(e){return dt.current.useRef(e)};ee.useState=function(e){return dt.current.useState(e)};ee.useSyncExternalStore=function(e,t,n){return dt.current.useSyncExternalStore(e,t,n)};ee.useTransition=function(){return dt.current.useTransition()};ee.version="18.3.1";Jf.exports=ee;var p=Jf.exports;const bg=ug(p);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=p,Eg=Symbol.for("react.element"),Pg=Symbol.for("react.fragment"),_g=Object.prototype.hasOwnProperty,Tg=Cg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ig={key:!0,ref:!0,__self:!0,__source:!0};function lp(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)_g.call(t,r)&&!Ig.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Eg,type:e,key:l,ref:o,props:s,_owner:Tg.current}}mi.Fragment=Pg;mi.jsx=lp;mi.jsxs=lp;Yf.exports=mi;var i=Yf.exports,Ia={},op={exports:{}},Tt={},ip={exports:{}},ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,Y){var q=T.length;T.push(Y);e:for(;0<q;){var pe=q-1>>>1,me=T[pe];if(0<s(me,Y))T[pe]=Y,T[q]=me,q=pe;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var Y=T[0],q=T.pop();if(q!==Y){T[0]=q;e:for(var pe=0,me=T.length,Wt=me>>>1;pe<Wt;){var L=2*(pe+1)-1,Ke=T[L],Ue=L+1,Be=T[Ue];if(0>s(Ke,q))Ue<me&&0>s(Be,Ke)?(T[pe]=Be,T[Ue]=q,pe=Ue):(T[pe]=Ke,T[L]=q,pe=L);else if(Ue<me&&0>s(Be,q))T[pe]=Be,T[Ue]=q,pe=Ue;else break e}}return Y}function s(T,Y){var q=T.sortIndex-Y.sortIndex;return q!==0?q:T.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],d=[],y=1,S=null,x=3,j=!1,b=!1,k=!1,J=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=T)r(d),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=n(d)}}function C(T){if(k=!1,g(T),!b)if(n(c)!==null)b=!0,V(A);else{var Y=n(d);Y!==null&&he(C,Y.startTime-T)}}function A(T,Y){b=!1,k&&(k=!1,m(z),z=-1),j=!0;var q=x;try{for(g(Y),S=n(c);S!==null&&(!(S.expirationTime>Y)||T&&!we());){var pe=S.callback;if(typeof pe=="function"){S.callback=null,x=S.priorityLevel;var me=pe(S.expirationTime<=Y);Y=e.unstable_now(),typeof me=="function"?S.callback=me:S===n(c)&&r(c),g(Y)}else r(c);S=n(c)}if(S!==null)var Wt=!0;else{var L=n(d);L!==null&&he(C,L.startTime-Y),Wt=!1}return Wt}finally{S=null,x=q,j=!1}}var O=!1,M=null,z=-1,ce=5,X=-1;function we(){return!(e.unstable_now()-X<ce)}function qe(){if(M!==null){var T=e.unstable_now();X=T;var Y=!0;try{Y=M(!0,T)}finally{Y?lt():(O=!1,M=null)}}else O=!1}var lt;if(typeof f=="function")lt=function(){f(qe)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Ze=re.port2;re.port1.onmessage=qe,lt=function(){Ze.postMessage(null)}}else lt=function(){J(qe,0)};function V(T){M=T,O||(O=!0,lt())}function he(T,Y){z=J(function(){T(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){b||j||(b=!0,V(A))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var q=x;x=Y;try{return T()}finally{x=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,Y){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var q=x;x=T;try{return Y()}finally{x=q}},e.unstable_scheduleCallback=function(T,Y,q){var pe=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?pe+q:pe):q=pe,T){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=q+me,T={id:y++,callback:Y,priorityLevel:T,startTime:q,expirationTime:me,sortIndex:-1},q>pe?(T.sortIndex=q,t(d,T),n(c)===null&&T===n(d)&&(k?(m(z),z=-1):k=!0,he(C,q-pe))):(T.sortIndex=me,t(c,T),b||j||(b=!0,V(A))),T},e.unstable_shouldYield=we,e.unstable_wrapCallback=function(T){var Y=x;return function(){var q=x;x=Y;try{return T.apply(this,arguments)}finally{x=q}}}})(ap);ip.exports=ap;var Rg=ip.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg=p,_t=Rg;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var up=new Set,gl={};function _r(e,t){hs(e,t),hs(e+"Capture",t)}function hs(e,t){for(gl[e]=t,e=0;e<t.length;e++)up.add(t[e])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ra=Object.prototype.hasOwnProperty,Ag=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vd={},yd={};function Lg(e){return Ra.call(yd,e)?!0:Ra.call(vd,e)?!1:Ag.test(e)?yd[e]=!0:(vd[e]=!0,!1)}function Og(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mg(e,t,n,r){if(t===null||typeof t>"u"||Og(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Au=/[\-:]([a-z])/g;function Lu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Au,Lu);Xe[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Au,Lu);Xe[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Au,Lu);Xe[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ou(e,t,n,r){var s=Xe.hasOwnProperty(t)?Xe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mg(t,n,s,r)&&(n=null),r||s===null?Lg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=Dg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ro=Symbol.for("react.element"),Qr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),Mu=Symbol.for("react.strict_mode"),Da=Symbol.for("react.profiler"),cp=Symbol.for("react.provider"),dp=Symbol.for("react.context"),Fu=Symbol.for("react.forward_ref"),Aa=Symbol.for("react.suspense"),La=Symbol.for("react.suspense_list"),Uu=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),fp=Symbol.for("react.offscreen"),xd=Symbol.iterator;function Ws(e){return e===null||typeof e!="object"?null:(e=xd&&e[xd]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,na;function Zs(e){if(na===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);na=t&&t[1]||""}return`
`+na+e}var ra=!1;function sa(e,t){if(!e||ra)return"";ra=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,a=l.length-1;1<=o&&0<=a&&s[o]!==l[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==l[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==l[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{ra=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zs(e):""}function Fg(e){switch(e.tag){case 5:return Zs(e.type);case 16:return Zs("Lazy");case 13:return Zs("Suspense");case 19:return Zs("SuspenseList");case 0:case 2:case 15:return e=sa(e.type,!1),e;case 11:return e=sa(e.type.render,!1),e;case 1:return e=sa(e.type,!0),e;default:return""}}function Oa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yr:return"Fragment";case Qr:return"Portal";case Da:return"Profiler";case Mu:return"StrictMode";case Aa:return"Suspense";case La:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dp:return(e.displayName||"Context")+".Consumer";case cp:return(e._context.displayName||"Context")+".Provider";case Fu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uu:return t=e.displayName||null,t!==null?t:Oa(e.type)||"Memo";case Mn:t=e._payload,e=e._init;try{return Oa(e(t))}catch{}}return null}function Ug(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oa(t);case 8:return t===Mu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zg(e){var t=pp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function so(e){e._valueTracker||(e._valueTracker=zg(e))}function mp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=pp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Uo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ma(e,t){var n=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hp(e,t){t=t.checked,t!=null&&Ou(e,"checked",t,!1)}function Fa(e,t){hp(e,t);var n=Zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ua(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ua(e,t.type,Zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ua(e,t,n){(t!=="number"||Uo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var el=Array.isArray;function os(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function za(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(el(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zn(n)}}function gp(e,t){var n=Zn(t.value),r=Zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function kd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $a(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lo,yp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lo=lo||document.createElement("div"),lo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$g=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(e){$g.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ol[t]=ol[e]})});function xp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ol.hasOwnProperty(e)&&ol[e]?(""+t).trim():t+"px"}function wp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=xp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Bg=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ba(e,t){if(t){if(Bg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function Wa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Va=null;function zu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ha=null,is=null,as=null;function jd(e){if(e=Ol(e)){if(typeof Ha!="function")throw Error(I(280));var t=e.stateNode;t&&(t=xi(t),Ha(e.stateNode,e.type,t))}}function Sp(e){is?as?as.push(e):as=[e]:is=e}function Np(){if(is){var e=is,t=as;if(as=is=null,jd(e),t)for(e=0;e<t.length;e++)jd(t[e])}}function kp(e,t){return e(t)}function jp(){}var la=!1;function bp(e,t,n){if(la)return e(t,n);la=!0;try{return kp(e,t,n)}finally{la=!1,(is!==null||as!==null)&&(jp(),Np())}}function yl(e,t){var n=e.stateNode;if(n===null)return null;var r=xi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var Ga=!1;if(bn)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{Ga=!1}function Wg(e,t,n,r,s,l,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(y){this.onError(y)}}var il=!1,zo=null,$o=!1,Ka=null,Vg={onError:function(e){il=!0,zo=e}};function Hg(e,t,n,r,s,l,o,a,c){il=!1,zo=null,Wg.apply(Vg,arguments)}function Gg(e,t,n,r,s,l,o,a,c){if(Hg.apply(this,arguments),il){if(il){var d=zo;il=!1,zo=null}else throw Error(I(198));$o||($o=!0,Ka=d)}}function Tr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Cp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bd(e){if(Tr(e)!==e)throw Error(I(188))}function Kg(e){var t=e.alternate;if(!t){if(t=Tr(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return bd(s),e;if(l===r)return bd(s),t;l=l.sibling}throw Error(I(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=l;break}if(a===r){o=!0,r=s,n=l;break}a=a.sibling}if(!o){for(a=l.child;a;){if(a===n){o=!0,n=l,r=s;break}if(a===r){o=!0,r=l,n=s;break}a=a.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function Ep(e){return e=Kg(e),e!==null?Pp(e):null}function Pp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Pp(e);if(t!==null)return t;e=e.sibling}return null}var _p=_t.unstable_scheduleCallback,Cd=_t.unstable_cancelCallback,Qg=_t.unstable_shouldYield,Yg=_t.unstable_requestPaint,De=_t.unstable_now,Jg=_t.unstable_getCurrentPriorityLevel,$u=_t.unstable_ImmediatePriority,Tp=_t.unstable_UserBlockingPriority,Bo=_t.unstable_NormalPriority,Xg=_t.unstable_LowPriority,Ip=_t.unstable_IdlePriority,hi=null,un=null;function qg(e){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(hi,e,void 0,(e.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:t0,Zg=Math.log,e0=Math.LN2;function t0(e){return e>>>=0,e===0?32:31-(Zg(e)/e0|0)|0}var oo=64,io=4194304;function tl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=tl(a):(l&=o,l!==0&&(r=tl(l)))}else o=n&~s,o!==0?r=tl(o):l!==0&&(r=tl(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-en(t),s=1<<n,r|=e[n],t&=~s;return r}function n0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-en(l),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=n0(a,t)):c<=t&&(e.expiredLanes|=a),l&=~a}}function Qa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rp(){var e=oo;return oo<<=1,!(oo&4194240)&&(oo=64),e}function oa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Al(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=n}function s0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-en(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Bu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-en(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var fe=0;function Dp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ap,Wu,Lp,Op,Mp,Ya=!1,ao=[],Wn=null,Vn=null,Hn=null,xl=new Map,wl=new Map,Un=[],l0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ed(e,t){switch(e){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":xl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(t.pointerId)}}function Hs(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Ol(t),t!==null&&Wu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function o0(e,t,n,r,s){switch(t){case"focusin":return Wn=Hs(Wn,e,t,n,r,s),!0;case"dragenter":return Vn=Hs(Vn,e,t,n,r,s),!0;case"mouseover":return Hn=Hs(Hn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return xl.set(l,Hs(xl.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,wl.set(l,Hs(wl.get(l)||null,e,t,n,r,s)),!0}return!1}function Fp(e){var t=gr(e.target);if(t!==null){var n=Tr(t);if(n!==null){if(t=n.tag,t===13){if(t=Cp(n),t!==null){e.blockedOn=t,Mp(e.priority,function(){Lp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ja(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Va=r,n.target.dispatchEvent(r),Va=null}else return t=Ol(n),t!==null&&Wu(t),e.blockedOn=n,!1;t.shift()}return!0}function Pd(e,t,n){bo(e)&&n.delete(t)}function i0(){Ya=!1,Wn!==null&&bo(Wn)&&(Wn=null),Vn!==null&&bo(Vn)&&(Vn=null),Hn!==null&&bo(Hn)&&(Hn=null),xl.forEach(Pd),wl.forEach(Pd)}function Gs(e,t){e.blockedOn===t&&(e.blockedOn=null,Ya||(Ya=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,i0)))}function Sl(e){function t(s){return Gs(s,e)}if(0<ao.length){Gs(ao[0],e);for(var n=1;n<ao.length;n++){var r=ao[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wn!==null&&Gs(Wn,e),Vn!==null&&Gs(Vn,e),Hn!==null&&Gs(Hn,e),xl.forEach(t),wl.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Fp(n),n.blockedOn===null&&Un.shift()}var us=_n.ReactCurrentBatchConfig,Vo=!0;function a0(e,t,n,r){var s=fe,l=us.transition;us.transition=null;try{fe=1,Vu(e,t,n,r)}finally{fe=s,us.transition=l}}function u0(e,t,n,r){var s=fe,l=us.transition;us.transition=null;try{fe=4,Vu(e,t,n,r)}finally{fe=s,us.transition=l}}function Vu(e,t,n,r){if(Vo){var s=Ja(e,t,n,r);if(s===null)ga(e,t,r,Ho,n),Ed(e,r);else if(o0(s,e,t,n,r))r.stopPropagation();else if(Ed(e,r),t&4&&-1<l0.indexOf(e)){for(;s!==null;){var l=Ol(s);if(l!==null&&Ap(l),l=Ja(e,t,n,r),l===null&&ga(e,t,r,Ho,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else ga(e,t,r,null,n)}}var Ho=null;function Ja(e,t,n,r){if(Ho=null,e=zu(r),e=gr(e),e!==null)if(t=Tr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Cp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ho=e,null}function Up(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jg()){case $u:return 1;case Tp:return 4;case Bo:case Xg:return 16;case Ip:return 536870912;default:return 16}default:return 16}}var $n=null,Hu=null,Co=null;function zp(){if(Co)return Co;var e,t=Hu,n=t.length,r,s="value"in $n?$n.value:$n.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return Co=s.slice(e,1<r?1-r:void 0)}function Eo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function uo(){return!0}function _d(){return!1}function It(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?uo:_d,this.isPropagationStopped=_d,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uo)},persist:function(){},isPersistent:uo}),t}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gu=It(Cs),Ll=Ee({},Cs,{view:0,detail:0}),c0=It(Ll),ia,aa,Ks,gi=Ee({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ku,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ks&&(Ks&&e.type==="mousemove"?(ia=e.screenX-Ks.screenX,aa=e.screenY-Ks.screenY):aa=ia=0,Ks=e),ia)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),Td=It(gi),d0=Ee({},gi,{dataTransfer:0}),f0=It(d0),p0=Ee({},Ll,{relatedTarget:0}),ua=It(p0),m0=Ee({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),h0=It(m0),g0=Ee({},Cs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),v0=It(g0),y0=Ee({},Cs,{data:0}),Id=It(y0),x0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=S0[e])?!!t[e]:!1}function Ku(){return N0}var k0=Ee({},Ll,{key:function(e){if(e.key){var t=x0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Eo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?w0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ku,charCode:function(e){return e.type==="keypress"?Eo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Eo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),j0=It(k0),b0=Ee({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rd=It(b0),C0=Ee({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ku}),E0=It(C0),P0=Ee({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),_0=It(P0),T0=Ee({},gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),I0=It(T0),R0=[9,13,27,32],Qu=bn&&"CompositionEvent"in window,al=null;bn&&"documentMode"in document&&(al=document.documentMode);var D0=bn&&"TextEvent"in window&&!al,$p=bn&&(!Qu||al&&8<al&&11>=al),Dd=" ",Ad=!1;function Bp(e,t){switch(e){case"keyup":return R0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jr=!1;function A0(e,t){switch(e){case"compositionend":return Wp(t);case"keypress":return t.which!==32?null:(Ad=!0,Dd);case"textInput":return e=t.data,e===Dd&&Ad?null:e;default:return null}}function L0(e,t){if(Jr)return e==="compositionend"||!Qu&&Bp(e,t)?(e=zp(),Co=Hu=$n=null,Jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $p&&t.locale!=="ko"?null:t.data;default:return null}}var O0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O0[e.type]:t==="textarea"}function Vp(e,t,n,r){Sp(r),t=Go(t,"onChange"),0<t.length&&(n=new Gu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ul=null,Nl=null;function M0(e){tm(e,0)}function vi(e){var t=Zr(e);if(mp(t))return e}function F0(e,t){if(e==="change")return t}var Hp=!1;if(bn){var ca;if(bn){var da="oninput"in document;if(!da){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),da=typeof Od.oninput=="function"}ca=da}else ca=!1;Hp=ca&&(!document.documentMode||9<document.documentMode)}function Md(){ul&&(ul.detachEvent("onpropertychange",Gp),Nl=ul=null)}function Gp(e){if(e.propertyName==="value"&&vi(Nl)){var t=[];Vp(t,Nl,e,zu(e)),bp(M0,t)}}function U0(e,t,n){e==="focusin"?(Md(),ul=t,Nl=n,ul.attachEvent("onpropertychange",Gp)):e==="focusout"&&Md()}function z0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vi(Nl)}function $0(e,t){if(e==="click")return vi(t)}function B0(e,t){if(e==="input"||e==="change")return vi(t)}function W0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:W0;function kl(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ra.call(t,s)||!nn(e[s],t[s]))return!1}return!0}function Fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ud(e,t){var n=Fd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fd(n)}}function Kp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qp(){for(var e=window,t=Uo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Uo(e.document)}return t}function Yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function V0(e){var t=Qp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Kp(n.ownerDocument.documentElement,n)){if(r!==null&&Yu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Ud(n,l);var o=Ud(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H0=bn&&"documentMode"in document&&11>=document.documentMode,Xr=null,Xa=null,cl=null,qa=!1;function zd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qa||Xr==null||Xr!==Uo(r)||(r=Xr,"selectionStart"in r&&Yu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cl&&kl(cl,r)||(cl=r,r=Go(Xa,"onSelect"),0<r.length&&(t=new Gu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xr)))}function co(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qr={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionend:co("Transition","TransitionEnd")},fa={},Yp={};bn&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function yi(e){if(fa[e])return fa[e];if(!qr[e])return e;var t=qr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yp)return fa[e]=t[n];return e}var Jp=yi("animationend"),Xp=yi("animationiteration"),qp=yi("animationstart"),Zp=yi("transitionend"),em=new Map,$d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(e,t){em.set(e,t),_r(t,[e])}for(var pa=0;pa<$d.length;pa++){var ma=$d[pa],G0=ma.toLowerCase(),K0=ma[0].toUpperCase()+ma.slice(1);nr(G0,"on"+K0)}nr(Jp,"onAnimationEnd");nr(Xp,"onAnimationIteration");nr(qp,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(Zp,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_r("onBeforeInput",["compositionend","keypress","textInput","paste"]);_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q0=new Set("cancel close invalid load scroll toggle".split(" ").concat(nl));function Bd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Gg(r,t,void 0,e),e.currentTarget=null}function tm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==l&&s.isPropagationStopped())break e;Bd(s,a,d),l=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==l&&s.isPropagationStopped())break e;Bd(s,a,d),l=c}}}if($o)throw e=Ka,$o=!1,Ka=null,e}function Se(e,t){var n=t[ru];n===void 0&&(n=t[ru]=new Set);var r=e+"__bubble";n.has(r)||(nm(t,e,2,!1),n.add(r))}function ha(e,t,n){var r=0;t&&(r|=4),nm(n,e,r,t)}var fo="_reactListening"+Math.random().toString(36).slice(2);function jl(e){if(!e[fo]){e[fo]=!0,up.forEach(function(n){n!=="selectionchange"&&(Q0.has(n)||ha(n,!1,e),ha(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fo]||(t[fo]=!0,ha("selectionchange",!1,t))}}function nm(e,t,n,r){switch(Up(t)){case 1:var s=a0;break;case 4:s=u0;break;default:s=Vu}n=s.bind(null,t,n,e),s=void 0,!Ga||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ga(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=gr(a),o===null)return;if(c=o.tag,c===5||c===6){r=l=o;continue e}a=a.parentNode}}r=r.return}bp(function(){var d=l,y=zu(n),S=[];e:{var x=em.get(e);if(x!==void 0){var j=Gu,b=e;switch(e){case"keypress":if(Eo(n)===0)break e;case"keydown":case"keyup":j=j0;break;case"focusin":b="focus",j=ua;break;case"focusout":b="blur",j=ua;break;case"beforeblur":case"afterblur":j=ua;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=f0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=E0;break;case Jp:case Xp:case qp:j=h0;break;case Zp:j=_0;break;case"scroll":j=c0;break;case"wheel":j=I0;break;case"copy":case"cut":case"paste":j=v0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Rd}var k=(t&4)!==0,J=!k&&e==="scroll",m=k?x!==null?x+"Capture":null:x;k=[];for(var f=d,g;f!==null;){g=f;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,m!==null&&(C=yl(f,m),C!=null&&k.push(bl(f,C,g)))),J)break;f=f.return}0<k.length&&(x=new j(x,b,null,n,y),S.push({event:x,listeners:k}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",x&&n!==Va&&(b=n.relatedTarget||n.fromElement)&&(gr(b)||b[Cn]))break e;if((j||x)&&(x=y.window===y?y:(x=y.ownerDocument)?x.defaultView||x.parentWindow:window,j?(b=n.relatedTarget||n.toElement,j=d,b=b?gr(b):null,b!==null&&(J=Tr(b),b!==J||b.tag!==5&&b.tag!==6)&&(b=null)):(j=null,b=d),j!==b)){if(k=Td,C="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(k=Rd,C="onPointerLeave",m="onPointerEnter",f="pointer"),J=j==null?x:Zr(j),g=b==null?x:Zr(b),x=new k(C,f+"leave",j,n,y),x.target=J,x.relatedTarget=g,C=null,gr(y)===d&&(k=new k(m,f+"enter",b,n,y),k.target=g,k.relatedTarget=J,C=k),J=C,j&&b)t:{for(k=j,m=b,f=0,g=k;g;g=Gr(g))f++;for(g=0,C=m;C;C=Gr(C))g++;for(;0<f-g;)k=Gr(k),f--;for(;0<g-f;)m=Gr(m),g--;for(;f--;){if(k===m||m!==null&&k===m.alternate)break t;k=Gr(k),m=Gr(m)}k=null}else k=null;j!==null&&Wd(S,x,j,k,!1),b!==null&&J!==null&&Wd(S,J,b,k,!0)}}e:{if(x=d?Zr(d):window,j=x.nodeName&&x.nodeName.toLowerCase(),j==="select"||j==="input"&&x.type==="file")var A=F0;else if(Ld(x))if(Hp)A=B0;else{A=z0;var O=U0}else(j=x.nodeName)&&j.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(A=$0);if(A&&(A=A(e,d))){Vp(S,A,n,y);break e}O&&O(e,x,d),e==="focusout"&&(O=x._wrapperState)&&O.controlled&&x.type==="number"&&Ua(x,"number",x.value)}switch(O=d?Zr(d):window,e){case"focusin":(Ld(O)||O.contentEditable==="true")&&(Xr=O,Xa=d,cl=null);break;case"focusout":cl=Xa=Xr=null;break;case"mousedown":qa=!0;break;case"contextmenu":case"mouseup":case"dragend":qa=!1,zd(S,n,y);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":zd(S,n,y)}var M;if(Qu)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Jr?Bp(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&($p&&n.locale!=="ko"&&(Jr||z!=="onCompositionStart"?z==="onCompositionEnd"&&Jr&&(M=zp()):($n=y,Hu="value"in $n?$n.value:$n.textContent,Jr=!0)),O=Go(d,z),0<O.length&&(z=new Id(z,e,null,n,y),S.push({event:z,listeners:O}),M?z.data=M:(M=Wp(n),M!==null&&(z.data=M)))),(M=D0?A0(e,n):L0(e,n))&&(d=Go(d,"onBeforeInput"),0<d.length&&(y=new Id("onBeforeInput","beforeinput",null,n,y),S.push({event:y,listeners:d}),y.data=M))}tm(S,t)})}function bl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Go(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=yl(e,n),l!=null&&r.unshift(bl(e,l,s)),l=yl(e,t),l!=null&&r.push(bl(e,l,s))),e=e.return}return r}function Gr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wd(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=yl(n,l),c!=null&&o.unshift(bl(n,c,a))):s||(c=yl(n,l),c!=null&&o.push(bl(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Y0=/\r\n?/g,J0=/\u0000|\uFFFD/g;function Vd(e){return(typeof e=="string"?e:""+e).replace(Y0,`
`).replace(J0,"")}function po(e,t,n){if(t=Vd(t),Vd(e)!==t&&n)throw Error(I(425))}function Ko(){}var Za=null,eu=null;function tu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nu=typeof setTimeout=="function"?setTimeout:void 0,X0=typeof clearTimeout=="function"?clearTimeout:void 0,Hd=typeof Promise=="function"?Promise:void 0,q0=typeof queueMicrotask=="function"?queueMicrotask:typeof Hd<"u"?function(e){return Hd.resolve(null).then(e).catch(Z0)}:nu;function Z0(e){setTimeout(function(){throw e})}function va(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Sl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Sl(t)}function Gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Es=Math.random().toString(36).slice(2),an="__reactFiber$"+Es,Cl="__reactProps$"+Es,Cn="__reactContainer$"+Es,ru="__reactEvents$"+Es,ev="__reactListeners$"+Es,tv="__reactHandles$"+Es;function gr(e){var t=e[an];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cn]||n[an]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gd(e);e!==null;){if(n=e[an])return n;e=Gd(e)}return t}e=n,n=e.parentNode}return null}function Ol(e){return e=e[an]||e[Cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function xi(e){return e[Cl]||null}var su=[],es=-1;function rr(e){return{current:e}}function Ne(e){0>es||(e.current=su[es],su[es]=null,es--)}function xe(e,t){es++,su[es]=e.current,e.current=t}var er={},st=rr(er),xt=rr(!1),Nr=er;function gs(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function wt(e){return e=e.childContextTypes,e!=null}function Qo(){Ne(xt),Ne(st)}function Kd(e,t,n){if(st.current!==er)throw Error(I(168));xe(st,t),xe(xt,n)}function rm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(I(108,Ug(e)||"Unknown",s));return Ee({},n,r)}function Yo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,Nr=st.current,xe(st,e),xe(xt,xt.current),!0}function Qd(e,t,n){var r=e.stateNode;if(!r)throw Error(I(169));n?(e=rm(e,t,Nr),r.__reactInternalMemoizedMergedChildContext=e,Ne(xt),Ne(st),xe(st,e)):Ne(xt),xe(xt,n)}var wn=null,wi=!1,ya=!1;function sm(e){wn===null?wn=[e]:wn.push(e)}function nv(e){wi=!0,sm(e)}function sr(){if(!ya&&wn!==null){ya=!0;var e=0,t=fe;try{var n=wn;for(fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wn=null,wi=!1}catch(s){throw wn!==null&&(wn=wn.slice(e+1)),_p($u,sr),s}finally{fe=t,ya=!1}}return null}var ts=[],ns=0,Jo=null,Xo=0,Mt=[],Ft=0,kr=null,Sn=1,Nn="";function pr(e,t){ts[ns++]=Xo,ts[ns++]=Jo,Jo=e,Xo=t}function lm(e,t,n){Mt[Ft++]=Sn,Mt[Ft++]=Nn,Mt[Ft++]=kr,kr=e;var r=Sn;e=Nn;var s=32-en(r)-1;r&=~(1<<s),n+=1;var l=32-en(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Sn=1<<32-en(t)+s|n<<s|r,Nn=l+e}else Sn=1<<l|n<<s|r,Nn=e}function Ju(e){e.return!==null&&(pr(e,1),lm(e,1,0))}function Xu(e){for(;e===Jo;)Jo=ts[--ns],ts[ns]=null,Xo=ts[--ns],ts[ns]=null;for(;e===kr;)kr=Mt[--Ft],Mt[Ft]=null,Nn=Mt[--Ft],Mt[Ft]=null,Sn=Mt[--Ft],Mt[Ft]=null}var Pt=null,Et=null,je=!1,Zt=null;function om(e,t){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pt=e,Et=Gn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pt=e,Et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=kr!==null?{id:Sn,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pt=e,Et=null,!0):!1;default:return!1}}function lu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ou(e){if(je){var t=Et;if(t){var n=t;if(!Yd(e,t)){if(lu(e))throw Error(I(418));t=Gn(n.nextSibling);var r=Pt;t&&Yd(e,t)?om(r,n):(e.flags=e.flags&-4097|2,je=!1,Pt=e)}}else{if(lu(e))throw Error(I(418));e.flags=e.flags&-4097|2,je=!1,Pt=e}}}function Jd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pt=e}function mo(e){if(e!==Pt)return!1;if(!je)return Jd(e),je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tu(e.type,e.memoizedProps)),t&&(t=Et)){if(lu(e))throw im(),Error(I(418));for(;t;)om(e,t),t=Gn(t.nextSibling)}if(Jd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Et=Gn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Et=null}}else Et=Pt?Gn(e.stateNode.nextSibling):null;return!0}function im(){for(var e=Et;e;)e=Gn(e.nextSibling)}function vs(){Et=Pt=null,je=!1}function qu(e){Zt===null?Zt=[e]:Zt.push(e)}var rv=_n.ReactCurrentBatchConfig;function Qs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var a=s.refs;o===null?delete a[l]:a[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function ho(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xd(e){var t=e._init;return t(e._payload)}function am(e){function t(m,f){if(e){var g=m.deletions;g===null?(m.deletions=[f],m.flags|=16):g.push(f)}}function n(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function s(m,f){return m=Jn(m,f),m.index=0,m.sibling=null,m}function l(m,f,g){return m.index=g,e?(g=m.alternate,g!==null?(g=g.index,g<f?(m.flags|=2,f):g):(m.flags|=2,f)):(m.flags|=1048576,f)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,f,g,C){return f===null||f.tag!==6?(f=ba(g,m.mode,C),f.return=m,f):(f=s(f,g),f.return=m,f)}function c(m,f,g,C){var A=g.type;return A===Yr?y(m,f,g.props.children,C,g.key):f!==null&&(f.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Mn&&Xd(A)===f.type)?(C=s(f,g.props),C.ref=Qs(m,f,g),C.return=m,C):(C=Ao(g.type,g.key,g.props,null,m.mode,C),C.ref=Qs(m,f,g),C.return=m,C)}function d(m,f,g,C){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Ca(g,m.mode,C),f.return=m,f):(f=s(f,g.children||[]),f.return=m,f)}function y(m,f,g,C,A){return f===null||f.tag!==7?(f=Sr(g,m.mode,C,A),f.return=m,f):(f=s(f,g),f.return=m,f)}function S(m,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ba(""+f,m.mode,g),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ro:return g=Ao(f.type,f.key,f.props,null,m.mode,g),g.ref=Qs(m,null,f),g.return=m,g;case Qr:return f=Ca(f,m.mode,g),f.return=m,f;case Mn:var C=f._init;return S(m,C(f._payload),g)}if(el(f)||Ws(f))return f=Sr(f,m.mode,g,null),f.return=m,f;ho(m,f)}return null}function x(m,f,g,C){var A=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return A!==null?null:a(m,f,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ro:return g.key===A?c(m,f,g,C):null;case Qr:return g.key===A?d(m,f,g,C):null;case Mn:return A=g._init,x(m,f,A(g._payload),C)}if(el(g)||Ws(g))return A!==null?null:y(m,f,g,C,null);ho(m,g)}return null}function j(m,f,g,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(g)||null,a(f,m,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ro:return m=m.get(C.key===null?g:C.key)||null,c(f,m,C,A);case Qr:return m=m.get(C.key===null?g:C.key)||null,d(f,m,C,A);case Mn:var O=C._init;return j(m,f,g,O(C._payload),A)}if(el(C)||Ws(C))return m=m.get(g)||null,y(f,m,C,A,null);ho(f,C)}return null}function b(m,f,g,C){for(var A=null,O=null,M=f,z=f=0,ce=null;M!==null&&z<g.length;z++){M.index>z?(ce=M,M=null):ce=M.sibling;var X=x(m,M,g[z],C);if(X===null){M===null&&(M=ce);break}e&&M&&X.alternate===null&&t(m,M),f=l(X,f,z),O===null?A=X:O.sibling=X,O=X,M=ce}if(z===g.length)return n(m,M),je&&pr(m,z),A;if(M===null){for(;z<g.length;z++)M=S(m,g[z],C),M!==null&&(f=l(M,f,z),O===null?A=M:O.sibling=M,O=M);return je&&pr(m,z),A}for(M=r(m,M);z<g.length;z++)ce=j(M,m,z,g[z],C),ce!==null&&(e&&ce.alternate!==null&&M.delete(ce.key===null?z:ce.key),f=l(ce,f,z),O===null?A=ce:O.sibling=ce,O=ce);return e&&M.forEach(function(we){return t(m,we)}),je&&pr(m,z),A}function k(m,f,g,C){var A=Ws(g);if(typeof A!="function")throw Error(I(150));if(g=A.call(g),g==null)throw Error(I(151));for(var O=A=null,M=f,z=f=0,ce=null,X=g.next();M!==null&&!X.done;z++,X=g.next()){M.index>z?(ce=M,M=null):ce=M.sibling;var we=x(m,M,X.value,C);if(we===null){M===null&&(M=ce);break}e&&M&&we.alternate===null&&t(m,M),f=l(we,f,z),O===null?A=we:O.sibling=we,O=we,M=ce}if(X.done)return n(m,M),je&&pr(m,z),A;if(M===null){for(;!X.done;z++,X=g.next())X=S(m,X.value,C),X!==null&&(f=l(X,f,z),O===null?A=X:O.sibling=X,O=X);return je&&pr(m,z),A}for(M=r(m,M);!X.done;z++,X=g.next())X=j(M,m,z,X.value,C),X!==null&&(e&&X.alternate!==null&&M.delete(X.key===null?z:X.key),f=l(X,f,z),O===null?A=X:O.sibling=X,O=X);return e&&M.forEach(function(qe){return t(m,qe)}),je&&pr(m,z),A}function J(m,f,g,C){if(typeof g=="object"&&g!==null&&g.type===Yr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ro:e:{for(var A=g.key,O=f;O!==null;){if(O.key===A){if(A=g.type,A===Yr){if(O.tag===7){n(m,O.sibling),f=s(O,g.props.children),f.return=m,m=f;break e}}else if(O.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Mn&&Xd(A)===O.type){n(m,O.sibling),f=s(O,g.props),f.ref=Qs(m,O,g),f.return=m,m=f;break e}n(m,O);break}else t(m,O);O=O.sibling}g.type===Yr?(f=Sr(g.props.children,m.mode,C,g.key),f.return=m,m=f):(C=Ao(g.type,g.key,g.props,null,m.mode,C),C.ref=Qs(m,f,g),C.return=m,m=C)}return o(m);case Qr:e:{for(O=g.key;f!==null;){if(f.key===O)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(m,f.sibling),f=s(f,g.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else t(m,f);f=f.sibling}f=Ca(g,m.mode,C),f.return=m,m=f}return o(m);case Mn:return O=g._init,J(m,f,O(g._payload),C)}if(el(g))return b(m,f,g,C);if(Ws(g))return k(m,f,g,C);ho(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(m,f.sibling),f=s(f,g),f.return=m,m=f):(n(m,f),f=ba(g,m.mode,C),f.return=m,m=f),o(m)):n(m,f)}return J}var ys=am(!0),um=am(!1),qo=rr(null),Zo=null,rs=null,Zu=null;function ec(){Zu=rs=Zo=null}function tc(e){var t=qo.current;Ne(qo),e._currentValue=t}function iu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cs(e,t){Zo=e,Zu=rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(Zu!==e)if(e={context:e,memoizedValue:t,next:null},rs===null){if(Zo===null)throw Error(I(308));rs=e,Zo.dependencies={lanes:0,firstContext:e}}else rs=rs.next=e;return t}var vr=null;function nc(e){vr===null?vr=[e]:vr.push(e)}function cm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,nc(t)):(n.next=s.next,s.next=n),t.interleaved=n,En(e,r)}function En(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fn=!1;function rc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,En(e,n)}return s=r.interleaved,s===null?(t.next=t,nc(r)):(t.next=s.next,s.next=t),r.interleaved=t,En(e,n)}function Po(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bu(e,n)}}function qd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ei(e,t,n,r){var s=e.updateQueue;Fn=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var y=e.alternate;y!==null&&(y=y.updateQueue,a=y.lastBaseUpdate,a!==o&&(a===null?y.firstBaseUpdate=d:a.next=d,y.lastBaseUpdate=c))}if(l!==null){var S=s.baseState;o=0,y=d=c=null,a=l;do{var x=a.lane,j=a.eventTime;if((r&x)===x){y!==null&&(y=y.next={eventTime:j,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=e,k=a;switch(x=t,j=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){S=b.call(j,S,x);break e}S=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,x=typeof b=="function"?b.call(j,S,x):b,x==null)break e;S=Ee({},S,x);break e;case 2:Fn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,x=s.effects,x===null?s.effects=[a]:x.push(a))}else j={eventTime:j,lane:x,tag:a.tag,payload:a.payload,callback:a.callback,next:null},y===null?(d=y=j,c=S):y=y.next=j,o|=x;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;x=a,a=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(y===null&&(c=S),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=y,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);br|=o,e.lanes=o,e.memoizedState=S}}function Zd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(I(191,s));s.call(r)}}}var Ml={},cn=rr(Ml),El=rr(Ml),Pl=rr(Ml);function yr(e){if(e===Ml)throw Error(I(174));return e}function sc(e,t){switch(xe(Pl,t),xe(El,e),xe(cn,Ml),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$a(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$a(t,e)}Ne(cn),xe(cn,t)}function xs(){Ne(cn),Ne(El),Ne(Pl)}function fm(e){yr(Pl.current);var t=yr(cn.current),n=$a(t,e.type);t!==n&&(xe(El,e),xe(cn,n))}function lc(e){El.current===e&&(Ne(cn),Ne(El))}var be=rr(0);function ti(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xa=[];function oc(){for(var e=0;e<xa.length;e++)xa[e]._workInProgressVersionPrimary=null;xa.length=0}var _o=_n.ReactCurrentDispatcher,wa=_n.ReactCurrentBatchConfig,jr=0,Ce=null,ze=null,He=null,ni=!1,dl=!1,_l=0,sv=0;function tt(){throw Error(I(321))}function ic(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nn(e[n],t[n]))return!1;return!0}function ac(e,t,n,r,s,l){if(jr=l,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_o.current=e===null||e.memoizedState===null?av:uv,e=n(r,s),dl){l=0;do{if(dl=!1,_l=0,25<=l)throw Error(I(301));l+=1,He=ze=null,t.updateQueue=null,_o.current=cv,e=n(r,s)}while(dl)}if(_o.current=ri,t=ze!==null&&ze.next!==null,jr=0,He=ze=Ce=null,ni=!1,t)throw Error(I(300));return e}function uc(){var e=_l!==0;return _l=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ce.memoizedState=He=e:He=He.next=e,He}function Bt(){if(ze===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=He===null?Ce.memoizedState:He.next;if(t!==null)He=t,ze=e;else{if(e===null)throw Error(I(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?Ce.memoizedState=He=e:He=He.next=e}return He}function Tl(e,t){return typeof t=="function"?t(e):t}function Sa(e){var t=Bt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=ze,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=o=null,c=null,d=l;do{var y=d.lane;if((jr&y)===y)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var S={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=S,o=r):c=c.next=S,Ce.lanes|=y,br|=y}d=d.next}while(d!==null&&d!==l);c===null?o=r:c.next=a,nn(r,t.memoizedState)||(yt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ce.lanes|=l,br|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Na(e){var t=Bt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);nn(l,t.memoizedState)||(yt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function pm(){}function mm(e,t){var n=Ce,r=Bt(),s=t(),l=!nn(r.memoizedState,s);if(l&&(r.memoizedState=s,yt=!0),r=r.queue,cc(vm.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,Il(9,gm.bind(null,n,r,s,t),void 0,null),Ge===null)throw Error(I(349));jr&30||hm(n,t,s)}return s}function hm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gm(e,t,n,r){t.value=n,t.getSnapshot=r,ym(t)&&xm(e)}function vm(e,t,n){return n(function(){ym(t)&&xm(e)})}function ym(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nn(e,n)}catch{return!0}}function xm(e){var t=En(e,1);t!==null&&tn(t,e,1,-1)}function ef(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:e},t.queue=e,e=e.dispatch=iv.bind(null,Ce,e),[t.memoizedState,e]}function Il(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function wm(){return Bt().memoizedState}function To(e,t,n,r){var s=ln();Ce.flags|=e,s.memoizedState=Il(1|t,n,void 0,r===void 0?null:r)}function Si(e,t,n,r){var s=Bt();r=r===void 0?null:r;var l=void 0;if(ze!==null){var o=ze.memoizedState;if(l=o.destroy,r!==null&&ic(r,o.deps)){s.memoizedState=Il(t,n,l,r);return}}Ce.flags|=e,s.memoizedState=Il(1|t,n,l,r)}function tf(e,t){return To(8390656,8,e,t)}function cc(e,t){return Si(2048,8,e,t)}function Sm(e,t){return Si(4,2,e,t)}function Nm(e,t){return Si(4,4,e,t)}function km(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jm(e,t,n){return n=n!=null?n.concat([e]):null,Si(4,4,km.bind(null,t,e),n)}function dc(){}function bm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ic(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ic(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Em(e,t,n){return jr&21?(nn(n,t)||(n=Rp(),Ce.lanes|=n,br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=n)}function lv(e,t){var n=fe;fe=n!==0&&4>n?n:4,e(!0);var r=wa.transition;wa.transition={};try{e(!1),t()}finally{fe=n,wa.transition=r}}function Pm(){return Bt().memoizedState}function ov(e,t,n){var r=Yn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_m(e))Tm(t,n);else if(n=cm(e,t,n,r),n!==null){var s=ct();tn(n,e,r,s),Im(n,t,r)}}function iv(e,t,n){var r=Yn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_m(e))Tm(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,a=l(o,n);if(s.hasEagerState=!0,s.eagerState=a,nn(a,o)){var c=t.interleaved;c===null?(s.next=s,nc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=cm(e,t,s,r),n!==null&&(s=ct(),tn(n,e,r,s),Im(n,t,r))}}function _m(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function Tm(e,t){dl=ni=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Im(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bu(e,n)}}var ri={readContext:$t,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},av={readContext:$t,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:tf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,To(4194308,4,km.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ln();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ov.bind(null,Ce,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:ef,useDebugValue:dc,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=ef(!1),t=e[0];return e=lv.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ce,s=ln();if(je){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),Ge===null)throw Error(I(349));jr&30||hm(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,tf(vm.bind(null,r,l,e),[e]),r.flags|=2048,Il(9,gm.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=ln(),t=Ge.identifierPrefix;if(je){var n=Nn,r=Sn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=_l++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uv={readContext:$t,useCallback:bm,useContext:$t,useEffect:cc,useImperativeHandle:jm,useInsertionEffect:Sm,useLayoutEffect:Nm,useMemo:Cm,useReducer:Sa,useRef:wm,useState:function(){return Sa(Tl)},useDebugValue:dc,useDeferredValue:function(e){var t=Bt();return Em(t,ze.memoizedState,e)},useTransition:function(){var e=Sa(Tl)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:pm,useSyncExternalStore:mm,useId:Pm,unstable_isNewReconciler:!1},cv={readContext:$t,useCallback:bm,useContext:$t,useEffect:cc,useImperativeHandle:jm,useInsertionEffect:Sm,useLayoutEffect:Nm,useMemo:Cm,useReducer:Na,useRef:wm,useState:function(){return Na(Tl)},useDebugValue:dc,useDeferredValue:function(e){var t=Bt();return ze===null?t.memoizedState=e:Em(t,ze.memoizedState,e)},useTransition:function(){var e=Na(Tl)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:pm,useSyncExternalStore:mm,useId:Pm,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function au(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ni={isMounted:function(e){return(e=e._reactInternals)?Tr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ct(),s=Yn(e),l=kn(r,s);l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,s),t!==null&&(tn(t,e,s,r),Po(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ct(),s=Yn(e),l=kn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,s),t!==null&&(tn(t,e,s,r),Po(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ct(),r=Yn(e),s=kn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Kn(e,s,r),t!==null&&(tn(t,e,r,n),Po(t,e,r))}};function nf(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!kl(n,r)||!kl(s,l):!0}function Rm(e,t,n){var r=!1,s=er,l=t.contextType;return typeof l=="object"&&l!==null?l=$t(l):(s=wt(t)?Nr:st.current,r=t.contextTypes,l=(r=r!=null)?gs(e,s):er),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ni,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function rf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ni.enqueueReplaceState(t,t.state,null)}function uu(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},rc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=$t(l):(l=wt(t)?Nr:st.current,s.context=gs(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(au(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ni.enqueueReplaceState(s,s.state,null),ei(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ws(e,t){try{var n="",r=t;do n+=Fg(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function ka(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dv=typeof WeakMap=="function"?WeakMap:Map;function Dm(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){li||(li=!0,wu=r),cu(e,t)},n}function Am(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){cu(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){cu(e,t),typeof r!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function sf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new dv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=bv.bind(null,e,t,n),t.then(e,e))}function lf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function of(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,Kn(n,t,1))),n.lanes|=1),e)}var fv=_n.ReactCurrentOwner,yt=!1;function ut(e,t,n,r){t.child=e===null?um(t,null,n,r):ys(t,e.child,n,r)}function af(e,t,n,r,s){n=n.render;var l=t.ref;return cs(t,s),r=ac(e,t,n,r,l,s),n=uc(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pn(e,t,s)):(je&&n&&Ju(t),t.flags|=1,ut(e,t,r,s),t.child)}function uf(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!xc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Lm(e,t,l,r,s)):(e=Ao(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:kl,n(o,r)&&e.ref===t.ref)return Pn(e,t,s)}return t.flags|=1,e=Jn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Lm(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(kl(l,r)&&e.ref===t.ref)if(yt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,Pn(e,t,s)}return du(e,t,n,r,s)}function Om(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(ls,Ct),Ct|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xe(ls,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,xe(ls,Ct),Ct|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,xe(ls,Ct),Ct|=r;return ut(e,t,s,n),t.child}function Mm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function du(e,t,n,r,s){var l=wt(n)?Nr:st.current;return l=gs(t,l),cs(t,s),n=ac(e,t,n,r,l,s),r=uc(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pn(e,t,s)):(je&&r&&Ju(t),t.flags|=1,ut(e,t,n,s),t.child)}function cf(e,t,n,r,s){if(wt(n)){var l=!0;Yo(t)}else l=!1;if(cs(t,s),t.stateNode===null)Io(e,t),Rm(t,n,r),uu(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=$t(d):(d=wt(n)?Nr:st.current,d=gs(t,d));var y=n.getDerivedStateFromProps,S=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function";S||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&rf(t,o,r,d),Fn=!1;var x=t.memoizedState;o.state=x,ei(t,r,o,s),c=t.memoizedState,a!==r||x!==c||xt.current||Fn?(typeof y=="function"&&(au(t,n,y,r),c=t.memoizedState),(a=Fn||nf(t,n,a,r,x,c,d))?(S||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,dm(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Xt(t.type,a),o.props=d,S=t.pendingProps,x=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=$t(c):(c=wt(n)?Nr:st.current,c=gs(t,c));var j=n.getDerivedStateFromProps;(y=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==S||x!==c)&&rf(t,o,r,c),Fn=!1,x=t.memoizedState,o.state=x,ei(t,r,o,s);var b=t.memoizedState;a!==S||x!==b||xt.current||Fn?(typeof j=="function"&&(au(t,n,j,r),b=t.memoizedState),(d=Fn||nf(t,n,d,r,x,b,c)||!1)?(y||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return fu(e,t,n,r,l,s)}function fu(e,t,n,r,s,l){Mm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Qd(t,n,!1),Pn(e,t,l);r=t.stateNode,fv.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ys(t,e.child,null,l),t.child=ys(t,null,a,l)):ut(e,t,a,l),t.memoizedState=r.state,s&&Qd(t,n,!0),t.child}function Fm(e){var t=e.stateNode;t.pendingContext?Kd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kd(e,t.context,!1),sc(e,t.containerInfo)}function df(e,t,n,r,s){return vs(),qu(s),t.flags|=256,ut(e,t,n,r),t.child}var pu={dehydrated:null,treeContext:null,retryLane:0};function mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Um(e,t,n){var r=t.pendingProps,s=be.current,l=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),xe(be,s&1),e===null)return ou(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=bi(o,r,0,null),e=Sr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=mu(n),t.memoizedState=pu,e):fc(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return pv(e,t,o,r,a,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Jn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=Jn(a,l):(l=Sr(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?mu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=pu,r}return l=e.child,e=l.sibling,r=Jn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function fc(e,t){return t=bi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function go(e,t,n,r){return r!==null&&qu(r),ys(t,e.child,null,n),e=fc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pv(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=ka(Error(I(422))),go(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=bi({mode:"visible",children:r.children},s,0,null),l=Sr(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&ys(t,e.child,null,o),t.child.memoizedState=mu(o),t.memoizedState=pu,l);if(!(t.mode&1))return go(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(I(419)),r=ka(l,r,void 0),go(e,t,o,r)}if(a=(o&e.childLanes)!==0,yt||a){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,En(e,s),tn(r,e,s,-1))}return yc(),r=ka(Error(I(421))),go(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Cv.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,Et=Gn(s.nextSibling),Pt=t,je=!0,Zt=null,e!==null&&(Mt[Ft++]=Sn,Mt[Ft++]=Nn,Mt[Ft++]=kr,Sn=e.id,Nn=e.overflow,kr=t),t=fc(t,r.children),t.flags|=4096,t)}function ff(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),iu(e.return,t,n)}function ja(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function zm(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(ut(e,t,r.children,n),r=be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ff(e,n,t);else if(e.tag===19)ff(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xe(be,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ti(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ja(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ti(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ja(t,!0,n,null,l);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Io(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=Jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mv(e,t,n){switch(t.tag){case 3:Fm(t),vs();break;case 5:fm(t);break;case 1:wt(t.type)&&Yo(t);break;case 4:sc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;xe(qo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xe(be,be.current&1),t.flags|=128,null):n&t.child.childLanes?Um(e,t,n):(xe(be,be.current&1),e=Pn(e,t,n),e!==null?e.sibling:null);xe(be,be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return zm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(be,be.current),r)break;return null;case 22:case 23:return t.lanes=0,Om(e,t,n)}return Pn(e,t,n)}var $m,hu,Bm,Wm;$m=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hu=function(){};Bm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,yr(cn.current);var l=null;switch(n){case"input":s=Ma(e,s),r=Ma(e,r),l=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),l=[];break;case"textarea":s=za(e,s),r=za(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ko)}Ba(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(gl.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(gl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Se("scroll",e),l||a===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Wm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ys(e,t){if(!je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hv(e,t,n){var r=t.pendingProps;switch(Xu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return wt(t.type)&&Qo(),nt(t),null;case 3:return r=t.stateNode,xs(),Ne(xt),Ne(st),oc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(mo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zt!==null&&(ku(Zt),Zt=null))),hu(e,t),nt(t),null;case 5:lc(t);var s=yr(Pl.current);if(n=t.type,e!==null&&t.stateNode!=null)Bm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(I(166));return nt(t),null}if(e=yr(cn.current),mo(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[an]=t,r[Cl]=l,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<nl.length;s++)Se(nl[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":wd(r,l),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Se("invalid",r);break;case"textarea":Nd(r,l),Se("invalid",r)}Ba(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&po(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&po(r.textContent,a,e),s=["children",""+a]):gl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":so(r),Sd(r,l,!0);break;case"textarea":so(r),kd(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Ko)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[an]=t,e[Cl]=r,$m(e,t,!1,!1),t.stateNode=e;e:{switch(o=Wa(n,r),n){case"dialog":Se("cancel",e),Se("close",e),s=r;break;case"iframe":case"object":case"embed":Se("load",e),s=r;break;case"video":case"audio":for(s=0;s<nl.length;s++)Se(nl[s],e);s=r;break;case"source":Se("error",e),s=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),s=r;break;case"details":Se("toggle",e),s=r;break;case"input":wd(e,r),s=Ma(e,r),Se("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),Se("invalid",e);break;case"textarea":Nd(e,r),s=za(e,r),Se("invalid",e);break;default:s=r}Ba(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="style"?wp(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&yp(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vl(e,c):typeof c=="number"&&vl(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(gl.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Se("scroll",e):c!=null&&Ou(e,l,c,o))}switch(n){case"input":so(e),Sd(e,r,!1);break;case"textarea":so(e),kd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?os(e,!!r.multiple,l,!1):r.defaultValue!=null&&os(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ko)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)Wm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(I(166));if(n=yr(Pl.current),yr(cn.current),mo(t)){if(r=t.stateNode,n=t.memoizedProps,r[an]=t,(l=r.nodeValue!==n)&&(e=Pt,e!==null))switch(e.tag){case 3:po(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&po(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=t,t.stateNode=r}return nt(t),null;case 13:if(Ne(be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(je&&Et!==null&&t.mode&1&&!(t.flags&128))im(),vs(),t.flags|=98560,l=!1;else if(l=mo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(I(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(I(317));l[an]=t}else vs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),l=!1}else Zt!==null&&(ku(Zt),Zt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?$e===0&&($e=3):yc())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return xs(),hu(e,t),e===null&&jl(t.stateNode.containerInfo),nt(t),null;case 10:return tc(t.type._context),nt(t),null;case 17:return wt(t.type)&&Qo(),nt(t),null;case 19:if(Ne(be),l=t.memoizedState,l===null)return nt(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Ys(l,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ti(e),o!==null){for(t.flags|=128,Ys(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xe(be,be.current&1|2),t.child}e=e.sibling}l.tail!==null&&De()>Ss&&(t.flags|=128,r=!0,Ys(l,!1),t.lanes=4194304)}else{if(!r)if(e=ti(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ys(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!je)return nt(t),null}else 2*De()-l.renderingStartTime>Ss&&n!==1073741824&&(t.flags|=128,r=!0,Ys(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=De(),t.sibling=null,n=be.current,xe(be,r?n&1|2:n&1),t):(nt(t),null);case 22:case 23:return vc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ct&1073741824&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function gv(e,t){switch(Xu(t),t.tag){case 1:return wt(t.type)&&Qo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xs(),Ne(xt),Ne(st),oc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lc(t),null;case 13:if(Ne(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(be),null;case 4:return xs(),null;case 10:return tc(t.type._context),null;case 22:case 23:return vc(),null;case 24:return null;default:return null}}var vo=!1,rt=!1,vv=typeof WeakSet=="function"?WeakSet:Set,$=null;function ss(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(e,t,r)}else n.current=null}function gu(e,t,n){try{n()}catch(r){Ie(e,t,r)}}var pf=!1;function yv(e,t){if(Za=Vo,e=Qp(),Yu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,y=0,S=e,x=null;t:for(;;){for(var j;S!==n||s!==0&&S.nodeType!==3||(a=o+s),S!==l||r!==0&&S.nodeType!==3||(c=o+r),S.nodeType===3&&(o+=S.nodeValue.length),(j=S.firstChild)!==null;)x=S,S=j;for(;;){if(S===e)break t;if(x===n&&++d===s&&(a=o),x===l&&++y===r&&(c=o),(j=S.nextSibling)!==null)break;S=x,x=S.parentNode}S=j}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(eu={focusedElem:e,selectionRange:n},Vo=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,J=b.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?k:Xt(t.type,k),J);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(C){Ie(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return b=pf,pf=!1,b}function fl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&gu(t,n,l)}s=s.next}while(s!==r)}}function ki(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function vu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Vm(e){var t=e.alternate;t!==null&&(e.alternate=null,Vm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[Cl],delete t[ru],delete t[ev],delete t[tv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hm(e){return e.tag===5||e.tag===3||e.tag===4}function mf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ko));else if(r!==4&&(e=e.child,e!==null))for(yu(e,t,n),e=e.sibling;e!==null;)yu(e,t,n),e=e.sibling}function xu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xu(e,t,n),e=e.sibling;e!==null;)xu(e,t,n),e=e.sibling}var Ye=null,qt=!1;function On(e,t,n){for(n=n.child;n!==null;)Gm(e,t,n),n=n.sibling}function Gm(e,t,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(hi,n)}catch{}switch(n.tag){case 5:rt||ss(n,t);case 6:var r=Ye,s=qt;Ye=null,On(e,t,n),Ye=r,qt=s,Ye!==null&&(qt?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(qt?(e=Ye,n=n.stateNode,e.nodeType===8?va(e.parentNode,n):e.nodeType===1&&va(e,n),Sl(e)):va(Ye,n.stateNode));break;case 4:r=Ye,s=qt,Ye=n.stateNode.containerInfo,qt=!0,On(e,t,n),Ye=r,qt=s;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&gu(n,t,o),s=s.next}while(s!==r)}On(e,t,n);break;case 1:if(!rt&&(ss(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ie(n,t,a)}On(e,t,n);break;case 21:On(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,On(e,t,n),rt=r):On(e,t,n);break;default:On(e,t,n)}}function hf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vv),t.forEach(function(r){var s=Ev.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ye=a.stateNode,qt=!1;break e;case 3:Ye=a.stateNode.containerInfo,qt=!0;break e;case 4:Ye=a.stateNode.containerInfo,qt=!0;break e}a=a.return}if(Ye===null)throw Error(I(160));Gm(l,o,s),Ye=null,qt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ie(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Km(t,e),t=t.sibling}function Km(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),sn(e),r&4){try{fl(3,e,e.return),ki(3,e)}catch(k){Ie(e,e.return,k)}try{fl(5,e,e.return)}catch(k){Ie(e,e.return,k)}}break;case 1:Jt(t,e),sn(e),r&512&&n!==null&&ss(n,n.return);break;case 5:if(Jt(t,e),sn(e),r&512&&n!==null&&ss(n,n.return),e.flags&32){var s=e.stateNode;try{vl(s,"")}catch(k){Ie(e,e.return,k)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&hp(s,l),Wa(a,o);var d=Wa(a,l);for(o=0;o<c.length;o+=2){var y=c[o],S=c[o+1];y==="style"?wp(s,S):y==="dangerouslySetInnerHTML"?yp(s,S):y==="children"?vl(s,S):Ou(s,y,S,d)}switch(a){case"input":Fa(s,l);break;case"textarea":gp(s,l);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var j=l.value;j!=null?os(s,!!l.multiple,j,!1):x!==!!l.multiple&&(l.defaultValue!=null?os(s,!!l.multiple,l.defaultValue,!0):os(s,!!l.multiple,l.multiple?[]:"",!1))}s[Cl]=l}catch(k){Ie(e,e.return,k)}}break;case 6:if(Jt(t,e),sn(e),r&4){if(e.stateNode===null)throw Error(I(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(k){Ie(e,e.return,k)}}break;case 3:if(Jt(t,e),sn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sl(t.containerInfo)}catch(k){Ie(e,e.return,k)}break;case 4:Jt(t,e),sn(e);break;case 13:Jt(t,e),sn(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(hc=De())),r&4&&hf(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(d=rt)||y,Jt(t,e),rt=d):Jt(t,e),sn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!y&&e.mode&1)for($=e,y=e.child;y!==null;){for(S=$=y;$!==null;){switch(x=$,j=x.child,x.tag){case 0:case 11:case 14:case 15:fl(4,x,x.return);break;case 1:ss(x,x.return);var b=x.stateNode;if(typeof b.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(k){Ie(r,n,k)}}break;case 5:ss(x,x.return);break;case 22:if(x.memoizedState!==null){vf(S);continue}}j!==null?(j.return=x,$=j):vf(S)}y=y.sibling}e:for(y=null,S=e;;){if(S.tag===5){if(y===null){y=S;try{s=S.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=S.stateNode,c=S.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=xp("display",o))}catch(k){Ie(e,e.return,k)}}}else if(S.tag===6){if(y===null)try{S.stateNode.nodeValue=d?"":S.memoizedProps}catch(k){Ie(e,e.return,k)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;y===S&&(y=null),S=S.return}y===S&&(y=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:Jt(t,e),sn(e),r&4&&hf(e);break;case 21:break;default:Jt(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hm(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vl(s,""),r.flags&=-33);var l=mf(e);xu(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=mf(e);yu(e,a,o);break;default:throw Error(I(161))}}catch(c){Ie(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xv(e,t,n){$=e,Qm(e)}function Qm(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var s=$,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||vo;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||rt;a=vo;var d=rt;if(vo=o,(rt=c)&&!d)for($=s;$!==null;)o=$,c=o.child,o.tag===22&&o.memoizedState!==null?yf(s):c!==null?(c.return=o,$=c):yf(s);for(;l!==null;)$=l,Qm(l),l=l.sibling;$=s,vo=a,rt=d}gf(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,$=l):gf(e)}}function gf(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||ki(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Zd(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zd(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var S=y.dehydrated;S!==null&&Sl(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}rt||t.flags&512&&vu(t)}catch(x){Ie(t,t.return,x)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function vf(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function yf(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ki(4,t)}catch(c){Ie(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ie(t,s,c)}}var l=t.return;try{vu(t)}catch(c){Ie(t,l,c)}break;case 5:var o=t.return;try{vu(t)}catch(c){Ie(t,o,c)}}}catch(c){Ie(t,t.return,c)}if(t===e){$=null;break}var a=t.sibling;if(a!==null){a.return=t.return,$=a;break}$=t.return}}var wv=Math.ceil,si=_n.ReactCurrentDispatcher,pc=_n.ReactCurrentOwner,zt=_n.ReactCurrentBatchConfig,ae=0,Ge=null,Fe=null,Je=0,Ct=0,ls=rr(0),$e=0,Rl=null,br=0,ji=0,mc=0,pl=null,vt=null,hc=0,Ss=1/0,xn=null,li=!1,wu=null,Qn=null,yo=!1,Bn=null,oi=0,ml=0,Su=null,Ro=-1,Do=0;function ct(){return ae&6?De():Ro!==-1?Ro:Ro=De()}function Yn(e){return e.mode&1?ae&2&&Je!==0?Je&-Je:rv.transition!==null?(Do===0&&(Do=Rp()),Do):(e=fe,e!==0||(e=window.event,e=e===void 0?16:Up(e.type)),e):1}function tn(e,t,n,r){if(50<ml)throw ml=0,Su=null,Error(I(185));Al(e,n,r),(!(ae&2)||e!==Ge)&&(e===Ge&&(!(ae&2)&&(ji|=n),$e===4&&zn(e,Je)),St(e,r),n===1&&ae===0&&!(t.mode&1)&&(Ss=De()+500,wi&&sr()))}function St(e,t){var n=e.callbackNode;r0(e,t);var r=Wo(e,e===Ge?Je:0);if(r===0)n!==null&&Cd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Cd(n),t===1)e.tag===0?nv(xf.bind(null,e)):sm(xf.bind(null,e)),q0(function(){!(ae&6)&&sr()}),n=null;else{switch(Dp(r)){case 1:n=$u;break;case 4:n=Tp;break;case 16:n=Bo;break;case 536870912:n=Ip;break;default:n=Bo}n=nh(n,Ym.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ym(e,t){if(Ro=-1,Do=0,ae&6)throw Error(I(327));var n=e.callbackNode;if(ds()&&e.callbackNode!==n)return null;var r=Wo(e,e===Ge?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ii(e,r);else{t=r;var s=ae;ae|=2;var l=Xm();(Ge!==e||Je!==t)&&(xn=null,Ss=De()+500,wr(e,t));do try{kv();break}catch(a){Jm(e,a)}while(!0);ec(),si.current=l,ae=s,Fe!==null?t=0:(Ge=null,Je=0,t=$e)}if(t!==0){if(t===2&&(s=Qa(e),s!==0&&(r=s,t=Nu(e,s))),t===1)throw n=Rl,wr(e,0),zn(e,r),St(e,De()),n;if(t===6)zn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Sv(s)&&(t=ii(e,r),t===2&&(l=Qa(e),l!==0&&(r=l,t=Nu(e,l))),t===1))throw n=Rl,wr(e,0),zn(e,r),St(e,De()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(I(345));case 2:mr(e,vt,xn);break;case 3:if(zn(e,r),(r&130023424)===r&&(t=hc+500-De(),10<t)){if(Wo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ct(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=nu(mr.bind(null,e,vt,xn),t);break}mr(e,vt,xn);break;case 4:if(zn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-en(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wv(r/1960))-r,10<r){e.timeoutHandle=nu(mr.bind(null,e,vt,xn),r);break}mr(e,vt,xn);break;case 5:mr(e,vt,xn);break;default:throw Error(I(329))}}}return St(e,De()),e.callbackNode===n?Ym.bind(null,e):null}function Nu(e,t){var n=pl;return e.current.memoizedState.isDehydrated&&(wr(e,t).flags|=256),e=ii(e,t),e!==2&&(t=vt,vt=n,t!==null&&ku(t)),e}function ku(e){vt===null?vt=e:vt.push.apply(vt,e)}function Sv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!nn(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zn(e,t){for(t&=~mc,t&=~ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),r=1<<n;e[n]=-1,t&=~r}}function xf(e){if(ae&6)throw Error(I(327));ds();var t=Wo(e,0);if(!(t&1))return St(e,De()),null;var n=ii(e,t);if(e.tag!==0&&n===2){var r=Qa(e);r!==0&&(t=r,n=Nu(e,r))}if(n===1)throw n=Rl,wr(e,0),zn(e,t),St(e,De()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mr(e,vt,xn),St(e,De()),null}function gc(e,t){var n=ae;ae|=1;try{return e(t)}finally{ae=n,ae===0&&(Ss=De()+500,wi&&sr())}}function Cr(e){Bn!==null&&Bn.tag===0&&!(ae&6)&&ds();var t=ae;ae|=1;var n=zt.transition,r=fe;try{if(zt.transition=null,fe=1,e)return e()}finally{fe=r,zt.transition=n,ae=t,!(ae&6)&&sr()}}function vc(){Ct=ls.current,Ne(ls)}function wr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,X0(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Xu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qo();break;case 3:xs(),Ne(xt),Ne(st),oc();break;case 5:lc(r);break;case 4:xs();break;case 13:Ne(be);break;case 19:Ne(be);break;case 10:tc(r.type._context);break;case 22:case 23:vc()}n=n.return}if(Ge=e,Fe=e=Jn(e.current,null),Je=Ct=t,$e=0,Rl=null,mc=ji=br=0,vt=pl=null,vr!==null){for(t=0;t<vr.length;t++)if(n=vr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}vr=null}return e}function Jm(e,t){do{var n=Fe;try{if(ec(),_o.current=ri,ni){for(var r=Ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ni=!1}if(jr=0,He=ze=Ce=null,dl=!1,_l=0,pc.current=null,n===null||n.return===null){$e=1,Rl=t,Fe=null;break}e:{var l=e,o=n.return,a=n,c=t;if(t=Je,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,y=a,S=y.tag;if(!(y.mode&1)&&(S===0||S===11||S===15)){var x=y.alternate;x?(y.updateQueue=x.updateQueue,y.memoizedState=x.memoizedState,y.lanes=x.lanes):(y.updateQueue=null,y.memoizedState=null)}var j=lf(o);if(j!==null){j.flags&=-257,of(j,o,a,l,t),j.mode&1&&sf(l,d,t),t=j,c=d;var b=t.updateQueue;if(b===null){var k=new Set;k.add(c),t.updateQueue=k}else b.add(c);break e}else{if(!(t&1)){sf(l,d,t),yc();break e}c=Error(I(426))}}else if(je&&a.mode&1){var J=lf(o);if(J!==null){!(J.flags&65536)&&(J.flags|=256),of(J,o,a,l,t),qu(ws(c,a));break e}}l=c=ws(c,a),$e!==4&&($e=2),pl===null?pl=[l]:pl.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var m=Dm(l,c,t);qd(l,m);break e;case 1:a=c;var f=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Qn===null||!Qn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var C=Am(l,a,t);qd(l,C);break e}}l=l.return}while(l!==null)}Zm(n)}catch(A){t=A,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Xm(){var e=si.current;return si.current=ri,e===null?ri:e}function yc(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(br&268435455)&&!(ji&268435455)||zn(Ge,Je)}function ii(e,t){var n=ae;ae|=2;var r=Xm();(Ge!==e||Je!==t)&&(xn=null,wr(e,t));do try{Nv();break}catch(s){Jm(e,s)}while(!0);if(ec(),ae=n,si.current=r,Fe!==null)throw Error(I(261));return Ge=null,Je=0,$e}function Nv(){for(;Fe!==null;)qm(Fe)}function kv(){for(;Fe!==null&&!Qg();)qm(Fe)}function qm(e){var t=th(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?Zm(e):Fe=t,pc.current=null}function Zm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gv(n,t),n!==null){n.flags&=32767,Fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Fe=null;return}}else if(n=hv(n,t,Ct),n!==null){Fe=n;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);$e===0&&($e=5)}function mr(e,t,n){var r=fe,s=zt.transition;try{zt.transition=null,fe=1,jv(e,t,n,r)}finally{zt.transition=s,fe=r}return null}function jv(e,t,n,r){do ds();while(Bn!==null);if(ae&6)throw Error(I(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(s0(e,l),e===Ge&&(Fe=Ge=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yo||(yo=!0,nh(Bo,function(){return ds(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=zt.transition,zt.transition=null;var o=fe;fe=1;var a=ae;ae|=4,pc.current=null,yv(e,n),Km(n,e),V0(eu),Vo=!!Za,eu=Za=null,e.current=n,xv(n),Yg(),ae=a,fe=o,zt.transition=l}else e.current=n;if(yo&&(yo=!1,Bn=e,oi=s),l=e.pendingLanes,l===0&&(Qn=null),qg(n.stateNode),St(e,De()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(li)throw li=!1,e=wu,wu=null,e;return oi&1&&e.tag!==0&&ds(),l=e.pendingLanes,l&1?e===Su?ml++:(ml=0,Su=e):ml=0,sr(),null}function ds(){if(Bn!==null){var e=Dp(oi),t=zt.transition,n=fe;try{if(zt.transition=null,fe=16>e?16:e,Bn===null)var r=!1;else{if(e=Bn,Bn=null,oi=0,ae&6)throw Error(I(331));var s=ae;for(ae|=4,$=e.current;$!==null;){var l=$,o=l.child;if($.flags&16){var a=l.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for($=d;$!==null;){var y=$;switch(y.tag){case 0:case 11:case 15:fl(8,y,l)}var S=y.child;if(S!==null)S.return=y,$=S;else for(;$!==null;){y=$;var x=y.sibling,j=y.return;if(Vm(y),y===d){$=null;break}if(x!==null){x.return=j,$=x;break}$=j}}}var b=l.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var J=k.sibling;k.sibling=null,k=J}while(k!==null)}}$=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,$=o;else e:for(;$!==null;){if(l=$,l.flags&2048)switch(l.tag){case 0:case 11:case 15:fl(9,l,l.return)}var m=l.sibling;if(m!==null){m.return=l.return,$=m;break e}$=l.return}}var f=e.current;for($=f;$!==null;){o=$;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,$=g;else e:for(o=f;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ki(9,a)}}catch(A){Ie(a,a.return,A)}if(a===o){$=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,$=C;break e}$=a.return}}if(ae=s,sr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(hi,e)}catch{}r=!0}return r}finally{fe=n,zt.transition=t}}return!1}function wf(e,t,n){t=ws(n,t),t=Dm(e,t,1),e=Kn(e,t,1),t=ct(),e!==null&&(Al(e,1,t),St(e,t))}function Ie(e,t,n){if(e.tag===3)wf(e,e,n);else for(;t!==null;){if(t.tag===3){wf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qn===null||!Qn.has(r))){e=ws(n,e),e=Am(t,e,1),t=Kn(t,e,1),e=ct(),t!==null&&(Al(t,1,e),St(t,e));break}}t=t.return}}function bv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ct(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(Je&n)===n&&($e===4||$e===3&&(Je&130023424)===Je&&500>De()-hc?wr(e,0):mc|=n),St(e,t)}function eh(e,t){t===0&&(e.mode&1?(t=io,io<<=1,!(io&130023424)&&(io=4194304)):t=1);var n=ct();e=En(e,t),e!==null&&(Al(e,t,n),St(e,n))}function Cv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eh(e,n)}function Ev(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(t),eh(e,n)}var th;th=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xt.current)yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yt=!1,mv(e,t,n);yt=!!(e.flags&131072)}else yt=!1,je&&t.flags&1048576&&lm(t,Xo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Io(e,t),e=t.pendingProps;var s=gs(t,st.current);cs(t,n),s=ac(null,t,r,e,s,n);var l=uc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wt(r)?(l=!0,Yo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rc(t),s.updater=Ni,t.stateNode=s,s._reactInternals=t,uu(t,r,e,n),t=fu(null,t,r,!0,l,n)):(t.tag=0,je&&l&&Ju(t),ut(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Io(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=_v(r),e=Xt(r,e),s){case 0:t=du(null,t,r,e,n);break e;case 1:t=cf(null,t,r,e,n);break e;case 11:t=af(null,t,r,e,n);break e;case 14:t=uf(null,t,r,Xt(r.type,e),n);break e}throw Error(I(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xt(r,s),du(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xt(r,s),cf(e,t,r,s,n);case 3:e:{if(Fm(t),e===null)throw Error(I(387));r=t.pendingProps,l=t.memoizedState,s=l.element,dm(e,t),ei(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=ws(Error(I(423)),t),t=df(e,t,r,n,s);break e}else if(r!==s){s=ws(Error(I(424)),t),t=df(e,t,r,n,s);break e}else for(Et=Gn(t.stateNode.containerInfo.firstChild),Pt=t,je=!0,Zt=null,n=um(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vs(),r===s){t=Pn(e,t,n);break e}ut(e,t,r,n)}t=t.child}return t;case 5:return fm(t),e===null&&ou(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,tu(r,s)?o=null:l!==null&&tu(r,l)&&(t.flags|=32),Mm(e,t),ut(e,t,o,n),t.child;case 6:return e===null&&ou(t),null;case 13:return Um(e,t,n);case 4:return sc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ys(t,null,r,n):ut(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xt(r,s),af(e,t,r,s,n);case 7:return ut(e,t,t.pendingProps,n),t.child;case 8:return ut(e,t,t.pendingProps.children,n),t.child;case 12:return ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,xe(qo,r._currentValue),r._currentValue=o,l!==null)if(nn(l.value,o)){if(l.children===s.children&&!xt.current){t=Pn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){o=l.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=kn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?c.next=c:(c.next=y.next,y.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),iu(l.return,n,t),a.lanes|=n;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(I(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iu(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ut(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,cs(t,n),s=$t(s),r=r(s),t.flags|=1,ut(e,t,r,n),t.child;case 14:return r=t.type,s=Xt(r,t.pendingProps),s=Xt(r.type,s),uf(e,t,r,s,n);case 15:return Lm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xt(r,s),Io(e,t),t.tag=1,wt(r)?(e=!0,Yo(t)):e=!1,cs(t,n),Rm(t,r,s),uu(t,r,s,n),fu(null,t,r,!0,e,n);case 19:return zm(e,t,n);case 22:return Om(e,t,n)}throw Error(I(156,t.tag))};function nh(e,t){return _p(e,t)}function Pv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,n,r){return new Pv(e,t,n,r)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _v(e){if(typeof e=="function")return xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fu)return 11;if(e===Uu)return 14}return 2}function Jn(e,t){var n=e.alternate;return n===null?(n=Ut(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ao(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")xc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yr:return Sr(n.children,s,l,t);case Mu:o=8,s|=8;break;case Da:return e=Ut(12,n,t,s|2),e.elementType=Da,e.lanes=l,e;case Aa:return e=Ut(13,n,t,s),e.elementType=Aa,e.lanes=l,e;case La:return e=Ut(19,n,t,s),e.elementType=La,e.lanes=l,e;case fp:return bi(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cp:o=10;break e;case dp:o=9;break e;case Fu:o=11;break e;case Uu:o=14;break e;case Mn:o=16,r=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=Ut(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Sr(e,t,n,r){return e=Ut(7,e,r,t),e.lanes=n,e}function bi(e,t,n,r){return e=Ut(22,e,r,t),e.elementType=fp,e.lanes=n,e.stateNode={isHidden:!1},e}function ba(e,t,n){return e=Ut(6,e,null,t),e.lanes=n,e}function Ca(e,t,n){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oa(0),this.expirationTimes=oa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wc(e,t,n,r,s,l,o,a,c){return e=new Tv(e,t,n,a,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ut(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rc(l),e}function Iv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function rh(e){if(!e)return er;e=e._reactInternals;e:{if(Tr(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(wt(n))return rm(e,n,t)}return t}function sh(e,t,n,r,s,l,o,a,c){return e=wc(n,r,!0,e,s,l,o,a,c),e.context=rh(null),n=e.current,r=ct(),s=Yn(n),l=kn(r,s),l.callback=t??null,Kn(n,l,s),e.current.lanes=s,Al(e,s,r),St(e,r),e}function Ci(e,t,n,r){var s=t.current,l=ct(),o=Yn(s);return n=rh(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kn(s,t,o),e!==null&&(tn(e,s,o,l),Po(e,s,o)),o}function ai(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Sc(e,t){Sf(e,t),(e=e.alternate)&&Sf(e,t)}function Rv(){return null}var lh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nc(e){this._internalRoot=e}Ei.prototype.render=Nc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));Ci(e,t,null,null)};Ei.prototype.unmount=Nc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cr(function(){Ci(null,e,null,null)}),t[Cn]=null}};function Ei(e){this._internalRoot=e}Ei.prototype.unstable_scheduleHydration=function(e){if(e){var t=Op();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Fp(e)}};function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nf(){}function Dv(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=ai(o);l.call(d)}}var o=sh(t,r,e,0,null,!1,!1,"",Nf);return e._reactRootContainer=o,e[Cn]=o.current,jl(e.nodeType===8?e.parentNode:e),Cr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=ai(c);a.call(d)}}var c=wc(e,0,!1,null,null,!1,!1,"",Nf);return e._reactRootContainer=c,e[Cn]=c.current,jl(e.nodeType===8?e.parentNode:e),Cr(function(){Ci(t,c,n,r)}),c}function _i(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var a=s;s=function(){var c=ai(o);a.call(c)}}Ci(t,o,e,s)}else o=Dv(n,t,e,s,r);return ai(o)}Ap=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tl(t.pendingLanes);n!==0&&(Bu(t,n|1),St(t,De()),!(ae&6)&&(Ss=De()+500,sr()))}break;case 13:Cr(function(){var r=En(e,1);if(r!==null){var s=ct();tn(r,e,1,s)}}),Sc(e,1)}};Wu=function(e){if(e.tag===13){var t=En(e,134217728);if(t!==null){var n=ct();tn(t,e,134217728,n)}Sc(e,134217728)}};Lp=function(e){if(e.tag===13){var t=Yn(e),n=En(e,t);if(n!==null){var r=ct();tn(n,e,t,r)}Sc(e,t)}};Op=function(){return fe};Mp=function(e,t){var n=fe;try{return fe=e,t()}finally{fe=n}};Ha=function(e,t,n){switch(t){case"input":if(Fa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xi(r);if(!s)throw Error(I(90));mp(r),Fa(r,s)}}}break;case"textarea":gp(e,n);break;case"select":t=n.value,t!=null&&os(e,!!n.multiple,t,!1)}};kp=gc;jp=Cr;var Av={usingClientEntryPoint:!1,Events:[Ol,Zr,xi,Sp,Np,gc]},Js={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lv={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ep(e),e===null?null:e.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||Rv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xo.isDisabled&&xo.supportsFiber)try{hi=xo.inject(Lv),un=xo}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Av;Tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(t))throw Error(I(200));return Iv(e,t,null,n)};Tt.createRoot=function(e,t){if(!kc(e))throw Error(I(299));var n=!1,r="",s=lh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=wc(e,1,!1,null,null,n,!1,r,s),e[Cn]=t.current,jl(e.nodeType===8?e.parentNode:e),new Nc(t)};Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=Ep(t),e=e===null?null:e.stateNode,e};Tt.flushSync=function(e){return Cr(e)};Tt.hydrate=function(e,t,n){if(!Pi(t))throw Error(I(200));return _i(null,e,t,!0,n)};Tt.hydrateRoot=function(e,t,n){if(!kc(e))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=lh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=sh(t,null,e,1,n??null,s,!1,l,o),e[Cn]=t.current,jl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ei(t)};Tt.render=function(e,t,n){if(!Pi(t))throw Error(I(200));return _i(null,e,t,!1,n)};Tt.unmountComponentAtNode=function(e){if(!Pi(e))throw Error(I(40));return e._reactRootContainer?(Cr(function(){_i(null,null,e,!1,function(){e._reactRootContainer=null,e[Cn]=null})}),!0):!1};Tt.unstable_batchedUpdates=gc;Tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pi(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return _i(e,t,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function oh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oh)}catch(e){console.error(e)}}oh(),op.exports=Tt;var Ov=op.exports,kf=Ov;Ia.createRoot=kf.createRoot,Ia.hydrateRoot=kf.hydrateRoot;const Mv={1:[{rows:1,cols:1}],2:[{rows:1,cols:2},{rows:2,cols:1}],3:[{rows:2,cols:2},{rows:1,cols:3},{rows:3,cols:1}],4:[{rows:2,cols:2},{rows:1,cols:4},{rows:4,cols:1}],5:[{rows:2,cols:3},{rows:3,cols:2},{rows:1,cols:5},{rows:5,cols:1}],6:[{rows:2,cols:3},{rows:3,cols:2},{rows:1,cols:6},{rows:6,cols:1}],7:[{rows:2,cols:4},{rows:4,cols:2}],8:[{rows:2,cols:4},{rows:4,cols:2},{rows:3,cols:3}],9:[{rows:3,cols:3},{rows:2,cols:5},{rows:5,cols:2}],10:[{rows:2,cols:5},{rows:5,cols:2}]},fs=(e,t)=>{if(!Number.isFinite(e))return t;const n=Math.floor(e);return n>0?n:t};function Fv(e){const t=fs(e,1);return(Mv[t]||[]).map(r=>({...r}))}function ju(e,t){if(!e)return null;const n=fs(t,1),r=fs(e.rows,1),s=fs(e.cols,1),l=r*s;if(l<n)return null;let o=e.emptySeatIndex??null;return l>n?(o==null||o<0||o>=l)&&(o=l-1):o=null,{rows:r,cols:s,emptySeatIndex:o}}const jf=(e,t)=>{const n=fs(e,1),r=(t||0)===90,s=Math.ceil(Math.sqrt(n)),l=r?s:Math.ceil(n/s),o=Math.ceil(n/l);return ju({rows:l,cols:o},n)||{rows:1,cols:n}};function ih(e,t,n){const r=fs(e,1),s=ju(n,r);if(s)return s;const l=Fv(r);if(!l.length)return jf(r,t);const o=(t||0)===90,c=l.filter(d=>o?d.rows>=d.cols:d.cols>=d.rows)[0]||l[0];return ju(c,r)||jf(r,t)}const Uv="newui_app_state",bu=1;function zv(e){const t=Math.max(0,e.capacity||0),n=Array.isArray(e.preferredSeatIndexes)?e.preferredSeatIndexes:[],r=[];for(const s of n){const l=typeof s=="number"?s:parseInt(String(s),10);!Number.isFinite(l)||!Number.isInteger(l)||l<0||l>=t||r.push(l)}return Array.from(new Set(r)).sort((s,l)=>s-l)}function $v(e){const t=(e.seatIds??[]).slice(),n=Math.max(0,e.capacity||0);if(t.length<n)for(let l=t.length;l<n;l++)t[l]=String(e.id)+"_s"+l;else t.length>n&&(t.length=n);const r=zv(e),s=ih(n,e.rotation||0,e.seatLayout);return{...e,seatIds:t,preferredSeatIndexes:r,seatLayout:s}}function Bv(e){return{...e,tables:e.tables.map($v)}}function Wv(e){const n=((e||{layouts:[]}).layouts||[]).map(Bv);return{version:bu,layouts:n}}function Vv(){try{const e=localStorage.getItem(Uv);if(!e)return{version:bu,layouts:[]};const t=JSON.parse(e);return Wv(t)}catch{return{version:bu,layouts:[]}}}function Hv(){return Vv().layouts}const Gv="newui_periods_state";function Kv(){try{const e=localStorage.getItem(Gv);if(!e)return{periods:[],currentId:null};const t=JSON.parse(e);return{periods:t.periods??[],currentId:t.currentId??null}}catch{return{periods:[],currentId:null}}}function Cu(){return Kv()}const Qv="newui_tags_state_v1";function Yv(){try{const e=localStorage.getItem(Qv);return e?{version:1,tags:JSON.parse(e).tags??[]}:{version:1,tags:[]}}catch{return{version:1,tags:[]}}}function Jv(){return Yv().tags}const Xv=p.createContext(null),qv="newui_students_state_v1";function Zv(){try{const e=localStorage.getItem(qv);return e?{version:1,students:JSON.parse(e).students??[]}:{version:1,students:[]}}catch{return{version:1,students:[]}}}function ey(){return Zv().students}function ty(){return"pro"}function ny(e=ty()){return{tier:e,canUseDriveSync:e!=="free",canUseLocalSave:!0,canExportPDF:e!=="free",canUseAdvancedReports:e==="school"||e==="pro",canUseImports:!0,canUseMobile:!0}}function ry({studentId:e,hasPhoto:t=!1,src:n=null,onClick:r,widthPx:s,heightPx:l,sizePx:o=44}){const d={width:s??o,height:l??o};return i.jsx("button",{type:"button","aria-label":t?"Update student photo":"Add student photo",className:"flex-shrink-0 rounded-xl border border-slate-200 bg-white/60 overflow-hidden active:scale-[0.98]",style:d,onClick:y=>{y.stopPropagation(),r==null||r(e)},children:t&&n?i.jsx("img",{src:n,alt:"Student photo",className:"w-full h-full object-cover",draggable:!1}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18","aria-hidden":"true",className:"text-slate-500",children:i.jsx("path",{fill:"currentColor",d:"M9.5 4.5h5l1.2 1.8H19a2.5 2.5 0 0 1 2.5 2.5v8.7A2.5 2.5 0 0 1 19 20H5a2.5 2.5 0 0 1-2.5-2.5V8.8A2.5 2.5 0 0 1 5 6.3h3.3l1.2-1.8ZM12 9a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm0 1.7a2.3 2.3 0 1 1 0 4.6 2.3 2.3 0 0 1 0-4.6Z"})})})})}function sy(e){const t=(e||"").trim();if(!t)return{first:"Unknown",last:"Unknown"};if(t.includes(",")){const[l,o]=t.split(",",2),a=(l||"").trim()||"Unknown";return{first:(o||"").trim().split(/\s+/).filter(Boolean)[0]||"Unknown",last:a}}const n=t.split(/\s+/).filter(Boolean);if(n.length===1)return{first:n[0],last:"Unknown"};const r=n[0]||"Unknown",s=n[n.length-1]||"Unknown";return{first:r,last:s}}function bf(e){return(e||"").trim().replace(/\s+/g,"_").replace(/[^A-Za-z0-9_-]/g,"").replace(/_+/g,"_")||"Unknown"}function jc(e,t){const n=sy(t),r=bf(n.first);return`${bf(n.last)}_${r}__id_${e}.jpg`}var Kf,Qf;const Eu=((Qf=(Kf=import.meta)==null?void 0:Kf.env)==null?void 0:Qf.VITE_GOOGLE_CLIENT_ID)??"403722152172-rm3rvd6kba8s10a8svv60jbj2s93kv1e.apps.googleusercontent.com",ly="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/userinfo.email",Cf="ClassSeats",ah="classseats_mobile_drive_session_v2",bc="classseats_mobile_drive_folder_v1",Cc="classseats_student_docs_folder_v1",oy={classseats:"data_v1"},Ef="Student Docs",Pf="studentPhotos",uh="https://us-east1-classseats-sync.cloudfunctions.net/exchangecode",Lo="classseats_mobile_drive_pkce_verifier",hl="classseats_mobile_drive_return_to",Oo="classseats_mobile_drive_redirect_uri",ch="https://app.classseats.app/ClassSeatsMobile";function iy(){if(typeof window>"u")return ch;const e=window.location.origin;return e==="https://app.classseats.app"?"https://app.classseats.app/ClassSeatsMobile":e==="https://mifish3474.github.io"?"https://mifish3474.github.io/ClassSeats-Mobile-Testing/ClassSeatsMobile":`${e}/ClassSeatsMobile`}const ay=45*60*1e3,uy="classseats_auth",cy=1,tr="driveSession",ui="singleton";let hr=null,on=null,rl=!1,Mo="none";function dy(e){const{sessionLoaded:t}=e,n=(e.lastWriteReason||"").trim();return t?"ok":n?n==="explicit-disconnect"?"user-logged-out":n==="fatal-oauth-error"?"oauth-failure":n==="login-success"?"device-storage-wipe":"unknown":"no-session-yet"}function Ec(){return new Promise((e,t)=>{const n=indexedDB.open(uy,cy);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(tr)||r.createObjectStore(tr,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error||new Error("IndexedDB open failed"))})}async function fy(){const e=await Ec();return new Promise((t,n)=>{const l=e.transaction(tr,"readonly").objectStore(tr).get(ui);l.onsuccess=()=>{const o=l.result;if(o){on={lastWriteAt:o.lastWriteAt,lastWriteReason:o.lastWriteReason};const{id:a,lastWriteAt:c,lastWriteReason:d,...y}=o;t(y)}else t(null)},l.onerror=()=>n(l.error||new Error("IDB get failed"))})}async function dh(e,t){const n=await Ec();return new Promise((r,s)=>{const l=n.transaction(tr,"readwrite"),o=l.objectStore(tr);if(!e)console.info("[Drive][IDB] CLEAR session",{reason:t}),o.delete(ui),on={lastWriteAt:Date.now(),lastWriteReason:t};else{const a={id:ui,...e,lastWriteAt:Date.now(),lastWriteReason:t};console.info("[Drive][IDB] WRITE session",{reason:t,hasRefresh:!!e.refreshToken,expiresAt:e.expiresAt}),o.put(a),on={lastWriteAt:a.lastWriteAt,lastWriteReason:a.lastWriteReason}}l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB put/delete failed"))})}async function py(){try{const e=await Ec();return await new Promise((t,n)=>{const l=e.transaction(tr,"readonly").objectStore(tr).get(ui);l.onsuccess=()=>{const o=l.result;o?(on={lastWriteAt:o.lastWriteAt,lastWriteReason:o.lastWriteReason},t(o)):t(null)},l.onerror=()=>n(l.error||new Error("IDB get failed"))})}catch(e){return console.warn("[Drive][IDB] getDriveSessionRecord failed",e),null}}async function my(){const e=await py(),t=!!e,n=!!(e!=null&&e.refreshToken),r=(e==null?void 0:e.expiresAt)??null,s=(e==null?void 0:e.lastWriteAt)??(on==null?void 0:on.lastWriteAt)??null,l=(e==null?void 0:e.lastWriteReason)??(on==null?void 0:on.lastWriteReason)??null,o=e?"idb":"none",a=e==null?void 0:e.profile,c=dy({sessionLoaded:t,lastWriteReason:l}),d={sessionLoaded:t,hasRefresh:n,expiresAt:r,source:o,lastWriteAt:s,lastWriteReason:l,state:c,profile:a};return console.info("startup:",d),console.info("[Drive] startupSessionState",{state:c,lastWriteReason:l}),d}function hy(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(ah);return e?JSON.parse(e):null}catch{return null}}function gy(){typeof window>"u"||window.localStorage.removeItem(ah)}async function Ti(){if(rl)return hr;try{const t=await fy();if(t)return hr=t,Mo="idb",rl=!0,hr}catch{}const e=hy();if(e){hr=e,Mo="legacy",rl=!0;try{await dh(e,"startup-migration")}catch{}return hr}return hr=null,Mo="none",rl=!0,null}async function Pc(e,t){hr=e,rl=!0,Mo=e?"idb":"none";try{await dh(e,t)}catch(n){console.warn("[Drive][IDB] persistSession failed",n)}}async function fh(e){await Pc(null,e),gy()}async function vy(){return Ti()}function yy(e,t=5*60*1e3){return!e||e.expiresAt<=Date.now()+t}function xy(e){return e.replace(/^#/,"").split("&").map(t=>t.split("=")).reduce((t,[n,r])=>(n&&(t[decodeURIComponent(n)]=decodeURIComponent(r||"")),t),{})}function ph(e,t,n,r){const s=t?t*1e3:ay;return{accessToken:e,expiresAt:Date.now()+s-60*1e3,refreshToken:n,profile:r}}async function mh(e){try{const t=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)return;const n=await t.json();return{email:n.email,name:n.name,picture:n.picture}}catch{return}}async function wy(){const e=new Uint8Array(32);return crypto.getRandomValues(e),btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sy(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=Array.from(new Uint8Array(r));return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ny(e,t){const n=await wy(),r=await Sy(n),s=btoa(JSON.stringify({v:n,r:t||null}));return window.localStorage.setItem(Lo,n),t?window.localStorage.setItem(hl,t):window.localStorage.removeItem(hl),window.localStorage.setItem(Oo,e),`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:Eu,redirect_uri:e,response_type:"code",scope:ly,include_granted_scopes:"true",state:s,prompt:"consent",access_type:"offline",code_challenge:r,code_challenge_method:"S256"}).toString()}`}async function ky(e,t,n){const r={grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:n,client_id:Eu};console.info("[Drive] Exchanging code",{redirect_uri:n,client_id:Eu,code_preview:e?`${e.slice(0,4)}...${e.slice(-4)}`:"none"});const s=await fetch(uh,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const l=await s.text().catch(()=>"");throw new Error(l||"Failed to exchange code for tokens.")}return s.json()}async function jy(){if(typeof window>"u")return null;const e=window.location.search||"",t=new URLSearchParams(e);let n=t.get("code"),r=t.get("state");if(!n&&window.location.hash){const a=xy(window.location.hash);n=a.code||n,r=a.state||r}if(!n)return null;let s=null,l=null,o=null;if(r)try{const a=JSON.parse(atob(r));a!=null&&a.v&&typeof a.v=="string"&&(s=a.v),a!=null&&a.r&&typeof a.r=="string"&&(l=a.r),a!=null&&a.d&&typeof a.d=="string"&&(o=a.d)}catch{}if(s||(s=window.localStorage.getItem(Lo)),l||(l=window.localStorage.getItem(hl)),o||(o=window.localStorage.getItem(Oo)||ch),!s)return null;try{const a=await ky(n,s,o),c=await mh(a.access_token),d=ph(a.access_token,a.expires_in,a.refresh_token,c||void 0);return await Pc(d,"login-success"),window.localStorage.removeItem(Lo),window.localStorage.removeItem(hl),window.localStorage.removeItem(Oo),l&&l!==o?window.location.replace(l):window.history.replaceState(null,document.title,o),d}catch{return window.localStorage.removeItem(Lo),window.localStorage.removeItem(hl),window.localStorage.removeItem(Oo),null}}async function by(e,t){if(typeof window>"u")throw new Error("Browser required.");const n=iy(),r=await Ny(n,window.location.href);return window.location.href=r,new Promise(()=>{})}async function hh(){const e=await Ti();if(!e)return console.warn("[Drive] refreshDriveSession: no stored session"),null;if(e.expiresAt>Date.now()+60*1e3)return console.debug("[Drive] refreshDriveSession: not expiring soon; skipping refresh",{expiresAt:e.expiresAt}),e;if(!e.refreshToken)return console.warn("[Drive] refreshDriveSession: missing refresh token; cannot refresh; keeping existing session",{expiresAt:e.expiresAt}),e;try{const t=await fetch(uh,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:e.refreshToken})});if(!t.ok){const l=await t.text().catch(()=>"");throw console.warn("[Drive] refreshDriveSession: HTTP error from token endpoint",{status:t.status,statusText:t.statusText,bodySnippet:l.slice(0,200)}),new Error("Refresh failed: "+t.status)}const n=await t.json(),r=await mh(n.access_token),s=ph(n.access_token,n.expires_in,e.refreshToken,r||e.profile);return await Pc(s,"refresh-success"),s}catch(t){const n=String((t==null?void 0:t.message)||"");return console.warn("[Drive] refreshDriveSession: caught error",{message:n}),/invalid_grant|invalid_client/i.test(n)?(console.warn("[Drive] refreshDriveSession: treating as fatal OAuth error; clearing session"),await fh("fatal-oauth-error")):console.warn("[Drive] refreshDriveSession: non-fatal error; keeping stored session in IDB"),null}}async function ps(e){let t=e??await Ti();return t?yy(t)?await hh():t:null}async function Cy(){const e=await jy();if(e)return e;const t=await Ti();return t&&t.expiresAt>Date.now()+60*1e3?t:hh()}async function Ey(){await fh("explicit-disconnect")}async function Nt(e,t,n){const r=await fetch(t,{...n,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",...(n==null?void 0:n.headers)||{}}});if(!r.ok){const s=await r.text().catch(()=>"");throw new Error(s||"Google Drive request failed.")}return r}function ci(e){return e.replace(/'/g,"\\'")}async function Ii(e){const t=Py();if(t){if(await gh(e,t))return t;_y()}const n=new URLSearchParams({q:`name='${Cf}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await Nt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return _f(s.files[0].id),s.files[0].id;const o=await(await Nt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Cf,mimeType:"application/vnd.google-apps.folder"})})).json();return _f(o.id),o.id}function _f(e){typeof window>"u"||window.localStorage.setItem(bc,e)}function Py(){return typeof window>"u"?null:window.localStorage.getItem(bc)}function _y(){typeof window>"u"||window.localStorage.removeItem(bc)}function Tf(e){typeof window>"u"||window.localStorage.setItem(Cc,e)}function Ty(){return typeof window>"u"?null:window.localStorage.getItem(Cc)}function Iy(){typeof window>"u"||window.localStorage.removeItem(Cc)}async function gh(e,t){try{return(await Nt(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id`)).ok}catch{return!1}}async function Ry(e){const t=Ty();if(t){if(await gh(e,t))return t;Iy()}const n=await Ii(e),r=new URLSearchParams({q:`'${n}' in parents and name='${ci(Ef)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),l=await(await Nt(e,`https://www.googleapis.com/drive/v3/files?${r.toString()}`)).json();if(Array.isArray(l.files)&&l.files.length>0)return Tf(l.files[0].id),l.files[0].id;const a=await(await Nt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Ef,mimeType:"application/vnd.google-apps.folder",parents:[n]})})).json();if(!(a!=null&&a.id))throw new Error("Unable to create Student Docs folder.");return Tf(a.id),a.id}async function Dy(e){const t=await Ii(e),n=new URLSearchParams({q:`'${t}' in parents and name='${ci(Pf)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await Nt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return s.files[0].id;const o=await(await Nt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Pf,mimeType:"application/vnd.google-apps.folder",parents:[t]})})).json();if(!(o!=null&&o.id))throw new Error("Unable to create student photos folder.");return o.id}async function Ay(e,t,n){const r=(n||"").trim();if(!r)throw new Error("Document title is required.");const l=await(await Nt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:r,mimeType:"application/vnd.google-apps.document",parents:[t]})})).json();if(!(l!=null&&l.id))throw new Error("Unable to create Google Doc.");return{fileId:l.id,title:l.name||r}}async function Ly(e){const t=await ps();if(!(t!=null&&t.accessToken))throw new Error("Sign in with Google Drive first.");const n=t.accessToken,r=await Dy(n),s=jc(e.studentId,e.studentFullName);let l=e.fileId?String(e.fileId):null;if(!l){const S=`name='${ci(s)}' and '${r}' in parents and trashed=false`,x=new URLSearchParams({q:S,fields:"files(id)",spaces:"drive"}),b=await(await Nt(n,`https://www.googleapis.com/drive/v3/files?${x.toString()}`)).json();l=Array.isArray(b.files)&&b.files.length>0?b.files[0].id:null}if(!l){const S=`student_${e.studentId}.jpg`,x=`name='${ci(S)}' and '${r}' in parents and trashed=false`,j=new URLSearchParams({q:x,fields:"files(id)",spaces:"drive"}),k=await(await Nt(n,`https://www.googleapis.com/drive/v3/files?${j.toString()}`)).json();l=Array.isArray(k.files)&&k.files.length>0?k.files[0].id:null}const o=l?{name:s,mimeType:"image/jpeg"}:{name:s,parents:[r],mimeType:"image/jpeg"},a=new FormData;a.append("metadata",new Blob([JSON.stringify(o)],{type:"application/json"})),a.append("file",e.jpegBlob,s);const c=l?`https://www.googleapis.com/upload/drive/v3/files/${l}?uploadType=multipart&fields=id,name,modifiedTime`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime",d=await fetch(c,{method:l?"PATCH":"POST",headers:{Authorization:`Bearer ${n}`},body:a,signal:e.signal});if(!d.ok){const S=await d.text().catch(()=>"");throw new Error(S||"Failed to upload student photo.")}const y=await d.json();if(!(y!=null&&y.id))throw new Error("Unable to upload student photo.");return{fileId:y.id,folderId:r,fileName:y.name||s,modifiedTime:y.modifiedTime}}async function If(e){const t=await Ii(e),n=new URLSearchParams({q:`'${t}' in parents and trashed=false`,fields:"files(id,name,modifiedTime,size,headRevisionId)",orderBy:"modifiedTime desc",spaces:"drive"});return((await(await Nt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json()).files||[]).map(Ri)}async function Oy(e,t,n){const r=await Ii(e),s="classseats_drive_boundary",l={name:t,mimeType:"application/json",parents:[r],appProperties:oy},o=[`--${s}`,"Content-Type: application/json; charset=UTF-8","",JSON.stringify(l),`--${s}`,"Content-Type: application/json","",n,`--${s}--`,""].join(`\r
`),a=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime,size,headRevisionId",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":`multipart/related; boundary=${s}`},body:o});if(!a.ok){const d=await a.text().catch(()=>"");throw new Error(d||"Failed to create Google Drive file.")}const c=await a.json();return Ri(c)}async function Ea(e,t){return(await Nt(e,`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{method:"GET"})).text()}async function My(e,t,n){const r=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:n});if(!r.ok){const o=await r.text().catch(()=>"");throw new Error(o||"Failed to upload file to Google Drive.")}const l=await(await Nt(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime,size,headRevisionId`,{method:"GET"})).json();return Ri(l)}function Ri(e){var t;return e?{id:e.id,name:e.name,modifiedTime:e.modifiedTime,size:e.size,revisionId:e.headRevisionId||e.revisionId||((t=e==null?void 0:e.appProperties)==null?void 0:t.revisionId)}:{id:"",name:""}}async function Fy(e){const t=new URLSearchParams({q:"mimeType='application/json' and trashed=false",fields:"files(id,name,modifiedTime,size,headRevisionId)",orderBy:"modifiedTime desc",spaces:"drive"});return((await(await Nt(e,`https://www.googleapis.com/drive/v3/files?${t.toString()}`)).json()).files||[]).map(Ri)}const xr=new Map;function vh(e,t){const n=xr.get(e);if((n==null?void 0:n.value)!==void 0)return Promise.resolve(n.value);if(n!=null&&n.promise)return n.promise;const r=t().then(s=>(xr.set(e,{value:s}),s)).catch(s=>{throw xr.delete(e),s});return xr.set(e,{promise:r}),r}function Ns(e){if(!e){xr.clear();return}for(const t of xr.keys())t.startsWith(e)&&xr.delete(t)}const Uy="classseats-cache",zy=1,jn="driveFolders",Xn="studentPhotoMap",qn="photoBlobs";function Di(){return typeof indexedDB>"u"?Promise.resolve(null):new Promise((e,t)=>{const n=indexedDB.open(Uy,zy);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(jn)||r.createObjectStore(jn,{keyPath:"key"}),r.objectStoreNames.contains(Xn)||r.createObjectStore(Xn,{keyPath:"studentId"}),r.objectStoreNames.contains(qn)||r.createObjectStore(qn,{keyPath:"fileId"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error||new Error("IndexedDB open failed"))})}function _c(e,t){return t?Date.now()-e>t:!1}async function Ps(e,t){const n=await Di();return n?new Promise((r,s)=>{const a=n.transaction(e,"readonly").objectStore(e).get(t);a.onsuccess=()=>r(a.result||null),a.onerror=()=>s(a.error||new Error("IDB get failed"))}):null}async function Ai(e,t){const n=await Di();if(n)return new Promise((r,s)=>{const l=n.transaction(e,"readwrite");l.objectStore(e).put(t),l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB put failed"))})}async function ks(e,t){const n=await Di();if(n)return new Promise((r,s)=>{const l=n.transaction(e,"readwrite");l.objectStore(e).delete(t),l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB delete failed"))})}async function Pa(e){const t=await Di();if(t)return new Promise((n,r)=>{const s=t.transaction(e,"readwrite");s.objectStore(e).clear(),s.oncomplete=()=>n(),s.onerror=()=>r(s.error||new Error("IDB clear failed"))})}async function yh(e,t,n){const r=await Ps(jn,e);return r?n&&r.accountKey&&r.accountKey!==n?(await ks(jn,e),null):_c(r.updatedAt,t)?(await ks(jn,e),null):r:null}async function xh(e){await Ai(jn,e)}async function $y(e,t,n){const r=await Ps(Xn,e);return r?n&&r.accountKey&&r.accountKey!==n?(await ks(Xn,e),null):_c(r.fetchedAt,t)?(await ks(Xn,e),null):r:null}async function By(e,t){const n=await Ps(Xn,e);return!n||t&&n.accountKey&&n.accountKey!==t?null:n}async function Wy(e){await Ai(Xn,e)}async function Vy(e,t,n){const r=await Ps(qn,e);return r?n&&r.accountKey&&r.accountKey!==n?(await ks(qn,e),null):_c(r.fetchedAt,t)?(await ks(qn,e),null):r:null}async function Hy(e,t){const n=await Ps(qn,e);return!n||t&&n.accountKey&&n.accountKey!==t?null:n}async function wh(e){await Ai(qn,e)}async function Gy(){await Promise.all([Pa(jn),Pa(Xn),Pa(qn)])}const Sh="driveAccountKey";async function Ky(){const e=await Ps(jn,Sh);return(e==null?void 0:e.value)||null}async function Qy(e){const t={key:Sh,value:e,updatedAt:Date.now(),accountKey:e};await Ai(jn,t)}const Rf="ClassSeats",Df="studentPhotos",Nh=30*24*60*60*1e3,Yy=7*24*60*60*1e3,Jy=7*24*60*60*1e3,Xy=5*60*1e3,qy="classseats_studentPhotoRefs_v1",Zy=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("classseats_debug_drive")==="1"}catch{return!1}},kh=(e,t)=>{Zy()&&console.debug(`[PhotoService] ${e}`,t)},_a={folderLookups:0,photoMetaLookups:0,mediaDownloads:0};function js(e){_a[e]+=1,kh(`${e}=${_a[e]}`,{count:_a[e]})}const di=new Map,fi=new Map,Er=new Map;let Fo=null;const jh=(e,t)=>`${e}:${t||0}`;function bh(e){return e.replace(/'/g,"\\'")}function ex(e){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(qy);if(!t)return null;const n=JSON.parse(t);if(!n||typeof n!="object")return null;const r=n[e];return!r||typeof r.fileId!="string"?null:r.fileId}catch{return null}}function Ch(e){let t=0;const n=[],r=()=>{if(t>=e)return;const s=n.shift();s&&s()};return async function(l){t>=e&&await new Promise(o=>n.push(o)),t+=1;try{return await l()}finally{t-=1,r()}}}const Tc=Ch(4),Af=Ch(3);async function Pr(e,t,n){const r={Authorization:`Bearer ${e}`},s=(n==null?void 0:n.body)instanceof FormData;n!=null&&n.body&&!s&&(r["Content-Type"]="application/json");const l=await fetch(t,{...n,headers:{...r,...(n==null?void 0:n.headers)||{}}});if(!l.ok){const o=await l.text().catch(()=>"");throw new Error(o||"Google Drive request failed.")}return l}async function tx(e){var n,r,s,l,o;if((r=(n=e.driveSession)==null?void 0:n.profile)!=null&&r.email)return e.driveSession.profile.email;if((s=e.driveClient)!=null&&s.getStatus)try{const a=await e.driveClient.getStatus();if(a.connected)return((l=a.profile)==null?void 0:l.email)||null}catch{}const t=await ps(e.driveSession);return((o=t==null?void 0:t.profile)==null?void 0:o.email)||null}async function Fl(e){const t=await tx(e);if(!t)return null;Fo&&Fo!==t&&await pi("account-change");const n=await Ky();return n&&n!==t&&await pi("account-change"),Fo=t,n!==t&&await Qy(t),t}async function Li(e){var n,r;if((n=e.driveSession)!=null&&n.accessToken)return e.driveSession.accessToken;if(((r=e.driveClient)==null?void 0:r.kind)==="desktop")return null;const t=await ps(e.driveSession);return(t==null?void 0:t.accessToken)||null}async function Ic(e,t){const n=await vh(e,t);return n==null&&Ns(e),n}function sl(e,t){const n=Er.get(e);n!=null&&n.url&&URL.revokeObjectURL(n.url);const r=URL.createObjectURL(t);return Er.set(e,{url:r}),r}function nx(e){const t=Er.get(e);return(t==null?void 0:t.url)||null}function Eh(e,t){const n=`${e}:`;for(const[r,s]of Er.entries())r!==e&&!r.startsWith(n)||t&&r===t||(s!=null&&s.url&&URL.revokeObjectURL(s.url),Er.delete(r))}function rx(e){const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),t}function sx(e){const t=e.replace(/\s+/g,"");return t.length<32||t.length%4!==0?!1:/^[A-Za-z0-9+/=]+$/.test(t)}function Lf(e,t){try{const n=e.replace(/\s+/g,""),r=atob(n),s=new Uint8Array(r.length);for(let l=0;l<r.length;l+=1)s[l]=r.charCodeAt(l);return new Blob([s],{type:t||"image/jpeg"})}catch{return null}}function lx(e){if(!e)return null;if(e instanceof Blob)return e;if(e instanceof ArrayBuffer)return new Blob([e]);if(ArrayBuffer.isView(e))return new Blob([rx(e)]);if(typeof e=="string"){if(e.startsWith("data:")){const t=e.split(",",2);if(t.length===2){const n=t[0].match(/data:([^;]+)/),r=Lf(t[1],n==null?void 0:n[1]);if(r)return r}}if(sx(e)){const t=Lf(e);if(t)return t}return new Blob([e])}return null}async function Of(e,t,n,r){const s=`name='${bh(n)}' and '${t}' in parents and trashed=false`,l=new URLSearchParams({q:s,fields:"files(id,name,modifiedTime)",spaces:"drive"});return js("photoMetaLookups"),Tc(async()=>{const a=await(await Pr(e,`https://www.googleapis.com/drive/v3/files?${l.toString()}`,{method:"GET",signal:r})).json();return!Array.isArray(a.files)||a.files.length===0?null:a.files[0]})}async function ox(e,t,n){return js("photoMetaLookups"),Tc(async()=>{const s=await(await Pr(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime`,{method:"GET",signal:n})).json();return s!=null&&s.id?{id:s.id,name:s.name,modifiedTime:s.modifiedTime}:null})}async function ix(e,t,n,r){return Tc(async()=>{const l=await(await Pr(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime`,{method:"PATCH",body:JSON.stringify({name:n}),signal:r})).json();return l!=null&&l.id?{id:l.id,name:l.name,modifiedTime:l.modifiedTime}:null})}async function ax(e){return Ic("driveFolder:classSeats",async()=>{const t=await Fl(e),n=await yh("classSeatsFolderId",Nh,t||void 0);if(n!=null&&n.value)return n.value;const r=await Li(e);if(!r)return null;js("folderLookups");const s=new URLSearchParams({q:`name='${Rf}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),o=await(await Pr(r,`https://www.googleapis.com/drive/v3/files?${s.toString()}`,{method:"GET"})).json();let a=null;if(Array.isArray(o.files)&&o.files.length>0&&(a=o.files[0].id),!a){const d=await(await Pr(r,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Rf,mimeType:"application/vnd.google-apps.folder"})})).json();a=(d==null?void 0:d.id)||null}return a?(await xh({key:"classSeatsFolderId",value:a,updatedAt:Date.now(),accountKey:t||void 0}),a):null})}async function ux(e){return Ic("driveFolder:studentPhotos",async()=>{const t=await Fl(e),n=await yh("studentPhotosFolderId",Nh,t||void 0);if(n!=null&&n.value)return n.value;const r=await Li(e);if(!r)return null;const s=await ax(e);if(!s)return null;js("folderLookups");const l=new URLSearchParams({q:`'${s}' in parents and name='${bh(Df)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),a=await(await Pr(r,`https://www.googleapis.com/drive/v3/files?${l.toString()}`,{method:"GET"})).json();let c=null;if(Array.isArray(a.files)&&a.files.length>0&&(c=a.files[0].id),!c){const y=await(await Pr(r,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Df,mimeType:"application/vnd.google-apps.folder",parents:[s]})})).json();c=(y==null?void 0:y.id)||null}return c?(await xh({key:"studentPhotosFolderId",value:c,updatedAt:Date.now(),accountKey:t||void 0}),c):null})}async function ll(e){di.set(e.studentId,e),fi.delete(e.studentId),Ns(`studentPhoto:${e.studentId}`),await Wy(e)}async function cx(e,t,n,r){const s=String(e),l=await Fl(n),o=di.get(s);if(o&&(!l||o.accountKey===l))return o;const a=await $y(s,Yy,l||void 0);if(a)return di.set(s,a),a;const c=await By(s,l||void 0),d=fi.get(s);if(d&&Date.now()-d<Xy)return c||null;const y=await Li(n);if(!y)return c||null;if(c!=null&&c.fileId)try{const b=await ox(y,c.fileId,r);if(b){const k={studentId:s,fileId:b.id,fileName:b.name,updatedTime:b.modifiedTime,fetchedAt:Date.now(),accountKey:l||void 0};return await ll(k),k}}catch{}const S=await ux(n);if(!S)return c||null;const x=t?jc(e,t):c==null?void 0:c.fileName;if(x)try{const b=await Of(y,S,x,r);if(b){const k={studentId:s,fileId:b.id,fileName:b.name,updatedTime:b.modifiedTime,fetchedAt:Date.now(),accountKey:l||void 0};return await ll(k),k}}catch{return c||null}try{const b=`student_${e}.jpg`,k=await Of(y,S,b,r);if(k){let J=k.name,m=k.modifiedTime;if(x&&k.name!==x){const g=await ix(y,k.id,x,r);g!=null&&g.name&&(J=g.name,m=g.modifiedTime)}const f={studentId:s,fileId:k.id,fileName:J,updatedTime:m,fetchedAt:Date.now(),accountKey:l||void 0};return await ll(f),f}}catch{return c||null}const j=ex(s);if(j){const b={studentId:s,fileId:j,fileName:x||void 0,fetchedAt:Date.now(),accountKey:l||void 0};return await ll(b),b}return fi.set(s,Date.now()),c||null}async function dx(e,t,n){var s;if(((s=t.driveClient)==null?void 0:s.kind)==="desktop"&&t.driveClient.downloadFile)return js("mediaDownloads"),Af(async()=>{var o,a;const l=await((a=(o=t.driveClient)==null?void 0:o.downloadFile)==null?void 0:a.call(o,e));return lx(l==null?void 0:l.data)});const r=await Li(t);return r?(js("mediaDownloads"),Af(async()=>{const l=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{method:"GET",headers:{Authorization:`Bearer ${r}`},signal:n});return l.ok?l.blob():null})):null}async function fx(e,t,n,r){const s=jh(e,t);Eh(e,s);const l=nx(s);if(l)return l;const o=await Fl(n),a=await Vy(s,Jy,o||void 0);if(a)return sl(s,a.blob);const c=await Hy(s,o||void 0);try{const d=await vh(`photoBlob:${s}`,async()=>dx(e,n,r));if(!d)return Ns(`photoBlob:${s}`),c?sl(s,c.blob):null;const y={fileId:s,blob:d,fetchedAt:Date.now(),accountKey:o||void 0};return await wh(y),sl(s,d)}catch{return Ns(`photoBlob:${s}`),c?sl(s,c.blob):null}}async function px(e){const t=e.photoFileId?String(e.photoFileId):"";if(!t)return{fileId:null,url:null};const n=await fx(t,e.photoUpdatedAt,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal);return{fileId:t,url:n}}async function mx(e){const t=`studentPhoto:${String(e.studentId)}`;return Ic(t,async()=>cx(e.studentId,e.fullName,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal))}async function hx(e){const t=jh(e.fileId,e.photoUpdatedAt);Ns(`photoBlob:${t}`);const n=String(e.studentId),r=await Fl({driveClient:e.driveClient,driveSession:e.driveSession}),s=jc(e.studentId,e.fullName),l={studentId:n,fileId:e.fileId,fileName:s,updatedTime:e.updatedTime,fetchedAt:Date.now(),accountKey:r||void 0};await ll(l);const o={fileId:t,blob:e.blob,updatedTime:e.updatedTime,fetchedAt:Date.now(),accountKey:r||void 0};await wh(o),Eh(e.fileId,t),sl(t,e.blob)}async function pi(e){e&&kh("cache clear",{reason:e});for(const t of Er.values())URL.revokeObjectURL(t.url);Er.clear(),di.clear(),fi.clear(),Fo=null,Ns(),await Gy()}function Ph({studentId:e,fullName:t,photoFileId:n,photoUpdatedAt:r,driveClient:s,driveSession:l,driveAccountKey:o}){const[a,c]=p.useState(null),[d,y]=p.useState(null),[S,x]=p.useState(!1),j=p.useMemo(()=>String(e),[e]),b=p.useMemo(()=>n?String(n):"",[n]),k=(l==null?void 0:l.accessToken)||"",J=o||"";return p.useEffect(()=>{let m=!0;const f=new AbortController;return b?(x(!0),c(null),px({photoFileId:b,photoUpdatedAt:r,driveClient:s,driveSession:l,signal:f.signal}).then(g=>{m&&(c(g.url),y(g.fileId))}).catch(()=>{m&&(c(null),y(null))}).finally(()=>{m&&x(!1)}),()=>{m=!1,f.abort()}):(c(null),y(null),x(!1),()=>{m=!1,f.abort()})},[j,b,r,s,l,k,J,t]),{photoUrl:a,fileId:d,loading:S}}const gx="newui_constraints_v1";function vx(){try{const e=localStorage.getItem(gx);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function yx(){return vx()}const _h=p.createContext(null);function xx({children:e}){const[t,n]=p.useState([]),r=p.useCallback(o=>{n(a=>a.filter(c=>c.id!==o))},[]),s=p.useCallback(o=>{const a=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,c=o.tone||"info",d=o.duration??4e3;n(y=>[...y,{...o,id:a,tone:c}]),d>0&&typeof window<"u"&&window.setTimeout(()=>r(a),d)},[r]),l=p.useMemo(()=>s,[s]);return i.jsxs(_h.Provider,{value:l,children:[e,i.jsx("div",{className:"pointer-events-none fixed top-6 left-1/2 -translate-x-1/2 z-[1000] flex flex-col gap-4 w-full max-w-lg items-center",children:t.map(o=>{const a=o.tone==="success"?"bg-emerald-600 text-white shadow-emerald-500/40":o.tone==="error"?"bg-rose-600 text-white shadow-rose-500/40":o.tone==="warning"?"bg-amber-500 text-slate-900 shadow-amber-400/40":"bg-slate-800 text-white shadow-slate-900/40";return i.jsxs("div",{className:`pointer-events-auto rounded-3xl px-5 py-4 shadow-2xl flex items-start gap-4 text-base font-semibold w-full ${a}`,children:[i.jsx("div",{className:"flex-1 text-sm font-semibold",children:o.message}),i.jsx("button",{className:"text-base font-bold opacity-80 hover:opacity-100",onClick:()=>r(o.id),"aria-label":"Dismiss notification",children:""})]},o.id)})})]})}function Th(){const e=p.useContext(_h);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}const Mf=72,wx=64,Sx={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","6xl":"max-w-6xl","7xl":"max-w-7xl"};function Nx({isOpen:e,onRequestClose:t,title:n,subtitle:r,headerRight:s,footer:l,children:o,maxWidth:a="6xl",bodyClassName:c,bodyPadding:d=!0,showCloseX:y=!1}){if(p.useEffect(()=>{if(!e)return;const j=b=>{b.key==="Escape"&&t()};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[e,t]),!e)return null;const S=l?`max-h-[calc(90vh-${Mf}px-${wx}px)]`:`max-h-[calc(90vh-${Mf}px)]`,x=d?"px-5 py-4":"";return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",style:{width:"100dvw",height:"100dvh"},onMouseDown:t}),i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{width:"100dvw",height:"100dvh"},children:i.jsxs("div",{role:"dialog","aria-modal":"true",className:`relative w-full rounded-xl bg-white shadow-xl border border-slate-200 max-h-[90vh] overflow-hidden ${Sx[a]}`,onMouseDown:j=>j.stopPropagation(),children:[i.jsx("div",{className:"border-b border-slate-200 px-5 py-4 bg-white",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"min-w-0",children:[n&&i.jsx("div",{className:"text-lg font-semibold text-slate-900",children:n}),r&&i.jsx("div",{className:"text-sm text-slate-500",children:r})]}),(s||y)&&i.jsxs("div",{className:"flex items-center gap-2",children:[s,y&&i.jsx("button",{type:"button","aria-label":"Close",onClick:t,className:"rounded-md p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:i.jsx("span",{"aria-hidden":"true",className:"text-lg leading-none",children:""})})]})]})}),i.jsx("div",{className:`overflow-y-auto overscroll-contain ${S} ${x} ${c??""}`,children:o}),l&&i.jsx("div",{className:"border-t border-slate-200 px-5 py-4 bg-slate-50",children:l})]})})]})}const kx="newui_history_v1";function jx(){try{const e=localStorage.getItem(kx);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function bx(){return jx()}console.log(" GroupingAlgorithm.js (FIXED v2) file loaded!");console.log(" GroupingAlgorithm v2 loaded successfully!");const Cx="newui_groupings_v1";function Ex(){try{const e=localStorage.getItem(Cx);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function Px(){return Ex()}const _x="newui_print_settings_v1",Tx={seatingChartEditor:{lastUpdated:new Date(0).toISOString()}};function Ix(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Xs(e,t,n,r){const s=typeof e=="number"?e:parseFloat(String(e));return Number.isFinite(s)?Math.min(r,Math.max(n,s)):t}function Rx(e){return e==="a4"||e==="legal"||e==="tabloid"?e:"letter"}function Dx(e){return Array.isArray(e)?e.filter(t=>typeof t=="string"||typeof t=="number"):null}function Ax(){const e=Ix(localStorage.getItem(_x)),t=(e==null?void 0:e.seatingChartEditor)??{};return{seatingChartEditor:{paper:Rx(t.paper),orientation:t.orientation==="portrait"?"portrait":"landscape",marginMode:t.marginMode==="max"?"max":"safe",showPhotos:t.showPhotos!==!1,showTags:t.showTags!==!1,showSeatNumbers:t.showSeatNumbers===!0,selectedTagIds:Dx(t.selectedTagIds),textScale:Xs(t.textScale,1,.5,2.5),photoScale:Xs(t.photoScale,1,.5,2),zoom:Xs(t.zoom,1,.1,4),offsetX:Xs(t.offsetX,0,-5e3,5e3),offsetY:Xs(t.offsetY,0,-5e3,5e3),lastUpdated:typeof t.lastUpdated=="string"?t.lastUpdated:Tx.seatingChartEditor.lastUpdated}}}function Ih(e,t=50){const n=t>0?t:50,r=Math.ceil(n*.9),s=Math.ceil(n*.7),l=Math.ceil(n*.5);return e>=r?{label:"Good Standing",color:"green",emoji:"",min:r}:e>=s?{label:"Caution",color:"yellow",emoji:"",min:s,max:r-1}:e>=l?{label:"Warning",color:"orange",emoji:"",min:l,max:s-1}:{label:"Alert",color:"red",emoji:"",min:0,max:l-1}}function Lx(){return{periods:Cu().periods.map(t=>({id:t.id,behaviorNotes:t.behaviorNotes||{},pointsByStudent:t.pointsByStudent||{},pointsHistory:t.pointsHistory||[],pointsEnabled:t.pointsEnabled,startingPoints:t.startingPoints}))}}const Ox=e=>{const[t,n,r]=e.split("-").map(s=>Number(s));return!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(r)?null:new Date(Date.UTC(t,n-1,r))},Mx=e=>{const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return`${t}-${n}-${r}`},Fx=e=>{const t=Ox(e);return t?(t.setUTCDate(t.getUTCDate()-1),Mx(t)):e},Rh=(e,t,n)=>{if(!e)return null;const r=e[String(t)];return r&&r[n]||null},Ux=e=>{if(!e)return null;const t=Object.keys(e);return t.length===0?null:t.reduce((n,r)=>r<n?r:n,t[0])};function wo(e){var y;const{attendance:t,studentId:n,date:r,status:s,resets:l}=e;if(!t)return 0;const o=String(n),c=Rh(l,n,s==="left_early"?"leftEarly":s==="tardy"?"tardy":"absent");let d=0;for(const S of Object.keys(t))S>r||c&&S<c||((y=t[S])==null?void 0:y[o])===s&&(d+=1);return d}function zx(e){var S,x;const{attendance:t,studentId:n,date:r,resets:s}=e;if(!t)return 0;const l=String(n);if((((S=t[r])==null?void 0:S[l])||"unmarked")!=="absent")return 0;const a=Rh(s,n,"absent");if(a&&r<a)return 0;const c=Ux(t);let d=r,y=0;for(;!(a&&d<a);){const j=((x=t[d])==null?void 0:x[l])||"unmarked";if(j==="absent")y+=1;else if(j!=="unmarked")break;if(!c||d<=c)break;d=Fx(d)}return y}const Dh="https://www.classseats.com/updates",Rc="https://classseats.com",$x=`${Rc}/privacy.html`,Bx=`${Rc}/terms.html`;function Wx({variant:e="floating",className:t}){const n=new Date().getFullYear(),r=i.jsxs("div",{className:"w-full max-w-[420px] rounded-xl border border-indigo-100 bg-white/95 px-3 py-3 text-left text-slate-800 shadow-lg backdrop-blur",children:[i.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-700 flex flex-wrap items-center gap-1",children:["Early Access   ",n," ClassSeats "," ",i.jsx("a",{href:Dh,target:"_blank",rel:"noreferrer",className:"text-indigo-700 underline decoration-indigo-300 decoration-2 underline-offset-4 hover:text-indigo-800",children:"Get updates"})]}),i.jsx("p",{className:"mt-1 text-[11px] leading-snug text-slate-700",children:"ClassSeats is in active development. Features and pricing may change."})]});return e==="floating"?i.jsx("div",{className:`pointer-events-none fixed bottom-3 left-3 right-3 z-40 flex justify-end md:left-auto md:right-4 md:max-w-[420px] ${t??""}`,children:i.jsx("div",{className:"pointer-events-auto w-full md:w-auto",children:r})}):i.jsx("div",{className:t,children:r})}const Vx="0.1.0",Hx=new Date().toLocaleDateString();function Gx({open:e,onClose:t,buildRevision:n}){const r=new Date().getFullYear();return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),i.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl bg-white p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-indigo-700",children:"ClassSeats (Early Access)"}),i.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"About"})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:t,"aria-label":"Close about",children:""})]}),i.jsx("p",{className:"mt-2 text-sm leading-relaxed text-slate-700",children:"ClassSeats is in active development. Features and pricing may change. Data is stored in your Google Drive or locally on your device  ClassSeats does not store student data on its servers."}),i.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-800 space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"App version"}),i.jsx("span",{children:Vx})]}),n&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Build revision"}),i.jsxs("span",{children:["Rev ",n]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Build date"}),i.jsx("span",{children:Hx})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[i.jsx(So,{href:Rc,label:"Home"}),i.jsx(So,{href:$x,label:"Privacy"}),i.jsx(So,{href:Bx,label:"Terms"}),i.jsx(So,{href:Dh,label:"Get updates"})]}),i.jsxs("p",{className:"mt-4 text-[11px] text-slate-500",children:[" ",r," ClassSeats. All rights reserved."]}),i.jsx("p",{className:"mt-1 text-[10px] text-slate-400",children:"Google Drive is a trademark of Google LLC"})]})]}):null}function So({href:e,label:t}){return i.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-800 shadow-sm hover:border-indigo-200 hover:text-indigo-700",children:[t,i.jsx("span",{"aria-hidden":"true",children:""})]})}function Kx({current:e,onGoDesktop:t,onGoMobile:n}){const r="px-3 py-1.5 text-xs font-semibold rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500",s="bg-slate-900 text-white",l="bg-white text-slate-700 border border-slate-200 hover:bg-slate-50";return i.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white/80 p-1 shadow-sm",children:[i.jsx("button",{type:"button","aria-pressed":e==="desktop",className:`${r} ${e==="desktop"?s:l}`,onClick:t,children:"Desktop"}),i.jsx("button",{type:"button","aria-pressed":e==="mobile",className:`${r} ${e==="mobile"?s:l}`,onClick:n,children:"Mobile"})]})}function Qx(){var n;if(typeof navigator>"u")return!1;const e=(n=navigator.userAgentData)==null?void 0:n.mobile;if(typeof e=="boolean")return e;const t=navigator.userAgent||"";return/iPhone|Android.+Mobile|Windows Phone|iPod/i.test(t)}function Yx(e,t,n){const r=Cu().currentId,s=r!=null?String(r):null,l=new Date().toISOString();return{schemaVersion:1,version:1,exportedAt:l,updatedAt:l,lastWriter:"unknown",layouts:Hv(),periodsState:Cu(),lastEditedPeriodId:s,lastEditedDate:null,students:n||ey(),tags:Jv(),behaviorState:Lx(),constraintsState:yx(),historyState:bx(),groupingsState:Px(),printSettings:Ax()}}const Kr=e=>!!e&&typeof e=="object",Jx=e=>e===!0||e==="true"||e===1||e==="1",Ah=e=>{const t=typeof e=="number"?e:parseInt(String(e),10);return Number.isFinite(t)&&Number.isInteger(t)?t:null};function Xx(e,t){if(!Array.isArray(e))return[];const n=[];for(const r of e){const s=Ah(r);s!=null&&(s<0||s>=t||n.push(s))}return Array.from(new Set(n)).sort((r,s)=>r-s)}function qx(e){var a;if(!e||typeof e!="object"||(e.schemaVersion??(e.version===1?1:void 0))!==1)return null;const n=typeof e.exportedAt=="string"?e.exportedAt:new Date().toISOString(),r=typeof e.updatedAt=="string"?e.updatedAt:n,s=e.lastWriter==="desktop"||e.lastWriter==="mobile"||e.lastWriter==="unknown"?e.lastWriter:"unknown",l={...e,schemaVersion:1,version:e.version??1,exportedAt:n,updatedAt:r,lastWriter:s};if(l.behaviorState=Kr(e.behaviorState)?e.behaviorState:{},!Kr(l.periodsState)||!Array.isArray((a=l.periodsState)==null?void 0:a.periods)||!Array.isArray(l.students)||!Array.isArray(l.layouts)||!Kr(l.behaviorState)||!Kr(l.constraintsState)||!Kr(l.historyState)||!Kr(l.groupingsState))return null;switch((e.schemaVersion!==l.schemaVersion||e.updatedAt!==l.updatedAt||e.exportedAt!==l.exportedAt||e.lastWriter!==l.lastWriter)&&console.log("[Payload] migrated to schema v1",{hadSchemaVersion:e.schemaVersion,hadVersion:e.version,addedUpdatedAt:e.updatedAt!==l.updatedAt,addedLastWriter:e.lastWriter!==l.lastWriter}),l.schemaVersion){case 1:return l.students=(l.students||[]).map(c=>({...c,needsPreferredSeating:Jx(c.needsPreferredSeating),quickNote:(typeof c.quickNote=="string",c.quickNote),quickNoteUpdatedAt:(typeof c.quickNoteUpdatedAt=="string",c.quickNoteUpdatedAt),photoFileId:typeof c.photoFileId=="string"?c.photoFileId:c.photoFileId==null?null:String(c.photoFileId),photoUpdatedAt:Ah(c.photoUpdatedAt)})),l.layouts=(l.layouts||[]).map(c=>({...c,tables:(c.tables||[]).map(d=>{const y=Math.max(0,d.capacity||0);return{...d,preferredSeatIndexes:Xx(d.preferredSeatIndexes,y),seatLayout:ih(y||1,d.rotation||0,d.seatLayout||null)}})})),l;default:return null}}function Zx(e){return e.isOffline?{action:"skip",reason:"offline"}:e.isLocked?{action:"skip",reason:"locked"}:e.inFlight?{action:"skip",reason:"in-flight"}:e.hasFile?e.dirty?{action:"upload",reason:"ready"}:{action:"skip",reason:"clean"}:{action:"skip",reason:"no-file"}}function ew(e){const t=e.graceMs;return e.isOffline?{action:"skip",reason:"offline"}:e.isLocked?{action:"skip",reason:"locked"}:e.inFlight?{action:"skip",reason:"in-flight"}:e.dirty?{action:"skip",reason:"dirty"}:e.lastLocalEditAt&&e.now-e.lastLocalEditAt<t?{action:"skip",reason:"grace-window"}:{action:"pull",reason:"ready"}}function tw(e){const t=e.incomingUpdatedAt?Date.parse(e.incomingUpdatedAt):NaN,n=e.lastAppliedUpdatedAt?Date.parse(e.lastAppliedUpdatedAt):NaN;return Number.isFinite(t)&&Number.isFinite(n)&&t<=n?{action:"skip",reason:"stale-updatedAt"}:e.incomingRevisionId&&e.lastRevisionId&&e.incomingRevisionId===e.lastRevisionId?{action:"skip",reason:"same-revision"}:{action:"apply",reason:"fresh"}}const nw=new Set(["students","periodsState","layouts","tags","constraintsState","historyState","groupingsState","behaviorNotes","attendance","notes","alerts","payload"]),Pu=(e,t,n)=>{if(nw.has(t))return"[omitted]";if(typeof e=="string")return e.length>200?`[string ${e.length}]`:e;if(Array.isArray(e)){const r=e.slice(0,5).map(s=>Pu(s,"",n+1));return e.length>5&&r.push(`[+${e.length-5} more]`),n>1?`[array len=${e.length}]`:r}if(e&&typeof e=="object"){if(n>1)return"[object]";const r=Object.entries(e).slice(0,10).map(([s,l])=>[s,Pu(l,s,n+1)]);return r.length===0?e:Object.fromEntries(r)}return e};function qs(e,t){if(!(typeof console>"u"))try{const n=t?Pu(t,"",0):void 0;n!==void 0?console.log(e,n):console.log(e)}catch{console.log(e)}}function rw({children:e}){return i.jsx(i.Fragment,{children:e})}function sw(e){const t=e.slice();for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function Ot(e){return String(e)}function Ff(e){try{const t=localStorage.getItem(e);if(!t)return new Set;const n=JSON.parse(t);return Array.isArray(n)?new Set(n.map(String)):new Set}catch{return new Set}}function Ta(e,t){try{localStorage.setItem(e,JSON.stringify(Array.from(t)))}catch{}}function Uf({open:e,title:t,body:n,confirmText:r,cancelText:s,onConfirm:l,onCancel:o,danger:a}){return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center p-4 sm:items-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:o}),i.jsxs("div",{className:"relative w-full max-w-md overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-2xl",children:[i.jsxs("div",{className:"space-y-2 p-5",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:t}),i.jsx("div",{className:"text-sm text-slate-600",children:n})]}),i.jsxs("div",{className:"flex gap-2 p-4 pt-0",children:[i.jsx("button",{className:"flex-1 rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 hover:bg-slate-50",onClick:o,children:s}),i.jsx("button",{className:`flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold text-white ${a?"bg-rose-600 hover:bg-rose-700":"bg-violet-600 hover:bg-violet-700"}`,onClick:l,children:r})]})]})]}):null}function lw({students:e,periodId:t,driveFileId:n,driveClient:r,driveSession:s}){const l=n??"local",o=`cs_mobile_flashcards_learned_v1:${l}:${t}`,[a,c]=p.useState(!1),[d,y]=p.useState(()=>Ff(o)),S=p.useRef(d);p.useEffect(()=>{S.current=d},[d]),p.useEffect(()=>{const G=Ff(o);S.current=G,y(G),c(!1)},[o]);const x=e.length,[j,b]=p.useState([]),[k,J]=p.useState(0),[m,f]=p.useState(!1),[g,C]=p.useState(null),[A,O]=p.useState(null),M=p.useMemo(()=>{if(a)return e;const G=d;return e.filter(Z=>!G.has(Ot(Z.id))||Ot(Z.id)===g)},[e,a,d,g]),z=p.useMemo(()=>e.map(G=>Ot(G.id)).join("|"),[e]),ce=p.useMemo(()=>M.map(G=>Ot(G.id)).join("|"),[M]),X=p.useMemo(()=>{const G=new Set(e.map(le=>Ot(le.id)));let Z=0;return d.forEach(le=>{G.has(le)&&Z++}),Z},[e,d]),we=Math.max(0,x-X),[qe,lt]=p.useState(!1),[re,Ze]=p.useState(!1);p.useEffect(()=>{const G=S.current,Z=(a?e:e.filter(le=>!G.has(Ot(le.id)))).map(le=>Ot(le.id));b(Z),J(0),f(!1),C(null),O(null)},[a,t,l,z]),p.useEffect(()=>{const G=new Set(M.map(Z=>Ot(Z.id)));b(Z=>{const le=Z.filter(Pe=>G.has(Pe));return le.length===Z.length?Z:(J(Pe=>Math.min(Pe,Math.max(0,le.length-1))),le)})},[ce]);const V=p.useMemo(()=>new Map(M.map(G=>[Ot(G.id),G])),[M]),he=j[k]??null,T=he?V.get(he)??null:null,{photoUrl:Y}=Ph({studentId:(T==null?void 0:T.id)??"unknown",fullName:(T==null?void 0:T.fullName)??null,photoFileId:(T==null?void 0:T.photoFileId)??null,photoUpdatedAt:(T==null?void 0:T.photoUpdatedAt)??null,driveClient:r,driveSession:s}),q=G=>!he||g!==he||a?!1:(b(Z=>{const le=Z.filter(Pe=>Pe!==he);return J(Pe=>le.length===0?0:G==="prev"?Math.max(0,Pe-1):Math.min(Pe,le.length-1)),le}),C(null),!0),pe=()=>{f(!1),O(null),!q("next")&&J(G=>j.length===0?0:Math.min(G+1,j.length-1))},me=()=>{f(!1),O(null),!q("prev")&&J(G=>Math.max(0,G-1))},Wt=()=>{if(!T)return;const G=Ot(T.id);O(null),y(Z=>{const le=new Set(Z);return le.add(G),Ta(o,le),le}),C(G)},L=()=>{if(!T)return;const G=Ot(T.id);C(null),O(Z=>Z===G?null:G),y(Z=>{if(!Z.has(G))return Z;const le=new Set(Z);return le.delete(G),Ta(o,le),le})},Ke=()=>{lt(!1),f(!1),C(null),O(null),b(G=>sw(G)),J(0)},Ue=()=>{Ze(!1),f(!1),C(null),O(null);const G=new Set;y(G),Ta(o,G);const Z=e.map(le=>Ot(le.id));b(Z),J(0)},Be=!a&&we===0&&x>0;return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Flashcards"}),i.jsxs("div",{className:"text-xs text-slate-600",children:["Learned ",X," / ",x,"  Remaining ",we]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:j.length<2,onClick:()=>lt(!0),children:"Shuffle"}),i.jsx("button",{className:`rounded-xl border px-3 py-2 text-xs font-semibold ${a?"border-violet-200 bg-violet-50 text-violet-900":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}`,onClick:()=>{c(G=>!G),f(!1),C(null),O(null)},children:a?"Including learned":"Include learned"}),i.jsx("button",{className:"rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>Ze(!0),children:"Clear learned"})]})]}),Be?i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center space-y-2",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:"All learned!"}),i.jsx("div",{className:"text-sm text-slate-600",children:"Youve marked everyone in this period as learned."}),i.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[i.jsx("button",{className:"rounded-xl bg-violet-600 px-4 py-3 text-sm font-semibold text-white hover:bg-violet-700",onClick:()=>c(!0),children:"Review learned students"}),i.jsx("button",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>Ze(!0),children:"Clear learned for this period"})]})]}):i.jsx("div",{className:"space-y-3",children:T?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative w-full",style:{perspective:1200},children:i.jsx("button",{type:"button",onClick:()=>f(G=>!G),className:"w-full text-left","aria-label":"Flip flashcard",children:i.jsxs("div",{className:"relative h-[380px] w-full",style:{transformStyle:"preserve-3d",transition:"transform 420ms cubic-bezier(0.2, 0.8, 0.2, 1)",transform:m?"rotateY(180deg)":"rotateY(0deg)"},children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-xl",style:{backfaceVisibility:"hidden"},children:i.jsxs("div",{className:"h-full w-full bg-slate-50 flex items-center justify-center",children:[Y?i.jsx("img",{src:Y,alt:"",className:"h-full w-full object-cover"}):i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-slate-200 text-2xl font-bold text-slate-700",children:T.fullName.split(" ").slice(0,2).map(G=>{var Z;return((Z=G[0])==null?void 0:Z.toUpperCase())??""}).join("")}),i.jsx("div",{className:"mt-3 text-sm text-slate-500",children:"No photo"})]}),i.jsx("div",{className:"absolute bottom-3 left-0 right-0 text-center text-xs font-semibold text-slate-500",children:"Tap to flip"})]})}),i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-xl",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:i.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center p-6 text-center",children:[i.jsx("div",{className:"text-2xl font-bold leading-tight text-slate-900",children:T.fullName}),i.jsx("div",{className:"mt-2 text-sm text-slate-600",children:"Tap again to see photo"}),i.jsxs("div",{className:"mt-6 w-full max-w-sm space-y-2",children:[i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${g===he?"bg-emerald-600 text-white hover:bg-emerald-700":"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,onClick:G=>{G.preventDefault(),G.stopPropagation(),Wt()},children:" Ive learned this"}),i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${A===he?"bg-violet-600 text-white hover:bg-violet-700":"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,onClick:G=>{G.preventDefault(),G.stopPropagation(),L()},children:" Still learning"})]})]})})]})})}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("button",{className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:k===0,onClick:me,children:"Prev"}),i.jsx("div",{className:"px-2 text-xs font-semibold text-slate-500",children:j.length===0?"0 / 0":`${k+1} / ${j.length}`}),i.jsx("button",{className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:j.length===0||k>=j.length-1,onClick:pe,children:"Next"})]})]}):i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center space-y-2",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:"No students found."}),i.jsx("div",{className:"text-sm text-slate-600",children:"This period doesnt have any students yet."})]})}),i.jsx(Uf,{open:qe,title:"Shuffle deck?",body:"This will randomize the order of the current deck once.",confirmText:"Shuffle",cancelText:"Cancel",onConfirm:Ke,onCancel:()=>lt(!1)}),i.jsx(Uf,{open:re,title:"Clear learned students?",body:"This resets learned progress for this period on this device.",confirmText:"Clear",cancelText:"Cancel",danger:!0,onConfirm:Ue,onCancel:()=>Ze(!1)})]})}const ow=.85,iw=900,aw=1200,uw=4,cw=60,dw=160;function fw({studentId:e,studentFullName:t,existingPhotoFileId:n,open:r,onClose:s,onAccept:l,onUploadComplete:o,title:a="Take Photo"}){const c=Th(),d=p.useRef(null),y=p.useRef(null),S=p.useRef(null),x=p.useRef(null),j=p.useRef(null),b=p.useRef(!1),k=p.useRef(new Map),J=p.useRef(null),m=p.useRef(null),f=p.useRef(1),g=p.useRef(null),C=p.useRef(null),[A,O]=p.useState(null),[M,z]=p.useState(!1),[ce,X]=p.useState(!1),[we,qe]=p.useState(!1),[lt,re]=p.useState(1),[Ze,V]=p.useState(!1),[he,T]=p.useState(!1),Y=p.useRef(null),q=p.useMemo(()=>{if(typeof navigator>"u")return{isIOS:!1,isAndroid:!1};const F=navigator.userAgent||"",U=/iPad|iPhone|iPod/i.test(F)||F.includes("Mac")&&typeof document<"u"&&"ontouchend"in document,K=/Android/i.test(F);return{isIOS:U,isAndroid:K}},[]),pe=()=>{k.current.clear(),J.current=null,g.current&&(cancelAnimationFrame(g.current),g.current=null),C.current=null},me=()=>{x.current=null,m.current=null,f.current=1,re(1),qe(!1),pe()},Wt=()=>(Y.current||(Y.current=document.createElement("canvas")),Y.current),L=F=>{const U=Wt(),K=U.getContext("2d");if(!K)return 0;const Q=dw,te=Math.max(F.width,F.height)/Q,de=Math.max(1,Math.round(F.width/(te||1))),ke=Math.max(1,Math.round(F.height/(te||1)));U.width=de,U.height=ke,K.drawImage(F,0,0,de,ke);const _e=K.getImageData(0,0,de,ke).data;let Ae=0;for(let et=0;et<ke;et++){const _s=et*de*4;for(let Le=0;Le<de;Le++){const Kt=_s+Le*4,Ts=(_e[Kt]+_e[Kt+1]+_e[Kt+2])/3;if(Le<de-1){const Rt=Kt+4,Dr=(_e[Rt]+_e[Rt+1]+_e[Rt+2])/3;Ae+=Math.abs(Ts-Dr)}if(et<ke-1){const Rt=Kt+de*4,Dr=(_e[Rt]+_e[Rt+1]+_e[Rt+2])/3;Ae+=Math.abs(Ts-Dr)}}}return Ae},Ke=F=>{const{width:U,height:K}=F;if(!U||!K)return F;const Q=iw/U,te=aw/K,de=Math.min(1,Q,te);if(de>=.999)return F;const ke=Math.max(1,Math.round(U*de)),_e=Math.max(1,Math.round(K*de)),Ae=document.createElement("canvas");Ae.width=ke,Ae.height=_e;const et=Ae.getContext("2d");return et?(et.drawImage(F,0,0,ke,_e),Ae):F},Ue=async F=>new Promise(U=>{F.toBlob(K=>{if(K){U(K);return}F.toBlob(Q=>U(Q),"image/png")},"image/jpeg",ow)}),Be=async F=>{const U=Ke(F);return Ue(U)},G=async F=>{try{const U=await createImageBitmap(F),K=document.createElement("canvas");K.width=U.width,K.height=U.height;const Q=K.getContext("2d");if(!Q)return null;if(Q.drawImage(U,0,0),"close"in U)try{U.close()}catch{}return K}catch{return new Promise(U=>{const K=URL.createObjectURL(F),Q=new Image;Q.onload=()=>{const te=document.createElement("canvas");te.width=Q.naturalWidth||Q.width,te.height=Q.naturalHeight||Q.height;const de=te.getContext("2d");if(URL.revokeObjectURL(K),!de){U(null);return}de.drawImage(Q,0,0),U(te)},Q.onerror=()=>{URL.revokeObjectURL(K),U(null)},Q.src=K})}},Z=async(F,U)=>{const K=d.current,Q=y.current;if(!K||!Q)return null;const te=K.videoWidth,de=K.videoHeight;if(!te||!de)return null;Q.width=te,Q.height=de;const ke=Q.getContext("2d");if(!ke)return null;let _e=-1/0,Ae=null;for(let et=0;et<F;et++){if(!b.current)return null;et===0?await new Promise(Le=>requestAnimationFrame(()=>Le())):U>0&&await new Promise(Le=>setTimeout(Le,U)),ke.drawImage(K,0,0,te,de);const _s=L(Q);if(_s>=_e){_e=_s,Ae||(Ae=document.createElement("canvas")),Ae.width=te,Ae.height=de;const Le=Ae.getContext("2d");Le&&Le.drawImage(Q,0,0,te,de)}}return Ae||Q},le=async()=>{if(typeof window>"u")return null;const F=x.current,U=window.ImageCapture;if(!F||!U)return null;try{const K=new U(F);return typeof K.takePhoto!="function"?null:await K.takePhoto()}catch{return null}},Pe=()=>{S.current&&(S.current.getTracks().forEach(F=>F.stop()),S.current=null),d.current&&(d.current.srcObject=null),me()},dn=()=>{A&&URL.revokeObjectURL(A),j.current=null,O(null)},Vt=()=>{Pe(),dn(),z(!1),V(!1),T(!1),s()},Tn=F=>{const U=m.current;if(!U)return F;let K=Math.min(U.max,Math.max(U.min,F));if(typeof U.step=="number"&&U.step>0){const Q=Math.round((K-U.min)/U.step);K=U.min+Q*U.step,K=Math.min(U.max,Math.max(U.min,K))}return K},lr=F=>{const U=x.current;if(!U)return;const K=Tn(F);C.current=K,!g.current&&(g.current=requestAnimationFrame(()=>{g.current=null;const Q=C.current;C.current=null,typeof Q=="number"&&U.applyConstraints({advanced:[{zoom:Q}]}).then(()=>{f.current=Q,re(Q)}).catch(()=>{})}))},Ht=async F=>{var U,K;X(!0),z(!1),me();try{let Q;try{Q=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"},width:{ideal:1280},height:{ideal:960},frameRate:{ideal:30}},audio:!1})}catch{Q=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}if(!F()){Q.getTracks().forEach(de=>de.stop());return}S.current=Q;const te=Q.getVideoTracks()[0]||null;if(x.current=te,te){const de=(U=te.getCapabilities)==null?void 0:U.call(te),ke=de==null?void 0:de.zoom;if(ke&&typeof ke.min=="number"&&typeof ke.max=="number"){m.current={min:ke.min,max:ke.max,step:typeof ke.step=="number"?ke.step:void 0};const _e=(K=te.getSettings)==null?void 0:K.call(te),Ae=typeof(_e==null?void 0:_e.zoom)=="number"?_e.zoom:ke.min,et=Tn(Ae);f.current=et,re(et),qe(!0)}}if(d.current){d.current.srcObject=Q;try{await d.current.play()}catch{}}}catch{F()&&z(!0),Pe()}finally{F()&&X(!1)}};p.useEffect(()=>{let F=!0;return b.current=r,r?Ht(()=>F):(Pe(),dn(),z(!1),T(!1)),()=>{F=!1,b.current=!1,Pe(),dn(),z(!1),T(!1)}},[r]);const fn=async()=>{if(!he){T(!0);try{let F=null;if(q.isAndroid){const K=await le();if(K){const Q=await G(K);Q&&(F=await Be(Q))}}if(!F){const K=q.isIOS?uw:1,Q=q.isIOS?cw:0,te=await Z(K,Q);te&&(F=await Be(te))}if(!F)return;j.current=F;const U=URL.createObjectURL(F);O(U),Pe()}finally{T(!1)}}},Ir=async()=>{if(Ze)return;const F=j.current;if(F){l(F),V(!0);try{const U=n?null:await mx({studentId:e,fullName:t}),K=await Ly({studentId:e,studentFullName:t,jpegBlob:F,fileId:n||(U==null?void 0:U.fileId)}),Q=Date.now();await hx({studentId:e,fullName:t,fileId:K.fileId,updatedTime:K.modifiedTime,photoUpdatedAt:Q,blob:F}),o==null||o({fileId:K.fileId,photoUpdatedAt:Q}),Vt()}catch(U){V(!1);const Q=(U instanceof Error?U.message:"").toLowerCase();Q.includes("sign in")&&Q.includes("drive")?c({message:"Please reconnect Google Drive to upload photos.",tone:"error"}):c({message:"Couldn't upload the photo. Your preview is still saved here - try again.",tone:"error"})}}},Ul=()=>{dn(),T(!1),Ht(()=>b.current)},ot=F=>{if(!(!we||A)&&(F.preventDefault(),F.currentTarget.setPointerCapture(F.pointerId),k.current.set(F.pointerId,{x:F.clientX,y:F.clientY}),k.current.size===2)){const U=Array.from(k.current.values()),K=Math.hypot(U[0].x-U[1].x,U[0].y-U[1].y);J.current={initialDistance:K,initialZoom:f.current}}},Oi=F=>{if(!we||A||!k.current.has(F.pointerId)||(F.preventDefault(),k.current.set(F.pointerId,{x:F.clientX,y:F.clientY}),k.current.size<2||!J.current))return;const U=Array.from(k.current.values()),K=Math.hypot(U[0].x-U[1].x,U[0].y-U[1].y);if(J.current.initialDistance<=0)return;const Q=K/J.current.initialDistance,te=J.current.initialZoom*Q;lr(te)},Rr=F=>{we&&(k.current.delete(F.pointerId),k.current.size<2&&(J.current=null))};if(!r)return null;const Gt=we&&!A;return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:Vt}),i.jsxs("div",{className:"relative w-full max-w-md rounded-2xl bg-white p-4 shadow-2xl space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-800",children:a}),i.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700",onClick:Vt,"aria-label":"Close",children:""})]}),M?i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Camera unavailable. Check permissions and try again."}),i.jsx("button",{type:"button",className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:Vt,children:"Close"})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full aspect-[3/4] rounded-xl bg-slate-100 overflow-hidden flex items-center justify-center",onPointerDown:Gt?ot:void 0,onPointerMove:Gt?Oi:void 0,onPointerUp:Gt?Rr:void 0,onPointerCancel:Gt?Rr:void 0,style:Gt?{touchAction:"none"}:void 0,children:A?i.jsx("img",{src:A,alt:"",className:"w-full h-full object-cover"}):i.jsx("video",{ref:d,className:"w-full h-full object-cover",playsInline:!0,muted:!0})}),A?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2 text-sm disabled:opacity-50",onClick:Ul,disabled:Ze,children:"Retake"}),i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2 text-sm disabled:opacity-50",onClick:Ir,disabled:Ze,children:Ze?"Uploading...":"Accept"})]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2 text-sm disabled:opacity-50",onClick:fn,disabled:ce||he,children:he?"Capturing...":"Take Photo"}),i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2 text-sm",onClick:Vt,children:"Cancel"})]})]})]}),i.jsx("canvas",{ref:y,className:"hidden"})]})}const zf=!1,$f="569",pw="https://app.classseats.app",No="cs_mobile_last_drive_file",Bf="cs_mobile_students_mode_v1",Wf="cs_mobile_notes_sort_v1",Vf="cs_mobile_table_sort_v1",Hf="cs_mobile_seat_number_sort_v1";function mw({student:e,attendance:t,points:n,pointsEnabled:r,maxPoints:s,hasNote:l,absenceStreak:o,tardyCount:a,onShowAbsenceHelp:c,onShowTardyHelp:d,seatNumber:y,showSeatNumber:S=!1,statusBg:x,statusLabel:j,tempPhotoUrl:b,onOpenPhoto:k,onOpenMenu:J,driveClient:m,driveSession:f}){const g=Ih(n,s),{photoUrl:C}=Ph({studentId:e.id,fullName:e.fullName,photoFileId:e.photoFileId,photoUpdatedAt:e.photoUpdatedAt,driveClient:m,driveSession:f}),[A,...O]=(e.fullName||"").split(" "),M=O.join(" "),z=(()=>{switch(t){case"present":return"";case"absent":return"";case"tardy":return"";case"left_early":return"";default:return""}})(),ce=j(t),X=b||C,we=t==="absent"&&(o||0)>=2,qe=t==="tardy"&&(a||0)>0;return i.jsx("div",{className:`w-full rounded-2xl border px-4 py-3 shadow-sm ${x(t)}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[S&&i.jsx("div",{className:"flex h-[80px] w-8 shrink-0 items-center justify-center text-sm font-semibold text-slate-500",children:y||""}),i.jsx(ry,{studentId:e.id,hasPhoto:!!X,src:X,onClick:k,widthPx:60,heightPx:80}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"text-left min-w-0 flex-1",children:[i.jsx("div",{className:"text-base font-bold text-slate-900 leading-tight break-words",children:A}),i.jsx("div",{className:"text-base font-bold text-slate-900 leading-tight break-words",children:M||""})]}),i.jsx("button",{className:"text-xl text-slate-600 px-3 py-2 rounded-full hover:bg-slate-200 flex-shrink-0",onClick:lt=>{lt.stopPropagation(),J()},children:""})]}),i.jsxs("div",{className:"mt-1 flex items-center justify-between text-sm px-1",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:z}),i.jsx("span",{className:"text-slate-700",children:ce})]}),(we||qe)&&i.jsxs("div",{className:"flex items-center gap-2",children:[we&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-rose-700 bg-rose-100 border border-rose-200 rounded px-1.5 py-0.5",onClick:c,children:["A",o]}),qe&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-amber-700 bg-amber-100 border border-amber-200 rounded px-1.5 py-0.5",onClick:d,children:["T",a]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[r&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-lg",children:g.emoji}),i.jsx("span",{className:"text-emerald-700 font-semibold",children:n})]}),l&&i.jsx("span",{className:"text-indigo-600 text-lg",children:""})]})]})]})]})})}function hw(e,t,n){var S,x,j;if(!(e!=null&&e.activeGrouping)||!(e!=null&&e.tableAssignments))return null;let r=-1,s=-1;if(e.activeGrouping.forEach((b,k)=>{const J=b==null?void 0:b.findIndex(m=>String(m)===String(n));J!==-1&&(r=k,s=J)}),r===-1||s===-1)return null;const l=e.tableAssignments[String(r)];if(!l)return null;const o=String(l),a=((S=e.tableNumbering)==null?void 0:S.perTableSeatNumbers)&&e.tableNumbering.perTableSeatNumbers[o],c=(j=(x=t==null?void 0:t.tables)==null?void 0:x.find(b=>String(b.id)===o))==null?void 0:j.seatNumbers,d=a||c;if(!d)return null;const y=d[s];return y!=null?String(y):null}function gw(){var ud,cd,dd;const e=Th(),t=Qx(),n=p.useMemo(()=>ny(),[]),r=p.useMemo(()=>({kind:"web",openExternal:u=>typeof window<"u"?window.open(u,"_blank","noopener,noreferrer"):null}),[]),s=!n.canUseDriveSync,l="Drive sync is disabled.",[o,a]=p.useState(null),[c,d]=p.useState([]),[y,S]=p.useState(!1),[x,j]=p.useState(null),[b,k]=p.useState(()=>s?l:null),[J,m]=p.useState(!1),[f,g]=p.useState(null),[C,A]=p.useState(!1),[O,M]=p.useState([]),[z,ce]=p.useState(""),[X,we]=p.useState(!1),[qe,lt]=p.useState(!1),[re,Ze]=p.useState(null),[V,he]=p.useState(null),[T,Y]=p.useState(!1),[q,pe]=p.useState(!1),[me,Wt]=p.useState(null),[L,Ke]=p.useState(null),[Ue,Be]=p.useState({}),[G,Z]=p.useState({}),[le,Pe]=p.useState({}),[dn,Vt]=p.useState({}),[Tn,lr]=p.useState(null),[Ht,fn]=p.useState({note:"",delta:0,reason:""}),[Ir,Ul]=p.useState(""),[ot,Oi]=p.useState({pointsEnabled:!1,startingPoints:50,currentPoints:0,predictedPoints:0}),[Rr,Gt]=p.useState(null),[F,U]=p.useState(""),[K,Q]=p.useState(null),[te,de]=p.useState(null),[ke,_e]=p.useState({}),Ae=p.useRef({}),[et,_s]=p.useState({}),[Le,Kt]=p.useState(null),[Ts,Rt]=p.useState(0),[Dr,zl]=p.useState(null),[Dc,Mi]=p.useState(""),[pt,$l]=p.useState(null),[Ew,Lh]=p.useState([]),[Pw,Ac]=p.useState(!1),[_w,Fi]=p.useState(null),[Tw,Iw]=p.useState(!1),[Oe,Qt]=p.useState(null),[Dt,Lc]=p.useState(null),[Oc,Mc]=p.useState(null),[In,Is]=p.useState(null),[Fc,Rs]=p.useState(null),[Ds,Uc]=p.useState(!1),[Bl,As]=p.useState(null),[pn,it]=p.useState(!1),[Rw,mn]=p.useState(null),Ui=typeof navigator<"u"?navigator.onLine:!0,[zc,Ls]=p.useState(Ui),[$c,zi]=p.useState(Ui),[We,Os]=p.useState(!Ui),Oh=p.useRef(null),Mh=p.useRef(!1),Rn=p.useRef(!1),Fh=p.useRef(15e3),Uh=p.useRef(0),Bc=p.useRef(!1),Dn=p.useRef(!1),Ar=p.useRef(!1),$i=p.useRef(new Set),kt=p.useRef(null),Wc=p.useRef(null),Vc=p.useRef(void 0),Hc=p.useRef(null),Bi=()=>{const u=new Date,h=u.getFullYear(),v=String(u.getMonth()+1).padStart(2,"0"),N=String(u.getDate()).padStart(2,"0");return`${h}-${v}-${N}`},[oe,Wl]=p.useState(Bi()),[or,zh]=p.useState("table"),[jt,Wi]=p.useState(()=>{try{const u=localStorage.getItem(Bf);return u==="notes"||u==="flashcards"?u:"attendance"}catch{return"attendance"}});p.useEffect(()=>{try{localStorage.setItem(Bf,jt)}catch{}},[jt]);const[Vl,$h]=p.useState(()=>{try{return localStorage.getItem(Wf)==="last-first"?"last-first":"first-last"}catch{return"first-last"}});p.useEffect(()=>{try{localStorage.setItem(Wf,Vl)}catch{}},[Vl]);const[Ms,Bh]=p.useState(()=>{try{return localStorage.getItem(Vf)==="desc"?"desc":"asc"}catch{return"asc"}});p.useEffect(()=>{try{localStorage.setItem(Vf,Ms)}catch{}},[Ms]);const[Hl,Wh]=p.useState(()=>{try{return localStorage.getItem(Hf)==="desc"?"desc":"asc"}catch{return"asc"}});p.useEffect(()=>{try{localStorage.setItem(Hf,Hl)}catch{}},[Hl]);const Vh=p.useMemo(()=>new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),[]);p.useEffect(()=>{Ae.current=ke},[ke]),p.useEffect(()=>()=>{Object.values(Ae.current).forEach(u=>URL.revokeObjectURL(u))},[]);const[mt,ir]=p.useState(!1),ar=p.useRef(0),bt=p.useRef(null),Gc=p.useRef({}),Kc=p.useRef({}),Gl=p.useRef(null),Kl=p.useRef(!1),Vi=p.useRef(!1),[Qc,Fs]=p.useState(!1),Ql=p.useRef(0),hn=p.useRef(null),Yc=1500,Us=p.useRef(null),Hi=p.useCallback(u=>u?Gc.current[u]??null:null,[]),ht=p.useCallback((u,h)=>{u&&(Gc.current[u]=h||null)},[]),Yl=p.useCallback(u=>u||"__local__",[]),Jc=p.useCallback(u=>Kc.current[Yl(u)]??null,[Yl]),ur=p.useCallback((u,h)=>{h&&(Kc.current[Yl(u)]=h)},[Yl]),Gi=u=>{var h;return JSON.stringify({periodsState:((h=u.periodsState)==null?void 0:h.periods)||[],students:u.students||[]})},cr=p.useRef(0),[Dw,zs]=p.useState("unknown"),[Aw,Ki]=p.useState(0);p.useCallback(async()=>{const u=await ps(o);return u&&a(u),u},[o]);const rn=p.useCallback(u=>{const h=`${new Date().toISOString()} ${u}`;M(v=>[h,...v].slice(0,200))},[]);p.useEffect(()=>{s&&k(l)},[l,s]);const Hh=p.useCallback(async()=>{var h;const u=await my();if(g(u),rn(`startup info: state=${u.state} sessionLoaded=${u.sessionLoaded} hasRefresh=${u.hasRefresh} expiresAt=${u.expiresAt} source=${u.source} lastWriteAt=${u.lastWriteAt} lastWriteReason=${u.lastWriteReason}`),u.state==="ok"){const v=await vy();v&&(a(v),(h=v.profile)!=null&&h.email&&k(null))}return u},[rn]),Lr=p.useCallback(async u=>{const h=(o==null?void 0:o.expiresAt)||null,v=await ps(o);return rn(`${u}: ensureFreshDriveSession ok=${!!v} before=${h} new=${v==null?void 0:v.expiresAt} hasRefresh=${!!(v!=null&&v.refreshToken)}`),v&&(a(v),m(!1)),v},[o,rn]),Gh=p.useCallback(()=>{Ql.current+=1,hn.current&&window.clearTimeout(hn.current),hn.current=window.setTimeout(()=>{Ql.current=0,hn.current=null},2e3),Ql.current>=5&&(A(u=>!u),Ql.current=0,hn.current&&(window.clearTimeout(hn.current),hn.current=null))},[]),Kh=()=>{const u=new URL(pw);new URL(window.location.href).searchParams.forEach((v,N)=>u.searchParams.set(N,v)),u.searchParams.set("from","mobile"),window.location.assign(u.toString())},Qh=u=>{var N,w;if(!L)return;const h=L.students.find(P=>String(P.id)===String(u));if(!h)return;const v=((N=h.periodIds)==null?void 0:N[0])||pt||((w=L.periods[0])!=null&&w.id?String(L.periods[0].id):"");Is({name:h.fullName,gender:h.gender||"F",periodId:v?String(v):""}),Mc({id:String(u)})},Jl=()=>{Mc(null),Is(null)},Yh=u=>{if(!L)return;const h=L.students.find(N=>String(N.id)===String(u));!h||!window.confirm(`Delete ${h.fullName}? This removes them from this class list.`)||($i.current.add(String(u)),Ke(N=>{if(!N)return N;const w=N.students.filter(_=>String(_.id)!==String(u)),P=N.periods.map(_=>{const D={..._.attendance||{}};Object.keys(D).forEach(ge=>{const R={...D[ge]||{}};delete R[String(u)],Object.keys(R).length===0?delete D[ge]:D[ge]=R});const E={..._.behaviorNotes||{}};Object.keys(E).forEach(ge=>{const R={...E[ge]||{}};delete R[String(u)],Object.keys(R).length===0?delete E[ge]:E[ge]=R});const B={..._.pointsByStudent||{}};delete B[String(u)];const H={..._.attendanceResets||{}};delete H[String(u)];const ie=_.activeGrouping?_.activeGrouping.map(ge=>ge.filter(R=>String(R)!==String(u))):_.activeGrouping;return{..._,attendance:D,behaviorNotes:E,pointsByStudent:B,attendanceResets:H,activeGrouping:ie}});return{...N,students:w,periods:P}}),Be(N=>{const w={...N||{}};return Object.keys(w).forEach(P=>{if(w[P]){const _={...w[P]||{}};delete _[String(u)],w[P]=_}}),w}),Z(N=>{const w={...N||{}};return Object.keys(w).forEach(P=>{if(w[P]){const _={...w[P]||{}};delete _[String(u)],w[P]=_}}),w}),Pe(N=>{const w={...N||{}};return Object.keys(w).forEach(P=>{if(w[P]){const _={...w[P]||{}};delete _[String(u)],w[P]=_}}),w}),Vt(N=>{const w={...N||{}};return Object.keys(w).forEach(P=>{w[P]=(w[P]||[]).filter(_=>String(_.studentId)!==String(u))}),w}),at(),gt({silent:!0}),Qt(null),Lc(null),Jl())};p.useEffect(()=>()=>{hn.current&&window.clearTimeout(hn.current)},[]),p.useEffect(()=>{Os(!zc||!$c)},[zc,$c]);const Xc=p.useCallback(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("classseats_debug_drive")==="1"}catch{return!1}},[]),$s=p.useCallback(u=>{Xc()&&console.debug(u.startsWith("[Ping]")?u:`[Ping] ${u}`)},[Xc]);p.useEffect(()=>{Rn.current=!1;const u=Oh,h=Mh,v=Fh,N=Uh,w=()=>{u.current&&(window.clearTimeout(u.current),u.current=null)},P=H=>{if(Rn.current)return;w();const ie=typeof H=="number"?H:v.current;$s(`[Ping] next ${ie}`),u.current=window.setTimeout(()=>{u.current=null,_()},ie)},_=async()=>{if(Rn.current)return;if(N.current=Date.now(),$s("[Ping] tick"),typeof document<"u"&&document.visibilityState!=="visible"){P(5e3);return}if(h.current){P(2e3);return}h.current=!0;const H=new AbortController,ie=window.setTimeout(()=>H.abort(),5e3),ge=(()=>{try{return new URL(`/ping.txt?t=${Date.now()}`,window.location.origin).toString()}catch{return`/ping.txt?t=${Date.now()}`}})();let R=!1;try{const W=await fetch(ge,{cache:"no-store",signal:H.signal});R=!!(W!=null&&W.ok),R?(Ls(!0),zi(!0),Os(!1),v.current=15e3,$s("[Ping] ok")):(Ls(!1),zi(!1),Os(!0),v.current=Math.min(6e4,v.current*2),$s(`[Ping] fail status=${W==null?void 0:W.status}`))}catch(W){Ls(!1),zi(!1),Os(!0),v.current=Math.min(6e4,v.current*2),$s(`[Ping] fail ${(W==null?void 0:W.message)||W}`)}finally{window.clearTimeout(ie),h.current=!1,Rn.current||P()}},D=()=>{Rn.current||(Ls(!0),_())},E=()=>{Rn.current||(Ls(!1),Os(!0),P(2e3))},B=()=>{Rn.current||typeof document<"u"&&document.visibilityState==="visible"&&_()};return _(),window.addEventListener("online",D),window.addEventListener("offline",E),document.addEventListener("visibilitychange",B),()=>{Rn.current=!0,w(),window.removeEventListener("online",D),window.removeEventListener("offline",E),document.removeEventListener("visibilitychange",B)}},[]),p.useEffect(()=>{if(!L)return;const u=Vc.current!==L.periods,h=Hc.current!==oe;!u&&!h||(Vc.current=L.periods,Hc.current=oe,Be(L.periods.reduce((v,N)=>{var w;return v[N.id]=(w=N.attendance)!=null&&w[oe]?{...N.attendance[oe]}:{},v},{})),Z(L.periods.reduce((v,N)=>(v[N.id]=Qi(N.behaviorNotes,oe),v),{})))},[L,oe]);const qc=p.useCallback(u=>{const h={};return!u||typeof u!="object"||Object.entries(u).forEach(([v,N])=>{if(!N||typeof N!="object")return;const w={},P=N.note&&typeof N.note=="object"?N.note:N;Object.entries(P).forEach(([_,D])=>{D&&typeof D=="object"&&typeof D.note=="string"&&(w[String(_)]={note:D.note,timestamp:D.timestamp||new Date().toISOString()})}),Object.keys(w).length>0&&(h[v]=w)}),h},[]),Or=u=>e({tone:"success",message:u}),Qe=u=>e({tone:"error",message:u}),Mr=u=>e({tone:"info",message:u}),Bs=["unmarked","absent","tardy","left_early","present"],Xl=p.useCallback(u=>{if(!u)return!1;const h=u.toLowerCase();return h.includes("401")||h.includes("unauthorized")||h.includes("403")||h.includes("sign in with google drive first")},[]),Jh=u=>{switch(u){case"present":return"bg-emerald-50 border-emerald-100";case"absent":return"bg-rose-50 border-rose-100";case"tardy":return"bg-amber-50 border-amber-100";case"left_early":return"bg-blue-50 border-blue-100";default:return"bg-slate-50 border-slate-200"}},Qi=(u,h)=>{const v=u==null?void 0:u[h];if(!v||typeof v!="object")return{};const N=v.note&&typeof v.note=="object"?v.note:v,w={};return Object.entries(N||{}).forEach(([P,_])=>{_&&typeof _=="object"&&typeof _.note=="string"&&(w[String(P)]=_.note)}),w},Zc=u=>{switch(u){case"present":return"Present";case"absent":return"Absent";case"tardy":return"Tardy";case"left_early":return"Left Early";default:return"Unmarked"}},Yi=(u,h)=>Ih(u,h).emoji,Xh=()=>`${Date.now()}-${Math.random().toString(36).slice(2)}`,qh=u=>{const h=String(u.getMonth()+1).padStart(2,"0"),v=String(u.getDate()).padStart(2,"0");return`${h}-${v}-${u.getFullYear()}`},Ji=u=>`https://docs.google.com/document/d/${u}/edit`,Xi=p.useCallback(u=>{if(!u)return;const h=Date.now(),v=Wc.current;if(v&&v.url===u&&h-v.at<600)return;Wc.current={url:u,at:h};try{if(r!=null&&r.openExternal){r.openExternal(u);return}}catch{}window.open(u,"_blank","noopener,noreferrer")||k==null||k("Pop-up blocked  please allow pop-ups to open Google Docs.")},[r]),An=p.useCallback(u=>qx(u),[]),Re=p.useCallback(async(u,h="preflight")=>{if(s)return k(l),null;if(We)return k("Offline  will sync when back online."),m(!0),rn(`${h}: offline; skipping refresh`),null;try{const v=await Lr(h);if(v)return v}catch(v){console.warn("[Drive] refresh failed",v),rn(`${h}: refresh failed ${(v==null?void 0:v.message)||v}`)}if(!u)return m(!0),k("Reconnect to Google Drive to continue syncing."),rn(`${h}: interactive=false; would trigger OAuth if allowed`),null;rn(`triggerOAuth: reason=${h} hadSession=${!!o} hasRefresh=${!!(o!=null&&o.refreshToken)}`);try{await by()}catch(v){Qe((v==null?void 0:v.message)||"Google sign-in was cancelled.")}return null},[l,o,s,Qe,We,rn,Lr]),ql=p.useCallback(async(u,h,v)=>{let N=!1;const w=async()=>{let P=v;if(P||(P=await Re(!0,`${h}-download`)),!P)throw new Error("Reconnect to Google Drive to continue.");try{return{data:await Ea(P.accessToken,u)}}catch(_){const D=(_==null?void 0:_.message)||"";if(!N&&Xl(D))return N=!0,qs("[Drive][Mobile] auth error on download, retrying once",{context:h,error:D}),v=null,w();throw _}};return w()},[Re,Xl]),ed=p.useCallback(async(u,h,v,N)=>{let w=!1;const P=async()=>{let _=N;if(_||(_=await Re(!0,`${v}-upload`)),!_)throw new Error("Reconnect to Google Drive to continue.");try{return await My(_.accessToken,u,h)}catch(D){const E=(D==null?void 0:D.message)||"";if(!w&&Xl(E))return w=!0,qs("[Drive][Mobile] auth error on upload, retrying once",{context:v,error:E}),N=null,P();throw D}};return P()},[Re,Xl]),Fr=p.useCallback((u,h)=>{var D;if(!((D=u==null?void 0:u.periodsState)!=null&&D.periods)||!(u!=null&&u.students))return"failed";const v=Gi(u),N=(h==null?void 0:h.id)||bt.current;if(N){const E=tw({incomingUpdatedAt:u.updatedAt,lastAppliedUpdatedAt:Jc(N),incomingRevisionId:(h==null?void 0:h.revisionId)||null,lastRevisionId:Hi(N)??null});if(qs("[Sync][Mobile] apply decision",{fileKey:N,decision:E}),E.action==="skip")return h&&(bt.current=h.id,he(h),ht(h.id,h.revisionId||null)),cr.current=Date.now(),"skipped"}ar.current=0,Dn.current=!1,Ar.current=!1,ir(!1),it(!1),mn(null),Fs(!1),kt.current&&(window.clearTimeout(kt.current),kt.current=null);const w=(u.layouts||[]).reduce((E,B)=>(E[String(B.id)]={id:String(B.id),name:B.name,tables:(B.tables||[]).map(H=>({id:String(H.id),name:H.name||"Table",seatNumbers:Array.isArray(H.seatNumbers)?H.seatNumbers:void 0}))},E),{}),P=u.periodsState.periods.map(E=>({id:String(E.id),name:E.name,layoutId:E.layoutId||null,tableAssignments:E.tableAssignments||{},activeGrouping:E.activeGrouping||[],tableNumbering:E.tableNumbering||void 0,attendance:E.attendance||{},attendanceResets:E.attendanceResets||{},behaviorNotes:qc(E.behaviorNotes),pointsByStudent:E.pointsByStudent||{},pointsEnabled:E.pointsEnabled??!1,startingPoints:E.startingPoints??50,pointsHistory:E.pointsHistory||[]})),_=(u.students||[]).map(E=>{var B;return{id:String(E.id),fullName:E.fullName||E.name||"Student",gender:typeof E.gender=="string"?E.gender:void 0,periodIds:((B=E.periodIds)==null?void 0:B.map(H=>String(H)))||[],profileUpdatedAt:typeof E.profileUpdatedAt=="string"?E.profileUpdatedAt:void 0,quickNote:typeof E.quickNote=="string"?E.quickNote:void 0,quickNoteUpdatedAt:typeof E.quickNoteUpdatedAt=="string"?E.quickNoteUpdatedAt:void 0,photoFileId:typeof E.photoFileId=="string"?E.photoFileId:E.photoFileId==null?null:String(E.photoFileId),photoUpdatedAt:(()=>{if(typeof E.photoUpdatedAt=="number")return E.photoUpdatedAt;if(typeof E.photoUpdatedAt=="string"){const H=Number.parseInt(E.photoUpdatedAt,10);return Number.isFinite(H)?H:null}return null})(),docs:Array.isArray(E.docs)?E.docs.map(H=>({...H,id:String(H.id),driveFileId:String(H.driveFileId)})):[]}});return Ke({periods:P,students:_,layouts:w}),$l(E=>{var R;const B=E?String(E):null,H=u.periodsState.currentId?String(u.periodsState.currentId):null;return[B,H,((R=P[0])==null?void 0:R.id)||null].filter(Boolean).find(W=>P.some(ue=>String(ue.id)===W))||null}),Be(P.reduce((E,B)=>{var H;return E[B.id]=(H=B.attendance)!=null&&H[oe]?{...B.attendance[oe]}:{},E},{})),Z(P.reduce((E,B)=>(E[B.id]=Qi(B.behaviorNotes,oe),E),{})),Pe(P.reduce((E,B)=>{var ie;const H=B.pointsByStudent?{...B.pointsByStudent}:{};return B.pointsEnabled&&((ie=B.studentsIds)==null||ie.forEach(ge=>{H[ge]===void 0&&(H[ge]=B.startingPoints??50)})),E[B.id]=H,E},{})),Gl.current=v,zs(u.lastWriter||"unknown"),h?(bt.current=h.id,he(h),ht(h.id,h.revisionId||null)):ht(bt.current,null),As(null),Ki(E=>E+1),ur(N,u.updatedAt),cr.current=Date.now(),"applied"},[oe,Jc,qc,Qi,Be,Z,Pe,$l,Ke,ir,it,he,ht,mn,Fs,zs,As,Ki,ur]),at=p.useCallback(()=>{ar.current+=1,Us.current=Date.now(),ir(!0),it(!0)},[]),qi=p.useCallback((u,h,v)=>{Ke(N=>N&&{...N,periods:N.periods.map(w=>{if(String(w.id)!==String(u))return w;const P={...w.attendanceResets||{}},_={...P[String(h)]||{}};return _[v]=oe,P[String(h)]=_,{...w,attendanceResets:P}})}),at()},[at,oe]),Zi=p.useCallback((u,h,v)=>{Be(N=>{const w={...N||{}};return w[u]={...w[u]||{}},v==="unmarked"?delete w[u][h]:w[u][h]=v,w}),at()},[at]);p.useCallback((u,h)=>{var P;const v=((P=Ue[u])==null?void 0:P[h])||"unmarked",N=Bs.indexOf(v),w=Bs[(N+1)%Bs.length];Zi(u,h,w)},[Ue,Zi,Bs]);const Zl=p.useCallback((u,h)=>{Be(v=>{const N={...v||{}};return N[u]={...N[u]||{}},h.forEach(w=>{N[u][w]||(N[u][w]="present")}),N}),at()},[at]),Zh=p.useCallback((u,h,v,N)=>{if(v===0||h.length===0)return;const w=(N==null?void 0:N.trim())||"Bulk points update",P=L==null?void 0:L.periods.find(D=>D.id===u),_=(P==null?void 0:P.startingPoints)??50;Pe(D=>{const E={...D||{}};return E[u]={...E[u]||{}},h.forEach(B=>{const H=E[u][B]??_;E[u][B]=Math.max(0,H+v)}),E}),Vt(D=>{const E={...D||{}},B=E[u]?[...E[u]]:[];return h.forEach(H=>B.push({studentId:H,delta:v,reason:w,date:oe})),E[u]=B,E}),at()},[L==null?void 0:L.periods,oe,at]),td=p.useCallback(u=>{Be(h=>{const v={...h||{}};return v[u]={},v}),Mr("Reset attendance to unmarked for this date."),at()},[Mr,at]),eg=p.useCallback(()=>{if(!Tn)return;const{periodId:u,studentId:h}=Tn,{note:v,delta:N,reason:w}=Ht,P=ot;if(P.pointsEnabled&&N!==0&&!w.trim()){Qe("Please provide a reason when changing points.");return}Z(_=>{const D={..._||{}};return D[u]={...D[u]||{}},v.trim()?D[u][h]=v.trim():delete D[u][h],D}),P.pointsEnabled&&N!==0&&(Pe(_=>{const D={..._||{}};D[u]={...D[u]||{}};const E=D[u][h]??P.startingPoints??0,B=Math.max(0,E+N);return D[u][h]=B,D}),Vt(_=>{const D={..._||{}},E=D[u]?[...D[u]]:[];return E.push({studentId:h,delta:N,reason:w||"Behavior note",date:oe}),D[u]=E,D})),at(),lr(null),fn({note:"",delta:0,reason:""})},[Tn,Ht,ot,at,Z,Pe,Qe]),nd=p.useCallback((u,h,v)=>{var D,E;const N=((D=G[u])==null?void 0:D[h])||"",w=L==null?void 0:L.periods.find(B=>B.id===u),P=(w==null?void 0:w.startingPoints)??50,_=((E=le[u])==null?void 0:E[h])??P;fn({note:N,delta:0,reason:""}),Oi({pointsEnabled:!!(w!=null&&w.pointsEnabled),startingPoints:P,currentPoints:_,predictedPoints:_}),lr({periodId:u,studentId:h,studentName:v})},[G,le,L]),tg=p.useCallback((u,h,v)=>{nd(u,h,v)},[nd]);p.useEffect(()=>{if(s){k(l);return}let u=!0;return(async()=>{await Hh();const v=await Cy().catch(()=>null);if(!v||!u)return;const N=await ps(v),w=N||v;if(rn(`startup refresh result: ok=${!!N} expiresAt=${N==null?void 0:N.expiresAt}`),!!u&&(a(w),!Bc.current)){Bc.current=!0;try{const P=localStorage.getItem(No);if(!P){Kl.current=!0;return}const _=JSON.parse(P);if(_!=null&&_.id&&(_!=null&&_.name)){Vi.current=!0;const D={id:_.id,name:_.name,modifiedTime:_.modifiedTime,size:_.size,revisionId:_.revisionId};Ze(D),k(`Restoring ${D.name}`);const E=await Ea(v.accessToken,D.id),B=typeof E=="string"?JSON.parse(E):E,H=An(B);if(!H)throw new Error("Drive file could not be parsed.");const ie=Fr(H,D);ie==="applied"?(he(D),k(`Loaded ${D.name} from Drive.`),As(new Date().toISOString())):ie==="skipped"&&(he(D),k("Drive file is older than current data  keeping existing state."))}Kl.current=!0}catch(P){console.error("[Drive] Restore failed",P),k("Google sign-in failed. Please try again."),Vi.current=!1,Kl.current=!0}}})(),()=>{u=!1}},[]),p.useEffect(()=>{s||o&&(T||L||V!=null&&V.id||Kl.current&&(Vi.current||Y(!0)))},[V,o,s,L,T]),p.useEffect(()=>{const u=window.setInterval(async()=>{if(!o)return;const h=await Lr("timer");h&&a(h)},3e5);return()=>window.clearInterval(u)},[o,Lr]),p.useEffect(()=>{const u=async()=>{if(!o)return;const h=await Lr("visibility");h&&a(h)};return document.addEventListener("visibilitychange",u),()=>document.removeEventListener("visibilitychange",u)},[o,Lr]),p.useEffect(()=>{if(y){const u=window.setTimeout(()=>{S(!1),j("Still loading Drive files. Try Sign in with Google then tap Refresh Cloud Files.")},12e3);return Wt(u),()=>window.clearTimeout(u)}me&&(window.clearTimeout(me),Wt(null)),kt.current&&(window.clearTimeout(kt.current),kt.current=null)},[y,me]);const ng=p.useCallback(()=>{Ey(),a(null),d([]),Ze(null),he(null),k(null),Mr("Signed out of Google Drive."),pi("drive-disconnect")},[Mr,pi]),rg=p.useCallback(async()=>{var u;!V||!((u=window.desktopBridge)!=null&&u.uploadDriveFile)||confirm(`Delete ${V.name} from Drive? This cannot be undone.`)&&(await window.desktopBridge.uploadDriveFile({fileId:V.id,content:JSON.stringify({deleted:!0,message:"File deleted by user."})}),Ke(null),Be({}),Z({}),Pe({}),Vt({}),he(null),$l(null),k("Deleted active file from Drive."))},[V]);p.useCallback(async()=>{},[Fr,An,he,ht]);const sg=p.useCallback(async(u=!0,h=!1)=>{if(!(y&&!h)){S(!0),j(null);try{const v=await Re(u,"refreshFiles");if(!v){j("Sign in with Google to view cloud files.");return}const N=await If(v.accessToken);d(N),k(null)}catch(v){const N=(v==null?void 0:v.message)||"Unable to load Drive files.";j(N),Qe(N)}finally{S(!1)}}},[Re,Qe,y]);p.useCallback(async()=>{Ac(!0),Fi(null);try{const u=await Re(!0,"importList");if(!u){Fi("Sign in first to import.");return}const h=await Fy(u.accessToken);Lh(h)}catch(u){const h=(u==null?void 0:u.message)||"Unable to list Drive files.";Fi(h),Qe(h)}finally{Ac(!1)}},[Re,Qe]);const lg=p.useCallback(async()=>{if(!re){j("Select a cloud file first.");return}if(Dn.current){j("Sync in progress. Please wait.");return}if(mt||pn)if(window.confirm("You have unsynced changes. Sync them to Drive before switching files? Click OK to sync, Cancel to discard changes.")){if(await gt({silent:!0}),mt||pn){j("Sync did not complete. Try again before switching files.");return}}else{if(!window.confirm("Discard unsynced changes and load the selected file?"))return;ar.current=0,ir(!1),it(!1),mn(null)}if(await Re(!0,"loadSelected")){lt(!0);try{const h=await ql(re.id,"loadSelected"),v=typeof h.data=="string"?JSON.parse(h.data):h.data,N=An(v);if(!N)throw new Error("File could not be parsed.");const w=Fr(N,re);if(w==="applied")k(`Loaded ${re.name}. Data available locally.`);else if(w==="skipped")k("Drive file is older than current data. Keeping existing data.");else throw new Error("File could not be parsed.");localStorage.setItem(No,JSON.stringify({id:re.id,name:re.name,modifiedTime:re.modifiedTime,size:re.size,revisionId:re.revisionId})),Or(`Loaded ${re.name} from Drive.`)}catch(h){const v=(h==null?void 0:h.message)||"Unable to load Drive file.";j(v),Qe(v)}finally{lt(!1)}}},[Re,re,Qe,Or,Fr,An,mt,pn,ql]),og=p.useCallback(async()=>{const u=z.trim();if(!u){j("Enter a file name first.");return}const h=await Re(!0,"createFile");if(h){we(!0),j(null);try{const N={...Yx(void 0,void 0,L==null?void 0:L.students),lastWriter:"mobile",updatedAt:new Date().toISOString()},w=await Oy(h.accessToken,u,JSON.stringify(N,null,2));d(P=>[w,...P]),he(w),bt.current=w.id,ht(w.id,w.revisionId||null),ur(w.id,N.updatedAt),Ze(w),ce(""),localStorage.setItem(No,JSON.stringify({id:w.id,name:w.name,modifiedTime:w.modifiedTime,size:w.size,revisionId:w.revisionId})),Or(`Created ${w.name} in Drive.`)}catch(v){const N=(v==null?void 0:v.message)||"Unable to create Drive file.";j(N),Qe(N)}finally{we(!1)}}},[z,Re,L,ur,Qe,Or]),rd=p.useCallback((u,h)=>{const v={...u||{}};return Object.entries(h||{}).forEach(([N,w])=>{if(!w||typeof w!="object")return;const P=v[N]||{},_={...P};["absent","tardy","leftEarly"].forEach(D=>{const E=w[D],B=P[D];E&&(!B||E>B)?_[D]=E:B&&(_[D]=B)}),v[N]=_}),v},[]),gt=p.useCallback(async u=>{var v,N,w;if(s){k(l);return}if(Dn.current||u!=null&&u.silent&&!mt)return;if(!((v=L==null?void 0:L.periods)!=null&&v.length)||!((N=L==null?void 0:L.students)!=null&&N.length)){k("Cannot sync until data is loaded. Open a file first.");return}if(We){it(!0),mn("Offline - changes will sync when back online."),Fs(!0);return}if(Ar.current){k("Sync already running.");return}const h=ar.current;try{const P=await Re(!(u!=null&&u.silent),"syncUpload");if(!P){mn("Reconnect to Google Drive to continue syncing."),it(!0);return}if(!V){k("Select a cloud file before syncing."),mn("Select a cloud file before syncing."),it(!0);return}const _=Zx({isOffline:We,isLocked:Ar.current,inFlight:Dn.current,hasSession:!0,hasFile:!!V,dirty:mt,now:Date.now(),lastLocalEditAt:Us.current,graceMs:Yc});if(qs("[Sync][Mobile] upload decision",_),_.action==="skip"&&!(_.reason==="clean"&&!(u!=null&&u.silent))){_.reason==="no-file"&&(k("Select a cloud file before syncing."),mn("Select a cloud file before syncing."),it(!0));return}Ar.current=!0,Dn.current=!0,Uc(!0);const D=await ql(V.id,"syncUpload",P),E=typeof D.data=="string"?JSON.parse(D.data):D.data,B=An(E);if(!((w=B==null?void 0:B.periodsState)!=null&&w.periods))throw new Error("Drive file missing periods.");const H=$i.current,ie=(B.periodsState.periods||[]).map(se=>{const ye=String(se.id),At=Ue[ye]||{},Ln=G[ye]||{},Wr=le[ye]||{},gn=Array.isArray(se.pointsHistory)?[...se.pointsHistory]:[],vn=dn[ye]||[],Yt=L==null?void 0:L.periods.find(Te=>String(Te.id)===ye),fr=rd(se.attendanceResets||{},(Yt==null?void 0:Yt.attendanceResets)||{}),Vr={...se.attendance||{}};Vr[oe]=At,H.size&&Object.keys(Vr).forEach(Te=>{const Lt={...Vr[Te]||{}};H.forEach(Hr=>{delete Lt[Hr]}),Object.keys(Lt).length===0?delete Vr[Te]:Vr[Te]=Lt});const yn={...se.behaviorNotes||{}};if(Object.keys(Ln).length>0){const Te=yn[oe]?{...yn[oe]}:{};Object.entries(Ln).forEach(([Lt,Hr])=>{Hr?Te[Lt]={note:Hr,timestamp:new Date().toISOString()}:delete Te[Lt]}),Object.keys(Te).length>0?yn[oe]=Te:delete yn[oe]}H.size&&Object.keys(yn).forEach(Te=>{const Lt={...yn[Te]||{}};H.forEach(Hr=>{delete Lt[Hr]}),Object.keys(Lt).length===0?delete yn[Te]:yn[Te]=Lt});const ig=[...gn,...vn].filter(Te=>!H.has(String(Te.studentId))),fd={...Wr};H.forEach(Te=>{delete fd[Te]});const pd={...fr||{}};H.forEach(Te=>{delete pd[Te]});const ag=se.activeGrouping?se.activeGrouping.map(Te=>Te.filter(Lt=>!H.has(String(Lt)))):se.activeGrouping;return{...se,attendance:Vr,attendanceResets:pd,behaviorNotes:yn,pointsByStudent:fd,pointsHistory:ig,activeGrouping:ag}}),ge=new Date().toISOString(),R=B.students||[],W=(L==null?void 0:L.students)||[],ue=new Map(W.map(se=>[String(se.id),se])),ne=R.filter(se=>!H.has(String(se.id))).map(se=>{const ye=ue.get(String(se.id));if(!ye)return se;let At={...se};const Ln=ye.profileUpdatedAt||"",Wr=se.profileUpdatedAt||"";Ln&&(!Wr||Ln>Wr)&&(At={...At,fullName:ye.fullName,gender:ye.gender,periodIds:ye.periodIds,profileUpdatedAt:Ln});const gn=ye.quickNoteUpdatedAt||"",vn=se.quickNoteUpdatedAt||"";gn&&(!vn||gn>vn)&&(At={...At,quickNote:ye.quickNote,quickNoteUpdatedAt:ye.quickNoteUpdatedAt});const Yt=typeof ye.photoUpdatedAt=="number"?ye.photoUpdatedAt:0,fr=typeof se.photoUpdatedAt=="number"?se.photoUpdatedAt:0;return Yt&&(!fr||Yt>fr)&&(At={...At,photoFileId:ye.photoFileId??null,photoUpdatedAt:Yt}),At}),Me=new Set(R.map(se=>String(se.id)));W.forEach(se=>{H.has(String(se.id))||Me.has(String(se.id))||ne.push(se)});const Ve={...B,schemaVersion:1,version:1,lastWriter:"mobile",lastEditedPeriodId:pt?String(pt):null,lastEditedDate:oe,updatedAt:ge,students:ne,periodsState:{...B.periodsState,periods:ie}},dr=JSON.stringify(Ve,null,2),ve=await ed(V.id,dr,"syncUpload",P);Vt(se=>{const ye={...se||{}};return delete ye[pt||""],ye}),ve?(Gl.current=Gi(Ve),ht(ve.id,ve.revisionId||null),bt.current=ve.id,he(ve),ur(ve.id,Ve.updatedAt),cr.current=Date.now()):ur(V.id,Ve.updatedAt),$i.current.clear(),zs("mobile"),u!=null&&u.silent||(k("Synced with Google Drive."),Or("Synced with Google Drive.")),As(new Date().toISOString()),it(!1),localStorage.setItem(No,JSON.stringify({id:(ve==null?void 0:ve.id)||V.id,name:(ve==null?void 0:ve.name)||V.name,modifiedTime:(ve==null?void 0:ve.modifiedTime)||V.modifiedTime,size:(ve==null?void 0:ve.size)||V.size,revisionId:(ve==null?void 0:ve.revisionId)||V.revisionId})),ar.current===h&&(ir(!1),it(!1))}catch(P){const _=(P==null?void 0:P.message)||"Failed to sync with Drive.";k(_),Qe(_),it(!0)}finally{Uc(!1),Dn.current=!1,Ar.current=!1}},[V,Re,Qe,Or,Ue,G,le,dn,L,oe,pt,mt,l,s,We,An,ur,ht,ql,ed,rd]),eo=p.useCallback(()=>{s||We||mt&&V&&o&&(it(!0),gt({silent:!0}))},[mt,V,o,s,gt,We]);p.useEffect(()=>{const u=()=>{document.visibilityState==="visible"&&eo()};return window.addEventListener("online",eo),document.addEventListener("visibilitychange",u),()=>{window.removeEventListener("online",eo),document.removeEventListener("visibilitychange",u)}},[eo]),p.useEffect(()=>{if(We){Fs(!0);return}if(!Qc||!V||!o)return;(async()=>{it(!0),mn("Reconnected  refreshing data"),await gt({silent:!0}),Fs(!1),mn(null)})()},[We,Qc,V,o,gt]),p.useEffect(()=>{if(!V||!mt||Dn.current)return;const u=window.setTimeout(()=>{gt({silent:!0})},1500);return()=>window.clearTimeout(u)},[mt,V,gt]),p.useEffect(()=>{V&&ht(V.id,V.revisionId||null)},[V,ht]),p.useEffect(()=>{bt.current=(V==null?void 0:V.id)||null},[V]);const to=p.useCallback(async()=>{if(s)return;const u=bt.current;if(!u)return;const h=ew({isOffline:We,isLocked:Ar.current||pn||Ds,inFlight:Dn.current,dirty:mt,now:Date.now(),lastLocalEditAt:Us.current,lastPullAt:cr.current,graceMs:Yc});if(qs("[Sync][Mobile] pull decision",h),h.action==="skip")return;const v=await Re(!1,"pull");if(v&&bt.current===u)try{const N=await If(v.accessToken);if(bt.current!==u)return;const w=N.find(P=>P.id===u);if(w!=null&&w.revisionId&&w.revisionId!==Hi(u)){const P=await Ea(v.accessToken,u);if(bt.current!==u)return;const _=typeof P=="string"?JSON.parse(P):P,D=An(_);if(!D)return;const E=Gi(D);if(Gl.current&&E===Gl.current){ht(u,w.revisionId||null),cr.current=Date.now(),zs(D.lastWriter||"unknown");return}const B=Fr(D,w);B==="applied"&&bt.current===u?(As(new Date().toISOString()),ht(u,w.revisionId||null),cr.current=Date.now(),zs(D.lastWriter||"unknown"),Ki(H=>H+1),Mr("Updated from Drive.")):B==="skipped"&&(ht(u,w.revisionId||null),cr.current=Date.now())}}catch{}},[Fr,Re,An,Mr,mt,Ds,pn,We,s,Hi,ht]);p.useEffect(()=>{if(s)return;let u=null;const h=async()=>{await to(),u=window.setTimeout(h,15e3)};return u=window.setTimeout(h,15e3),()=>{u&&window.clearTimeout(u)}},[s,to]),p.useEffect(()=>{if(kt.current&&(window.clearTimeout(kt.current),kt.current=null),!s&&!(mt||pn||Ds||We||!V))return kt.current=window.setTimeout(()=>{to()},5e3),()=>{kt.current&&(window.clearTimeout(kt.current),kt.current=null)}},[mt,pn,Ds,We,V,s,to]);const sd=(f==null?void 0:f.state)??"unknown";let ld=sd==="ok"&&o?"Connected to Google Drive":"Google Drive Sync",Ur="Link Google Drive to save and sync. Files stay in your Drive.",zr=o?"Manage Files":"Connect to Drive";switch(sd){case"no-session-yet":zr=o?"Manage Files":"Connect to Google Drive",Ur="Store your seating data in a private folder in your Google Drive.";break;case"device-storage-wipe":zr=o?"Manage Files":"Reconnect Google Drive",Ur="Your device cleared your Google connection. Tap below to reconnect; your files are still in your Drive.";break;case"oauth-failure":zr=o?"Manage Files":"Reconnect Google Drive",Ur="There was a Google sign-in problem. Reconnect to continue syncing.";break;case"user-logged-out":zr=o?"Manage Files":"Connect to Google Drive",Ur="You disconnected from Google Drive.";break}s&&(ld="Drive sync disabled",Ur=l,zr="Drive disabled");const $r=Oe&&Dt&&(L!=null&&L.periods)&&L.periods.find(u=>String(u.id)===String(Dt))||null,Br=$r?{...$r.attendance||{},[oe]:Ue[$r.id]||{}}:null,ea=($r==null?void 0:$r.attendanceResets)||{},od=Br&&Oe?wo({attendance:Br,studentId:Oe.id,date:oe,status:"absent",resets:ea}):null,id=Br&&Oe?wo({attendance:Br,studentId:Oe.id,date:oe,status:"tardy",resets:ea}):null,ad=Br&&Oe?wo({attendance:Br,studentId:Oe.id,date:oe,status:"left_early",resets:ea}):null;return i.jsx(rw,{children:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-violet-900 to-indigo-800 text-white flex flex-col relative",children:[i.jsxs("div",{className:"bg-emerald-50 text-emerald-900 text-xs px-4 py-1 text-center",children:[i.jsx("span",{role:"img","aria-label":"lock",className:"mr-1",children:""}),"Privacy: Data stays on this device and in your Google Drive. Use your school Google account. No data is sent to our servers."]}),We&&i.jsx("div",{className:"bg-slate-900 text-white text-xs px-4 py-1 text-center",children:"Offline  edits are saved locally and will sync when youre back online."}),i.jsxs("div",{className:"px-4 pt-2 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{className:"text-[11px] px-2 py-1 rounded bg-white/80 text-slate-800 shadow",onClick:Gh,title:"Version",type:"button",children:["Rev ",$f]}),i.jsx("button",{className:"text-[11px] px-2 py-1 rounded border border-white/60 bg-white/20 text-white shadow hover:bg-white/30",onClick:()=>pe(!0),type:"button",children:"About"})]}),!t&&i.jsx(Kx,{current:"mobile",onGoDesktop:Kh,onGoMobile:()=>{}})]}),i.jsx("header",{className:"px-6 pt-10 pb-4 text-center",children:i.jsx("h1",{className:"text-3xl font-black tracking-wide drop-shadow",children:"ClassSeats Mobile"})}),zf,jt==="attendance"&&L&&pt&&(()=>{const u=L.periods.find(ie=>ie.id===pt);if(!u)return null;const h=L.students.filter(ie=>{var ge;return(ge=ie.periodIds)==null?void 0:ge.includes(String(u.id))}),v=Ue[u.id]||{},N=h.length||1,w=h.filter(ie=>v[ie.id]==="present").length,P=h.filter(ie=>v[ie.id]==="absent").length,_=h.filter(ie=>v[ie.id]==="tardy").length,D=h.filter(ie=>v[ie.id]==="left_early").length,E=w+P+_+D,B=Math.round(E/N*100),H=Math.round(w/N*100);return i.jsx("div",{className:"fixed left-0 right-0 z-40 px-4 pt-2",style:{top:"64px"},children:i.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow px-3 py-2 flex flex-wrap items-center gap-2 text-xs text-slate-800",children:[i.jsxs("span",{className:"font-semibold",children:["Progress: ",B,"%  Present: ",H,"%"]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-emerald-100 text-emerald-800 font-semibold",children:[" Present: ",w]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-rose-100 text-rose-800 font-semibold",children:[" Absent: ",P]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-amber-100 text-amber-800 font-semibold",children:[" Tardy: ",_]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-800 font-semibold",children:[" Left Early: ",D]})]})})})(),i.jsxs("main",{className:"flex-1 overflow-y-auto px-4 pb-28 pt-20 space-y-6 relative",children:[i.jsx(Wx,{variant:"inline"}),i.jsx("section",{className:"max-w-2xl mx-auto bg-white/95 text-slate-900 rounded-3xl shadow-xl p-5",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-base font-semibold text-slate-900",children:ld}),i.jsx("p",{className:"text-xs text-slate-600",children:Ur}),i.jsxs("p",{className:"text-[11px] text-slate-500",children:[o?((ud=o.profile)==null?void 0:ud.email)||"Signed in":"Not signed in"," "," ",(V==null?void 0:V.name)||(re==null?void 0:re.name)||"No file selected",We&&"  Offline"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[pn&&i.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-amber-100 text-amber-800",children:"Pending sync"}),We&&i.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-slate-200 text-slate-700",children:"Offline"}),i.jsx("button",{className:"rounded-full bg-slate-900 text-white font-semibold px-4 py-2 text-sm disabled:opacity-50",disabled:s||!o||!V,onClick:()=>{if(s){k(l);return}gt()},title:s?l:void 0,children:"Sync Now"}),i.jsx("button",{className:"rounded-full bg-emerald-600 text-white font-semibold px-4 py-2 text-sm",onClick:()=>{if(s){k(l);return}return o?Y(!0):void Re(!0,"cta")},disabled:s,title:s?l:void 0,children:zr})]})]})}),s&&i.jsx("p",{className:"max-w-2xl mx-auto text-sm text-rose-100 text-left",children:"Drive sync is disabled."}),C&&i.jsxs("section",{className:"max-w-2xl mx-auto bg-slate-900 text-slate-100 rounded-2xl shadow-inner p-3 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold",children:"Drive Debug"}),i.jsx("button",{className:"text-slate-200 underline",onClick:()=>A(!1),children:"Close"})]}),i.jsx("button",{className:"text-slate-200 underline",onClick:()=>M([]),children:"Clear"})]}),i.jsxs("div",{className:"border border-slate-700 rounded p-2 h-48 overflow-y-auto space-y-1 bg-slate-800/70",children:[O.length===0&&i.jsx("div",{className:"text-slate-400",children:"No debug entries yet."}),O.map((u,h)=>i.jsx("div",{className:"font-mono text-[11px] whitespace-pre-wrap break-all",children:u},h))]})]}),i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsx("div",{className:"mt-3",children:i.jsx("div",{className:"inline-flex w-full rounded-xl border border-slate-200 bg-slate-50 p-1",children:i.jsxs("div",{className:"grid w-full grid-cols-3 gap-1",children:[i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${jt==="attendance"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Wi("attendance"),children:"Attendance"}),i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${jt==="notes"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Wi("notes"),children:"Notes"}),i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${jt==="flashcards"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Wi("flashcards"),children:"Flashcards"})]})})})}),i.jsxs("section",{className:"max-w-2xl mx-auto bg-white/95 text-slate-900 rounded-3xl shadow-xl p-6 space-y-6",children:[L&&i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 text-left",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsx("div",{children:i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:jt==="attendance"?"Attendance & Behavior":jt==="notes"?"Student Notes":"Flashcards"})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[jt==="attendance"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Date:"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 text-sm",onClick:()=>{const u=new Date(oe);u.setDate(u.getDate()-1),Wl(u.toISOString().slice(0,10))},children:""}),i.jsx("input",{type:"date",className:"rounded border border-slate-300 px-2 py-1 text-sm",value:oe,onChange:u=>Wl(u.target.value||Bi())}),i.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 text-sm",onClick:()=>{const u=new Date(oe);u.setDate(u.getDate()+1),Wl(u.toISOString().slice(0,10))},children:""}),i.jsx("button",{className:"px-2 py-1 rounded border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm font-semibold",onClick:()=>Wl(Bi()),children:"Today"})]})]}),jt==="notes"&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Sort:"}),i.jsxs("select",{className:"rounded border border-slate-300 bg-white text-slate-900 px-3 py-2 text-sm shadow-sm",value:Vl,onChange:u=>$h(u.target.value),children:[i.jsx("option",{value:"first-last",children:"First Last"}),i.jsx("option",{value:"last-first",children:"Last, First"})]})]}),jt==="attendance"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"View:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:or,onChange:u=>zh(u.target.value),children:[i.jsx("option",{value:"table",children:"Table View"}),i.jsx("option",{value:"list-last-first",children:"List (Last, First)"}),i.jsx("option",{value:"list-first-last",children:"List (First Last)"}),i.jsx("option",{value:"list-seat-number",children:"List (Seat Number)"})]}),or==="table"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Table Order:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:Ms,onChange:u=>Bh(u.target.value),children:[i.jsx("option",{value:"asc",children:"Ascending (1, 2, 3 / A, B, C)"}),i.jsx("option",{value:"desc",children:"Descending (3, 2, 1 / C, B, A)"})]})]}),or==="list-seat-number"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Seat Order:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:Hl,onChange:u=>Wh(u.target.value),children:[i.jsx("option",{value:"asc",children:"Ascending (1, 2, 3)"}),i.jsx("option",{value:"desc",children:"Descending (3, 2, 1)"})]})]})]}),L.periods.length>0&&i.jsx("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:pt||"",onChange:u=>$l(u.target.value||null),children:L.periods.map(u=>i.jsx("option",{value:u.id,children:u.name},u.id))})]})]}),pt?(()=>{const u=L.periods.find(R=>R.id===pt);if(!u)return i.jsx("p",{className:"text-sm text-slate-500",children:"Period not found."});if(jt==="notes"){const R=L.students.filter(W=>{var ue;return(ue=W.periodIds)==null?void 0:ue.includes(String(pt))}).slice().sort((W,ue)=>{const[ne,...Me]=W.fullName.split(" "),[Ve,...dr]=ue.fullName.split(" ");return Vl==="last-first"?Me.join(" ").localeCompare(dr.join(" ")):ne.localeCompare(Ve)});return i.jsx("div",{className:"space-y-3",children:R.length===0?i.jsx("p",{className:"text-sm text-slate-500",children:"No students found."}):R.map(W=>{var ne;const ue=(ne=W.docs)==null?void 0:ne.find(Me=>Me.pinned);return i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800 truncate",children:[W.fullName,"  QuickNote"]}),W.quickNote&&i.jsxs("div",{className:"relative mt-1",children:[i.jsx("div",{className:"text-xs text-slate-600 whitespace-pre-wrap break-words max-h-28 overflow-hidden pr-2",children:W.quickNote}),W.quickNote.length>180&&i.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-white to-transparent"}),i.jsx("div",{className:"mt-1 text-[11px] text-slate-400",children:"Open Quick Note to view/edit more."})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>{U(W.quickNote||""),Gt({studentId:W.id,studentName:W.fullName})},children:"Quick Note"}),i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:!ue,onClick:Me=>{Me.preventDefault(),Me.stopPropagation(),ue&&Xi(Ji(ue.driveFileId))},children:"Pinned Note"}),i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>Q({studentId:W.id,studentName:W.fullName}),children:"Docs"})]})]})})},W.id)})})}if(jt==="flashcards"){const R=L.students.filter(W=>{var ue;return(ue=W.periodIds)==null?void 0:ue.includes(String(pt))});return i.jsx(lw,{students:R,periodId:String(pt),driveFileId:bt.current,driveClient:r,driveSession:o})}const h=u.layoutId?L.layouts[u.layoutId]:null,v=L.students.filter(R=>{var W;return(W=R.periodIds)==null?void 0:W.includes(String(u.id))}),N=v.reduce((R,W)=>(R[String(W.id)]=W,R),{}),w={};h==null||h.tables.forEach(R=>w[R.id]={id:R.id,name:R.name,students:[]});const P=[],_=u.tableAssignments||{};Array.isArray(u.activeGrouping)&&Object.keys(_||{}).length>0?(u.activeGrouping.forEach((R,W)=>{const ue=_[String(W)]||_[W],ne=ue?w[ue]:null;R==null||R.forEach(Me=>{const Ve=N[String(Me)];Ve&&(ne?ne.students.push(Ve):P.push(Ve))})}),v.forEach(R=>{(u.activeGrouping||[]).some(ue=>ue==null?void 0:ue.some(ne=>String(ne)===String(R.id)))||P.push(R)})):v.forEach(R=>{const W=_[String(R.id)]||_[R.id];W&&w[W]?w[W].students.push(R):P.push(R)});const D=Object.values(w).sort((R,W)=>{const ue=R.name||"",ne=W.name||"",Me=Vh.compare(ue,ne);if(Me!==0)return Ms==="asc"?Me:-Me;const Ve=String(R.id).localeCompare(String(W.id));return Ms==="asc"?Ve:-Ve}),E=Ue[u.id]||{},B={...u.attendance||{},[oe]:E},H=u.attendanceResets||{};G[u.id];const ie=le[u.id]||{};et[u.id];const ge=(R,W,ue)=>{var ye;const ne=E[R.id],Me=zx({attendance:B,studentId:R.id,date:oe,resets:H}),Ve=wo({attendance:B,studentId:R.id,date:oe,status:"tardy",resets:H}),dr=typeof ie[R.id]=="number"?ie[R.id]:u.startingPoints??50,ve=!!((ye=G[u.id])!=null&&ye[R.id]),se=ke[String(R.id)]||null;return i.jsx(mw,{student:R,attendance:ne,points:dr,pointsEnabled:!!u.pointsEnabled,maxPoints:u.startingPoints??50,hasNote:ve,absenceStreak:Me,tardyCount:Ve,onShowAbsenceHelp:()=>Rs("absent"),onShowTardyHelp:()=>Rs("tardy"),seatNumber:W,showSeatNumber:ue,statusBg:Jh,statusLabel:Zc,tempPhotoUrl:se,onOpenPhoto:()=>{de({id:String(R.id),fullName:R.fullName,photoFileId:R.photoFileId??null})},onOpenMenu:()=>{Qt({id:R.id,name:R.fullName}),Lc(u.id)},driveClient:r,driveSession:o},R.id)};if(or!=="table"){const R=new Map;v.forEach(ne=>{R.set(String(ne.id),hw(u,h,ne.id))});const W=or==="list-seat-number",ue=[...v].sort((ne,Me)=>{const[Ve,...dr]=ne.fullName.split(" "),[ve,...se]=Me.fullName.split(" "),ye=dr.join(" "),At=se.join(" ");if(or==="list-seat-number"){const Ln=R.get(String(ne.id)),Wr=R.get(String(Me.id)),gn=parseInt(String(Ln??""),10),vn=parseInt(String(Wr??""),10),Yt=Number.isFinite(gn),fr=Number.isFinite(vn);return Yt!==fr?Yt?-1:1:Yt&&fr&&gn!==vn?Hl==="asc"?gn-vn:vn-gn:`${ne.fullName||""}`.localeCompare(`${Me.fullName||""}`)}return or==="list-last-first"?`${ye} ${Ve}`.localeCompare(`${At} ${ve}`):`${Ve} ${ye}`.localeCompare(`${ve} ${At}`)});return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{className:"rounded bg-emerald-500 text-white text-xs font-semibold px-3 py-2",onClick:()=>Zl(u.id,v.map(ne=>ne.id)),children:"Mark Rest Present (All)"}),i.jsx("button",{className:"rounded bg-rose-100 text-rose-800 text-xs font-semibold px-3 py-2 border border-rose-200",onClick:()=>td(u.id),children:"Reset Today"})]}),i.jsx("div",{className:"space-y-2",children:ue.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No students found."}):ue.map(ne=>ge(ne,W?R.get(String(ne.id)):null,W))})]})}return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{className:"rounded bg-emerald-500 text-white text-xs font-semibold px-3 py-2",onClick:()=>Zl(u.id,v.map(R=>R.id)),children:"Mark Rest Present (All)"}),i.jsx("button",{className:"rounded bg-rose-100 text-rose-800 text-xs font-semibold px-3 py-2 border border-rose-200",onClick:()=>td(u.id),children:"Reset Today"})]}),D.map(R=>{const W=R.students.filter(ne=>E[ne.id]!=="absent").map(ne=>ne.id),ue=R.name.replace("Table","").trim()||R.name;return i.jsxs("div",{className:"rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200 gap-3",children:[i.jsxs("div",{className:"flex flex-col leading-tight text-center min-w-[54px]",children:[i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Table"}),i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:ue})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-xs rounded bg-emerald-100 text-emerald-800 px-2 py-1",onClick:()=>Zl(u.id,R.students.map(ne=>ne.id)),children:"Mark Rest Present"}),u.pointsEnabled&&i.jsx("button",{className:"text-[11px] rounded bg-amber-600 text-white px-3 py-2 font-semibold",onClick:()=>{zl(null),Rt(0),Mi(""),Kt({periodId:u.id,tableName:R.name,studentIds:W})},children:"Table Points"})]})]}),i.jsx("div",{className:"p-3 flex flex-wrap gap-2",children:R.students.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No students assigned."}):R.students.map(ne=>ge(ne))})]},R.id)}),i.jsxs("div",{className:"rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Unassigned"}),i.jsx("button",{className:"text-xs rounded bg-emerald-100 text-emerald-800 px-2 py-1",onClick:()=>Zl(u.id,P.map(R=>R.id)),children:"Mark Rest Present"})]}),i.jsx("div",{className:"p-3 flex flex-wrap gap-2",children:P.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No unassigned students."}):P.map(R=>ge(R))})]})]})})():i.jsx("p",{className:"text-sm text-slate-500",children:"Load and select a period to begin."})]}),te&&i.jsx(fw,{open:!0,studentId:te.id,studentFullName:te.fullName,existingPhotoFileId:te.photoFileId,onClose:()=>de(null),onAccept:u=>{const h=te.id;if(!h)return;const v=URL.createObjectURL(u);_e(N=>{const w=N[h];return w&&URL.revokeObjectURL(w),{...N,[h]:v}})},onUploadComplete:({fileId:u,photoUpdatedAt:h})=>{const v=te.id;Ke(N=>N&&{...N,students:N.students.map(w=>w.id===v?{...w,photoFileId:u,photoUpdatedAt:h}:w)}),at(),gt({silent:!0})}}),Oc&&In&&i.jsx(Nx,{isOpen:!0,onRequestClose:Jl,title:"Edit Student",maxWidth:"md",showCloseX:!0,footer:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{className:"rounded border px-4 py-2 text-sm text-slate-600",onClick:Jl,children:"Cancel"}),i.jsx("button",{className:"rounded bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",onClick:()=>{const u=In.name.trim();if(!u||!In.periodId){alert("Name and period are required.");return}const h=Oc.id;Ke(v=>v&&{...v,students:v.students.map(N=>String(N.id)===String(h)?{...N,fullName:u,gender:In.gender,periodIds:[String(In.periodId)],profileUpdatedAt:new Date().toISOString()}:N)}),at(),gt({silent:!0}),Jl()},children:"Save"})]}),children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Full Name"}),i.jsx("input",{className:"mt-1 w-full rounded border px-3 py-2",value:In.name,onChange:u=>Is(h=>h&&{...h,name:u.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Gender"}),i.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2",value:In.gender,onChange:u=>Is(h=>h&&{...h,gender:u.target.value}),children:[i.jsx("option",{value:"F",children:"Female"}),i.jsx("option",{value:"M",children:"Male"}),i.jsx("option",{value:"O",children:"Other/Prefer not"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Class Period"}),i.jsx("select",{className:"mt-1 w-full rounded border px-3 py-2",value:In.periodId,onChange:u=>Is(h=>h&&{...h,periodId:u.target.value}),children:((L==null?void 0:L.periods)||[]).map(u=>i.jsx("option",{value:String(u.id),children:u.name},String(u.id)))})]})]})}),Oe&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center px-4",onClick:()=>Qt(null),children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-4 w-full max-w-sm space-y-3",onClick:u=>u.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:Oe.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Actions"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-600 hover:text-slate-800",onClick:()=>{Qt(null),Qh(Oe.id)},"aria-label":"Edit student",children:""}),i.jsx("button",{type:"button",className:"rounded-md p-1 text-rose-600 hover:text-rose-700",onClick:()=>Yh(Oe.id),"aria-label":"Delete student",children:""}),i.jsx("button",{className:"rounded-md p-1 text-slate-500 hover:text-slate-700",onClick:()=>Qt(null),children:""})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Bs.map(u=>i.jsx("button",{className:"rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{Dt&&Zi(Dt,Oe.id,u),Qt(null)},children:Zc(u)},u))}),od!==null&&id!==null&&ad!==null&&i.jsxs("div",{className:"rounded-lg border border-slate-200 px-3 py-2 text-xs text-slate-600",children:[i.jsx("div",{className:"font-semibold text-slate-700",children:"Counters (since reset)"}),i.jsxs("div",{children:["Absent ",od,"  Tardy ",id,"  Left early ",ad]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-lg border border-rose-200 px-2 py-2 text-xs text-left hover:bg-rose-50 text-rose-700",onClick:()=>{Dt&&Oe&&qi(Dt,Oe.id,"absent"),Qt(null)},children:" Reset absence streak"}),i.jsx("button",{className:"w-full rounded-lg border border-amber-200 px-2 py-2 text-xs text-left hover:bg-amber-50 text-amber-700",onClick:()=>{Dt&&Oe&&qi(Dt,Oe.id,"tardy"),Qt(null)},children:" Reset tardy counter"}),i.jsx("button",{className:"w-full rounded-lg border border-orange-200 px-2 py-2 text-xs text-left hover:bg-orange-50 text-orange-700",onClick:()=>{Dt&&Oe&&qi(Dt,Oe.id,"leftEarly"),Qt(null)},children:" Reset left early counter"})]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{className:"w-full rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{Dt&&tg(Dt,Oe.id,Oe.name),Qt(null)},children:" Notes and Points"})}),i.jsx("button",{className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:()=>Qt(null),children:"Close"})]})}),Fc&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Rs(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-sm p-5 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"About this badge"}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Rs(null),children:""})]}),Fc==="absent"?i.jsx("p",{className:"text-sm text-slate-700",children:"A# shows the absence streak since the last present or reset. Unmarked days are skipped."}):i.jsx("p",{className:"text-sm text-slate-700",children:"T# shows the tardy count since the last reset."}),i.jsx("button",{className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:()=>Rs(null),children:"Got it"})]})]}),Tn&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>lr(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:["Behavior for ",Tn.studentName]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Today  Points ",ot.pointsEnabled?`${Yi(ot.currentPoints,ot.startingPoints)} ${ot.currentPoints}`:"disabled"]})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>lr(null),children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note"}),i.jsx("textarea",{value:Ht.note,onChange:u=>fn(h=>({...h,note:u.target.value})),className:"w-full border-2 border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none",rows:4,placeholder:"Enter behavior note...",autoFocus:!0,onMouseDown:u=>u.stopPropagation(),onClick:u=>u.stopPropagation()}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[" Excellent participation"," Needs redirection"," Academic progress"," Positive peer interactions"].map(u=>i.jsx("button",{onClick:()=>fn(h=>({...h,note:h.note?h.note+" "+u:u})),className:"text-[11px] px-2.5 py-1 rounded-lg bg-slate-100 hover:bg-slate-200 border border-slate-200 text-slate-700",children:u},u))}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded px-3 py-2 text-sm",placeholder:"Custom snippet",value:Ir,onChange:u=>Ul(u.target.value)}),i.jsx("button",{className:"text-xs rounded bg-indigo-600 text-white px-3 py-2",onClick:()=>{Ir.trim()&&(fn(u=>({...u,note:u.note?`${u.note} ${Ir}`:Ir})),Ul(""))},children:"Insert"})]})]}),ot.pointsEnabled&&i.jsxs("div",{className:"space-y-3 border border-slate-200 rounded-xl p-3 bg-slate-50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Points"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsxs("span",{children:[Yi(ot.currentPoints,ot.startingPoints)," ",ot.currentPoints]}),i.jsx("span",{className:"text-slate-400",children:""}),i.jsxs("span",{children:[Yi(Math.max(0,ot.currentPoints+Ht.delta),ot.startingPoints)," ",Math.max(0,ot.currentPoints+Ht.delta)]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[2,1,0,-1,-2].map(u=>i.jsx("button",{onClick:()=>fn(h=>({...h,delta:u,reason:h.reason})),className:`px-3 py-1.5 rounded border text-sm font-semibold ${Ht.delta===u?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-indigo-50"}`,children:u>0?`+${u}`:u},u))}),Ht.delta!==0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-[11px] font-semibold text-slate-700",children:"Reason (required)"}),i.jsx("input",{value:Ht.reason,onChange:u=>fn(h=>({...h,reason:u.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1 text-sm",placeholder:"Enter reason for point change"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2",onClick:eg,children:"Save"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>lr(null),children:"Cancel"})]})]})]}),Rr&&L&&(()=>{const u=L.students.find(h=>h.id===Rr.studentId);return u?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Gt(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Quick Note"}),i.jsx("p",{className:"text-xs text-slate-500",children:u.fullName})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Gt(null),children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note"}),i.jsx("textarea",{value:F,onChange:h=>U(h.target.value),className:"w-full border-2 border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none",rows:5,placeholder:"Add a quick note...",autoFocus:!0,onMouseDown:h=>h.stopPropagation(),onClick:h=>h.stopPropagation()})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2",onClick:()=>{const h=Rr.studentId,v=F;Ke(N=>N&&{...N,students:N.students.map(w=>w.id===h?{...w,quickNote:v,quickNoteUpdatedAt:new Date().toISOString()}:w)}),ar.current+=1,ir(!0),it(!0),Us.current=Date.now(),gt({silent:!0}),Gt(null)},children:"Save"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>Gt(null),children:"Cancel"})]})]})]}):null})(),K&&L&&(()=>{const u=L.students.find(w=>w.id===K.studentId);if(!u)return null;const h=L.periods.find(w=>w.id===pt),N=(u.docs||[]).slice().sort((w,P)=>{if(w.pinned&&!P.pinned)return-1;if(!w.pinned&&P.pinned)return 1;const _=w.createdAt?new Date(w.createdAt).getTime():0;return(P.createdAt?new Date(P.createdAt).getTime():0)-_});return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Q(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Student Docs"}),i.jsx("p",{className:"text-xs text-slate-500",children:u.fullName})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Q(null),children:""})]}),i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Tap a doc to open it in Google Docs."}),i.jsx("p",{className:"text-[11px] leading-snug text-slate-500",children:"To protect privacy, ClassSeats can only see the documents it helps create."}),i.jsx("p",{className:"text-[11px] leading-snug text-slate-500",children:"All documents are created in the ClassSeats/Student Docs folder in your Google Drive."})]}),i.jsx("button",{className:"rounded-lg bg-emerald-600 text-white text-xs font-semibold px-3 py-2 disabled:opacity-50",disabled:!n.canUseDriveSync,onClick:async()=>{if(n.canUseDriveSync)try{const w=await Re(!0,"studentDocCreate");if(!w)return;const P=(h==null?void 0:h.name)||"Period",_=`Notes - ${u.fullName} - ${P} ${qh(new Date)}`,D=window.prompt("Name this Doc:",_);if(!D||!D.trim())return;const E=D.trim(),B=await Ry(w.accessToken),H=await Ay(w.accessToken,B,E),ie=new Date().toISOString(),ge={id:Xh(),driveFileId:H.fileId,title:H.title||E,createdAt:ie,lastOpenedAt:ie};Ke(R=>R&&{...R,students:R.students.map(W=>W.id===u.id?{...W,docs:[...W.docs||[],ge]}:W)}),ar.current+=1,ir(!0),it(!0),Us.current=Date.now(),Xi(Ji(H.fileId))}catch(w){Qe((w==null?void 0:w.message)||"Unable to create Google Doc.")}},children:"+ New Doc"})]}),i.jsx("div",{className:"max-h-72 overflow-y-auto space-y-2",children:N.length===0?i.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-600",children:"No Docs yet."}):N.map(w=>i.jsx("button",{className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-left text-sm text-slate-700 hover:bg-slate-50",onClick:P=>{P.preventDefault(),P.stopPropagation(),Xi(Ji(w.driveFileId))},children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-900",children:w.title}),w.pinned&&i.jsx("span",{className:"text-[10px] font-semibold text-emerald-700 bg-emerald-100 px-2 py-0.5 rounded-full",children:"PINNED"})]})},w.id))}),i.jsx("button",{className:"w-full rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>Q(null),children:"Close"})]})]})})(),!L&&i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 text-left",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"No class file loaded yet."}),i.jsx("p",{className:"text-sm text-slate-600",children:"To take attendance or track points, open a class file from your Google Drive."}),i.jsx("button",{className:"w-full rounded-lg bg-emerald-600 text-white font-semibold py-2",onClick:()=>{if(s){k(l);return}return o?Y(!0):void Re(!0,"empty-state")},disabled:s,title:s?l:void 0,children:"Manage Files"})]}),Le&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Kt(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:Le.tableName}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Apply points to ",Le.studentIds.length," present student",Le.studentIds.length===1?"":"s"]})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Kt(null),children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note (required)"}),i.jsx("textarea",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Describe why youre adjusting points",value:Dc,onChange:u=>Mi(u.target.value),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Choose points"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[2,1,-1,-2].map(u=>{const h=Dr===u;return i.jsxs("button",{className:`px-3 py-2 rounded-lg text-sm font-semibold border ${h?"bg-amber-600 text-white border-amber-600":"bg-white text-amber-800 border-amber-300"}`,onClick:()=>{zl(u),Rt(0)},children:[u>0?`+${u}`:u," pts"]},u)}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("input",{type:"number",className:"w-24 rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Custom",value:Ts,onFocus:()=>zl(null),onChange:u=>Rt(Number(u.target.value)||0)})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-amber-600 text-white font-semibold py-2",onClick:()=>{const u=Dc.trim(),h=Dr??Ts;if(!u){Qe("Enter a note for the point change.");return}if(!h){Qe("Select a point value.");return}Zh(Le.periodId,Le.studentIds,h,u),zl(null),Rt(0),Mi(""),Kt(null)},children:"Apply"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>Kt(null),children:"Cancel"})]}),i.jsx("p",{className:"text-[11px] text-slate-500",children:"Only present students at this table receive the adjustment. Absent students are skipped."}),(()=>{const u=(dn[Le.periodId]||[]).filter(v=>{var N;return((N=v.date)==null?void 0:N.startsWith(oe))&&Le.studentIds.includes(String(v.studentId))});if(u.length===0)return null;const h=v=>{var N;return((N=L==null?void 0:L.students.find(w=>String(w.id)===String(v)))==null?void 0:N.fullName)||`Student ${v}`};return i.jsxs("div",{className:"border-t border-slate-200 pt-2 space-y-1",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Todays table adjustments"}),i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:u.map((v,N)=>i.jsxs("div",{className:"text-xs text-slate-700 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:h(v.studentId)}),i.jsxs("span",{children:[v.delta>0?"+":"",v.delta,"  ",v.reason||"No note"]})]},`${v.studentId}-${N}`))})]})})()]})]})]}),T&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Y(!1)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Manage Files"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Sign in, load, create, or import ClassSeats files."})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Y(!1),children:""})]}),s?i.jsx("div",{className:"space-y-2 text-sm text-rose-700",children:i.jsx("p",{children:l})}):o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[i.jsxs("div",{children:[i.jsxs("p",{children:["Signed in as ",i.jsx("span",{className:"font-semibold text-slate-900",children:((cd=o.profile)==null?void 0:cd.email)||"your account"})]}),i.jsxs("p",{children:["Active file: ",i.jsx("span",{className:"font-semibold text-slate-900",children:(V==null?void 0:V.name)||(re==null?void 0:re.name)||"None selected"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[V&&i.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white font-semibold",onClick:()=>void rg(),children:" Delete Active File"}),i.jsx("button",{className:"text-rose-600 underline",onClick:ng,children:"Sign out"})]})]}),zf,i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-2xl bg-slate-900 text-white font-semibold py-2",onClick:()=>void sg(!0),children:" Refresh Cloud Files"}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-3 max-h-64 overflow-auto space-y-2",children:[y&&i.jsx("p",{className:"text-sm text-slate-500",children:"Loading Drive files"}),x&&i.jsx("p",{className:"text-sm text-rose-600",children:x}),!y&&!x&&c.length===0&&i.jsxs("div",{className:"text-sm text-slate-700 space-y-1",children:[i.jsx("p",{className:"font-semibold",children:"Youre signed into Google Drive, but no class file is loaded yet."}),i.jsx("p",{className:"text-slate-500",children:"Choose an existing class file or create a new one linked to your desktop setup."})]}),!y&&!x&&c.length>0&&c.map(u=>{const h=(re==null?void 0:re.id)===u.id,v=(V==null?void 0:V.id)===u.id;return i.jsxs("button",{className:`w-full text-left rounded-xl border px-3 py-2 transition ${h?"border-indigo-400 bg-indigo-50 text-indigo-900":v?"border-emerald-400 bg-emerald-50 text-emerald-900":"border-slate-200 bg-white hover:bg-slate-100"}`,onClick:()=>Ze(u),children:[i.jsx("p",{className:"text-sm font-semibold",children:u.name}),i.jsxs("p",{className:"text-[11px] text-slate-500",children:["Updated ",u.modifiedTime?new Date(u.modifiedTime).toLocaleString():"",u.size?`  ${(Number(u.size)/1024).toFixed(1)} KB`:""]}),v&&i.jsx("p",{className:"text-[11px] text-emerald-700 font-semibold",children:"Active"})]},u.id)})]}),i.jsx("button",{className:"w-full rounded-2xl bg-emerald-600 text-white font-semibold py-2 disabled:opacity-50",onClick:lg,disabled:!re||qe,children:qe?"Loading":re?`Load "${re.name}"`:"Load Selected File"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("button",{className:"w-full rounded-2xl bg-emerald-600 text-white font-semibold py-2 disabled:opacity-50",onClick:()=>void gt(),disabled:!V,children:" Sync (pull latest, then save)"}),i.jsx("p",{className:"text-[11px] text-slate-500 text-center",children:"Uses the selected cloud file. Select or create one first."})]})]}),i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"space-y-2 border-b border-slate-200 pb-3",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Create a new cloud file"}),i.jsx("input",{type:"text",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"e.g., Semester 2 24-25",value:z,onChange:u=>ce(u.target.value)}),i.jsx("button",{className:"w-full rounded-2xl bg-slate-900 text-white font-semibold py-2 disabled:opacity-50",onClick:og,disabled:X,children:X?"Creating":"Create Cloud File"})]})})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-slate-700",children:"Sign in with Google to access Drive."}),i.jsx("p",{className:"text-[11px] text-amber-700",children:"Use your school Google account. Files stay in your Drive (ClassSeats folder)."}),i.jsx("button",{className:"w-full rounded-2xl bg-indigo-600 text-white font-semibold py-2",onClick:()=>{Y(!1),Re(!0)},children:" Sign in with Google"})]})]})]})]})]}),i.jsx("div",{className:"fixed inset-x-0 bottom-0 px-4 pb-[env(safe-area-inset-bottom)]",children:i.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow-lg px-4 py-3 flex flex-wrap items-center gap-2 text-xs text-slate-700",children:[i.jsxs("div",{className:"flex-1 min-w-[180px]",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:Ds?"Saving":Bl?`Synced ${new Date(Bl).toLocaleTimeString()}`:"Ready"}),i.jsxs("p",{className:"text-[11px] text-slate-500 truncate",children:[o?((dd=o.profile)==null?void 0:dd.email)||"Signed in":"Not signed in"," "," ",(V==null?void 0:V.name)||(re==null?void 0:re.name)||"No file selected",We&&"  Offline"]}),pn&&i.jsx("p",{className:"text-[11px] text-amber-700",children:"Pending sync"})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[i.jsx("button",{className:"rounded-full bg-emerald-600 text-white px-3 py-2 text-xs font-semibold disabled:opacity-50 flex-none",disabled:!o||!V,onClick:()=>void gt(),children:"Sync Now"}),i.jsx("button",{className:"rounded-full bg-slate-900 text-white px-3 py-2 text-xs font-semibold flex-none",onClick:()=>o?Y(!0):void Re(!0,"cta"),children:"Manage Files"})]})]})}),i.jsx(Gx,{open:q,onClose:()=>pe(!1),buildRevision:$f})]}),We&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center px-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-4 text-center space-y-2 text-slate-900",children:[i.jsx("p",{className:"text-base font-semibold",children:"Mobile paused while offline"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Edits are disabled while offline. Reconnect to resume."}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Last sync: ",Bl?new Date(Bl).toLocaleTimeString():"No sync yet"]})]})})]})})}function vw({toasts:e}){return i.jsx("div",{className:"fixed right-4 top-4 z-[1000] flex w-[320px] max-w-[calc(100vw-2rem)] flex-col gap-2",children:e.map(t=>{const n=t.kind==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":t.kind==="error"?"border-rose-200 bg-rose-50 text-rose-900":t.kind==="warning"?"border-amber-200 bg-amber-50 text-amber-900":"border-slate-200 bg-slate-50 text-slate-800",r=t.kind==="success"?"":t.kind==="error"?"":t.kind==="warning"?"":"";return i.jsx("div",{className:`rounded-xl border px-3 py-2 shadow-sm ${n}`,children:i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx("span",{"aria-hidden":"true",children:r}),i.jsx("div",{className:"leading-snug",children:t.message})]})},t.id)})})}function yw({open:e,opts:t,onCancel:n,onConfirm:r}){if(!e||!t)return null;const s=t.tone??"default",l=t.confirmText??"Confirm",o=t.cancelText===null,a=t.cancelText??"Cancel",c=s==="danger"?"bg-rose-600 hover:bg-rose-700 text-white":"bg-indigo-600 hover:bg-indigo-700 text-white";return i.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/40 p-4",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl border border-slate-200",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.title}),i.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t.message})]}),i.jsxs("div",{className:"p-5 flex items-center justify-end gap-2",children:[!o&&i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:n,children:a}),i.jsx("button",{className:`rounded-xl px-4 py-2 text-sm font-semibold ${c}`,onClick:r,children:l})]})]})})}function xw({open:e,opts:t,onCancel:n,onConfirm:r}){const[s,l]=p.useState("");if(p.useEffect(()=>{e&&t&&l(t.defaultValue??"")},[e,t]),!e||!t)return null;const o=t.confirmText??"OK",a=t.cancelText??"Cancel",c=t.inputType??"text";return i.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/40 p-4",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl border border-slate-200",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.title}),t.message&&i.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t.message})]}),i.jsxs("div",{className:"p-5 space-y-3",children:[i.jsx("input",{autoFocus:!0,type:c,value:s,onChange:d=>l(d.target.value),placeholder:t.placeholder??"",className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-200"}),i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:n,children:a}),i.jsx("button",{className:"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700",onClick:()=>r(s),children:o})]})]})]})})}function ww(){return Math.random().toString(16).slice(2)+Date.now().toString(16)}function Sw({children:e}){const[t,n]=p.useState([]),r=p.useRef(null),[s,l]=p.useState(!1),[o,a]=p.useState(null),c=p.useRef(null),[d,y]=p.useState(!1),[S,x]=p.useState(null),j=p.useCallback((m,f,g=2500)=>{const C=ww(),A={id:C,kind:m,message:f,durationMs:g};n(O=>[...O,A]),window.setTimeout(()=>{n(O=>O.filter(M=>M.id!==C))},g)},[]),b=p.useCallback(m=>(a(m),l(!0),new Promise(f=>{r.current=f})),[]),k=p.useCallback(m=>(x(m),y(!0),new Promise(f=>{c.current=f})),[]),J=p.useMemo(()=>({toast:j,confirm:b,prompt:k}),[j,b,k]);return i.jsxs(Xv.Provider,{value:J,children:[e,i.jsx(vw,{toasts:t}),i.jsx(yw,{open:s,opts:o,onCancel:()=>{l(!1);const m=r.current;r.current=null,m==null||m(!1)},onConfirm:()=>{l(!1);const m=r.current;r.current=null,m==null||m(!0)}}),i.jsx(xw,{open:d,opts:S,onCancel:()=>{y(!1);const m=c.current;c.current=null,m==null||m(null)},onConfirm:m=>{y(!1);const f=c.current;c.current=null,f==null||f(m)}})]})}const ms={waiting:!1,registration:null},_u=new Set;function Gf(){for(const e of _u)e({...ms})}function Nw(e){return _u.add(e),e({...ms}),()=>{_u.delete(e)}}async function kw(){if("serviceWorker"in navigator&&!window.__cs_sw_registered){window.__cs_sw_registered=!0;try{const t=await navigator.serviceWorker.register("/service-worker.js",{updateViaCache:"none"});ms.registration=t,t.waiting&&navigator.serviceWorker.controller&&(ms.waiting=!0),t.addEventListener("updatefound",()=>{const s=t.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&navigator.serviceWorker.controller&&(ms.waiting=!0,Gf())})});const n=()=>t.update().catch(()=>{});window.addEventListener("focus",n),window.setInterval(n,6e4),Gf();let r=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{r||(r=!0,window.location.reload())})}catch(e){console.warn("[PWA] SW registration failed",e)}}}async function jw(){const e=ms.registration;e!=null&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"})}function bw(){const[e,t]=p.useState({waiting:!1,registration:null});return p.useEffect(()=>Nw(t),[]),e.waiting?i.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-[9999]",children:i.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-slate-900 text-white px-4 py-3 shadow-xl",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Update available"}),i.jsx("button",{className:"rounded-xl bg-white/15 hover:bg-white/25 px-3 py-1 text-sm font-semibold",onClick:async()=>{await jw()},children:"Refresh"})]})}):null}const Cw=document.getElementById("root");Ia.createRoot(Cw).render(i.jsx(bg.StrictMode,{children:i.jsx(xx,{children:i.jsxs(Sw,{children:[i.jsx(gw,{}),i.jsx(bw,{})]})})})),kw();
