(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function O0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var om={exports:{}},Ki={},lm={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol=Symbol.for("react.element"),U0=Symbol.for("react.portal"),M0=Symbol.for("react.fragment"),F0=Symbol.for("react.strict_mode"),z0=Symbol.for("react.profiler"),$0=Symbol.for("react.provider"),B0=Symbol.for("react.context"),W0=Symbol.for("react.forward_ref"),H0=Symbol.for("react.suspense"),V0=Symbol.for("react.memo"),K0=Symbol.for("react.lazy"),cf=Symbol.iterator;function G0(e){return e===null||typeof e!="object"?null:(e=cf&&e[cf]||e["@@iterator"],typeof e=="function"?e:null)}var im={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},am=Object.assign,um={};function $s(e,t,n){this.props=e,this.context=t,this.refs=um,this.updater=n||im}$s.prototype.isReactComponent={};$s.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cm(){}cm.prototype=$s.prototype;function mc(e,t,n){this.props=e,this.context=t,this.refs=um,this.updater=n||im}var hc=mc.prototype=new cm;hc.constructor=mc;am(hc,$s.prototype);hc.isPureReactComponent=!0;var df=Array.isArray,dm=Object.prototype.hasOwnProperty,gc={current:null},fm={key:!0,ref:!0,__self:!0,__source:!0};function pm(e,t,n){var r,s={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)dm.call(t,r)&&!fm.hasOwnProperty(r)&&(s[r]=t[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:ol,type:e,key:o,ref:l,props:s,_owner:gc.current}}function Y0(e,t){return{$$typeof:ol,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ol}function Q0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ff=/\/+/g;function La(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Q0(""+e.key):t.toString(36)}function Xl(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ol:case U0:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+La(l,0):r,df(s)?(n="",e!=null&&(n=e.replace(ff,"$&/")+"/"),Xl(s,t,n,"",function(d){return d})):s!=null&&(yc(s)&&(s=Y0(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(ff,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",df(e))for(var u=0;u<e.length;u++){o=e[u];var c=r+La(o,u);l+=Xl(o,t,n,c,s)}else if(c=G0(e),typeof c=="function")for(e=c.call(e),u=0;!(o=e.next()).done;)o=o.value,c=r+La(o,u++),l+=Xl(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Al(e,t,n){if(e==null)return e;var r=[],s=0;return Xl(e,r,"","",function(o){return t.call(n,o,s++)}),r}function J0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bt={current:null},Zl={transition:null},q0={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:gc};function mm(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Al,forEach:function(e,t,n){Al(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Al(e,function(){t++}),t},toArray:function(e){return Al(e,function(t){return t})||[]},only:function(e){if(!yc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=$s;de.Fragment=M0;de.Profiler=z0;de.PureComponent=mc;de.StrictMode=F0;de.Suspense=H0;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0;de.act=mm;de.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=am({},e.props),s=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=gc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)dm.call(t,c)&&!fm.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:ol,type:e.type,key:s,ref:o,props:r,_owner:l}};de.createContext=function(e){return e={$$typeof:B0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$0,_context:e},e.Consumer=e};de.createElement=pm;de.createFactory=function(e){var t=pm.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:W0,render:e}};de.isValidElement=yc;de.lazy=function(e){return{$$typeof:K0,_payload:{_status:-1,_result:e},_init:J0}};de.memo=function(e,t){return{$$typeof:V0,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=Zl.transition;Zl.transition={};try{e()}finally{Zl.transition=t}};de.unstable_act=mm;de.useCallback=function(e,t){return bt.current.useCallback(e,t)};de.useContext=function(e){return bt.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return bt.current.useDeferredValue(e)};de.useEffect=function(e,t){return bt.current.useEffect(e,t)};de.useId=function(){return bt.current.useId()};de.useImperativeHandle=function(e,t,n){return bt.current.useImperativeHandle(e,t,n)};de.useInsertionEffect=function(e,t){return bt.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return bt.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return bt.current.useMemo(e,t)};de.useReducer=function(e,t,n){return bt.current.useReducer(e,t,n)};de.useRef=function(e){return bt.current.useRef(e)};de.useState=function(e){return bt.current.useState(e)};de.useSyncExternalStore=function(e,t,n){return bt.current.useSyncExternalStore(e,t,n)};de.useTransition=function(){return bt.current.useTransition()};de.version="18.3.1";lm.exports=de;var f=lm.exports;const pu=O0(f);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0=f,Z0=Symbol.for("react.element"),ey=Symbol.for("react.fragment"),ty=Object.prototype.hasOwnProperty,ny=X0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ry={key:!0,ref:!0,__self:!0,__source:!0};function hm(e,t,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)ty.call(t,r)&&!ry.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Z0,type:e,key:o,ref:l,props:s,_owner:ny.current}}Ki.Fragment=ey;Ki.jsx=hm;Ki.jsxs=hm;om.exports=Ki;var i=om.exports,mu={},gm={exports:{}},Ft={},ym={exports:{}},xm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,Y){var Z=O.length;O.push(Y);e:for(;0<Z;){var ce=Z-1>>>1,K=O[ce];if(0<s(K,Y))O[ce]=Y,O[Z]=K,Z=ce;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var Y=O[0],Z=O.pop();if(Z!==Y){O[0]=Z;e:for(var ce=0,K=O.length,ct=K>>>1;ce<ct;){var Ve=2*(ce+1)-1,$t=O[Ve],dt=Ve+1,et=O[dt];if(0>s($t,Z))dt<K&&0>s(et,$t)?(O[ce]=et,O[dt]=Z,ce=dt):(O[ce]=$t,O[Ve]=Z,ce=Ve);else if(dt<K&&0>s(et,Z))O[ce]=et,O[dt]=Z,ce=dt;else break e}}return Y}function s(O,Y){var Z=O.sortIndex-Y.sortIndex;return Z!==0?Z:O.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var c=[],d=[],y=1,v=null,w=3,j=!1,k=!1,N=!1,q=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=O)r(d),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=n(d)}}function _(O){if(N=!1,x(O),!k)if(n(c)!==null)k=!0,L(D);else{var Y=n(d);Y!==null&&_e(_,Y.startTime-O)}}function D(O,Y){k=!1,N&&(N=!1,h(M),M=-1),j=!0;var Z=w;try{for(x(Y),v=n(c);v!==null&&(!(v.expirationTime>Y)||O&&!me());){var ce=v.callback;if(typeof ce=="function"){v.callback=null,w=v.priorityLevel;var K=ce(v.expirationTime<=Y);Y=e.unstable_now(),typeof K=="function"?v.callback=K:v===n(c)&&r(c),x(Y)}else r(c);v=n(c)}if(v!==null)var ct=!0;else{var Ve=n(d);Ve!==null&&_e(_,Ve.startTime-Y),ct=!1}return ct}finally{v=null,w=Z,j=!1}}var U=!1,B=null,M=-1,fe=5,X=-1;function me(){return!(e.unstable_now()-X<fe)}function Fe(){if(B!==null){var O=e.unstable_now();X=O;var Y=!0;try{Y=B(!0,O)}finally{Y?Qe():(U=!1,B=null)}}else U=!1}var Qe;if(typeof m=="function")Qe=function(){m(Fe)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Re=re.port2;re.port1.onmessage=Fe,Qe=function(){Re.postMessage(null)}}else Qe=function(){q(Fe,0)};function L(O){B=O,U||(U=!0,Qe())}function _e(O,Y){M=q(function(){O(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){k||j||(k=!0,L(D))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(w){case 1:case 2:case 3:var Y=3;break;default:Y=w}var Z=w;w=Y;try{return O()}finally{w=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,Y){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Z=w;w=O;try{return Y()}finally{w=Z}},e.unstable_scheduleCallback=function(O,Y,Z){var ce=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ce+Z:ce):Z=ce,O){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Z+K,O={id:y++,callback:Y,priorityLevel:O,startTime:Z,expirationTime:K,sortIndex:-1},Z>ce?(O.sortIndex=Z,t(d,O),n(c)===null&&O===n(d)&&(N?(h(M),M=-1):N=!0,_e(_,Z-ce))):(O.sortIndex=K,t(c,O),k||j||(k=!0,L(D))),O},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(O){var Y=w;return function(){var Z=w;w=Y;try{return O.apply(this,arguments)}finally{w=Z}}}})(xm);ym.exports=xm;var sy=ym.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy=f,Mt=sy;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vm=new Set,zo={};function Kr(e,t){Ps(e,t),Ps(e+"Capture",t)}function Ps(e,t){for(zo[e]=t,e=0;e<t.length;e++)vm.add(t[e])}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=Object.prototype.hasOwnProperty,ly=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pf={},mf={};function iy(e){return hu.call(mf,e)?!0:hu.call(pf,e)?!1:ly.test(e)?mf[e]=!0:(pf[e]=!0,!1)}function ay(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uy(e,t,n,r){if(t===null||typeof t>"u"||ay(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,s,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var xc=/[\-:]([a-z])/g;function vc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xc,vc);ut[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xc,vc);ut[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xc,vc);ut[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function wc(e,t,n,r){var s=ut.hasOwnProperty(t)?ut[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uy(t,n,s,r)&&(n=null),r||s===null?iy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Un=oy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rl=Symbol.for("react.element"),ds=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Sc=Symbol.for("react.strict_mode"),gu=Symbol.for("react.profiler"),wm=Symbol.for("react.provider"),Sm=Symbol.for("react.context"),bc=Symbol.for("react.forward_ref"),yu=Symbol.for("react.suspense"),xu=Symbol.for("react.suspense_list"),Nc=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),bm=Symbol.for("react.offscreen"),hf=Symbol.iterator;function co(e){return e===null||typeof e!="object"?null:(e=hf&&e[hf]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,Oa;function bo(e){if(Oa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Oa=t&&t[1]||""}return`
`+Oa+e}var Ua=!1;function Ma(e,t){if(!e||Ua)return"";Ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=u);break}}}finally{Ua=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bo(e):""}function cy(e){switch(e.tag){case 5:return bo(e.type);case 16:return bo("Lazy");case 13:return bo("Suspense");case 19:return bo("SuspenseList");case 0:case 2:case 15:return e=Ma(e.type,!1),e;case 11:return e=Ma(e.type.render,!1),e;case 1:return e=Ma(e.type,!0),e;default:return""}}function vu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fs:return"Fragment";case ds:return"Portal";case gu:return"Profiler";case Sc:return"StrictMode";case yu:return"Suspense";case xu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sm:return(e.displayName||"Context")+".Consumer";case wm:return(e._context.displayName||"Context")+".Provider";case bc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nc:return t=e.displayName||null,t!==null?t:vu(e.type)||"Memo";case Qn:t=e._payload,e=e._init;try{return vu(e(t))}catch{}}return null}function dy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vu(t);case 8:return t===Sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fy(e){var t=Nm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Il(e){e._valueTracker||(e._valueTracker=fy(e))}function km(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Nm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wu(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=pr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jm(e,t){t=t.checked,t!=null&&wc(e,"checked",t,!1)}function Su(e,t){jm(e,t);var n=pr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bu(e,t.type,n):t.hasOwnProperty("defaultValue")&&bu(e,t.type,pr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function bu(e,t,n){(t!=="number"||hi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var No=Array.isArray;function Ns(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+pr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Nu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(No(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:pr(n)}}function Cm(e,t){var n=pr(t.value),r=pr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function vf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Em(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ku(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Em(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dl,_m=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dl=Dl||document.createElement("div"),Dl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $o(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},py=["Webkit","ms","Moz","O"];Object.keys(Po).forEach(function(e){py.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Po[t]=Po[e]})});function Tm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Po.hasOwnProperty(e)&&Po[e]?(""+t).trim():t+"px"}function Pm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Tm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var my=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ju(e,t){if(t){if(my[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Cu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=null;function kc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _u=null,ks=null,js=null;function wf(e){if(e=al(e)){if(typeof _u!="function")throw Error(R(280));var t=e.stateNode;t&&(t=qi(t),_u(e.stateNode,e.type,t))}}function Am(e){ks?js?js.push(e):js=[e]:ks=e}function Rm(){if(ks){var e=ks,t=js;if(js=ks=null,wf(e),t)for(e=0;e<t.length;e++)wf(t[e])}}function Im(e,t){return e(t)}function Dm(){}var Fa=!1;function Lm(e,t,n){if(Fa)return e(t,n);Fa=!0;try{return Im(e,t,n)}finally{Fa=!1,(ks!==null||js!==null)&&(Dm(),Rm())}}function Bo(e,t){var n=e.stateNode;if(n===null)return null;var r=qi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var Tu=!1;if(In)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){Tu=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{Tu=!1}function hy(e,t,n,r,s,o,l,u,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(y){this.onError(y)}}var Ao=!1,gi=null,yi=!1,Pu=null,gy={onError:function(e){Ao=!0,gi=e}};function yy(e,t,n,r,s,o,l,u,c){Ao=!1,gi=null,hy.apply(gy,arguments)}function xy(e,t,n,r,s,o,l,u,c){if(yy.apply(this,arguments),Ao){if(Ao){var d=gi;Ao=!1,gi=null}else throw Error(R(198));yi||(yi=!0,Pu=d)}}function Gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Om(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sf(e){if(Gr(e)!==e)throw Error(R(188))}function vy(e){var t=e.alternate;if(!t){if(t=Gr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Sf(s),e;if(o===r)return Sf(s),t;o=o.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,u=s.child;u;){if(u===n){l=!0,n=s,r=o;break}if(u===r){l=!0,r=s,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,r=s;break}if(u===r){l=!0,r=o,n=s;break}u=u.sibling}if(!l)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function Um(e){return e=vy(e),e!==null?Mm(e):null}function Mm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mm(e);if(t!==null)return t;e=e.sibling}return null}var Fm=Mt.unstable_scheduleCallback,bf=Mt.unstable_cancelCallback,wy=Mt.unstable_shouldYield,Sy=Mt.unstable_requestPaint,$e=Mt.unstable_now,by=Mt.unstable_getCurrentPriorityLevel,jc=Mt.unstable_ImmediatePriority,zm=Mt.unstable_UserBlockingPriority,xi=Mt.unstable_NormalPriority,Ny=Mt.unstable_LowPriority,$m=Mt.unstable_IdlePriority,Gi=null,yn=null;function ky(e){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Gi,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:Ey,jy=Math.log,Cy=Math.LN2;function Ey(e){return e>>>=0,e===0?32:31-(jy(e)/Cy|0)|0}var Ll=64,Ol=4194304;function ko(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~s;u!==0?r=ko(u):(o&=l,o!==0&&(r=ko(o)))}else l=n&~s,l!==0?r=ko(l):o!==0&&(r=ko(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ln(t),s=1<<n,r|=e[n],t&=~s;return r}function _y(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ty(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-ln(o),u=1<<l,c=s[l];c===-1?(!(u&n)||u&r)&&(s[l]=_y(u,t)):c<=t&&(e.expiredLanes|=u),o&=~u}}function Au(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bm(){var e=Ll;return Ll<<=1,!(Ll&4194240)&&(Ll=64),e}function za(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ll(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=n}function Py(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ln(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Cc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ln(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ye=0;function Wm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hm,Ec,Vm,Km,Gm,Ru=!1,Ul=[],nr=null,rr=null,sr=null,Wo=new Map,Ho=new Map,Xn=[],Ay="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nf(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Wo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(t.pointerId)}}function po(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=al(t),t!==null&&Ec(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ry(e,t,n,r,s){switch(t){case"focusin":return nr=po(nr,e,t,n,r,s),!0;case"dragenter":return rr=po(rr,e,t,n,r,s),!0;case"mouseover":return sr=po(sr,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Wo.set(o,po(Wo.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ho.set(o,po(Ho.get(o)||null,e,t,n,r,s)),!0}return!1}function Ym(e){var t=Rr(e.target);if(t!==null){var n=Gr(t);if(n!==null){if(t=n.tag,t===13){if(t=Om(n),t!==null){e.blockedOn=t,Gm(e.priority,function(){Vm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ei(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Iu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Eu=r,n.target.dispatchEvent(r),Eu=null}else return t=al(n),t!==null&&Ec(t),e.blockedOn=n,!1;t.shift()}return!0}function kf(e,t,n){ei(e)&&n.delete(t)}function Iy(){Ru=!1,nr!==null&&ei(nr)&&(nr=null),rr!==null&&ei(rr)&&(rr=null),sr!==null&&ei(sr)&&(sr=null),Wo.forEach(kf),Ho.forEach(kf)}function mo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ru||(Ru=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,Iy)))}function Vo(e){function t(s){return mo(s,e)}if(0<Ul.length){mo(Ul[0],e);for(var n=1;n<Ul.length;n++){var r=Ul[n];r.blockedOn===e&&(r.blockedOn=null)}}for(nr!==null&&mo(nr,e),rr!==null&&mo(rr,e),sr!==null&&mo(sr,e),Wo.forEach(t),Ho.forEach(t),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)Ym(n),n.blockedOn===null&&Xn.shift()}var Cs=Un.ReactCurrentBatchConfig,wi=!0;function Dy(e,t,n,r){var s=ye,o=Cs.transition;Cs.transition=null;try{ye=1,_c(e,t,n,r)}finally{ye=s,Cs.transition=o}}function Ly(e,t,n,r){var s=ye,o=Cs.transition;Cs.transition=null;try{ye=4,_c(e,t,n,r)}finally{ye=s,Cs.transition=o}}function _c(e,t,n,r){if(wi){var s=Iu(e,t,n,r);if(s===null)Ja(e,t,r,Si,n),Nf(e,r);else if(Ry(s,e,t,n,r))r.stopPropagation();else if(Nf(e,r),t&4&&-1<Ay.indexOf(e)){for(;s!==null;){var o=al(s);if(o!==null&&Hm(o),o=Iu(e,t,n,r),o===null&&Ja(e,t,r,Si,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Ja(e,t,r,null,n)}}var Si=null;function Iu(e,t,n,r){if(Si=null,e=kc(r),e=Rr(e),e!==null)if(t=Gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Om(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Si=e,null}function Qm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(by()){case jc:return 1;case zm:return 4;case xi:case Ny:return 16;case $m:return 536870912;default:return 16}default:return 16}}var er=null,Tc=null,ti=null;function Jm(){if(ti)return ti;var e,t=Tc,n=t.length,r,s="value"in er?er.value:er.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[o-r];r++);return ti=s.slice(e,1<r?1-r:void 0)}function ni(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ml(){return!0}function jf(){return!1}function zt(e){function t(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ml:jf,this.isPropagationStopped=jf,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),t}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pc=zt(Bs),il=Oe({},Bs,{view:0,detail:0}),Oy=zt(il),$a,Ba,ho,Yi=Oe({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ac,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ho&&(ho&&e.type==="mousemove"?($a=e.screenX-ho.screenX,Ba=e.screenY-ho.screenY):Ba=$a=0,ho=e),$a)},movementY:function(e){return"movementY"in e?e.movementY:Ba}}),Cf=zt(Yi),Uy=Oe({},Yi,{dataTransfer:0}),My=zt(Uy),Fy=Oe({},il,{relatedTarget:0}),Wa=zt(Fy),zy=Oe({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),$y=zt(zy),By=Oe({},Bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wy=zt(By),Hy=Oe({},Bs,{data:0}),Ef=zt(Hy),Vy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gy[e])?!!t[e]:!1}function Ac(){return Yy}var Qy=Oe({},il,{key:function(e){if(e.key){var t=Vy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ky[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ac,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jy=zt(Qy),qy=Oe({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=zt(qy),Xy=Oe({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ac}),Zy=zt(Xy),ex=Oe({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),tx=zt(ex),nx=Oe({},Yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rx=zt(nx),sx=[9,13,27,32],Rc=In&&"CompositionEvent"in window,Ro=null;In&&"documentMode"in document&&(Ro=document.documentMode);var ox=In&&"TextEvent"in window&&!Ro,qm=In&&(!Rc||Ro&&8<Ro&&11>=Ro),Tf=" ",Pf=!1;function Xm(e,t){switch(e){case"keyup":return sx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ps=!1;function lx(e,t){switch(e){case"compositionend":return Zm(t);case"keypress":return t.which!==32?null:(Pf=!0,Tf);case"textInput":return e=t.data,e===Tf&&Pf?null:e;default:return null}}function ix(e,t){if(ps)return e==="compositionend"||!Rc&&Xm(e,t)?(e=Jm(),ti=Tc=er=null,ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qm&&t.locale!=="ko"?null:t.data;default:return null}}var ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ax[e.type]:t==="textarea"}function eh(e,t,n,r){Am(r),t=bi(t,"onChange"),0<t.length&&(n=new Pc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Io=null,Ko=null;function ux(e){dh(e,0)}function Qi(e){var t=gs(e);if(km(t))return e}function cx(e,t){if(e==="change")return t}var th=!1;if(In){var Ha;if(In){var Va="oninput"in document;if(!Va){var Rf=document.createElement("div");Rf.setAttribute("oninput","return;"),Va=typeof Rf.oninput=="function"}Ha=Va}else Ha=!1;th=Ha&&(!document.documentMode||9<document.documentMode)}function If(){Io&&(Io.detachEvent("onpropertychange",nh),Ko=Io=null)}function nh(e){if(e.propertyName==="value"&&Qi(Ko)){var t=[];eh(t,Ko,e,kc(e)),Lm(ux,t)}}function dx(e,t,n){e==="focusin"?(If(),Io=t,Ko=n,Io.attachEvent("onpropertychange",nh)):e==="focusout"&&If()}function fx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qi(Ko)}function px(e,t){if(e==="click")return Qi(t)}function mx(e,t){if(e==="input"||e==="change")return Qi(t)}function hx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:hx;function Go(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hu.call(t,s)||!un(e[s],t[s]))return!1}return!0}function Df(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lf(e,t){var n=Df(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Df(n)}}function rh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sh(){for(var e=window,t=hi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hi(e.document)}return t}function Ic(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gx(e){var t=sh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rh(n.ownerDocument.documentElement,n)){if(r!==null&&Ic(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Lf(n,o);var l=Lf(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yx=In&&"documentMode"in document&&11>=document.documentMode,ms=null,Du=null,Do=null,Lu=!1;function Of(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lu||ms==null||ms!==hi(r)||(r=ms,"selectionStart"in r&&Ic(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Do&&Go(Do,r)||(Do=r,r=bi(Du,"onSelect"),0<r.length&&(t=new Pc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ms)))}function Fl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hs={animationend:Fl("Animation","AnimationEnd"),animationiteration:Fl("Animation","AnimationIteration"),animationstart:Fl("Animation","AnimationStart"),transitionend:Fl("Transition","TransitionEnd")},Ka={},oh={};In&&(oh=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Ji(e){if(Ka[e])return Ka[e];if(!hs[e])return e;var t=hs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in oh)return Ka[e]=t[n];return e}var lh=Ji("animationend"),ih=Ji("animationiteration"),ah=Ji("animationstart"),uh=Ji("transitionend"),ch=new Map,Uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(e,t){ch.set(e,t),Kr(t,[e])}for(var Ga=0;Ga<Uf.length;Ga++){var Ya=Uf[Ga],xx=Ya.toLowerCase(),vx=Ya[0].toUpperCase()+Ya.slice(1);yr(xx,"on"+vx)}yr(lh,"onAnimationEnd");yr(ih,"onAnimationIteration");yr(ah,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(uh,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wx=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function Mf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,xy(r,t,void 0,e),e.currentTarget=null}function dh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var u=r[l],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==o&&s.isPropagationStopped())break e;Mf(s,u,d),o=c}else for(l=0;l<r.length;l++){if(u=r[l],c=u.instance,d=u.currentTarget,u=u.listener,c!==o&&s.isPropagationStopped())break e;Mf(s,u,d),o=c}}}if(yi)throw e=Pu,yi=!1,Pu=null,e}function je(e,t){var n=t[zu];n===void 0&&(n=t[zu]=new Set);var r=e+"__bubble";n.has(r)||(fh(t,e,2,!1),n.add(r))}function Qa(e,t,n){var r=0;t&&(r|=4),fh(n,e,r,t)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Yo(e){if(!e[zl]){e[zl]=!0,vm.forEach(function(n){n!=="selectionchange"&&(wx.has(n)||Qa(n,!1,e),Qa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zl]||(t[zl]=!0,Qa("selectionchange",!1,t))}}function fh(e,t,n,r){switch(Qm(t)){case 1:var s=Dy;break;case 4:s=Ly;break;default:s=_c}n=s.bind(null,t,n,e),s=void 0,!Tu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ja(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;u!==null;){if(l=Rr(u),l===null)return;if(c=l.tag,c===5||c===6){r=o=l;continue e}u=u.parentNode}}r=r.return}Lm(function(){var d=o,y=kc(n),v=[];e:{var w=ch.get(e);if(w!==void 0){var j=Pc,k=e;switch(e){case"keypress":if(ni(n)===0)break e;case"keydown":case"keyup":j=Jy;break;case"focusin":k="focus",j=Wa;break;case"focusout":k="blur",j=Wa;break;case"beforeblur":case"afterblur":j=Wa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=My;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Zy;break;case lh:case ih:case ah:j=$y;break;case uh:j=tx;break;case"scroll":j=Oy;break;case"wheel":j=rx;break;case"copy":case"cut":case"paste":j=Wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=_f}var N=(t&4)!==0,q=!N&&e==="scroll",h=N?w!==null?w+"Capture":null:w;N=[];for(var m=d,x;m!==null;){x=m;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,h!==null&&(_=Bo(m,h),_!=null&&N.push(Qo(m,_,x)))),q)break;m=m.return}0<N.length&&(w=new j(w,k,null,n,y),v.push({event:w,listeners:N}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",w&&n!==Eu&&(k=n.relatedTarget||n.fromElement)&&(Rr(k)||k[Dn]))break e;if((j||w)&&(w=y.window===y?y:(w=y.ownerDocument)?w.defaultView||w.parentWindow:window,j?(k=n.relatedTarget||n.toElement,j=d,k=k?Rr(k):null,k!==null&&(q=Gr(k),k!==q||k.tag!==5&&k.tag!==6)&&(k=null)):(j=null,k=d),j!==k)){if(N=Cf,_="onMouseLeave",h="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(N=_f,_="onPointerLeave",h="onPointerEnter",m="pointer"),q=j==null?w:gs(j),x=k==null?w:gs(k),w=new N(_,m+"leave",j,n,y),w.target=q,w.relatedTarget=x,_=null,Rr(y)===d&&(N=new N(h,m+"enter",k,n,y),N.target=x,N.relatedTarget=q,_=N),q=_,j&&k)t:{for(N=j,h=k,m=0,x=N;x;x=cs(x))m++;for(x=0,_=h;_;_=cs(_))x++;for(;0<m-x;)N=cs(N),m--;for(;0<x-m;)h=cs(h),x--;for(;m--;){if(N===h||h!==null&&N===h.alternate)break t;N=cs(N),h=cs(h)}N=null}else N=null;j!==null&&Ff(v,w,j,N,!1),k!==null&&q!==null&&Ff(v,q,k,N,!0)}}e:{if(w=d?gs(d):window,j=w.nodeName&&w.nodeName.toLowerCase(),j==="select"||j==="input"&&w.type==="file")var D=cx;else if(Af(w))if(th)D=mx;else{D=fx;var U=dx}else(j=w.nodeName)&&j.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(D=px);if(D&&(D=D(e,d))){eh(v,D,n,y);break e}U&&U(e,w,d),e==="focusout"&&(U=w._wrapperState)&&U.controlled&&w.type==="number"&&bu(w,"number",w.value)}switch(U=d?gs(d):window,e){case"focusin":(Af(U)||U.contentEditable==="true")&&(ms=U,Du=d,Do=null);break;case"focusout":Do=Du=ms=null;break;case"mousedown":Lu=!0;break;case"contextmenu":case"mouseup":case"dragend":Lu=!1,Of(v,n,y);break;case"selectionchange":if(yx)break;case"keydown":case"keyup":Of(v,n,y)}var B;if(Rc)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ps?Xm(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(qm&&n.locale!=="ko"&&(ps||M!=="onCompositionStart"?M==="onCompositionEnd"&&ps&&(B=Jm()):(er=y,Tc="value"in er?er.value:er.textContent,ps=!0)),U=bi(d,M),0<U.length&&(M=new Ef(M,e,null,n,y),v.push({event:M,listeners:U}),B?M.data=B:(B=Zm(n),B!==null&&(M.data=B)))),(B=ox?lx(e,n):ix(e,n))&&(d=bi(d,"onBeforeInput"),0<d.length&&(y=new Ef("onBeforeInput","beforeinput",null,n,y),v.push({event:y,listeners:d}),y.data=B))}dh(v,t)})}function Qo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Bo(e,n),o!=null&&r.unshift(Qo(e,o,s)),o=Bo(e,t),o!=null&&r.push(Qo(e,o,s))),e=e.return}return r}function cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ff(e,t,n,r,s){for(var o=t._reactName,l=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=Bo(n,o),c!=null&&l.unshift(Qo(n,c,u))):s||(c=Bo(n,o),c!=null&&l.push(Qo(n,c,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Sx=/\r\n?/g,bx=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(Sx,`
`).replace(bx,"")}function $l(e,t,n){if(t=zf(t),zf(e)!==t&&n)throw Error(R(425))}function Ni(){}var Ou=null,Uu=null;function Mu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fu=typeof setTimeout=="function"?setTimeout:void 0,Nx=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,kx=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(e){return $f.resolve(null).then(e).catch(jx)}:Fu;function jx(e){setTimeout(function(){throw e})}function qa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Vo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vo(t)}function or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),gn="__reactFiber$"+Ws,Jo="__reactProps$"+Ws,Dn="__reactContainer$"+Ws,zu="__reactEvents$"+Ws,Cx="__reactListeners$"+Ws,Ex="__reactHandles$"+Ws;function Rr(e){var t=e[gn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dn]||n[gn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bf(e);e!==null;){if(n=e[gn])return n;e=Bf(e)}return t}e=n,n=e.parentNode}return null}function al(e){return e=e[gn]||e[Dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function qi(e){return e[Jo]||null}var $u=[],ys=-1;function xr(e){return{current:e}}function Ce(e){0>ys||(e.current=$u[ys],$u[ys]=null,ys--)}function Ne(e,t){ys++,$u[ys]=e.current,e.current=t}var mr={},yt=xr(mr),Tt=xr(!1),Fr=mr;function As(e,t){var n=e.type.contextTypes;if(!n)return mr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(e){return e=e.childContextTypes,e!=null}function ki(){Ce(Tt),Ce(yt)}function Wf(e,t,n){if(yt.current!==mr)throw Error(R(168));Ne(yt,t),Ne(Tt,n)}function ph(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,dy(e)||"Unknown",s));return Oe({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mr,Fr=yt.current,Ne(yt,e),Ne(Tt,Tt.current),!0}function Hf(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=ph(e,t,Fr),r.__reactInternalMemoizedMergedChildContext=e,Ce(Tt),Ce(yt),Ne(yt,e)):Ce(Tt),Ne(Tt,n)}var En=null,Xi=!1,Xa=!1;function mh(e){En===null?En=[e]:En.push(e)}function _x(e){Xi=!0,mh(e)}function vr(){if(!Xa&&En!==null){Xa=!0;var e=0,t=ye;try{var n=En;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}En=null,Xi=!1}catch(s){throw En!==null&&(En=En.slice(e+1)),Fm(jc,vr),s}finally{ye=t,Xa=!1}}return null}var xs=[],vs=0,Ci=null,Ei=0,Qt=[],Jt=0,zr=null,_n=1,Tn="";function Tr(e,t){xs[vs++]=Ei,xs[vs++]=Ci,Ci=e,Ei=t}function hh(e,t,n){Qt[Jt++]=_n,Qt[Jt++]=Tn,Qt[Jt++]=zr,zr=e;var r=_n;e=Tn;var s=32-ln(r)-1;r&=~(1<<s),n+=1;var o=32-ln(t)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,_n=1<<32-ln(t)+s|n<<s|r,Tn=o+e}else _n=1<<o|n<<s|r,Tn=e}function Dc(e){e.return!==null&&(Tr(e,1),hh(e,1,0))}function Lc(e){for(;e===Ci;)Ci=xs[--vs],xs[vs]=null,Ei=xs[--vs],xs[vs]=null;for(;e===zr;)zr=Qt[--Jt],Qt[Jt]=null,Tn=Qt[--Jt],Qt[Jt]=null,_n=Qt[--Jt],Qt[Jt]=null}var Ut=null,Ot=null,Ae=!1,on=null;function gh(e,t){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ut=e,Ot=or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ut=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zr!==null?{id:_n,overflow:Tn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ut=e,Ot=null,!0):!1;default:return!1}}function Bu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wu(e){if(Ae){var t=Ot;if(t){var n=t;if(!Vf(e,t)){if(Bu(e))throw Error(R(418));t=or(n.nextSibling);var r=Ut;t&&Vf(e,t)?gh(r,n):(e.flags=e.flags&-4097|2,Ae=!1,Ut=e)}}else{if(Bu(e))throw Error(R(418));e.flags=e.flags&-4097|2,Ae=!1,Ut=e}}}function Kf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ut=e}function Bl(e){if(e!==Ut)return!1;if(!Ae)return Kf(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mu(e.type,e.memoizedProps)),t&&(t=Ot)){if(Bu(e))throw yh(),Error(R(418));for(;t;)gh(e,t),t=or(t.nextSibling)}if(Kf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ot=or(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=Ut?or(e.stateNode.nextSibling):null;return!0}function yh(){for(var e=Ot;e;)e=or(e.nextSibling)}function Rs(){Ot=Ut=null,Ae=!1}function Oc(e){on===null?on=[e]:on.push(e)}var Tx=Un.ReactCurrentBatchConfig;function go(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var u=s.refs;l===null?delete u[o]:u[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Wl(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gf(e){var t=e._init;return t(e._payload)}function xh(e){function t(h,m){if(e){var x=h.deletions;x===null?(h.deletions=[m],h.flags|=16):x.push(m)}}function n(h,m){if(!e)return null;for(;m!==null;)t(h,m),m=m.sibling;return null}function r(h,m){for(h=new Map;m!==null;)m.key!==null?h.set(m.key,m):h.set(m.index,m),m=m.sibling;return h}function s(h,m){return h=ur(h,m),h.index=0,h.sibling=null,h}function o(h,m,x){return h.index=x,e?(x=h.alternate,x!==null?(x=x.index,x<m?(h.flags|=2,m):x):(h.flags|=2,m)):(h.flags|=1048576,m)}function l(h){return e&&h.alternate===null&&(h.flags|=2),h}function u(h,m,x,_){return m===null||m.tag!==6?(m=ou(x,h.mode,_),m.return=h,m):(m=s(m,x),m.return=h,m)}function c(h,m,x,_){var D=x.type;return D===fs?y(h,m,x.props.children,_,x.key):m!==null&&(m.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qn&&Gf(D)===m.type)?(_=s(m,x.props),_.ref=go(h,m,x),_.return=h,_):(_=ui(x.type,x.key,x.props,null,h.mode,_),_.ref=go(h,m,x),_.return=h,_)}function d(h,m,x,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=lu(x,h.mode,_),m.return=h,m):(m=s(m,x.children||[]),m.return=h,m)}function y(h,m,x,_,D){return m===null||m.tag!==7?(m=Mr(x,h.mode,_,D),m.return=h,m):(m=s(m,x),m.return=h,m)}function v(h,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ou(""+m,h.mode,x),m.return=h,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Rl:return x=ui(m.type,m.key,m.props,null,h.mode,x),x.ref=go(h,null,m),x.return=h,x;case ds:return m=lu(m,h.mode,x),m.return=h,m;case Qn:var _=m._init;return v(h,_(m._payload),x)}if(No(m)||co(m))return m=Mr(m,h.mode,x,null),m.return=h,m;Wl(h,m)}return null}function w(h,m,x,_){var D=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return D!==null?null:u(h,m,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rl:return x.key===D?c(h,m,x,_):null;case ds:return x.key===D?d(h,m,x,_):null;case Qn:return D=x._init,w(h,m,D(x._payload),_)}if(No(x)||co(x))return D!==null?null:y(h,m,x,_,null);Wl(h,x)}return null}function j(h,m,x,_,D){if(typeof _=="string"&&_!==""||typeof _=="number")return h=h.get(x)||null,u(m,h,""+_,D);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Rl:return h=h.get(_.key===null?x:_.key)||null,c(m,h,_,D);case ds:return h=h.get(_.key===null?x:_.key)||null,d(m,h,_,D);case Qn:var U=_._init;return j(h,m,x,U(_._payload),D)}if(No(_)||co(_))return h=h.get(x)||null,y(m,h,_,D,null);Wl(m,_)}return null}function k(h,m,x,_){for(var D=null,U=null,B=m,M=m=0,fe=null;B!==null&&M<x.length;M++){B.index>M?(fe=B,B=null):fe=B.sibling;var X=w(h,B,x[M],_);if(X===null){B===null&&(B=fe);break}e&&B&&X.alternate===null&&t(h,B),m=o(X,m,M),U===null?D=X:U.sibling=X,U=X,B=fe}if(M===x.length)return n(h,B),Ae&&Tr(h,M),D;if(B===null){for(;M<x.length;M++)B=v(h,x[M],_),B!==null&&(m=o(B,m,M),U===null?D=B:U.sibling=B,U=B);return Ae&&Tr(h,M),D}for(B=r(h,B);M<x.length;M++)fe=j(B,h,M,x[M],_),fe!==null&&(e&&fe.alternate!==null&&B.delete(fe.key===null?M:fe.key),m=o(fe,m,M),U===null?D=fe:U.sibling=fe,U=fe);return e&&B.forEach(function(me){return t(h,me)}),Ae&&Tr(h,M),D}function N(h,m,x,_){var D=co(x);if(typeof D!="function")throw Error(R(150));if(x=D.call(x),x==null)throw Error(R(151));for(var U=D=null,B=m,M=m=0,fe=null,X=x.next();B!==null&&!X.done;M++,X=x.next()){B.index>M?(fe=B,B=null):fe=B.sibling;var me=w(h,B,X.value,_);if(me===null){B===null&&(B=fe);break}e&&B&&me.alternate===null&&t(h,B),m=o(me,m,M),U===null?D=me:U.sibling=me,U=me,B=fe}if(X.done)return n(h,B),Ae&&Tr(h,M),D;if(B===null){for(;!X.done;M++,X=x.next())X=v(h,X.value,_),X!==null&&(m=o(X,m,M),U===null?D=X:U.sibling=X,U=X);return Ae&&Tr(h,M),D}for(B=r(h,B);!X.done;M++,X=x.next())X=j(B,h,M,X.value,_),X!==null&&(e&&X.alternate!==null&&B.delete(X.key===null?M:X.key),m=o(X,m,M),U===null?D=X:U.sibling=X,U=X);return e&&B.forEach(function(Fe){return t(h,Fe)}),Ae&&Tr(h,M),D}function q(h,m,x,_){if(typeof x=="object"&&x!==null&&x.type===fs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Rl:e:{for(var D=x.key,U=m;U!==null;){if(U.key===D){if(D=x.type,D===fs){if(U.tag===7){n(h,U.sibling),m=s(U,x.props.children),m.return=h,h=m;break e}}else if(U.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qn&&Gf(D)===U.type){n(h,U.sibling),m=s(U,x.props),m.ref=go(h,U,x),m.return=h,h=m;break e}n(h,U);break}else t(h,U);U=U.sibling}x.type===fs?(m=Mr(x.props.children,h.mode,_,x.key),m.return=h,h=m):(_=ui(x.type,x.key,x.props,null,h.mode,_),_.ref=go(h,m,x),_.return=h,h=_)}return l(h);case ds:e:{for(U=x.key;m!==null;){if(m.key===U)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){n(h,m.sibling),m=s(m,x.children||[]),m.return=h,h=m;break e}else{n(h,m);break}else t(h,m);m=m.sibling}m=lu(x,h.mode,_),m.return=h,h=m}return l(h);case Qn:return U=x._init,q(h,m,U(x._payload),_)}if(No(x))return k(h,m,x,_);if(co(x))return N(h,m,x,_);Wl(h,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(n(h,m.sibling),m=s(m,x),m.return=h,h=m):(n(h,m),m=ou(x,h.mode,_),m.return=h,h=m),l(h)):n(h,m)}return q}var Is=xh(!0),vh=xh(!1),_i=xr(null),Ti=null,ws=null,Uc=null;function Mc(){Uc=ws=Ti=null}function Fc(e){var t=_i.current;Ce(_i),e._currentValue=t}function Hu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){Ti=e,Uc=ws=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_t=!0),e.firstContext=null)}function Zt(e){var t=e._currentValue;if(Uc!==e)if(e={context:e,memoizedValue:t,next:null},ws===null){if(Ti===null)throw Error(R(308));ws=e,Ti.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Ir=null;function zc(e){Ir===null?Ir=[e]:Ir.push(e)}function wh(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,zc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ln(e,r)}function Ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jn=!1;function $c(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ln(e,n)}return s=r.interleaved,s===null?(t.next=t,zc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ln(e,n)}function ri(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cc(e,n)}}function Yf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pi(e,t,n,r){var s=e.updateQueue;Jn=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,l===null?o=d:l.next=d,l=c;var y=e.alternate;y!==null&&(y=y.updateQueue,u=y.lastBaseUpdate,u!==l&&(u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=c))}if(o!==null){var v=s.baseState;l=0,y=d=c=null,u=o;do{var w=u.lane,j=u.eventTime;if((r&w)===w){y!==null&&(y=y.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=e,N=u;switch(w=t,j=n,N.tag){case 1:if(k=N.payload,typeof k=="function"){v=k.call(j,v,w);break e}v=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,w=typeof k=="function"?k.call(j,v,w):k,w==null)break e;v=Oe({},v,w);break e;case 2:Jn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,w=s.effects,w===null?s.effects=[u]:w.push(u))}else j={eventTime:j,lane:w,tag:u.tag,payload:u.payload,callback:u.callback,next:null},y===null?(d=y=j,c=v):y=y.next=j,l|=w;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;w=u,u=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(y===null&&(c=v),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=y,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Br|=l,e.lanes=l,e.memoizedState=v}}function Qf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var ul={},xn=xr(ul),qo=xr(ul),Xo=xr(ul);function Dr(e){if(e===ul)throw Error(R(174));return e}function Bc(e,t){switch(Ne(Xo,t),Ne(qo,e),Ne(xn,ul),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ku(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ku(t,e)}Ce(xn),Ne(xn,t)}function Ds(){Ce(xn),Ce(qo),Ce(Xo)}function bh(e){Dr(Xo.current);var t=Dr(xn.current),n=ku(t,e.type);t!==n&&(Ne(qo,e),Ne(xn,n))}function Wc(e){qo.current===e&&(Ce(xn),Ce(qo))}var De=xr(0);function Ai(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Za=[];function Hc(){for(var e=0;e<Za.length;e++)Za[e]._workInProgressVersionPrimary=null;Za.length=0}var si=Un.ReactCurrentDispatcher,eu=Un.ReactCurrentBatchConfig,$r=0,Le=null,Ge=null,Xe=null,Ri=!1,Lo=!1,Zo=0,Px=0;function mt(){throw Error(R(321))}function Vc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!un(e[n],t[n]))return!1;return!0}function Kc(e,t,n,r,s,o){if($r=o,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=e===null||e.memoizedState===null?Dx:Lx,e=n(r,s),Lo){o=0;do{if(Lo=!1,Zo=0,25<=o)throw Error(R(301));o+=1,Xe=Ge=null,t.updateQueue=null,si.current=Ox,e=n(r,s)}while(Lo)}if(si.current=Ii,t=Ge!==null&&Ge.next!==null,$r=0,Xe=Ge=Le=null,Ri=!1,t)throw Error(R(300));return e}function Gc(){var e=Zo!==0;return Zo=0,e}function pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Le.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function en(){if(Ge===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=Xe===null?Le.memoizedState:Xe.next;if(t!==null)Xe=t,Ge=e;else{if(e===null)throw Error(R(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Xe===null?Le.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function el(e,t){return typeof t=="function"?t(e):t}function tu(e){var t=en(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Ge,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var u=l=null,c=null,d=o;do{var y=d.lane;if(($r&y)===y)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var v={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=v,l=r):c=c.next=v,Le.lanes|=y,Br|=y}d=d.next}while(d!==null&&d!==o);c===null?l=r:c.next=u,un(r,t.memoizedState)||(_t=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Le.lanes|=o,Br|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nu(e){var t=en(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=e(o,l.action),l=l.next;while(l!==s);un(o,t.memoizedState)||(_t=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Nh(){}function kh(e,t){var n=Le,r=en(),s=t(),o=!un(r.memoizedState,s);if(o&&(r.memoizedState=s,_t=!0),r=r.queue,Yc(Eh.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,tl(9,Ch.bind(null,n,r,s,t),void 0,null),Ze===null)throw Error(R(349));$r&30||jh(n,t,s)}return s}function jh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ch(e,t,n,r){t.value=n,t.getSnapshot=r,_h(t)&&Th(e)}function Eh(e,t,n){return n(function(){_h(t)&&Th(e)})}function _h(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!un(e,n)}catch{return!0}}function Th(e){var t=Ln(e,1);t!==null&&an(t,e,1,-1)}function Jf(e){var t=pn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:e},t.queue=e,e=e.dispatch=Ix.bind(null,Le,e),[t.memoizedState,e]}function tl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ph(){return en().memoizedState}function oi(e,t,n,r){var s=pn();Le.flags|=e,s.memoizedState=tl(1|t,n,void 0,r===void 0?null:r)}function Zi(e,t,n,r){var s=en();r=r===void 0?null:r;var o=void 0;if(Ge!==null){var l=Ge.memoizedState;if(o=l.destroy,r!==null&&Vc(r,l.deps)){s.memoizedState=tl(t,n,o,r);return}}Le.flags|=e,s.memoizedState=tl(1|t,n,o,r)}function qf(e,t){return oi(8390656,8,e,t)}function Yc(e,t){return Zi(2048,8,e,t)}function Ah(e,t){return Zi(4,2,e,t)}function Rh(e,t){return Zi(4,4,e,t)}function Ih(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dh(e,t,n){return n=n!=null?n.concat([e]):null,Zi(4,4,Ih.bind(null,t,e),n)}function Qc(){}function Lh(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Vc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Oh(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Vc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Uh(e,t,n){return $r&21?(un(n,t)||(n=Bm(),Le.lanes|=n,Br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_t=!0),e.memoizedState=n)}function Ax(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=eu.transition;eu.transition={};try{e(!1),t()}finally{ye=n,eu.transition=r}}function Mh(){return en().memoizedState}function Rx(e,t,n){var r=ar(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fh(e))zh(t,n);else if(n=wh(e,t,n,r),n!==null){var s=St();an(n,e,r,s),$h(n,t,r)}}function Ix(e,t,n){var r=ar(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fh(e))zh(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,u=o(l,n);if(s.hasEagerState=!0,s.eagerState=u,un(u,l)){var c=t.interleaved;c===null?(s.next=s,zc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=wh(e,t,s,r),n!==null&&(s=St(),an(n,e,r,s),$h(n,t,r))}}function Fh(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function zh(e,t){Lo=Ri=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $h(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cc(e,n)}}var Ii={readContext:Zt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},Dx={readContext:Zt,useCallback:function(e,t){return pn().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:qf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,oi(4194308,4,Ih.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return oi(4,2,e,t)},useMemo:function(e,t){var n=pn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Rx.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=pn();return e={current:e},t.memoizedState=e},useState:Jf,useDebugValue:Qc,useDeferredValue:function(e){return pn().memoizedState=e},useTransition:function(){var e=Jf(!1),t=e[0];return e=Ax.bind(null,e[1]),pn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,s=pn();if(Ae){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),Ze===null)throw Error(R(349));$r&30||jh(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,qf(Eh.bind(null,r,o,e),[e]),r.flags|=2048,tl(9,Ch.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=pn(),t=Ze.identifierPrefix;if(Ae){var n=Tn,r=_n;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Px++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Lx={readContext:Zt,useCallback:Lh,useContext:Zt,useEffect:Yc,useImperativeHandle:Dh,useInsertionEffect:Ah,useLayoutEffect:Rh,useMemo:Oh,useReducer:tu,useRef:Ph,useState:function(){return tu(el)},useDebugValue:Qc,useDeferredValue:function(e){var t=en();return Uh(t,Ge.memoizedState,e)},useTransition:function(){var e=tu(el)[0],t=en().memoizedState;return[e,t]},useMutableSource:Nh,useSyncExternalStore:kh,useId:Mh,unstable_isNewReconciler:!1},Ox={readContext:Zt,useCallback:Lh,useContext:Zt,useEffect:Yc,useImperativeHandle:Dh,useInsertionEffect:Ah,useLayoutEffect:Rh,useMemo:Oh,useReducer:nu,useRef:Ph,useState:function(){return nu(el)},useDebugValue:Qc,useDeferredValue:function(e){var t=en();return Ge===null?t.memoizedState=e:Uh(t,Ge.memoizedState,e)},useTransition:function(){var e=nu(el)[0],t=en().memoizedState;return[e,t]},useMutableSource:Nh,useSyncExternalStore:kh,useId:Mh,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Vu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ea={isMounted:function(e){return(e=e._reactInternals)?Gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),s=ar(e),o=Pn(r,s);o.payload=t,n!=null&&(o.callback=n),t=lr(e,o,s),t!==null&&(an(t,e,s,r),ri(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),s=ar(e),o=Pn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=lr(e,o,s),t!==null&&(an(t,e,s,r),ri(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=ar(e),s=Pn(n,r);s.tag=2,t!=null&&(s.callback=t),t=lr(e,s,r),t!==null&&(an(t,e,r,n),ri(t,e,r))}};function Xf(e,t,n,r,s,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!Go(n,r)||!Go(s,o):!0}function Bh(e,t,n){var r=!1,s=mr,o=t.contextType;return typeof o=="object"&&o!==null?o=Zt(o):(s=Pt(t)?Fr:yt.current,r=t.contextTypes,o=(r=r!=null)?As(e,s):mr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ea,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Zf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ea.enqueueReplaceState(t,t.state,null)}function Ku(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},$c(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Zt(o):(o=Pt(t)?Fr:yt.current,s.context=As(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Vu(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ea.enqueueReplaceState(s,s.state,null),Pi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ls(e,t){try{var n="",r=t;do n+=cy(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function ru(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Gu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ux=typeof WeakMap=="function"?WeakMap:Map;function Wh(e,t,n){n=Pn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Li||(Li=!0,rc=r),Gu(e,t)},n}function Hh(e,t,n){n=Pn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Gu(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Gu(e,t),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function ep(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ux;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=qx.bind(null,e,t,n),t.then(e,e))}function tp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function np(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pn(-1,1),t.tag=2,lr(n,t,1))),n.lanes|=1),e)}var Mx=Un.ReactCurrentOwner,_t=!1;function wt(e,t,n,r){t.child=e===null?vh(t,null,n,r):Is(t,e.child,n,r)}function rp(e,t,n,r,s){n=n.render;var o=t.ref;return Es(t,s),r=Kc(e,t,n,r,o,s),n=Gc(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(Ae&&n&&Dc(t),t.flags|=1,wt(e,t,r,s),t.child)}function sp(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!rd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Vh(e,t,o,r,s)):(e=ui(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Go,n(l,r)&&e.ref===t.ref)return On(e,t,s)}return t.flags|=1,e=ur(o,r),e.ref=t.ref,e.return=t,t.child=e}function Vh(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Go(o,r)&&e.ref===t.ref)if(_t=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(_t=!0);else return t.lanes=e.lanes,On(e,t,s)}return Yu(e,t,n,r,s)}function Kh(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(bs,Lt),Lt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(bs,Lt),Lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ne(bs,Lt),Lt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ne(bs,Lt),Lt|=r;return wt(e,t,s,n),t.child}function Gh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yu(e,t,n,r,s){var o=Pt(n)?Fr:yt.current;return o=As(t,o),Es(t,s),n=Kc(e,t,n,r,o,s),r=Gc(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(Ae&&r&&Dc(t),t.flags|=1,wt(e,t,n,s),t.child)}function op(e,t,n,r,s){if(Pt(n)){var o=!0;ji(t)}else o=!1;if(Es(t,s),t.stateNode===null)li(e,t),Bh(t,n,r),Ku(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zt(d):(d=Pt(n)?Fr:yt.current,d=As(t,d));var y=n.getDerivedStateFromProps,v=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Zf(t,l,r,d),Jn=!1;var w=t.memoizedState;l.state=w,Pi(t,r,l,s),c=t.memoizedState,u!==r||w!==c||Tt.current||Jn?(typeof y=="function"&&(Vu(t,n,y,r),c=t.memoizedState),(u=Jn||Xf(t,n,u,r,w,c,d))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=d,r=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Sh(e,t),u=t.memoizedProps,d=t.type===t.elementType?u:rn(t.type,u),l.props=d,v=t.pendingProps,w=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=Pt(n)?Fr:yt.current,c=As(t,c));var j=n.getDerivedStateFromProps;(y=typeof j=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==v||w!==c)&&Zf(t,l,r,c),Jn=!1,w=t.memoizedState,l.state=w,Pi(t,r,l,s);var k=t.memoizedState;u!==v||w!==k||Tt.current||Jn?(typeof j=="function"&&(Vu(t,n,j,r),k=t.memoizedState),(d=Jn||Xf(t,n,d,r,w,k,c)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,k,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,k,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),l.props=r,l.state=k,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return Qu(e,t,n,r,o,s)}function Qu(e,t,n,r,s,o){Gh(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&Hf(t,n,!1),On(e,t,o);r=t.stateNode,Mx.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Is(t,e.child,null,o),t.child=Is(t,null,u,o)):wt(e,t,u,o),t.memoizedState=r.state,s&&Hf(t,n,!0),t.child}function Yh(e){var t=e.stateNode;t.pendingContext?Wf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wf(e,t.context,!1),Bc(e,t.containerInfo)}function lp(e,t,n,r,s){return Rs(),Oc(s),t.flags|=256,wt(e,t,n,r),t.child}var Ju={dehydrated:null,treeContext:null,retryLane:0};function qu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qh(e,t,n){var r=t.pendingProps,s=De.current,o=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(s&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ne(De,s&1),e===null)return Wu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=ra(l,r,0,null),e=Mr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=qu(n),t.memoizedState=Ju,e):Jc(t,l));if(s=e.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return Fx(e,t,l,r,u,s,n);if(o){o=r.fallback,l=t.mode,s=e.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ur(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=ur(u,o):(o=Mr(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?qu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ju,r}return o=e.child,e=o.sibling,r=ur(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Jc(e,t){return t=ra({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hl(e,t,n,r){return r!==null&&Oc(r),Is(t,e.child,null,n),e=Jc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fx(e,t,n,r,s,o,l){if(n)return t.flags&256?(t.flags&=-257,r=ru(Error(R(422))),Hl(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=ra({mode:"visible",children:r.children},s,0,null),o=Mr(o,s,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Is(t,e.child,null,l),t.child.memoizedState=qu(l),t.memoizedState=Ju,o);if(!(t.mode&1))return Hl(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(R(419)),r=ru(o,r,void 0),Hl(e,t,l,r)}if(u=(l&e.childLanes)!==0,_t||u){if(r=Ze,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ln(e,s),an(r,e,s,-1))}return nd(),r=ru(Error(R(421))),Hl(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Xx.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Ot=or(s.nextSibling),Ut=t,Ae=!0,on=null,e!==null&&(Qt[Jt++]=_n,Qt[Jt++]=Tn,Qt[Jt++]=zr,_n=e.id,Tn=e.overflow,zr=t),t=Jc(t,r.children),t.flags|=4096,t)}function ip(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Hu(e.return,t,n)}function su(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Jh(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(wt(e,t,r.children,n),r=De.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ip(e,n,t);else if(e.tag===19)ip(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(De,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ai(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),su(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ai(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}su(t,!0,n,null,o);break;case"together":su(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function li(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function On(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=ur(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ur(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zx(e,t,n){switch(t.tag){case 3:Yh(t),Rs();break;case 5:bh(t);break;case 1:Pt(t.type)&&ji(t);break;case 4:Bc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ne(_i,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ne(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?Qh(e,t,n):(Ne(De,De.current&1),e=On(e,t,n),e!==null?e.sibling:null);Ne(De,De.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Jh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(De,De.current),r)break;return null;case 22:case 23:return t.lanes=0,Kh(e,t,n)}return On(e,t,n)}var qh,Xu,Xh,Zh;qh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xu=function(){};Xh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Dr(xn.current);var o=null;switch(n){case"input":s=wu(e,s),r=wu(e,r),o=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),o=[];break;case"textarea":s=Nu(e,s),r=Nu(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ni)}ju(n,r);var l;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(zo.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(zo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&je("scroll",e),o||u===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Zh=function(e,t,n,r){n!==r&&(t.flags|=4)};function yo(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $x(e,t,n){var r=t.pendingProps;switch(Lc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return Pt(t.type)&&ki(),ht(t),null;case 3:return r=t.stateNode,Ds(),Ce(Tt),Ce(yt),Hc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,on!==null&&(lc(on),on=null))),Xu(e,t),ht(t),null;case 5:Wc(t);var s=Dr(Xo.current);if(n=t.type,e!==null&&t.stateNode!=null)Xh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return ht(t),null}if(e=Dr(xn.current),Bl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[gn]=t,r[Jo]=o,e=(t.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<jo.length;s++)je(jo[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":gf(r,o),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},je("invalid",r);break;case"textarea":xf(r,o),je("invalid",r)}ju(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&$l(r.textContent,u,e),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&$l(r.textContent,u,e),s=["children",""+u]):zo.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&je("scroll",r)}switch(n){case"input":Il(r),yf(r,o,!0);break;case"textarea":Il(r),vf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ni)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Em(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[gn]=t,e[Jo]=r,qh(e,t,!1,!1),t.stateNode=e;e:{switch(l=Cu(n,r),n){case"dialog":je("cancel",e),je("close",e),s=r;break;case"iframe":case"object":case"embed":je("load",e),s=r;break;case"video":case"audio":for(s=0;s<jo.length;s++)je(jo[s],e);s=r;break;case"source":je("error",e),s=r;break;case"img":case"image":case"link":je("error",e),je("load",e),s=r;break;case"details":je("toggle",e),s=r;break;case"input":gf(e,r),s=wu(e,r),je("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),je("invalid",e);break;case"textarea":xf(e,r),s=Nu(e,r),je("invalid",e);break;default:s=r}ju(n,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?Pm(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_m(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$o(e,c):typeof c=="number"&&$o(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(zo.hasOwnProperty(o)?c!=null&&o==="onScroll"&&je("scroll",e):c!=null&&wc(e,o,c,l))}switch(n){case"input":Il(e),yf(e,r,!1);break;case"textarea":Il(e),vf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+pr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Ns(e,!!r.multiple,o,!1):r.defaultValue!=null&&Ns(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ni)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ht(t),null;case 6:if(e&&t.stateNode!=null)Zh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=Dr(Xo.current),Dr(xn.current),Bl(t)){if(r=t.stateNode,n=t.memoizedProps,r[gn]=t,(o=r.nodeValue!==n)&&(e=Ut,e!==null))switch(e.tag){case 3:$l(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$l(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=t,t.stateNode=r}return ht(t),null;case 13:if(Ce(De),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&Ot!==null&&t.mode&1&&!(t.flags&128))yh(),Rs(),t.flags|=98560,o=!1;else if(o=Bl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(R(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(R(317));o[gn]=t}else Rs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ht(t),o=!1}else on!==null&&(lc(on),on=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?Ye===0&&(Ye=3):nd())),t.updateQueue!==null&&(t.flags|=4),ht(t),null);case 4:return Ds(),Xu(e,t),e===null&&Yo(t.stateNode.containerInfo),ht(t),null;case 10:return Fc(t.type._context),ht(t),null;case 17:return Pt(t.type)&&ki(),ht(t),null;case 19:if(Ce(De),o=t.memoizedState,o===null)return ht(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)yo(o,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ai(e),l!==null){for(t.flags|=128,yo(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(De,De.current&1|2),t.child}e=e.sibling}o.tail!==null&&$e()>Os&&(t.flags|=128,r=!0,yo(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ai(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ae)return ht(t),null}else 2*$e()-o.renderingStartTime>Os&&n!==1073741824&&(t.flags|=128,r=!0,yo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=De.current,Ne(De,r?n&1|2:n&1),t):(ht(t),null);case 22:case 23:return td(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Lt&1073741824&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function Bx(e,t){switch(Lc(t),t.tag){case 1:return Pt(t.type)&&ki(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ds(),Ce(Tt),Ce(yt),Hc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wc(t),null;case 13:if(Ce(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Rs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(De),null;case 4:return Ds(),null;case 10:return Fc(t.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var Vl=!1,gt=!1,Wx=typeof WeakSet=="function"?WeakSet:Set,V=null;function Ss(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(e,t,r)}else n.current=null}function Zu(e,t,n){try{n()}catch(r){Me(e,t,r)}}var ap=!1;function Hx(e,t){if(Ou=wi,e=sh(),Ic(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,u=-1,c=-1,d=0,y=0,v=e,w=null;t:for(;;){for(var j;v!==n||s!==0&&v.nodeType!==3||(u=l+s),v!==o||r!==0&&v.nodeType!==3||(c=l+r),v.nodeType===3&&(l+=v.nodeValue.length),(j=v.firstChild)!==null;)w=v,v=j;for(;;){if(v===e)break t;if(w===n&&++d===s&&(u=l),w===o&&++y===r&&(c=l),(j=v.nextSibling)!==null)break;v=w,w=v.parentNode}v=j}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uu={focusedElem:e,selectionRange:n},wi=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,q=k.memoizedState,h=t.stateNode,m=h.getSnapshotBeforeUpdate(t.elementType===t.type?N:rn(t.type,N),q);h.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(_){Me(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return k=ap,ap=!1,k}function Oo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Zu(t,n,o)}s=s.next}while(s!==r)}}function ta(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ec(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eg(e){var t=e.alternate;t!==null&&(e.alternate=null,eg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gn],delete t[Jo],delete t[zu],delete t[Cx],delete t[Ex])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tg(e){return e.tag===5||e.tag===3||e.tag===4}function up(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ni));else if(r!==4&&(e=e.child,e!==null))for(tc(e,t,n),e=e.sibling;e!==null;)tc(e,t,n),e=e.sibling}function nc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nc(e,t,n),e=e.sibling;e!==null;)nc(e,t,n),e=e.sibling}var it=null,sn=!1;function Gn(e,t,n){for(n=n.child;n!==null;)ng(e,t,n),n=n.sibling}function ng(e,t,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Gi,n)}catch{}switch(n.tag){case 5:gt||Ss(n,t);case 6:var r=it,s=sn;it=null,Gn(e,t,n),it=r,sn=s,it!==null&&(sn?(e=it,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(sn?(e=it,n=n.stateNode,e.nodeType===8?qa(e.parentNode,n):e.nodeType===1&&qa(e,n),Vo(e)):qa(it,n.stateNode));break;case 4:r=it,s=sn,it=n.stateNode.containerInfo,sn=!0,Gn(e,t,n),it=r,sn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Zu(n,t,l),s=s.next}while(s!==r)}Gn(e,t,n);break;case 1:if(!gt&&(Ss(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Me(n,t,u)}Gn(e,t,n);break;case 21:Gn(e,t,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Gn(e,t,n),gt=r):Gn(e,t,n);break;default:Gn(e,t,n)}}function cp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Wx),t.forEach(function(r){var s=Zx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:it=u.stateNode,sn=!1;break e;case 3:it=u.stateNode.containerInfo,sn=!0;break e;case 4:it=u.stateNode.containerInfo,sn=!0;break e}u=u.return}if(it===null)throw Error(R(160));ng(o,l,s),it=null,sn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Me(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rg(t,e),t=t.sibling}function rg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),fn(e),r&4){try{Oo(3,e,e.return),ta(3,e)}catch(N){Me(e,e.return,N)}try{Oo(5,e,e.return)}catch(N){Me(e,e.return,N)}}break;case 1:nn(t,e),fn(e),r&512&&n!==null&&Ss(n,n.return);break;case 5:if(nn(t,e),fn(e),r&512&&n!==null&&Ss(n,n.return),e.flags&32){var s=e.stateNode;try{$o(s,"")}catch(N){Me(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&jm(s,o),Cu(u,l);var d=Cu(u,o);for(l=0;l<c.length;l+=2){var y=c[l],v=c[l+1];y==="style"?Pm(s,v):y==="dangerouslySetInnerHTML"?_m(s,v):y==="children"?$o(s,v):wc(s,y,v,d)}switch(u){case"input":Su(s,o);break;case"textarea":Cm(s,o);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?Ns(s,!!o.multiple,j,!1):w!==!!o.multiple&&(o.defaultValue!=null?Ns(s,!!o.multiple,o.defaultValue,!0):Ns(s,!!o.multiple,o.multiple?[]:"",!1))}s[Jo]=o}catch(N){Me(e,e.return,N)}}break;case 6:if(nn(t,e),fn(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(N){Me(e,e.return,N)}}break;case 3:if(nn(t,e),fn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vo(t.containerInfo)}catch(N){Me(e,e.return,N)}break;case 4:nn(t,e),fn(e);break;case 13:nn(t,e),fn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Zc=$e())),r&4&&cp(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(gt=(d=gt)||y,nn(t,e),gt=d):nn(t,e),fn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!y&&e.mode&1)for(V=e,y=e.child;y!==null;){for(v=V=y;V!==null;){switch(w=V,j=w.child,w.tag){case 0:case 11:case 14:case 15:Oo(4,w,w.return);break;case 1:Ss(w,w.return);var k=w.stateNode;if(typeof k.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(N){Me(r,n,N)}}break;case 5:Ss(w,w.return);break;case 22:if(w.memoizedState!==null){fp(v);continue}}j!==null?(j.return=w,V=j):fp(v)}y=y.sibling}e:for(y=null,v=e;;){if(v.tag===5){if(y===null){y=v;try{s=v.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=v.stateNode,c=v.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Tm("display",l))}catch(N){Me(e,e.return,N)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(N){Me(e,e.return,N)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:nn(t,e),fn(e),r&4&&cp(e);break;case 21:break;default:nn(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(tg(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($o(s,""),r.flags&=-33);var o=up(e);nc(e,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,u=up(e);tc(e,u,l);break;default:throw Error(R(161))}}catch(c){Me(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vx(e,t,n){V=e,sg(e)}function sg(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var s=V,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Vl;if(!l){var u=s.alternate,c=u!==null&&u.memoizedState!==null||gt;u=Vl;var d=gt;if(Vl=l,(gt=c)&&!d)for(V=s;V!==null;)l=V,c=l.child,l.tag===22&&l.memoizedState!==null?pp(s):c!==null?(c.return=l,V=c):pp(s);for(;o!==null;)V=o,sg(o),o=o.sibling;V=s,Vl=u,gt=d}dp(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,V=o):dp(e)}}function dp(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||ta(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Qf(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qf(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&Vo(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}gt||t.flags&512&&ec(t)}catch(w){Me(t,t.return,w)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function fp(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function pp(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ta(4,t)}catch(c){Me(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Me(t,s,c)}}var o=t.return;try{ec(t)}catch(c){Me(t,o,c)}break;case 5:var l=t.return;try{ec(t)}catch(c){Me(t,l,c)}}}catch(c){Me(t,t.return,c)}if(t===e){V=null;break}var u=t.sibling;if(u!==null){u.return=t.return,V=u;break}V=t.return}}var Kx=Math.ceil,Di=Un.ReactCurrentDispatcher,qc=Un.ReactCurrentOwner,Xt=Un.ReactCurrentBatchConfig,pe=0,Ze=null,He=null,at=0,Lt=0,bs=xr(0),Ye=0,nl=null,Br=0,na=0,Xc=0,Uo=null,Et=null,Zc=0,Os=1/0,Cn=null,Li=!1,rc=null,ir=null,Kl=!1,tr=null,Oi=0,Mo=0,sc=null,ii=-1,ai=0;function St(){return pe&6?$e():ii!==-1?ii:ii=$e()}function ar(e){return e.mode&1?pe&2&&at!==0?at&-at:Tx.transition!==null?(ai===0&&(ai=Bm()),ai):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Qm(e.type)),e):1}function an(e,t,n,r){if(50<Mo)throw Mo=0,sc=null,Error(R(185));ll(e,n,r),(!(pe&2)||e!==Ze)&&(e===Ze&&(!(pe&2)&&(na|=n),Ye===4&&Zn(e,at)),At(e,r),n===1&&pe===0&&!(t.mode&1)&&(Os=$e()+500,Xi&&vr()))}function At(e,t){var n=e.callbackNode;Ty(e,t);var r=vi(e,e===Ze?at:0);if(r===0)n!==null&&bf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&bf(n),t===1)e.tag===0?_x(mp.bind(null,e)):mh(mp.bind(null,e)),kx(function(){!(pe&6)&&vr()}),n=null;else{switch(Wm(r)){case 1:n=jc;break;case 4:n=zm;break;case 16:n=xi;break;case 536870912:n=$m;break;default:n=xi}n=fg(n,og.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function og(e,t){if(ii=-1,ai=0,pe&6)throw Error(R(327));var n=e.callbackNode;if(_s()&&e.callbackNode!==n)return null;var r=vi(e,e===Ze?at:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ui(e,r);else{t=r;var s=pe;pe|=2;var o=ig();(Ze!==e||at!==t)&&(Cn=null,Os=$e()+500,Ur(e,t));do try{Qx();break}catch(u){lg(e,u)}while(!0);Mc(),Di.current=o,pe=s,He!==null?t=0:(Ze=null,at=0,t=Ye)}if(t!==0){if(t===2&&(s=Au(e),s!==0&&(r=s,t=oc(e,s))),t===1)throw n=nl,Ur(e,0),Zn(e,r),At(e,$e()),n;if(t===6)Zn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Gx(s)&&(t=Ui(e,r),t===2&&(o=Au(e),o!==0&&(r=o,t=oc(e,o))),t===1))throw n=nl,Ur(e,0),Zn(e,r),At(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:Pr(e,Et,Cn);break;case 3:if(Zn(e,r),(r&130023424)===r&&(t=Zc+500-$e(),10<t)){if(vi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Fu(Pr.bind(null,e,Et,Cn),t);break}Pr(e,Et,Cn);break;case 4:if(Zn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-ln(r);o=1<<l,l=t[l],l>s&&(s=l),r&=~o}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kx(r/1960))-r,10<r){e.timeoutHandle=Fu(Pr.bind(null,e,Et,Cn),r);break}Pr(e,Et,Cn);break;case 5:Pr(e,Et,Cn);break;default:throw Error(R(329))}}}return At(e,$e()),e.callbackNode===n?og.bind(null,e):null}function oc(e,t){var n=Uo;return e.current.memoizedState.isDehydrated&&(Ur(e,t).flags|=256),e=Ui(e,t),e!==2&&(t=Et,Et=n,t!==null&&lc(t)),e}function lc(e){Et===null?Et=e:Et.push.apply(Et,e)}function Gx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!un(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zn(e,t){for(t&=~Xc,t&=~na,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ln(t),r=1<<n;e[n]=-1,t&=~r}}function mp(e){if(pe&6)throw Error(R(327));_s();var t=vi(e,0);if(!(t&1))return At(e,$e()),null;var n=Ui(e,t);if(e.tag!==0&&n===2){var r=Au(e);r!==0&&(t=r,n=oc(e,r))}if(n===1)throw n=nl,Ur(e,0),Zn(e,t),At(e,$e()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pr(e,Et,Cn),At(e,$e()),null}function ed(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&(Os=$e()+500,Xi&&vr())}}function Wr(e){tr!==null&&tr.tag===0&&!(pe&6)&&_s();var t=pe;pe|=1;var n=Xt.transition,r=ye;try{if(Xt.transition=null,ye=1,e)return e()}finally{ye=r,Xt.transition=n,pe=t,!(pe&6)&&vr()}}function td(){Lt=bs.current,Ce(bs)}function Ur(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Nx(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Lc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ki();break;case 3:Ds(),Ce(Tt),Ce(yt),Hc();break;case 5:Wc(r);break;case 4:Ds();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:Fc(r.type._context);break;case 22:case 23:td()}n=n.return}if(Ze=e,He=e=ur(e.current,null),at=Lt=t,Ye=0,nl=null,Xc=na=Br=0,Et=Uo=null,Ir!==null){for(t=0;t<Ir.length;t++)if(n=Ir[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}Ir=null}return e}function lg(e,t){do{var n=He;try{if(Mc(),si.current=Ii,Ri){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ri=!1}if($r=0,Xe=Ge=Le=null,Lo=!1,Zo=0,qc.current=null,n===null||n.return===null){Ye=1,nl=t,He=null;break}e:{var o=e,l=n.return,u=n,c=t;if(t=at,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,y=u,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var w=y.alternate;w?(y.updateQueue=w.updateQueue,y.memoizedState=w.memoizedState,y.lanes=w.lanes):(y.updateQueue=null,y.memoizedState=null)}var j=tp(l);if(j!==null){j.flags&=-257,np(j,l,u,o,t),j.mode&1&&ep(o,d,t),t=j,c=d;var k=t.updateQueue;if(k===null){var N=new Set;N.add(c),t.updateQueue=N}else k.add(c);break e}else{if(!(t&1)){ep(o,d,t),nd();break e}c=Error(R(426))}}else if(Ae&&u.mode&1){var q=tp(l);if(q!==null){!(q.flags&65536)&&(q.flags|=256),np(q,l,u,o,t),Oc(Ls(c,u));break e}}o=c=Ls(c,u),Ye!==4&&(Ye=2),Uo===null?Uo=[o]:Uo.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var h=Wh(o,c,t);Yf(o,h);break e;case 1:u=c;var m=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ir===null||!ir.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=Hh(o,u,t);Yf(o,_);break e}}o=o.return}while(o!==null)}ug(n)}catch(D){t=D,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function ig(){var e=Di.current;return Di.current=Ii,e===null?Ii:e}function nd(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Ze===null||!(Br&268435455)&&!(na&268435455)||Zn(Ze,at)}function Ui(e,t){var n=pe;pe|=2;var r=ig();(Ze!==e||at!==t)&&(Cn=null,Ur(e,t));do try{Yx();break}catch(s){lg(e,s)}while(!0);if(Mc(),pe=n,Di.current=r,He!==null)throw Error(R(261));return Ze=null,at=0,Ye}function Yx(){for(;He!==null;)ag(He)}function Qx(){for(;He!==null&&!wy();)ag(He)}function ag(e){var t=dg(e.alternate,e,Lt);e.memoizedProps=e.pendingProps,t===null?ug(e):He=t,qc.current=null}function ug(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Bx(n,t),n!==null){n.flags&=32767,He=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,He=null;return}}else if(n=$x(n,t,Lt),n!==null){He=n;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);Ye===0&&(Ye=5)}function Pr(e,t,n){var r=ye,s=Xt.transition;try{Xt.transition=null,ye=1,Jx(e,t,n,r)}finally{Xt.transition=s,ye=r}return null}function Jx(e,t,n,r){do _s();while(tr!==null);if(pe&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Py(e,o),e===Ze&&(He=Ze=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kl||(Kl=!0,fg(xi,function(){return _s(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xt.transition,Xt.transition=null;var l=ye;ye=1;var u=pe;pe|=4,qc.current=null,Hx(e,n),rg(n,e),gx(Uu),wi=!!Ou,Uu=Ou=null,e.current=n,Vx(n),Sy(),pe=u,ye=l,Xt.transition=o}else e.current=n;if(Kl&&(Kl=!1,tr=e,Oi=s),o=e.pendingLanes,o===0&&(ir=null),ky(n.stateNode),At(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Li)throw Li=!1,e=rc,rc=null,e;return Oi&1&&e.tag!==0&&_s(),o=e.pendingLanes,o&1?e===sc?Mo++:(Mo=0,sc=e):Mo=0,vr(),null}function _s(){if(tr!==null){var e=Wm(Oi),t=Xt.transition,n=ye;try{if(Xt.transition=null,ye=16>e?16:e,tr===null)var r=!1;else{if(e=tr,tr=null,Oi=0,pe&6)throw Error(R(331));var s=pe;for(pe|=4,V=e.current;V!==null;){var o=V,l=o.child;if(V.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(V=d;V!==null;){var y=V;switch(y.tag){case 0:case 11:case 15:Oo(8,y,o)}var v=y.child;if(v!==null)v.return=y,V=v;else for(;V!==null;){y=V;var w=y.sibling,j=y.return;if(eg(y),y===d){V=null;break}if(w!==null){w.return=j,V=w;break}V=j}}}var k=o.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var q=N.sibling;N.sibling=null,N=q}while(N!==null)}}V=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,V=l;else e:for(;V!==null;){if(o=V,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Oo(9,o,o.return)}var h=o.sibling;if(h!==null){h.return=o.return,V=h;break e}V=o.return}}var m=e.current;for(V=m;V!==null;){l=V;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,V=x;else e:for(l=m;V!==null;){if(u=V,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ta(9,u)}}catch(D){Me(u,u.return,D)}if(u===l){V=null;break e}var _=u.sibling;if(_!==null){_.return=u.return,V=_;break e}V=u.return}}if(pe=s,vr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Gi,e)}catch{}r=!0}return r}finally{ye=n,Xt.transition=t}}return!1}function hp(e,t,n){t=Ls(n,t),t=Wh(e,t,1),e=lr(e,t,1),t=St(),e!==null&&(ll(e,1,t),At(e,t))}function Me(e,t,n){if(e.tag===3)hp(e,e,n);else for(;t!==null;){if(t.tag===3){hp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){e=Ls(n,e),e=Hh(t,e,1),t=lr(t,e,1),e=St(),t!==null&&(ll(t,1,e),At(t,e));break}}t=t.return}}function qx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,Ze===e&&(at&n)===n&&(Ye===4||Ye===3&&(at&130023424)===at&&500>$e()-Zc?Ur(e,0):Xc|=n),At(e,t)}function cg(e,t){t===0&&(e.mode&1?(t=Ol,Ol<<=1,!(Ol&130023424)&&(Ol=4194304)):t=1);var n=St();e=Ln(e,t),e!==null&&(ll(e,t,n),At(e,n))}function Xx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cg(e,n)}function Zx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),cg(e,n)}var dg;dg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)_t=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _t=!1,zx(e,t,n);_t=!!(e.flags&131072)}else _t=!1,Ae&&t.flags&1048576&&hh(t,Ei,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;li(e,t),e=t.pendingProps;var s=As(t,yt.current);Es(t,n),s=Kc(null,t,r,e,s,n);var o=Gc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pt(r)?(o=!0,ji(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$c(t),s.updater=ea,t.stateNode=s,s._reactInternals=t,Ku(t,r,e,n),t=Qu(null,t,r,!0,o,n)):(t.tag=0,Ae&&o&&Dc(t),wt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(li(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=tv(r),e=rn(r,e),s){case 0:t=Yu(null,t,r,e,n);break e;case 1:t=op(null,t,r,e,n);break e;case 11:t=rp(null,t,r,e,n);break e;case 14:t=sp(null,t,r,rn(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:rn(r,s),Yu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:rn(r,s),op(e,t,r,s,n);case 3:e:{if(Yh(t),e===null)throw Error(R(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Sh(e,t),Pi(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Ls(Error(R(423)),t),t=lp(e,t,r,n,s);break e}else if(r!==s){s=Ls(Error(R(424)),t),t=lp(e,t,r,n,s);break e}else for(Ot=or(t.stateNode.containerInfo.firstChild),Ut=t,Ae=!0,on=null,n=vh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rs(),r===s){t=On(e,t,n);break e}wt(e,t,r,n)}t=t.child}return t;case 5:return bh(t),e===null&&Wu(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,l=s.children,Mu(r,s)?l=null:o!==null&&Mu(r,o)&&(t.flags|=32),Gh(e,t),wt(e,t,l,n),t.child;case 6:return e===null&&Wu(t),null;case 13:return Qh(e,t,n);case 4:return Bc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Is(t,null,r,n):wt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:rn(r,s),rp(e,t,r,s,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,l=s.value,Ne(_i,r._currentValue),r._currentValue=l,o!==null)if(un(o.value,l)){if(o.children===s.children&&!Tt.current){t=On(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Pn(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?c.next=c:(c.next=y.next,y.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Hu(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(R(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Hu(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}wt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Es(t,n),s=Zt(s),r=r(s),t.flags|=1,wt(e,t,r,n),t.child;case 14:return r=t.type,s=rn(r,t.pendingProps),s=rn(r.type,s),sp(e,t,r,s,n);case 15:return Vh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:rn(r,s),li(e,t),t.tag=1,Pt(r)?(e=!0,ji(t)):e=!1,Es(t,n),Bh(t,r,s),Ku(t,r,s,n),Qu(null,t,r,!0,e,n);case 19:return Jh(e,t,n);case 22:return Kh(e,t,n)}throw Error(R(156,t.tag))};function fg(e,t){return Fm(e,t)}function ev(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,n,r){return new ev(e,t,n,r)}function rd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tv(e){if(typeof e=="function")return rd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bc)return 11;if(e===Nc)return 14}return 2}function ur(e,t){var n=e.alternate;return n===null?(n=qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ui(e,t,n,r,s,o){var l=2;if(r=e,typeof e=="function")rd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case fs:return Mr(n.children,s,o,t);case Sc:l=8,s|=8;break;case gu:return e=qt(12,n,t,s|2),e.elementType=gu,e.lanes=o,e;case yu:return e=qt(13,n,t,s),e.elementType=yu,e.lanes=o,e;case xu:return e=qt(19,n,t,s),e.elementType=xu,e.lanes=o,e;case bm:return ra(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wm:l=10;break e;case Sm:l=9;break e;case bc:l=11;break e;case Nc:l=14;break e;case Qn:l=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=qt(l,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Mr(e,t,n,r){return e=qt(7,e,r,t),e.lanes=n,e}function ra(e,t,n,r){return e=qt(22,e,r,t),e.elementType=bm,e.lanes=n,e.stateNode={isHidden:!1},e}function ou(e,t,n){return e=qt(6,e,null,t),e.lanes=n,e}function lu(e,t,n){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=za(0),this.expirationTimes=za(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=za(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sd(e,t,n,r,s,o,l,u,c){return e=new nv(e,t,n,u,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=qt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$c(o),e}function rv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ds,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function pg(e){if(!e)return mr;e=e._reactInternals;e:{if(Gr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(Pt(n))return ph(e,n,t)}return t}function mg(e,t,n,r,s,o,l,u,c){return e=sd(n,r,!0,e,s,o,l,u,c),e.context=pg(null),n=e.current,r=St(),s=ar(n),o=Pn(r,s),o.callback=t??null,lr(n,o,s),e.current.lanes=s,ll(e,s,r),At(e,r),e}function sa(e,t,n,r){var s=t.current,o=St(),l=ar(s);return n=pg(n),t.context===null?t.context=n:t.pendingContext=n,t=Pn(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=lr(s,t,l),e!==null&&(an(e,s,l,o),ri(e,s,l)),l}function Mi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function od(e,t){gp(e,t),(e=e.alternate)&&gp(e,t)}function sv(){return null}var hg=typeof reportError=="function"?reportError:function(e){console.error(e)};function ld(e){this._internalRoot=e}oa.prototype.render=ld.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));sa(e,t,null,null)};oa.prototype.unmount=ld.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){sa(null,e,null,null)}),t[Dn]=null}};function oa(e){this._internalRoot=e}oa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Km();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xn.length&&t!==0&&t<Xn[n].priority;n++);Xn.splice(n,0,e),n===0&&Ym(e)}};function id(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function la(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yp(){}function ov(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Mi(l);o.call(d)}}var l=mg(t,r,e,0,null,!1,!1,"",yp);return e._reactRootContainer=l,e[Dn]=l.current,Yo(e.nodeType===8?e.parentNode:e),Wr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Mi(c);u.call(d)}}var c=sd(e,0,!1,null,null,!1,!1,"",yp);return e._reactRootContainer=c,e[Dn]=c.current,Yo(e.nodeType===8?e.parentNode:e),Wr(function(){sa(t,c,n,r)}),c}function ia(e,t,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var c=Mi(l);u.call(c)}}sa(t,l,e,s)}else l=ov(n,t,e,s,r);return Mi(l)}Hm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ko(t.pendingLanes);n!==0&&(Cc(t,n|1),At(t,$e()),!(pe&6)&&(Os=$e()+500,vr()))}break;case 13:Wr(function(){var r=Ln(e,1);if(r!==null){var s=St();an(r,e,1,s)}}),od(e,1)}};Ec=function(e){if(e.tag===13){var t=Ln(e,134217728);if(t!==null){var n=St();an(t,e,134217728,n)}od(e,134217728)}};Vm=function(e){if(e.tag===13){var t=ar(e),n=Ln(e,t);if(n!==null){var r=St();an(n,e,t,r)}od(e,t)}};Km=function(){return ye};Gm=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};_u=function(e,t,n){switch(t){case"input":if(Su(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=qi(r);if(!s)throw Error(R(90));km(r),Su(r,s)}}}break;case"textarea":Cm(e,n);break;case"select":t=n.value,t!=null&&Ns(e,!!n.multiple,t,!1)}};Im=ed;Dm=Wr;var lv={usingClientEntryPoint:!1,Events:[al,gs,qi,Am,Rm,ed]},xo={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iv={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Um(e),e===null?null:e.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||sv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Gi=Gl.inject(iv),yn=Gl}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lv;Ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(t))throw Error(R(200));return rv(e,t,null,n)};Ft.createRoot=function(e,t){if(!id(e))throw Error(R(299));var n=!1,r="",s=hg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=sd(e,1,!1,null,null,n,!1,r,s),e[Dn]=t.current,Yo(e.nodeType===8?e.parentNode:e),new ld(t)};Ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=Um(t),e=e===null?null:e.stateNode,e};Ft.flushSync=function(e){return Wr(e)};Ft.hydrate=function(e,t,n){if(!la(t))throw Error(R(200));return ia(null,e,t,!0,n)};Ft.hydrateRoot=function(e,t,n){if(!id(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=hg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=mg(t,null,e,1,n??null,s,!1,o,l),e[Dn]=t.current,Yo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new oa(t)};Ft.render=function(e,t,n){if(!la(t))throw Error(R(200));return ia(null,e,t,!1,n)};Ft.unmountComponentAtNode=function(e){if(!la(e))throw Error(R(40));return e._reactRootContainer?(Wr(function(){ia(null,null,e,!1,function(){e._reactRootContainer=null,e[Dn]=null})}),!0):!1};Ft.unstable_batchedUpdates=ed;Ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!la(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return ia(e,t,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function gg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gg)}catch(e){console.error(e)}}gg(),gm.exports=Ft;var av=gm.exports,xp=av;mu.createRoot=xp.createRoot,mu.hydrateRoot=xp.hydrateRoot;const uv={1:[{rows:1,cols:1}],2:[{rows:1,cols:2},{rows:2,cols:1}],3:[{rows:2,cols:2},{rows:1,cols:3},{rows:3,cols:1}],4:[{rows:2,cols:2},{rows:1,cols:4},{rows:4,cols:1}],5:[{rows:2,cols:3},{rows:3,cols:2},{rows:1,cols:5},{rows:5,cols:1}],6:[{rows:2,cols:3},{rows:3,cols:2},{rows:1,cols:6},{rows:6,cols:1}],7:[{rows:2,cols:4},{rows:4,cols:2}],8:[{rows:2,cols:4},{rows:4,cols:2},{rows:3,cols:3}],9:[{rows:3,cols:3},{rows:2,cols:5},{rows:5,cols:2}],10:[{rows:2,cols:5},{rows:5,cols:2}]},Ts=(e,t)=>{if(!Number.isFinite(e))return t;const n=Math.floor(e);return n>0?n:t};function cv(e){const t=Ts(e,1);return(uv[t]||[]).map(r=>({...r}))}function ic(e,t){if(!e)return null;const n=Ts(t,1),r=Ts(e.rows,1),s=Ts(e.cols,1),o=r*s;if(o<n)return null;let l=e.emptySeatIndex??null;return o>n?(l==null||l<0||l>=o)&&(l=o-1):l=null,{rows:r,cols:s,emptySeatIndex:l}}const vp=(e,t)=>{const n=Ts(e,1),r=(t||0)===90,s=Math.ceil(Math.sqrt(n)),o=r?s:Math.ceil(n/s),l=Math.ceil(n/o);return ic({rows:o,cols:l},n)||{rows:1,cols:n}};function yg(e,t,n){const r=Ts(e,1),s=ic(n,r);if(s)return s;const o=cv(r);if(!o.length)return vp(r,t);const l=(t||0)===90,c=o.filter(d=>l?d.rows>=d.cols:d.cols>=d.rows)[0]||o[0];return ic(c,r)||vp(r,t)}const dv="newui_app_state",ac=1,fv=e=>!!e&&typeof e=="object";function pv(e){const t=Math.max(0,e.capacity||0),n=Array.isArray(e.preferredSeatIndexes)?e.preferredSeatIndexes:[],r=[];for(const s of n){const o=typeof s=="number"?s:parseInt(String(s),10);!Number.isFinite(o)||!Number.isInteger(o)||o<0||o>=t||r.push(o)}return Array.from(new Set(r)).sort((s,o)=>s-o)}function mv(e){const t=(e.seatIds??[]).slice(),n=Math.max(0,e.capacity||0);if(t.length<n)for(let l=t.length;l<n;l++)t[l]=String(e.id)+"_s"+l;else t.length>n&&(t.length=n);const r=pv(e),s=yg(n,e.rotation||0,e.seatLayout),o=fv(e.meta)?e.meta:void 0;return{...e,seatIds:t,preferredSeatIndexes:r,seatLayout:s,meta:o}}function hv(e){return{...e,tables:e.tables.map(mv)}}function gv(e){const n=((e||{layouts:[]}).layouts||[]).map(hv);return{version:ac,layouts:n}}function yv(){try{const e=localStorage.getItem(dv);if(!e)return{version:ac,layouts:[]};const t=JSON.parse(e);return gv(t)}catch{return{version:ac,layouts:[]}}}function xv(){return yv().layouts}const vv="newui_periods_state";function wv(){try{const e=localStorage.getItem(vv);if(!e)return{periods:[],currentId:null};const t=JSON.parse(e);return{periods:t.periods??[],currentId:t.currentId??null}}catch{return{periods:[],currentId:null}}}function uc(){return wv()}const Sv="newui_tags_state_v1";function bv(){try{const e=localStorage.getItem(Sv);return e?{version:1,tags:JSON.parse(e).tags??[]}:{version:1,tags:[]}}catch{return{version:1,tags:[]}}}function Nv(){return bv().tags}const kv=f.createContext(null),jv="newui_students_state_v1";function Cv(){try{const e=localStorage.getItem(jv);return e?{version:1,students:JSON.parse(e).students??[]}:{version:1,students:[]}}catch{return{version:1,students:[]}}}function Ev(){return Cv().students}const _v={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","6xl":"max-w-6xl","7xl":"max-w-7xl"};function ad({isOpen:e,onRequestClose:t,title:n,subtitle:r,headerRight:s,footer:o,children:l,maxWidth:u="6xl",bodyClassName:c,bodyPadding:d=!0,showCloseX:y=!1}){if(f.useEffect(()=>{if(!e)return;const w=j=>{j.key==="Escape"&&t()};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[e,t]),!e)return null;const v=d?"px-5 py-4":"";return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",style:{width:"100dvw",height:"100dvh"},onMouseDown:t}),i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{width:"100dvw",height:"100dvh"},children:i.jsxs("div",{role:"dialog","aria-modal":"true",className:`relative w-full rounded-xl bg-white shadow-xl border border-slate-200 max-h-[90vh] overflow-hidden flex flex-col ${_v[u]}`,onMouseDown:w=>w.stopPropagation(),children:[i.jsx("div",{className:"border-b border-slate-200 px-5 py-4 bg-white",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"min-w-0",children:[n&&i.jsx("div",{className:"text-lg font-semibold text-slate-900",children:n}),r&&i.jsx("div",{className:"text-sm text-slate-500",children:r})]}),(s||y)&&i.jsxs("div",{className:"flex items-center gap-2",children:[s,y&&i.jsx("button",{type:"button","aria-label":"Close",onClick:t,className:"rounded-md p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:i.jsx("span",{"aria-hidden":"true",className:"text-lg leading-none",children:""})})]})]})}),i.jsx("div",{className:`flex-1 min-h-0 overflow-y-auto overscroll-contain ${v} ${c??""}`,children:l}),o&&i.jsx("div",{className:"border-t border-slate-200 px-5 py-4 bg-slate-50",children:o})]})})]})}function Tv(){return"pro"}function Pv(e=Tv()){return{tier:e,canUseDriveSync:e!=="free",canUseLocalSave:!0,canExportPDF:e!=="free",canUseAdvancedReports:e==="school"||e==="pro",canUseImports:!0,canUseMobile:!0}}function Av({studentId:e,hasPhoto:t=!1,src:n=null,onClick:r,widthPx:s,heightPx:o,sizePx:l=44}){const d={width:s??l,height:o??l};return i.jsx("button",{type:"button","aria-label":t?"Update student photo":"Add student photo",className:"flex-shrink-0 rounded-xl border border-slate-200 bg-white/60 overflow-hidden active:scale-[0.98]",style:d,onClick:y=>{y.stopPropagation(),r==null||r(e)},children:t&&n?i.jsx("img",{src:n,alt:"Student photo",className:"w-full h-full object-cover",draggable:!1}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18","aria-hidden":"true",className:"text-slate-500",children:i.jsx("path",{fill:"currentColor",d:"M9.5 4.5h5l1.2 1.8H19a2.5 2.5 0 0 1 2.5 2.5v8.7A2.5 2.5 0 0 1 19 20H5a2.5 2.5 0 0 1-2.5-2.5V8.8A2.5 2.5 0 0 1 5 6.3h3.3l1.2-1.8ZM12 9a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm0 1.7a2.3 2.3 0 1 1 0 4.6 2.3 2.3 0 0 1 0-4.6Z"})})})})}function xg(e){const t=(e||"").trim();if(!t)return{first:"Unknown",last:"Unknown"};if(t.includes(",")){const[o,l]=t.split(",",2),u=(o||"").trim()||"Unknown";return{first:(l||"").trim().split(/\s+/).filter(Boolean)[0]||"Unknown",last:u}}const n=t.split(/\s+/).filter(Boolean);if(n.length===1)return{first:n[0],last:"Unknown"};const r=n[0]||"Unknown",s=n[n.length-1]||"Unknown";return{first:r,last:s}}function Fi(e){return(e||"").trim().replace(/\s+/g,"_").replace(/[^A-Za-z0-9_-]/g,"").replace(/_+/g,"_")||"Unknown"}function ud(e,t){const n=xg(t),r=Fi(n.first);return`${Fi(n.last)}_${r}__id_${e}.jpg`}var rm,sm;const cc=((sm=(rm=import.meta)==null?void 0:rm.env)==null?void 0:sm.VITE_GOOGLE_CLIENT_ID)??"403722152172-rm3rvd6kba8s10a8svv60jbj2s93kv1e.apps.googleusercontent.com",Rv="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/userinfo.email",zi="ClassSeats";function Iv(e){return e?e.startsWith(".")?e:`.${e}`:""}function Dv(e,t,n){const r=xg(t),s=Fi(r.first),o=Fi(r.last),l=Iv(n);return`${o}_${s}__audio__id_${e}${l}`}const vg="classseats_mobile_drive_session_v2",cd="classseats_mobile_drive_folder_v1",dd="classseats_student_docs_folder_v1",wg={classseats:"data_v1"},wp="Student Docs",Sp="studentPhotos",bp="audio",Sg="https://us-east1-classseats-sync.cloudfunctions.net/exchangecode",ci="classseats_mobile_drive_pkce_verifier",Fo="classseats_mobile_drive_return_to",di="classseats_mobile_drive_redirect_uri",bg="https://app.classseats.app/ClassSeatsMobile";function Lv(){if(typeof window>"u")return bg;const e=window.location.origin;return e==="https://app.classseats.app"?"https://app.classseats.app/ClassSeatsMobile":e==="https://mifish3474.github.io"?"https://mifish3474.github.io/ClassSeats-Mobile-Testing/ClassSeatsMobile":`${e}/ClassSeatsMobile`}const Ov=45*60*1e3,Uv="classseats_auth",Mv=1,hr="driveSession",$i="singleton";let Ar=null,mn=null,Co=!1,fi="none";function Fv(e){const{sessionLoaded:t}=e,n=(e.lastWriteReason||"").trim();return t?"ok":n?n==="explicit-disconnect"?"user-logged-out":n==="fatal-oauth-error"?"oauth-failure":n==="login-success"?"device-storage-wipe":"unknown":"no-session-yet"}function fd(){return new Promise((e,t)=>{const n=indexedDB.open(Uv,Mv);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(hr)||r.createObjectStore(hr,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error||new Error("IndexedDB open failed"))})}async function zv(){const e=await fd();return new Promise((t,n)=>{const o=e.transaction(hr,"readonly").objectStore(hr).get($i);o.onsuccess=()=>{const l=o.result;if(l){mn={lastWriteAt:l.lastWriteAt,lastWriteReason:l.lastWriteReason};const{id:u,lastWriteAt:c,lastWriteReason:d,...y}=l;t(y)}else t(null)},o.onerror=()=>n(o.error||new Error("IDB get failed"))})}async function Ng(e,t){const n=await fd();return new Promise((r,s)=>{const o=n.transaction(hr,"readwrite"),l=o.objectStore(hr);if(!e)console.info("[Drive][IDB] CLEAR session",{reason:t}),l.delete($i),mn={lastWriteAt:Date.now(),lastWriteReason:t};else{const u={id:$i,...e,lastWriteAt:Date.now(),lastWriteReason:t};console.info("[Drive][IDB] WRITE session",{reason:t,hasRefresh:!!e.refreshToken,expiresAt:e.expiresAt}),l.put(u),mn={lastWriteAt:u.lastWriteAt,lastWriteReason:u.lastWriteReason}}o.oncomplete=()=>r(),o.onerror=()=>s(o.error||new Error("IDB put/delete failed"))})}async function $v(){try{const e=await fd();return await new Promise((t,n)=>{const o=e.transaction(hr,"readonly").objectStore(hr).get($i);o.onsuccess=()=>{const l=o.result;l?(mn={lastWriteAt:l.lastWriteAt,lastWriteReason:l.lastWriteReason},t(l)):t(null)},o.onerror=()=>n(o.error||new Error("IDB get failed"))})}catch(e){return console.warn("[Drive][IDB] getDriveSessionRecord failed",e),null}}async function Bv(){const e=await $v(),t=!!e,n=!!(e!=null&&e.refreshToken),r=(e==null?void 0:e.expiresAt)??null,s=(e==null?void 0:e.lastWriteAt)??(mn==null?void 0:mn.lastWriteAt)??null,o=(e==null?void 0:e.lastWriteReason)??(mn==null?void 0:mn.lastWriteReason)??null,l=e?"idb":"none",u=e==null?void 0:e.profile,c=Fv({sessionLoaded:t,lastWriteReason:o}),d={sessionLoaded:t,hasRefresh:n,expiresAt:r,source:l,lastWriteAt:s,lastWriteReason:o,state:c,profile:u};return console.info("startup:",d),console.info("[Drive] startupSessionState",{state:c,lastWriteReason:o}),d}function Wv(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(vg);return e?JSON.parse(e):null}catch{return null}}function Hv(){typeof window>"u"||window.localStorage.removeItem(vg)}async function aa(){if(Co)return Ar;try{const t=await zv();if(t)return Ar=t,fi="idb",Co=!0,Ar}catch{}const e=Wv();if(e){Ar=e,fi="legacy",Co=!0;try{await Ng(e,"startup-migration")}catch{}return Ar}return Ar=null,fi="none",Co=!0,null}async function pd(e,t){Ar=e,Co=!0,fi=e?"idb":"none";try{await Ng(e,t)}catch(n){console.warn("[Drive][IDB] persistSession failed",n)}}async function kg(e){await pd(null,e),Hv()}async function Vv(){return aa()}function Kv(e,t=5*60*1e3){return!e||e.expiresAt<=Date.now()+t}function Gv(e){return e.replace(/^#/,"").split("&").map(t=>t.split("=")).reduce((t,[n,r])=>(n&&(t[decodeURIComponent(n)]=decodeURIComponent(r||"")),t),{})}function jg(e,t,n,r){const s=t?t*1e3:Ov;return{accessToken:e,expiresAt:Date.now()+s-60*1e3,refreshToken:n,profile:r}}async function Cg(e){try{const t=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)return;const n=await t.json();return{email:n.email,name:n.name,picture:n.picture}}catch{return}}async function Yv(){const e=new Uint8Array(32);return crypto.getRandomValues(e),btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qv(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=Array.from(new Uint8Array(r));return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jv(e,t){const n=await Yv(),r=await Qv(n),s=btoa(JSON.stringify({v:n,r:t||null}));return window.localStorage.setItem(ci,n),t?window.localStorage.setItem(Fo,t):window.localStorage.removeItem(Fo),window.localStorage.setItem(di,e),`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:cc,redirect_uri:e,response_type:"code",scope:Rv,include_granted_scopes:"true",state:s,prompt:"consent",access_type:"offline",code_challenge:r,code_challenge_method:"S256"}).toString()}`}async function qv(e,t,n){const r={grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:n,client_id:cc};console.info("[Drive] Exchanging code",{redirect_uri:n,client_id:cc,code_preview:e?`${e.slice(0,4)}...${e.slice(-4)}`:"none"});const s=await fetch(Sg,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const o=await s.text().catch(()=>"");throw new Error(o||"Failed to exchange code for tokens.")}return s.json()}async function Xv(){if(typeof window>"u")return null;const e=window.location.search||"",t=new URLSearchParams(e);let n=t.get("code"),r=t.get("state");if(!n&&window.location.hash){const u=Gv(window.location.hash);n=u.code||n,r=u.state||r}if(!n)return null;let s=null,o=null,l=null;if(r)try{const u=JSON.parse(atob(r));u!=null&&u.v&&typeof u.v=="string"&&(s=u.v),u!=null&&u.r&&typeof u.r=="string"&&(o=u.r),u!=null&&u.d&&typeof u.d=="string"&&(l=u.d)}catch{}if(s||(s=window.localStorage.getItem(ci)),o||(o=window.localStorage.getItem(Fo)),l||(l=window.localStorage.getItem(di)||bg),!s)return null;try{const u=await qv(n,s,l),c=await Cg(u.access_token),d=jg(u.access_token,u.expires_in,u.refresh_token,c||void 0);return await pd(d,"login-success"),window.localStorage.removeItem(ci),window.localStorage.removeItem(Fo),window.localStorage.removeItem(di),o&&o!==l?window.location.replace(o):window.history.replaceState(null,document.title,l),d}catch{return window.localStorage.removeItem(ci),window.localStorage.removeItem(Fo),window.localStorage.removeItem(di),null}}async function Zv(e,t){if(typeof window>"u")throw new Error("Browser required.");const n=Lv(),r=await Jv(n,window.location.href);return window.location.href=r,new Promise(()=>{})}async function Eg(){const e=await aa();if(!e)return console.warn("[Drive] refreshDriveSession: no stored session"),null;if(e.expiresAt>Date.now()+60*1e3)return console.debug("[Drive] refreshDriveSession: not expiring soon; skipping refresh",{expiresAt:e.expiresAt}),e;if(!e.refreshToken)return console.warn("[Drive] refreshDriveSession: missing refresh token; cannot refresh; keeping existing session",{expiresAt:e.expiresAt}),e;try{const t=await fetch(Sg,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:e.refreshToken})});if(!t.ok){const o=await t.text().catch(()=>"");throw console.warn("[Drive] refreshDriveSession: HTTP error from token endpoint",{status:t.status,statusText:t.statusText,bodySnippet:o.slice(0,200)}),new Error("Refresh failed: "+t.status)}const n=await t.json(),r=await Cg(n.access_token),s=jg(n.access_token,n.expires_in,e.refreshToken,r||e.profile);return await pd(s,"refresh-success"),s}catch(t){const n=String((t==null?void 0:t.message)||"");return console.warn("[Drive] refreshDriveSession: caught error",{message:n}),/invalid_grant|invalid_client/i.test(n)?(console.warn("[Drive] refreshDriveSession: treating as fatal OAuth error; clearing session"),await kg("fatal-oauth-error")):console.warn("[Drive] refreshDriveSession: non-fatal error; keeping stored session in IDB"),null}}async function An(e){let t=e??await aa();return t?Kv(t)?await Eg():t:null}async function ew(){const e=await Xv();if(e)return e;const t=await aa();return t&&t.expiresAt>Date.now()+60*1e3?t:Eg()}async function tw(){await kg("explicit-disconnect")}async function Ee(e,t,n){const r=await fetch(t,{...n,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",...(n==null?void 0:n.headers)||{}}});if(!r.ok){const s=await r.text().catch(()=>"");throw new Error(s||"Google Drive request failed.")}return r}function gr(e){return e.replace(/'/g,"\\'")}async function Hs(e){const t=nw();if(t){if(await _g(e,t))return t;rw()}const n=new URLSearchParams({q:`name='${zi}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return Np(s.files[0].id),s.files[0].id;const l=await(await Ee(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:zi,mimeType:"application/vnd.google-apps.folder"})})).json();return Np(l.id),l.id}function Np(e){typeof window>"u"||window.localStorage.setItem(cd,e)}function nw(){return typeof window>"u"?null:window.localStorage.getItem(cd)}function rw(){typeof window>"u"||window.localStorage.removeItem(cd)}function kp(e){typeof window>"u"||window.localStorage.setItem(dd,e)}function sw(){return typeof window>"u"?null:window.localStorage.getItem(dd)}function ow(){typeof window>"u"||window.localStorage.removeItem(dd)}async function _g(e,t){try{return(await Ee(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id`)).ok}catch{return!1}}async function lw(e){const t=sw();if(t){if(await _g(e,t))return t;ow()}const n=await Hs(e),r=new URLSearchParams({q:`'${n}' in parents and name='${gr(wp)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),o=await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${r.toString()}`)).json();if(Array.isArray(o.files)&&o.files.length>0)return kp(o.files[0].id),o.files[0].id;const u=await(await Ee(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:wp,mimeType:"application/vnd.google-apps.folder",parents:[n]})})).json();if(!(u!=null&&u.id))throw new Error("Unable to create Student Docs folder.");return kp(u.id),u.id}async function iw(e){const t=await Hs(e),n=new URLSearchParams({q:`'${t}' in parents and name='${gr(Sp)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return s.files[0].id;const l=await(await Ee(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Sp,mimeType:"application/vnd.google-apps.folder",parents:[t]})})).json();if(!(l!=null&&l.id))throw new Error("Unable to create student photos folder.");return l.id}async function aw(e){const t=await Hs(e),n=new URLSearchParams({q:`'${t}' in parents and name='${gr(bp)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return s.files[0].id;const l=await(await Ee(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:bp,mimeType:"application/vnd.google-apps.folder",parents:[t]})})).json();if(!(l!=null&&l.id))throw new Error("Unable to create student audio folder.");return l.id}async function uw(e,t,n){const r=(n||"").trim();if(!r)throw new Error("Document title is required.");const o=await(await Ee(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:r,mimeType:"application/vnd.google-apps.document",parents:[t]})})).json();if(!(o!=null&&o.id))throw new Error("Unable to create Google Doc.");return{fileId:o.id,title:o.name||r}}async function cw(e){const t=await An();if(!(t!=null&&t.accessToken))throw new Error("Sign in with Google Drive first.");const n=t.accessToken,r=await iw(n),s=ud(e.studentId,e.studentFullName);let o=e.fileId?String(e.fileId):null;if(!o){const v=`name='${gr(s)}' and '${r}' in parents and trashed=false`,w=new URLSearchParams({q:v,fields:"files(id)",spaces:"drive"}),k=await(await Ee(n,`https://www.googleapis.com/drive/v3/files?${w.toString()}`)).json();o=Array.isArray(k.files)&&k.files.length>0?k.files[0].id:null}if(!o){const v=`student_${e.studentId}.jpg`,w=`name='${gr(v)}' and '${r}' in parents and trashed=false`,j=new URLSearchParams({q:w,fields:"files(id)",spaces:"drive"}),N=await(await Ee(n,`https://www.googleapis.com/drive/v3/files?${j.toString()}`)).json();o=Array.isArray(N.files)&&N.files.length>0?N.files[0].id:null}const l=o?{name:s,mimeType:"image/jpeg"}:{name:s,parents:[r],mimeType:"image/jpeg"},u=new FormData;u.append("metadata",new Blob([JSON.stringify(l)],{type:"application/json"})),u.append("file",e.jpegBlob,s);const c=o?`https://www.googleapis.com/upload/drive/v3/files/${o}?uploadType=multipart&fields=id,name,modifiedTime`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime",d=await fetch(c,{method:o?"PATCH":"POST",headers:{Authorization:`Bearer ${n}`},body:u,signal:e.signal});if(!d.ok){const v=await d.text().catch(()=>"");throw new Error(v||"Failed to upload student photo.")}const y=await d.json();if(!(y!=null&&y.id))throw new Error("Unable to upload student photo.");return{fileId:y.id,folderId:r,fileName:y.name||s,modifiedTime:y.modifiedTime}}async function dw(e){const t=await An();if(!(t!=null&&t.accessToken))throw new Error("Sign in with Google Drive first.");const n=t.accessToken,r=await aw(n),s=Dv(e.studentId,e.studentFullName,e.extension),o=e.fileId?String(e.fileId):null,l=o?{name:s,mimeType:e.mimeType}:{name:s,parents:[r],mimeType:e.mimeType},u=new FormData;u.append("metadata",new Blob([JSON.stringify(l)],{type:"application/json"})),u.append("file",e.blob,s);const c=o?`https://www.googleapis.com/upload/drive/v3/files/${o}?uploadType=multipart&fields=id,name,modifiedTime`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime",d=await fetch(c,{method:o?"PATCH":"POST",headers:{Authorization:`Bearer ${n}`},body:u,signal:e.signal});if(!d.ok){const v=await d.text().catch(()=>"");throw new Error(v||"Failed to upload student audio.")}const y=await d.json();if(!(y!=null&&y.id))throw new Error("Unable to upload student audio.");return{fileId:y.id,folderId:r,fileName:y.name||s,modifiedTime:y.modifiedTime}}async function fw(e){if(!e)throw new Error("File ID is required.");const t=await An();if(!(t!=null&&t.accessToken))throw new Error("Sign in with Google Drive first.");await Ee(t.accessToken,`https://www.googleapis.com/drive/v3/files/${e}`,{method:"DELETE"})}async function jp(e){const t=await Hs(e),n=new URLSearchParams({q:`'${t}' in parents and trashed=false`,fields:"files(id,name,modifiedTime,size,headRevisionId)",orderBy:"modifiedTime desc",spaces:"drive"});return((await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json()).files||[]).map(Us)}async function pw(e,t,n){const r=t.trim();if(!r)throw new Error("Folder name is required.");const s=["mimeType='application/vnd.google-apps.folder'",`name='${gr(r)}'`,"trashed=false"];n&&s.push(`'${n}' in parents`);const o=new URLSearchParams({q:s.join(" and "),fields:"files(id)",spaces:"drive"}),u=await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${o.toString()}`)).json();if(Array.isArray(u.files)&&u.files.length>0)return u.files[0].id;const d=await(await Ee(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:r,mimeType:"application/vnd.google-apps.folder",parents:n?[n]:void 0})})).json();if(!(d!=null&&d.id))throw new Error("Unable to create folder.");return d.id}async function mw(e,t){const n=(t||[]).map(s=>s.trim()).filter(Boolean);if(n.length===0)throw new Error("Folder path is required.");let r=null;for(const s of n){if(!r&&s===zi){r=await Hs(e);continue}r=await pw(e,s,r)}if(!r)throw new Error("Unable to resolve folder path.");return r}async function hw(e,t){const n=t.trim();if(!n)return!1;const r=new URLSearchParams({q:`'root' in parents and mimeType='application/vnd.google-apps.folder' and name='${gr(n)}' and trashed=false`,fields:"files(id)",spaces:"drive"}),o=await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${r.toString()}`)).json(),l=Array.isArray(o.files)&&o.files.length>0?o.files[0].id:null;if(!l)return!1;const u=new URLSearchParams({q:`'${l}' in parents and trashed=false`,fields:"files(id)",spaces:"drive",pageSize:"1"}),d=await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${u.toString()}`)).json();return Array.isArray(d.files)&&d.files.length>0?!1:(await Ee(e,`https://www.googleapis.com/drive/v3/files/${l}`,{method:"PATCH",body:JSON.stringify({trashed:!0})}),!0)}async function gw(e,t,n){if(!t)throw new Error("File ID is required.");if(!n)throw new Error("Folder ID is required.");let r=null;try{const l=await(await Ee(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=parents`,{method:"GET"})).json();Array.isArray(l.parents)&&l.parents.length>0&&(r=l.parents.join(","))}catch{r=null}const s=new URLSearchParams({addParents:n,fields:"id,parents"});r&&s.set("removeParents",r),await Ee(e,`https://www.googleapis.com/drive/v3/files/${t}?${s.toString()}`,{method:"PATCH",body:JSON.stringify({})})}async function yw(e,t,n){const r=await Hs(e),s="classseats_drive_boundary",o={name:t,mimeType:"application/json",parents:[r],appProperties:wg},l=[`--${s}`,"Content-Type: application/json; charset=UTF-8","",JSON.stringify(o),`--${s}`,"Content-Type: application/json","",n,`--${s}--`,""].join(`\r
`),u=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime,size,headRevisionId",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":`multipart/related; boundary=${s}`},body:l});if(!u.ok){const d=await u.text().catch(()=>"");throw new Error(d||"Failed to create Google Drive file.")}const c=await u.json();return Us(c)}async function xw(e,t,n,r="{}"){const s=n.trim();if(!s)throw new Error("File name is required.");const o=new URLSearchParams({q:`'${t}' in parents and name='${gr(s)}' and trashed=false`,fields:"files(id,name,modifiedTime,size,headRevisionId)",spaces:"drive"}),u=await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${o.toString()}`)).json();if(Array.isArray(u.files)&&u.files.length>0)return Us(u.files[0]);const c="classseats_drive_boundary",d={name:s,mimeType:"application/json",parents:[t],appProperties:wg},y=[`--${c}`,"Content-Type: application/json; charset=UTF-8","",JSON.stringify(d),`--${c}`,"Content-Type: application/json","",r,`--${c}--`,""].join(`\r
`),v=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime,size,headRevisionId",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":`multipart/related; boundary=${c}`},body:y});if(!v.ok){const j=await v.text().catch(()=>"");throw new Error(j||"Failed to create Google Drive file.")}const w=await v.json();return Us(w)}async function Yl(e,t){return(await Ee(e,`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{method:"GET"})).text()}async function Cp(e,t,n){const r=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:n});if(!r.ok){const l=await r.text().catch(()=>"");throw new Error(l||"Failed to upload file to Google Drive.")}const o=await(await Ee(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime,size,headRevisionId`,{method:"GET"})).json();return Us(o)}function Us(e){var t;return e?{id:e.id,name:e.name,modifiedTime:e.modifiedTime,size:e.size,revisionId:e.headRevisionId||e.revisionId||((t=e==null?void 0:e.appProperties)==null?void 0:t.revisionId)}:{id:"",name:""}}async function Ep(e){const t=new URLSearchParams({q:"mimeType='application/json' and trashed=false",fields:"files(id,name,modifiedTime,size,headRevisionId)",orderBy:"modifiedTime desc",spaces:"drive"});return((await(await Ee(e,`https://www.googleapis.com/drive/v3/files?${t.toString()}`)).json()).files||[]).map(Us)}const Lr=new Map;function Tg(e,t){const n=Lr.get(e);if((n==null?void 0:n.value)!==void 0)return Promise.resolve(n.value);if(n!=null&&n.promise)return n.promise;const r=t().then(s=>(Lr.set(e,{value:s}),s)).catch(s=>{throw Lr.delete(e),s});return Lr.set(e,{promise:r}),r}function Ms(e){if(!e){Lr.clear();return}for(const t of Lr.keys())t.startsWith(e)&&Lr.delete(t)}const vw="classseats-cache",ww=1,Rn="driveFolders",cr="studentPhotoMap",dr="photoBlobs";function ua(){return typeof indexedDB>"u"?Promise.resolve(null):new Promise((e,t)=>{const n=indexedDB.open(vw,ww);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Rn)||r.createObjectStore(Rn,{keyPath:"key"}),r.objectStoreNames.contains(cr)||r.createObjectStore(cr,{keyPath:"studentId"}),r.objectStoreNames.contains(dr)||r.createObjectStore(dr,{keyPath:"fileId"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error||new Error("IndexedDB open failed"))})}function md(e,t){return t?Date.now()-e>t:!1}async function Vs(e,t){const n=await ua();return n?new Promise((r,s)=>{const u=n.transaction(e,"readonly").objectStore(e).get(t);u.onsuccess=()=>r(u.result||null),u.onerror=()=>s(u.error||new Error("IDB get failed"))}):null}async function ca(e,t){const n=await ua();if(n)return new Promise((r,s)=>{const o=n.transaction(e,"readwrite");o.objectStore(e).put(t),o.oncomplete=()=>r(),o.onerror=()=>s(o.error||new Error("IDB put failed"))})}async function Fs(e,t){const n=await ua();if(n)return new Promise((r,s)=>{const o=n.transaction(e,"readwrite");o.objectStore(e).delete(t),o.oncomplete=()=>r(),o.onerror=()=>s(o.error||new Error("IDB delete failed"))})}async function iu(e){const t=await ua();if(t)return new Promise((n,r)=>{const s=t.transaction(e,"readwrite");s.objectStore(e).clear(),s.oncomplete=()=>n(),s.onerror=()=>r(s.error||new Error("IDB clear failed"))})}async function Pg(e,t,n){const r=await Vs(Rn,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Fs(Rn,e),null):md(r.updatedAt,t)?(await Fs(Rn,e),null):r:null}async function Ag(e){await ca(Rn,e)}async function Sw(e,t,n){const r=await Vs(cr,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Fs(cr,e),null):md(r.fetchedAt,t)?(await Fs(cr,e),null):r:null}async function bw(e,t){const n=await Vs(cr,e);return!n||t&&n.accountKey&&n.accountKey!==t?null:n}async function Nw(e){await ca(cr,e)}async function kw(e,t,n){const r=await Vs(dr,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Fs(dr,e),null):md(r.fetchedAt,t)?(await Fs(dr,e),null):r:null}async function jw(e,t){const n=await Vs(dr,e);return!n||t&&n.accountKey&&n.accountKey!==t?null:n}async function Rg(e){await ca(dr,e)}async function Cw(){await Promise.all([iu(Rn),iu(cr),iu(dr)])}const Ig="driveAccountKey";async function Ew(){const e=await Vs(Rn,Ig);return(e==null?void 0:e.value)||null}async function _w(e){const t={key:Ig,value:e,updatedAt:Date.now(),accountKey:e};await ca(Rn,t)}const _p="ClassSeats",Tp="studentPhotos",Dg=30*24*60*60*1e3,Tw=7*24*60*60*1e3,Pw=7*24*60*60*1e3,Aw=5*60*1e3,Rw="classseats_studentPhotoRefs_v1",Iw=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("classseats_debug_drive")==="1"}catch{return!1}},Lg=(e,t)=>{Iw()&&console.debug(`[PhotoService] ${e}`,t)},au={folderLookups:0,photoMetaLookups:0,mediaDownloads:0};function zs(e){au[e]+=1,Lg(`${e}=${au[e]}`,{count:au[e]})}const Bi=new Map,Wi=new Map,Hr=new Map;let pi=null;const Og=(e,t)=>`${e}:${t||0}`;function Ug(e){return e.replace(/'/g,"\\'")}function Dw(e){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(Rw);if(!t)return null;const n=JSON.parse(t);if(!n||typeof n!="object")return null;const r=n[e];return!r||typeof r.fileId!="string"?null:r.fileId}catch{return null}}function Mg(e){let t=0;const n=[],r=()=>{if(t>=e)return;const s=n.shift();s&&s()};return async function(o){t>=e&&await new Promise(l=>n.push(l)),t+=1;try{return await o()}finally{t-=1,r()}}}const hd=Mg(4),Pp=Mg(3);async function Vr(e,t,n){const r={Authorization:`Bearer ${e}`},s=(n==null?void 0:n.body)instanceof FormData;n!=null&&n.body&&!s&&(r["Content-Type"]="application/json");const o=await fetch(t,{...n,headers:{...r,...(n==null?void 0:n.headers)||{}}});if(!o.ok){const l=await o.text().catch(()=>"");throw new Error(l||"Google Drive request failed.")}return o}async function Lw(e){var n,r,s,o,l;if((r=(n=e.driveSession)==null?void 0:n.profile)!=null&&r.email)return e.driveSession.profile.email;if((s=e.driveClient)!=null&&s.getStatus)try{const u=await e.driveClient.getStatus();if(u.connected)return((o=u.profile)==null?void 0:o.email)||null}catch{}const t=await An(e.driveSession);return((l=t==null?void 0:t.profile)==null?void 0:l.email)||null}async function cl(e){const t=await Lw(e);if(!t)return null;pi&&pi!==t&&await Hi("account-change");const n=await Ew();return n&&n!==t&&await Hi("account-change"),pi=t,n!==t&&await _w(t),t}async function da(e){var n,r;if((n=e.driveSession)!=null&&n.accessToken)return e.driveSession.accessToken;if(((r=e.driveClient)==null?void 0:r.kind)==="desktop")return null;const t=await An(e.driveSession);return(t==null?void 0:t.accessToken)||null}async function gd(e,t){const n=await Tg(e,t);return n==null&&Ms(e),n}function Eo(e,t){const n=Hr.get(e);n!=null&&n.url&&URL.revokeObjectURL(n.url);const r=URL.createObjectURL(t);return Hr.set(e,{url:r}),r}function Ow(e){const t=Hr.get(e);return(t==null?void 0:t.url)||null}function Fg(e,t){const n=`${e}:`;for(const[r,s]of Hr.entries())r!==e&&!r.startsWith(n)||t&&r===t||(s!=null&&s.url&&URL.revokeObjectURL(s.url),Hr.delete(r))}function Uw(e){const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),t}function Mw(e){const t=e.replace(/\s+/g,"");return t.length<32||t.length%4!==0?!1:/^[A-Za-z0-9+/=]+$/.test(t)}function Ap(e,t){try{const n=e.replace(/\s+/g,""),r=atob(n),s=new Uint8Array(r.length);for(let o=0;o<r.length;o+=1)s[o]=r.charCodeAt(o);return new Blob([s],{type:t||"image/jpeg"})}catch{return null}}function Fw(e){if(!e)return null;if(e instanceof Blob)return e;if(e instanceof ArrayBuffer)return new Blob([e]);if(ArrayBuffer.isView(e))return new Blob([Uw(e)]);if(typeof e=="string"){if(e.startsWith("data:")){const t=e.split(",",2);if(t.length===2){const n=t[0].match(/data:([^;]+)/),r=Ap(t[1],n==null?void 0:n[1]);if(r)return r}}if(Mw(e)){const t=Ap(e);if(t)return t}return new Blob([e])}return null}async function Rp(e,t,n,r){const s=`name='${Ug(n)}' and '${t}' in parents and trashed=false`,o=new URLSearchParams({q:s,fields:"files(id,name,modifiedTime)",spaces:"drive"});return zs("photoMetaLookups"),hd(async()=>{const u=await(await Vr(e,`https://www.googleapis.com/drive/v3/files?${o.toString()}`,{method:"GET",signal:r})).json();return!Array.isArray(u.files)||u.files.length===0?null:u.files[0]})}async function zw(e,t,n){return zs("photoMetaLookups"),hd(async()=>{const s=await(await Vr(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime`,{method:"GET",signal:n})).json();return s!=null&&s.id?{id:s.id,name:s.name,modifiedTime:s.modifiedTime}:null})}async function $w(e,t,n,r){return hd(async()=>{const o=await(await Vr(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime`,{method:"PATCH",body:JSON.stringify({name:n}),signal:r})).json();return o!=null&&o.id?{id:o.id,name:o.name,modifiedTime:o.modifiedTime}:null})}async function Bw(e){return gd("driveFolder:classSeats",async()=>{const t=await cl(e),n=await Pg("classSeatsFolderId",Dg,t||void 0);if(n!=null&&n.value)return n.value;const r=await da(e);if(!r)return null;zs("folderLookups");const s=new URLSearchParams({q:`name='${_p}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),l=await(await Vr(r,`https://www.googleapis.com/drive/v3/files?${s.toString()}`,{method:"GET"})).json();let u=null;if(Array.isArray(l.files)&&l.files.length>0&&(u=l.files[0].id),!u){const d=await(await Vr(r,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:_p,mimeType:"application/vnd.google-apps.folder"})})).json();u=(d==null?void 0:d.id)||null}return u?(await Ag({key:"classSeatsFolderId",value:u,updatedAt:Date.now(),accountKey:t||void 0}),u):null})}async function Ww(e){return gd("driveFolder:studentPhotos",async()=>{const t=await cl(e),n=await Pg("studentPhotosFolderId",Dg,t||void 0);if(n!=null&&n.value)return n.value;const r=await da(e);if(!r)return null;const s=await Bw(e);if(!s)return null;zs("folderLookups");const o=new URLSearchParams({q:`'${s}' in parents and name='${Ug(Tp)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),u=await(await Vr(r,`https://www.googleapis.com/drive/v3/files?${o.toString()}`,{method:"GET"})).json();let c=null;if(Array.isArray(u.files)&&u.files.length>0&&(c=u.files[0].id),!c){const y=await(await Vr(r,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Tp,mimeType:"application/vnd.google-apps.folder",parents:[s]})})).json();c=(y==null?void 0:y.id)||null}return c?(await Ag({key:"studentPhotosFolderId",value:c,updatedAt:Date.now(),accountKey:t||void 0}),c):null})}async function _o(e){Bi.set(e.studentId,e),Wi.delete(e.studentId),Ms(`studentPhoto:${e.studentId}`),await Nw(e)}async function Hw(e,t,n,r){const s=String(e),o=await cl(n),l=Bi.get(s);if(l&&(!o||l.accountKey===o))return l;const u=await Sw(s,Tw,o||void 0);if(u)return Bi.set(s,u),u;const c=await bw(s,o||void 0),d=Wi.get(s);if(d&&Date.now()-d<Aw)return c||null;const y=await da(n);if(!y)return c||null;if(c!=null&&c.fileId)try{const k=await zw(y,c.fileId,r);if(k){const N={studentId:s,fileId:k.id,fileName:k.name,updatedTime:k.modifiedTime,fetchedAt:Date.now(),accountKey:o||void 0};return await _o(N),N}}catch{}const v=await Ww(n);if(!v)return c||null;const w=t?ud(e,t):c==null?void 0:c.fileName;if(w)try{const k=await Rp(y,v,w,r);if(k){const N={studentId:s,fileId:k.id,fileName:k.name,updatedTime:k.modifiedTime,fetchedAt:Date.now(),accountKey:o||void 0};return await _o(N),N}}catch{return c||null}try{const k=`student_${e}.jpg`,N=await Rp(y,v,k,r);if(N){let q=N.name,h=N.modifiedTime;if(w&&N.name!==w){const x=await $w(y,N.id,w,r);x!=null&&x.name&&(q=x.name,h=x.modifiedTime)}const m={studentId:s,fileId:N.id,fileName:q,updatedTime:h,fetchedAt:Date.now(),accountKey:o||void 0};return await _o(m),m}}catch{return c||null}const j=Dw(s);if(j){const k={studentId:s,fileId:j,fileName:w||void 0,fetchedAt:Date.now(),accountKey:o||void 0};return await _o(k),k}return Wi.set(s,Date.now()),c||null}async function Vw(e,t,n){var s;if(((s=t.driveClient)==null?void 0:s.kind)==="desktop"&&t.driveClient.downloadFile)return zs("mediaDownloads"),Pp(async()=>{var l,u;const o=await((u=(l=t.driveClient)==null?void 0:l.downloadFile)==null?void 0:u.call(l,e));return Fw(o==null?void 0:o.data)});const r=await da(t);return r?(zs("mediaDownloads"),Pp(async()=>{const o=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{method:"GET",headers:{Authorization:`Bearer ${r}`},signal:n});return o.ok?o.blob():null})):null}async function Kw(e,t,n,r){const s=Og(e,t);Fg(e,s);const o=Ow(s);if(o)return o;const l=await cl(n),u=await kw(s,Pw,l||void 0);if(u)return Eo(s,u.blob);const c=await jw(s,l||void 0);try{const d=await Tg(`photoBlob:${s}`,async()=>Vw(e,n,r));if(!d)return Ms(`photoBlob:${s}`),c?Eo(s,c.blob):null;const y={fileId:s,blob:d,fetchedAt:Date.now(),accountKey:l||void 0};return await Rg(y),Eo(s,d)}catch{return Ms(`photoBlob:${s}`),c?Eo(s,c.blob):null}}async function Gw(e){const t=e.photoFileId?String(e.photoFileId):"";if(!t)return{fileId:null,url:null};const n=await Kw(t,e.photoUpdatedAt,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal);return{fileId:t,url:n}}async function Yw(e){const t=`studentPhoto:${String(e.studentId)}`;return gd(t,async()=>Hw(e.studentId,e.fullName,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal))}async function Qw(e){const t=Og(e.fileId,e.photoUpdatedAt);Ms(`photoBlob:${t}`);const n=String(e.studentId),r=await cl({driveClient:e.driveClient,driveSession:e.driveSession}),s=ud(e.studentId,e.fullName),o={studentId:n,fileId:e.fileId,fileName:s,updatedTime:e.updatedTime,fetchedAt:Date.now(),accountKey:r||void 0};await _o(o);const l={fileId:t,blob:e.blob,updatedTime:e.updatedTime,fetchedAt:Date.now(),accountKey:r||void 0};await Rg(l),Fg(e.fileId,t),Eo(t,e.blob)}async function Hi(e){e&&Lg("cache clear",{reason:e});for(const t of Hr.values())URL.revokeObjectURL(t.url);Hr.clear(),Bi.clear(),Wi.clear(),pi=null,Ms(),await Cw()}function zg({studentId:e,fullName:t,photoFileId:n,photoUpdatedAt:r,driveClient:s,driveSession:o,driveAccountKey:l}){const[u,c]=f.useState(null),[d,y]=f.useState(null),[v,w]=f.useState(!1),j=f.useMemo(()=>String(e),[e]),k=f.useMemo(()=>n?String(n):"",[n]),N=(o==null?void 0:o.accessToken)||"",q=l||"";return f.useEffect(()=>{let h=!0;const m=new AbortController;return k?(w(!0),c(null),Gw({photoFileId:k,photoUpdatedAt:r,driveClient:s,driveSession:o,signal:m.signal}).then(x=>{h&&(c(x.url),y(x.fileId))}).catch(()=>{h&&(c(null),y(null))}).finally(()=>{h&&w(!1)}),()=>{h=!1,m.abort()}):(c(null),y(null),w(!1),()=>{h=!1,m.abort()})},[j,k,r,s,o,N,q,t]),{photoUrl:u,fileId:d,loading:v}}const rl=new Map,Jw=(e,t)=>`${e}:${t||0}`;function qw(e){return/^[A-Za-z0-9+/=\s]+$/.test(e)&&e.length%4===0}function Ip(e,t){try{const n=e.replace(/\s+/g,""),r=atob(n),s=new Uint8Array(r.length);for(let o=0;o<r.length;o+=1)s[o]=r.charCodeAt(o);return new Blob([s],{type:t||"audio/webm"})}catch{return null}}function Xw(e){if(!e)return null;if(e instanceof Blob)return e;if(e instanceof ArrayBuffer)return new Blob([e]);if(ArrayBuffer.isView(e)){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=new Uint8Array(t.length);return n.set(t),new Blob([n.buffer])}if(typeof e=="string"){if(e.startsWith("data:")){const t=e.split(",",2);if(t.length===2){const n=t[0].match(/data:([^;]+)/),r=Ip(t[1],n==null?void 0:n[1]);if(r)return r}}if(qw(e)){const t=Ip(e);if(t)return t}return new Blob([e])}return null}async function Zw(e){var n,r;if((n=e.driveSession)!=null&&n.accessToken)return e.driveSession.accessToken;if(((r=e.driveClient)==null?void 0:r.kind)==="desktop")return null;const t=await An(e.driveSession);return(t==null?void 0:t.accessToken)||null}function eS(e,t){const n=rl.get(e);n!=null&&n.url&&URL.revokeObjectURL(n.url);const r=URL.createObjectURL(t);return rl.set(e,{url:r}),r}function tS(e){const t=rl.get(e);return(t==null?void 0:t.url)||null}function nS(e,t){for(const[n,r]of rl.entries())n.startsWith(`${e}:`)&&(t&&n===t||(r.url&&URL.revokeObjectURL(r.url),rl.delete(n)))}async function rS(e,t,n){var o;if(((o=t.driveClient)==null?void 0:o.kind)==="desktop"&&t.driveClient.downloadFile){const l=await t.driveClient.downloadFile(e);return Xw(l==null?void 0:l.data)}const r=await Zw(t);if(!r)return null;const s=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{method:"GET",headers:{Authorization:`Bearer ${r}`},signal:n});return s.ok?s.blob():null}async function sS(e,t,n,r){const s=Jw(e,t);nS(e,s);const o=tS(s);if(o)return o;const l=await rS(e,n,r);return l?eS(s,l):null}async function oS(e){const t=e.audioFileId?String(e.audioFileId):"";if(!t)return{fileId:null,url:null};const n=await sS(t,e.audioUpdatedAt,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal);return{fileId:t,url:n}}function yd({studentId:e,audioFileId:t,audioUpdatedAt:n,driveClient:r,driveSession:s}){const[o,l]=f.useState(null),[u,c]=f.useState(null),[d,y]=f.useState(!1),v=f.useMemo(()=>String(e),[e]),w=f.useMemo(()=>t?String(t):"",[t]),j=(s==null?void 0:s.accessToken)||"";return f.useEffect(()=>{let k=!0;const N=new AbortController;return w?(y(!0),l(null),oS({audioFileId:w,audioUpdatedAt:n,driveClient:r,driveSession:s,signal:N.signal}).then(q=>{k&&(l(q.url),c(q.fileId))}).catch(()=>{k&&(l(null),c(null))}).finally(()=>{k&&y(!1)}),()=>{k=!1,N.abort()}):(l(null),c(null),y(!1),()=>{k=!1,N.abort()})},[v,w,n,r,s,j]),{audioUrl:o,fileId:u,loading:d}}const lS="newui_constraints_v1";function iS(){try{const e=localStorage.getItem(lS);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function aS(){return iS()}const $g=f.createContext(null);function uS({children:e}){const[t,n]=f.useState([]),r=f.useCallback(l=>{n(u=>u.filter(c=>c.id!==l))},[]),s=f.useCallback(l=>{const u=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,c=l.tone||"info",d=l.duration??4e3;n(y=>[...y,{...l,id:u,tone:c}]),d>0&&typeof window<"u"&&window.setTimeout(()=>r(u),d)},[r]),o=f.useMemo(()=>s,[s]);return i.jsxs($g.Provider,{value:o,children:[e,i.jsx("div",{className:"pointer-events-none fixed top-6 left-1/2 -translate-x-1/2 z-[1000] flex flex-col gap-4 w-full max-w-lg items-center",children:t.map(l=>{const u=l.tone==="success"?"bg-emerald-600 text-white shadow-emerald-500/40":l.tone==="error"?"bg-rose-600 text-white shadow-rose-500/40":l.tone==="warning"?"bg-amber-500 text-slate-900 shadow-amber-400/40":"bg-slate-800 text-white shadow-slate-900/40";return i.jsxs("div",{className:`pointer-events-auto rounded-3xl px-5 py-4 shadow-2xl flex items-start gap-4 text-base font-semibold w-full ${u}`,children:[i.jsx("div",{className:"flex-1 text-sm font-semibold",children:l.message}),i.jsx("button",{className:"text-base font-bold opacity-80 hover:opacity-100",onClick:()=>r(l.id),"aria-label":"Dismiss notification",children:""})]},l.id)})})]})}function xd(){const e=f.useContext($g);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}const cS="newui_history_v1";function dS(){try{const e=localStorage.getItem(cS);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function fS(){return dS()}const pS="newui_groupings_v1";function mS(){try{const e=localStorage.getItem(pS);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function hS(){return mS()}console.log(" GroupingAlgorithm.js (FIXED v2) file loaded!");console.log(" GroupingAlgorithm v2 loaded successfully!");const gS="newui_print_settings_v1",yS={seatingChartEditor:{lastUpdated:new Date(0).toISOString()}};function xS(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Yn(e,t,n,r){const s=typeof e=="number"?e:parseFloat(String(e));return Number.isFinite(s)?Math.min(r,Math.max(n,s)):t}function vS(e){return e==="a4"||e==="legal"||e==="tabloid"?e:"letter"}function wS(e){return Array.isArray(e)?e.filter(t=>typeof t=="string"||typeof t=="number"):null}function SS(e){return e==="posterTiled"?e:"single"}function bS(){var n,r,s,o,l;const e=xS(localStorage.getItem(gS)),t=(e==null?void 0:e.seatingChartEditor)??{};return{seatingChartEditor:{paper:vS(t.paper),orientation:t.orientation==="portrait"?"portrait":"landscape",marginMode:t.marginMode==="max"?"max":"safe",showPhotos:t.showPhotos!==!1,showTags:t.showTags!==!1,showSeatNumbers:t.showSeatNumbers===!0,showTableHeader:t.showTableHeader!==!1,selectedTagIds:wS(t.selectedTagIds),textScale:Yn(t.textScale,1,.5,2.5),photoScale:Yn(t.photoScale,1,.5,2),zoom:Yn(t.zoom,1,.1,4),offsetX:Yn(t.offsetX,0,-5e3,5e3),offsetY:Yn(t.offsetY,0,-5e3,5e3),seatingChartLayoutMode:SS(t.seatingChartLayoutMode),poster:{mode:((n=t.poster)==null?void 0:n.mode)==="manual"?"manual":"auto",rows:Math.round(Yn((r=t.poster)==null?void 0:r.rows,2,1,10)),cols:Math.round(Yn((s=t.poster)==null?void 0:s.cols,2,1,10)),overlapIn:Yn((o=t.poster)==null?void 0:o.overlapIn,.25,0,.5),showPageLabels:((l=t.poster)==null?void 0:l.showPageLabels)!==!1},lastUpdated:typeof t.lastUpdated=="string"?t.lastUpdated:yS.seatingChartEditor.lastUpdated}}}function Bg(e,t=50){const n=t>0?t:50,r=Math.ceil(n*.9),s=Math.ceil(n*.7),o=Math.ceil(n*.5);return e>=r?{label:"Good Standing",color:"green",emoji:"",min:r}:e>=s?{label:"Caution",color:"yellow",emoji:"",min:s,max:r-1}:e>=o?{label:"Warning",color:"orange",emoji:"",min:o,max:s-1}:{label:"Alert",color:"red",emoji:"",min:0,max:o-1}}function NS(){return{periods:uc().periods.map(t=>({id:t.id,behaviorNotes:t.behaviorNotes||{},pointsByStudent:t.pointsByStudent||{},pointsHistory:t.pointsHistory||[],pointsEnabled:t.pointsEnabled,startingPoints:t.startingPoints}))}}const kS=e=>{const[t,n,r]=e.split("-").map(s=>Number(s));return!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(r)?null:new Date(Date.UTC(t,n-1,r))},jS=e=>{const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return`${t}-${n}-${r}`},CS=e=>{const t=kS(e);return t?(t.setUTCDate(t.getUTCDate()-1),jS(t)):e},Wg=(e,t,n)=>{if(!e)return null;const r=e[String(t)];return r&&r[n]||null},ES=e=>{if(!e)return null;const t=Object.keys(e);return t.length===0?null:t.reduce((n,r)=>r<n?r:n,t[0])};function vo(e){var y;const{attendance:t,studentId:n,date:r,status:s,resets:o}=e;if(!t)return 0;const l=String(n),c=Wg(o,n,s==="left_early"?"leftEarly":s==="tardy"?"tardy":"absent");let d=0;for(const v of Object.keys(t))v>r||c&&v<c||((y=t[v])==null?void 0:y[l])===s&&(d+=1);return d}function _S(e){var v,w;const{attendance:t,studentId:n,date:r,resets:s}=e;if(!t)return 0;const o=String(n);if((((v=t[r])==null?void 0:v[o])||"unmarked")!=="absent")return 0;const u=Wg(s,n,"absent");if(u&&r<u)return 0;const c=ES(t);let d=r,y=0;for(;!(u&&d<u);){const j=((w=t[d])==null?void 0:w[o])||"unmarked";if(j==="absent")y+=1;else if(j!=="unmarked")break;if(!c||d<=c)break;d=CS(d)}return y}const Hg="https://www.classseats.com/updates",vd="https://classseats.com",TS=`${vd}/privacy.html`,PS=`${vd}/terms.html`;function AS({variant:e="floating",className:t}){const n=new Date().getFullYear(),r=i.jsxs("div",{className:"w-full max-w-[460px] rounded-xl border border-indigo-100 bg-white/95 px-3 py-3 text-left text-slate-800 shadow-lg backdrop-blur",children:[i.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-700 flex flex-wrap items-center gap-1",children:[i.jsx("span",{children:"Early Access"}),i.jsx("span",{children:""}),i.jsx("a",{href:Hg,target:"_blank",rel:"noreferrer",className:"text-indigo-700 underline decoration-indigo-300 decoration-2 underline-offset-4 hover:text-indigo-800",children:"Updates"}),i.jsx("span",{children:""}),i.jsxs("span",{children:["(c) ",n," ClassWare Solutions, LLC"]})]}),i.jsx("p",{className:"mt-1 text-[11px] leading-snug text-slate-700",children:"ClassSeats is in development. Features and pricing may change."})]});return e==="floating"?i.jsx("div",{className:`pointer-events-none fixed bottom-3 left-3 right-3 z-40 flex justify-end md:left-auto md:right-4 md:max-w-[420px] ${t??""}`,children:i.jsx("div",{className:"pointer-events-auto w-full md:w-auto",children:r})}):i.jsx("div",{className:t,children:r})}const RS="0.1.0",IS=new Date().toLocaleDateString();function DS({open:e,onClose:t,buildRevision:n}){const r=new Date().getFullYear();return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),i.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl bg-white p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold uppercase tracking-wide text-indigo-700",children:["ClassSeats",i.jsx("sup",{className:"text-[6px] font-normal align-super",children:"TM"})," (Early Access)"]}),i.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"About"})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:t,"aria-label":"Close about",children:""})]}),i.jsx("p",{className:"mt-2 text-sm leading-relaxed text-slate-700",children:"ClassSeats is in active development. Features and pricing may change. Data is stored in your Google Drive or locally on your device  ClassWare Solutions, LLC does not store student data on its servers."}),i.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-800 space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"App version"}),i.jsx("span",{children:RS})]}),n&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Build revision"}),i.jsxs("span",{children:["Rev ",n]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Build date"}),i.jsx("span",{children:IS})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[i.jsx(Ql,{href:vd,label:"Home"}),i.jsx(Ql,{href:TS,label:"Privacy"}),i.jsx(Ql,{href:PS,label:"Terms"}),i.jsx(Ql,{href:Hg,label:"Get updates"})]}),i.jsxs("p",{className:"mt-4 text-[11px] text-slate-500",children:[" ",r," ClassWare Solutions, LLC. All rights reserved."]}),i.jsx("p",{className:"mt-1 text-[10px] text-slate-400",children:"Google Drive is a trademark of Google LLC"}),i.jsx("p",{className:"mt-1 text-[10px] text-slate-400",children:"ClassSeats is a product of ClassWare Solutions, LLC"})]})]}):null}function Ql({href:e,label:t}){return i.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-800 shadow-sm hover:border-indigo-200 hover:text-indigo-700",children:[t,i.jsx("span",{"aria-hidden":"true",children:""})]})}function LS(e){const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function OS(e){try{const t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}function US({isOpen:e,onRequestClose:t,unreadMessages:n,allMessages:r,dismissedIds:s,onDismiss:o}){const[l,u]=pu.useState("unread");pu.useEffect(()=>{e&&u("unread")},[e]);const c=l==="all"?r:n;return i.jsxs(ad,{isOpen:e,onRequestClose:t,title:"Messages",subtitle:"Updates and notes from ClassSeats",maxWidth:"md",footer:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("p",{className:"text-xs text-slate-600",children:["Need Help? Email"," ",i.jsx("a",{className:"font-semibold text-slate-700 hover:text-slate-900",href:"mailto:support@classseats.com",children:"support@classseats.com"})]}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg border border-slate-300 bg-white text-slate-700 hover:bg-slate-50 text-sm font-semibold",onClick:t,children:"Close"})]}),children:[i.jsxs("div",{className:"mb-3 inline-flex items-center rounded-full border border-slate-200 bg-slate-100 p-1",children:[i.jsxs("button",{type:"button",onClick:()=>u("unread"),className:`rounded-full px-3 py-1 text-xs font-semibold ${l==="unread"?"bg-white text-slate-900 shadow-sm":"text-slate-700 hover:bg-slate-200"}`,children:["Unread (",n.length,")"]}),i.jsxs("button",{type:"button",onClick:()=>u("all"),className:`rounded-full px-3 py-1 text-xs font-semibold ${l==="all"?"bg-white text-slate-900 shadow-sm":"text-slate-700 hover:bg-slate-200"}`,children:["All (",r.length,")"]})]}),c.length===0?i.jsx("div",{className:"py-6",children:l==="unread"?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-slate-700",children:"No new messages right now."}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"You're all caught up."})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-slate-700",children:"No messages available yet."}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Published messages will appear here."})]})}):i.jsx("div",{className:"flex flex-col gap-3 py-1",children:c.map(d=>{var y,v;return i.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white",children:[i.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"text-sm font-extrabold text-slate-900 truncate",children:d.title}),d.priority==="high"&&i.jsx("span",{className:"inline-flex items-center rounded-full bg-rose-100 text-rose-800 px-2 py-0.5 text-[11px] font-semibold",children:"Important"}),l==="all"&&s.has(d.id)&&i.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 text-slate-700 px-2 py-0.5 text-[11px] font-semibold",children:"Dismissed"})]}),i.jsx("div",{className:"mt-1 text-xs text-slate-500",children:LS(d.publishedAt)})]}),l==="all"&&s.has(d.id)?i.jsx("span",{className:"shrink-0 inline-flex items-center rounded-full bg-slate-100 text-slate-600 px-2.5 py-1 text-[11px] font-semibold",children:"Dismissed"}):i.jsx("button",{type:"button",className:"shrink-0 inline-flex items-center rounded-full bg-slate-100 text-slate-700 px-2.5 py-1 text-[11px] font-semibold hover:bg-slate-200",onClick:()=>o(d.id),title:"Dismiss this message",children:"Dismiss"})]}),i.jsxs("div",{className:"px-4 py-3",children:[i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:d.body}),((y=d.cta)==null?void 0:y.label)&&((v=d.cta)==null?void 0:v.href)&&OS(d.cta.href)&&i.jsx("div",{className:"mt-3",children:i.jsxs("a",{className:"inline-flex items-center gap-2 rounded-lg bg-indigo-600 text-white px-3 py-2 text-sm font-semibold hover:bg-indigo-700",href:d.cta.href,target:"_blank",rel:"noopener noreferrer",children:[d.cta.label,i.jsx("span",{"aria-hidden":!0,children:""})]})})]})]},d.id)})})]})}function MS({current:e,onGoDesktop:t,onGoMobile:n}){const r="px-3 py-1.5 text-xs font-semibold rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500",s="bg-slate-900 text-white",o="bg-white text-slate-700 border border-slate-200 hover:bg-slate-50";return i.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white/80 p-1 shadow-sm",children:[i.jsx("button",{type:"button","aria-pressed":e==="desktop",className:`${r} ${e==="desktop"?s:o}`,onClick:t,children:"Desktop"}),i.jsx("button",{type:"button","aria-pressed":e==="mobile",className:`${r} ${e==="mobile"?s:o}`,onClick:n,children:"Mobile"})]})}function FS(){var n;if(typeof navigator>"u")return!1;const e=(n=navigator.userAgentData)==null?void 0:n.mobile;if(typeof e=="boolean")return e;const t=navigator.userAgent||"";return/iPhone|Android.+Mobile|Windows Phone|iPod/i.test(t)}function zS(e,t,n){const r=uc().currentId,s=r!=null?String(r):null,o=new Date().toISOString();return{schemaVersion:1,version:1,exportedAt:o,updatedAt:o,lastWriter:"unknown",layouts:xv(),periodsState:uc(),lastEditedPeriodId:s,lastEditedDate:null,students:n||Ev(),tags:Nv(),behaviorState:NS(),constraintsState:aS(),historyState:fS(),groupingsState:hS(),printSettings:bS()}}const qn=e=>!!e&&typeof e=="object",$S=e=>e===!0||e==="true"||e===1||e==="1",Or=e=>{const t=typeof e=="number"?e:parseInt(String(e),10);return Number.isFinite(t)&&Number.isInteger(t)?t:null};function BS(e){if(!qn(e))return;const t=e.singleSeat;if(!qn(t))return;const n=t.template;if(n!=="grid"&&n!=="arc")return;const r=Or(t.row)??void 0,s=Or(t.col)??void 0,o=Or(t.arcIndex)??void 0,l=Or(t.seatIndex)??void 0,u=t.angle,c=Number.isFinite(u)?Number(u):void 0;return{singleSeat:{template:n,row:r,col:s,arcIndex:o,seatIndex:l,angle:c}}}function WS(e,t){if(!Array.isArray(e))return[];const n=[];for(const r of e){const s=Or(r);s!=null&&(s<0||s>=t||n.push(s))}return Array.from(new Set(n)).sort((r,s)=>r-s)}function HS(e){var u;if(!e||typeof e!="object"||(e.schemaVersion??(e.version===1?1:void 0))!==1)return null;const n=typeof e.exportedAt=="string"?e.exportedAt:new Date().toISOString(),r=typeof e.updatedAt=="string"?e.updatedAt:n,s=e.lastWriter==="desktop"||e.lastWriter==="mobile"||e.lastWriter==="unknown"?e.lastWriter:"unknown",o={...e,schemaVersion:1,version:e.version??1,exportedAt:n,updatedAt:r,lastWriter:s};if(o.behaviorState=qn(e.behaviorState)?e.behaviorState:{},!qn(o.periodsState)||!Array.isArray((u=o.periodsState)==null?void 0:u.periods)||!Array.isArray(o.students)||!Array.isArray(o.layouts)||!qn(o.behaviorState)||!qn(o.constraintsState)||!qn(o.historyState)||!qn(o.groupingsState))return null;switch((e.schemaVersion!==o.schemaVersion||e.updatedAt!==o.updatedAt||e.exportedAt!==o.exportedAt||e.lastWriter!==o.lastWriter)&&console.log("[Payload] migrated to schema v1",{hadSchemaVersion:e.schemaVersion,hadVersion:e.version,addedUpdatedAt:e.updatedAt!==o.updatedAt,addedLastWriter:e.lastWriter!==o.lastWriter}),o.schemaVersion){case 1:return o.students=(o.students||[]).map(c=>({...c,needsPreferredSeating:$S(c.needsPreferredSeating),quickNote:(typeof c.quickNote=="string",c.quickNote),quickNoteUpdatedAt:(typeof c.quickNoteUpdatedAt=="string",c.quickNoteUpdatedAt),photoFileId:typeof c.photoFileId=="string"?c.photoFileId:c.photoFileId==null?null:String(c.photoFileId),photoUpdatedAt:Or(c.photoUpdatedAt),audioFileId:typeof c.audioFileId=="string"?c.audioFileId:c.audioFileId==null?null:String(c.audioFileId),audioUpdatedAt:Or(c.audioUpdatedAt)})),o.layouts=(o.layouts||[]).map(c=>({...c,tables:(c.tables||[]).map(d=>{const y=Math.max(0,d.capacity||0),v=BS(d.meta);return{...d,meta:v,preferredSeatIndexes:WS(d.preferredSeatIndexes,y),seatLayout:yg(y||1,d.rotation||0,d.seatLayout||null)}})})),o;default:return null}}function VS(e){return e.isOffline?{action:"skip",reason:"offline"}:e.isLocked?{action:"skip",reason:"locked"}:e.inFlight?{action:"skip",reason:"in-flight"}:e.hasFile?e.dirty?{action:"upload",reason:"ready"}:{action:"skip",reason:"clean"}:{action:"skip",reason:"no-file"}}function KS(e){const t=e.graceMs;return e.isOffline?{action:"skip",reason:"offline"}:e.isLocked?{action:"skip",reason:"locked"}:e.inFlight?{action:"skip",reason:"in-flight"}:e.dirty?{action:"skip",reason:"dirty"}:e.lastLocalEditAt&&e.now-e.lastLocalEditAt<t?{action:"skip",reason:"grace-window"}:{action:"pull",reason:"ready"}}function GS(e){const t=e.incomingUpdatedAt?Date.parse(e.incomingUpdatedAt):NaN,n=e.lastAppliedUpdatedAt?Date.parse(e.lastAppliedUpdatedAt):NaN;return Number.isFinite(t)&&Number.isFinite(n)&&t<=n?{action:"skip",reason:"stale-updatedAt"}:e.incomingRevisionId&&e.lastRevisionId&&e.incomingRevisionId===e.lastRevisionId?{action:"skip",reason:"same-revision"}:{action:"apply",reason:"fresh"}}const YS=new Set(["students","periodsState","layouts","tags","constraintsState","historyState","groupingsState","behaviorNotes","attendance","notes","alerts","payload"]),dc=(e,t,n)=>{if(YS.has(t))return"[omitted]";if(typeof e=="string")return e.length>200?`[string ${e.length}]`:e;if(Array.isArray(e)){const r=e.slice(0,5).map(s=>dc(s,"",n+1));return e.length>5&&r.push(`[+${e.length-5} more]`),n>1?`[array len=${e.length}]`:r}if(e&&typeof e=="object"){if(n>1)return"[object]";const r=Object.entries(e).slice(0,10).map(([s,o])=>[s,dc(o,s,n+1)]);return r.length===0?e:Object.fromEntries(r)}return e};function wo(e,t){if(!(typeof console>"u"))try{const n=t?dc(t,"",0):void 0;n!==void 0?console.log(e,n):console.log(e)}catch{console.log(e)}}const Dp="classseats_first_seen_at_v1",Vg="classseats_announcements_dismissed_v1",Kg="classseats_announcements_cache_v1",wd="classseats_announcements_cache_at_v1",Lp="appPrefs",Op="announcements_state_v1.json";function sl(){return new Date().toISOString()}function To(e){const t=Date.parse(e);return Number.isFinite(t)?t:0}function hn(e){return typeof e=="string"?e.trim():""}function QS(e){try{const t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}function JS(e){return!!e&&typeof e=="object"&&e.schema===1&&Array.isArray(e.messages)}function qS(e){if(!e||typeof e!="object")return null;const t=e,n=hn(t.id),r=t.audience==="onboarding"?"onboarding":t.audience==="all"?"all":null,s=t.priority==="high"?"high":t.priority==="normal"?"normal":null,o=hn(t.publishedAt),l=hn(t.title),u=hn(t.body);if(!n||!r||!s||!o||!l||!u)return null;let c;const d=t.cta;if(d&&typeof d=="object"){const y=d,v=hn(y.label),w=hn(y.href);v&&w&&QS(w)&&(c={label:v,href:w})}return{id:n,audience:r,publishedAt:o,title:l,body:u,priority:s,...c?{cta:c}:{}}}function XS(e){if(!e||typeof e!="object")return null;const t=e;if(t.schema!==1)return null;const n=hn(t.updatedAt),r=Array.isArray(t.dismissed)?t.dismissed:[],s=Array.from(new Set(r.map(o=>hn(o)).filter(Boolean)));return{schema:1,updatedAt:n||sl(),dismissed:s}}function Gg(e){if(!JS(e))return null;const t=new Set,n=[];for(const r of e.messages){const s=qS(r);s&&(t.has(s.id)||(t.add(s.id),n.push(s)))}return{schema:1,messages:n}}function ZS(){try{const e=localStorage.getItem(Dp);if(e)return e;const t=sl();return localStorage.setItem(Dp,t),t}catch{return sl()}}function Vi(){try{const e=localStorage.getItem(Vg);if(!e)return new Set;const t=JSON.parse(e);return Array.isArray(t)?new Set(t.map(n=>String(n))):new Set}catch{return new Set}}function Yg(e){try{localStorage.setItem(Vg,JSON.stringify(Array.from(e)))}catch{}}function e1(e){const t=Vi();t.add(String(e)),Yg(t)}function Up(e){return{schema:1,updatedAt:sl(),dismissed:Array.from(new Set(Array.from(e).map(t=>hn(t)).filter(Boolean)))}}function t1(e){try{const t=JSON.parse(e);return XS(t)}catch{return null}}function n1(e,t){const n=new Set(Array.from(e).map(String));for(const r of t){const s=hn(r);s&&n.add(s)}return n}function r1(e,t){const n=To(t),r=e.messages.filter(s=>s.audience==="onboarding"?!0:To(s.publishedAt)>n);return r.sort((s,o)=>{const l=s.priority==="high"?1:0,u=o.priority==="high"?1:0;return l!==u?u-l:To(o.publishedAt)-To(s.publishedAt)}),r}function Qg(){try{const e=localStorage.getItem(Kg),t=localStorage.getItem(wd);if(!e)return{wrapper:null,cacheAt:t||null};const n=JSON.parse(e);return{wrapper:Gg(n),cacheAt:t||null}}catch{return{wrapper:null,cacheAt:null}}}function s1(e){try{localStorage.setItem(Kg,JSON.stringify(e)),localStorage.setItem(wd,sl())}catch{}}function o1(e,t){return e?Date.now()-To(e)>t*60*60*1e3:!0}async function l1(e,t){const n=new AbortController,r=window.setTimeout(()=>n.abort(),t);try{const s=await fetch(e,{cache:"no-store",signal:n.signal});return s.ok?await s.json():null}catch{return null}finally{window.clearTimeout(r)}}function mi(e,t){const n=ZS(),r=Vi(),s=e?r1(e,n):[],o=s.filter(l=>!r.has(l.id));return{fetchedAt:t,messages:o,allMessages:s,dismissedIds:new Set(r),unreadCount:o.length}}function uu(){const{wrapper:e,cacheAt:t}=Qg();return mi(e,t)}async function Mp(e=12){const{wrapper:t,cacheAt:n}=Qg();if(!o1(n,e))return mi(t,n);const r=await l1("/announcements.json",3e3),s=Gg(r);if(!s)return mi(t,n);s1(s);const o=(()=>{try{return localStorage.getItem(wd)}catch{return n}})();return mi(s,o)}const Fp=e=>e?{...e}:{},zp=(e,t)=>{if(t.size===0)return e;const n={...e};return t.forEach(r=>{delete n[r]}),n},i1=e=>{if(!e||typeof e!="object"||typeof e.note!="string")return null;const t=typeof e.timestamp=="string"?e.timestamp:"";return{note:e.note,timestamp:t}},a1=e=>{const t=e!=null&&e.note&&typeof e.note=="object"?e.note:e,n={};return Object.entries(t||{}).forEach(([r,s])=>{const o=i1(s);o&&(n[String(r)]=o)}),n};function $p(e,t,n){const r={};return Object.entries(e||{}).forEach(([o,l])=>{const u=zp(Fp(l),n);Object.keys(u).length>0&&(r[o]=u)}),t&&Object.entries(t).forEach(([o,l])=>{const u=zp(Fp(l),n);Object.keys(u).length===0?delete r[o]:r[o]=u}),r}function Bp(e,t,n,r){const s={};return Object.entries(e||{}).forEach(([l,u])=>{const c={};Object.entries(a1(u)).forEach(([d,y])=>{n.has(d)||(c[d]=y)}),Object.keys(c).length>0&&(s[l]=c)}),t&&Object.entries(t).forEach(([l,u])=>{const c=s[l]||{},d={};Object.entries(u||{}).forEach(([y,v])=>{if(n.has(y))return;const w=c[y];w&&w.note===v?d[y]=w:d[y]={note:v,timestamp:r}}),Object.keys(d).length===0?delete s[l]:s[l]=d}),s}function u1({children:e}){return i.jsx(i.Fragment,{children:e})}const So=10,c1=250,d1=["audio/webm;codecs=opus","audio/webm","audio/mp4;codecs=mp4a.40.2","audio/mp4"];function f1(){if(typeof MediaRecorder>"u")return"";for(const e of d1)if(MediaRecorder.isTypeSupported(e))return e;return""}function p1(e){const t=e.toLowerCase();return t.includes("webm")?".webm":t.includes("mp4")?".m4a":".webm"}function Jg({open:e,studentId:t,studentFullName:n,existingAudioFileId:r,existingAudioUpdatedAt:s,driveSession:o,onClose:l,onUploadComplete:u,onDeleteComplete:c}){const d=xd(),[y,v]=f.useState("idle"),[w,j]=f.useState(So),[k,N]=f.useState(!1),[q,h]=f.useState(!1),[m,x]=f.useState(null),[_,D]=f.useState(0),[U,B]=f.useState(!1),M=f.useRef(null),fe=f.useRef(null),X=f.useRef([]),me=f.useRef(null),Fe=f.useRef(null),Qe=f.useRef(null),re=f.useRef(null),Re=f.useRef(null),{audioUrl:L}=yd({studentId:t,audioFileId:r||null,audioUpdatedAt:s??null,driveSession:o}),_e=!!r&&!k&&!q&&y!=="recording",O=()=>{x(he=>(he!=null&&he.url&&URL.revokeObjectURL(he.url),null))},Y=()=>{me.current&&(window.clearInterval(me.current),me.current=null)},Z=()=>{Re.current&&(cancelAnimationFrame(Re.current),Re.current=null),Qe.current=null,re.current=null,Fe.current&&(Fe.current.close().catch(()=>{}),Fe.current=null),B(!1),D(0)},ce=()=>{fe.current&&(fe.current.getTracks().forEach(he=>he.stop()),fe.current=null)},K=()=>{const he=M.current;he&&he.state!=="inactive"&&he.stop()},ct=()=>{K(),Z(),ce(),M.current=null,X.current=[],Y()};f.useEffect(()=>(e||(ct(),O(),v("idle"),j(So)),()=>{e&&ct()}),[e]);const Ve=async()=>{if(y!=="recording"){if(typeof MediaRecorder>"u"){d({message:"Audio recording is not supported on this device.",tone:"error"});return}try{const he=await navigator.mediaDevices.getUserMedia({audio:!0}),tt=f1(),ze=new MediaRecorder(he,tt?{mimeType:tt}:void 0);fe.current=he,M.current=ze,X.current=[];try{const P=window.AudioContext||window.webkitAudioContext;if(P){const ve=new P,xt=ve.createMediaStreamSource(he),$=ve.createAnalyser();$.fftSize=512,xt.connect($);const le=new Uint8Array(new ArrayBuffer($.frequencyBinCount));Fe.current=ve,Qe.current=$,re.current=le,B(!0);const ue=()=>{const Ue=Qe.current,nt=re.current;if(!Ue||!nt)return;Ue.getByteTimeDomainData(nt);let Bt=0;for(let z=0;z<nt.length;z+=1){const W=(nt[z]-128)/128;Bt+=W*W}const kt=Math.sqrt(Bt/nt.length),F=Math.min(1,Math.sqrt(kt)*2.2);D(F),Re.current=requestAnimationFrame(ue)};Re.current=requestAnimationFrame(ue)}}catch{B(!1)}ze.ondataavailable=P=>{P.data&&P.data.size>0&&X.current.push(P.data)},ze.onstop=()=>{Y(),Z(),ce();const P=ze.mimeType||tt,ve=new Blob(X.current,{type:P});if(X.current=[],!ve.size){v("idle"),j(So),d({message:"We could not save that recording. Please try again.",tone:"error"});return}const xt=URL.createObjectURL(ve);x({blob:ve,url:xt,mimeType:P}),v("draft"),j(So)},v("recording"),j(So),ze.start(c1),me.current=window.setInterval(()=>{j(P=>P<=1?(K(),0):P-1)},1e3)}catch{ct(),v("idle"),d({message:"We could not access your microphone. Please allow access and try again.",tone:"error"})}}},$t=()=>{K()},dt=async()=>{if(!(!m||k)){N(!0);try{const he=m.mimeType||m.blob.type||"audio/webm",tt=p1(he),ze=await dw({studentId:t,studentFullName:n,blob:m.blob,mimeType:he,extension:tt,fileId:r||null}),P=Date.now();u({fileId:ze.fileId,audioUpdatedAt:P}),O(),l()}catch(he){const ze=(he instanceof Error?he.message:"").toLowerCase();ze.includes("sign in")&&ze.includes("drive")?d({message:"Please reconnect Google Drive to upload audio.",tone:"error"}):d({message:"Couldn't upload the audio. Please try again.",tone:"error"})}finally{N(!1)}}},et=async()=>{if(!(!r||q||!window.confirm("Delete this audio clip?"))){h(!0);try{await fw(r)}catch{d({message:"Audio was removed from the student, but we couldn't delete it from Drive.",tone:"warning"})}finally{h(!1),c(),l()}}},cn=!!r,wr=!m&&cn,vn=y==="idle"&&!m;return e?i.jsx(ad,{isOpen:e,onRequestClose:l,title:"Record Audio",subtitle:"Name & Audio Intro (=10s)",maxWidth:"md",showCloseX:!0,footer:y==="draft"?i.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[i.jsx("button",{className:"rounded border px-4 py-2 text-sm text-slate-600",onClick:()=>{O(),v("idle")},disabled:k,children:"Re-record"}),i.jsx("button",{className:"rounded border px-4 py-2 text-sm text-slate-600",onClick:l,disabled:k,children:"Cancel"}),i.jsx("button",{className:"rounded bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",onClick:dt,disabled:k,children:k?"Uploading":"Accept"})]}):i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[i.jsx("div",{children:_e&&i.jsx("button",{className:"rounded border border-rose-200 px-3 py-2 text-sm text-rose-700 hover:bg-rose-50",onClick:et,children:"Delete audio"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"rounded border px-4 py-2 text-sm text-slate-600",onClick:l,disabled:k||q,children:"Close"}),vn&&i.jsx("button",{className:"rounded bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",onClick:Ve,disabled:k||q,children:cn?"Record new":"Record"})]})]}),children:i.jsxs("div",{className:"space-y-4",children:[y==="recording"&&i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm font-semibold text-slate-700",children:[i.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-rose-600 animate-pulse"}),"Recording"]}),U&&i.jsx("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-slate-200",children:i.jsx("div",{className:"h-full rounded-full bg-rose-500 transition-[width]",style:{width:`${Math.min(100,Math.max(8,Math.round(_*100)))}%`}})}),i.jsxs("div",{className:"mt-2 text-3xl font-bold text-slate-900",children:[w,"s"]}),i.jsx("button",{className:"mt-3 rounded bg-rose-600 px-4 py-2 text-sm font-semibold text-white",onClick:$t,children:"Stop"})]}),y==="draft"&&m&&i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Preview"}),i.jsx("audio",{controls:!0,src:m.url,className:"w-full"})]}),wr&&i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Current audio"}),L?i.jsx("audio",{controls:!0,src:L,className:"w-full"}):i.jsx("div",{className:"text-sm text-slate-500",children:"Loading audio"})]}),vn&&!cn&&i.jsx("div",{className:"text-sm text-slate-500",children:"Tap record to capture a short name pronunciation."})]})}):null}function m1(e){const t=e.slice();for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function Yt(e){return String(e)}function Wp(e){try{const t=localStorage.getItem(e);if(!t)return new Set;const n=JSON.parse(t);return Array.isArray(n)?new Set(n.map(String)):new Set}catch{return new Set}}function cu(e,t){try{localStorage.setItem(e,JSON.stringify(Array.from(t)))}catch{}}function Hp({open:e,title:t,body:n,confirmText:r,cancelText:s,onConfirm:o,onCancel:l,danger:u}){return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center p-4 sm:items-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:l}),i.jsxs("div",{className:"relative w-full max-w-md overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-2xl",children:[i.jsxs("div",{className:"space-y-2 p-5",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:t}),i.jsx("div",{className:"text-sm text-slate-600",children:n})]}),i.jsxs("div",{className:"flex gap-2 p-4 pt-0",children:[i.jsx("button",{className:"flex-1 rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 hover:bg-slate-50",onClick:l,children:s}),i.jsx("button",{className:`flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold text-white ${u?"bg-rose-600 hover:bg-rose-700":"bg-violet-600 hover:bg-violet-700"}`,onClick:o,children:r})]})]})]}):null}function h1({students:e,periodId:t,driveFileId:n,driveClient:r,driveSession:s,onAudioSaved:o,onAudioDeleted:l}){const u=n??"local",c=`cs_mobile_flashcards_learned_v1:${u}:${t}`,[d,y]=f.useState(!1),[v,w]=f.useState(()=>Wp(c)),j=f.useRef(v);f.useEffect(()=>{j.current=v},[v]),f.useEffect(()=>{const $=Wp(c);j.current=$,w($),y(!1)},[c]);const k=e.length,[N,q]=f.useState([]),[h,m]=f.useState(0),[x,_]=f.useState(!1),[D,U]=f.useState(null),[B,M]=f.useState(null),[fe,X]=f.useState(!1),me=f.useMemo(()=>{if(d)return e;const $=v;return e.filter(le=>!$.has(Yt(le.id))||Yt(le.id)===D)},[e,d,v,D]),Fe=f.useMemo(()=>e.map($=>Yt($.id)).join("|"),[e]),Qe=f.useMemo(()=>me.map($=>Yt($.id)).join("|"),[me]),re=f.useMemo(()=>{const $=new Set(e.map(ue=>Yt(ue.id)));let le=0;return v.forEach(ue=>{$.has(ue)&&le++}),le},[e,v]),Re=Math.max(0,k-re),[L,_e]=f.useState(!1),[O,Y]=f.useState(!1);f.useEffect(()=>{const $=j.current,le=(d?e:e.filter(ue=>!$.has(Yt(ue.id)))).map(ue=>Yt(ue.id));q(le),m(0),_(!1),U(null),M(null)},[d,t,u,Fe]),f.useEffect(()=>{const $=new Set(me.map(le=>Yt(le.id)));q(le=>{const ue=le.filter(Ue=>$.has(Ue));return ue.length===le.length?le:(m(Ue=>Math.min(Ue,Math.max(0,ue.length-1))),ue)})},[Qe]);const Z=f.useMemo(()=>new Map(me.map($=>[Yt($.id),$])),[me]),ce=N[h]??null,K=ce?Z.get(ce)??null:null,{photoUrl:ct}=zg({studentId:(K==null?void 0:K.id)??"unknown",fullName:(K==null?void 0:K.fullName)??null,photoFileId:(K==null?void 0:K.photoFileId)??null,photoUpdatedAt:(K==null?void 0:K.photoUpdatedAt)??null,driveClient:r,driveSession:s}),{audioUrl:Ve}=yd({studentId:(K==null?void 0:K.id)??"unknown",audioFileId:(K==null?void 0:K.audioFileId)??null,audioUpdatedAt:(K==null?void 0:K.audioUpdatedAt)??null,driveSession:s}),$t=f.useRef(null),[dt,et]=f.useState(!1);f.useEffect(()=>{et(!1)},[Ve]);const cn=$=>!ce||D!==ce||d?!1:(q(le=>{const ue=le.filter(Ue=>Ue!==ce);return m(Ue=>ue.length===0?0:$==="prev"?Math.max(0,Ue-1):Math.min(Ue,ue.length-1)),ue}),U(null),!0),wr=()=>{_(!1),M(null),!cn("next")&&m($=>N.length===0?0:Math.min($+1,N.length-1))},vn=()=>{_(!1),M(null),!cn("prev")&&m($=>Math.max(0,$-1))},he=async()=>{if(!Ve)return;const $=$t.current;if($){if(dt){$.pause(),et(!1);return}try{await $.play(),et(!0)}catch{}}},tt=()=>{if(!K)return;const $=Yt(K.id);M(null),w(le=>{const ue=new Set(le);return ue.add($),cu(c,ue),ue}),U($)},ze=()=>{if(!K)return;const $=Yt(K.id);U(null),M(le=>le===$?null:$),w(le=>{if(!le.has($))return le;const ue=new Set(le);return ue.delete($),cu(c,ue),ue})},P=()=>{_e(!1),_(!1),U(null),M(null),q($=>m1($)),m(0)},ve=()=>{Y(!1),_(!1),U(null),M(null);const $=new Set;w($),cu(c,$);const le=e.map(ue=>Yt(ue.id));q(le),m(0)},xt=!d&&Re===0&&k>0;return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Flashcards"}),i.jsxs("div",{className:"text-xs text-slate-600",children:["Learned ",re," / ",k,"  Remaining ",Re]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:N.length<2,onClick:()=>_e(!0),children:"Shuffle"}),i.jsx("button",{className:`rounded-xl border px-3 py-2 text-xs font-semibold ${d?"border-violet-200 bg-violet-50 text-violet-900":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}`,onClick:()=>{y($=>!$),_(!1),U(null),M(null)},children:d?"Including learned":"Include learned"}),i.jsx("button",{className:"rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>Y(!0),children:"Clear learned"})]})]}),xt?i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center space-y-2",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:"All learned!"}),i.jsx("div",{className:"text-sm text-slate-600",children:"Youve marked everyone in this period as learned."}),i.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[i.jsx("button",{className:"rounded-xl bg-violet-600 px-4 py-3 text-sm font-semibold text-white hover:bg-violet-700",onClick:()=>y(!0),children:"Review learned students"}),i.jsx("button",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>Y(!0),children:"Clear learned for this period"})]})]}):i.jsx("div",{className:"space-y-3",children:K?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative w-full",style:{perspective:1200},children:i.jsx("button",{type:"button",onClick:()=>_($=>!$),className:"w-full text-left","aria-label":"Flip flashcard",children:i.jsxs("div",{className:"relative h-[380px] w-full",style:{transformStyle:"preserve-3d",transition:"transform 420ms cubic-bezier(0.2, 0.8, 0.2, 1)",transform:x?"rotateY(180deg)":"rotateY(0deg)"},children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-xl",style:{backfaceVisibility:"hidden"},children:i.jsxs("div",{className:"h-full w-full bg-slate-50 flex items-center justify-center",children:[ct?i.jsx("img",{src:ct,alt:"",className:"h-full w-full object-cover"}):i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-slate-200 text-2xl font-bold text-slate-700",children:K.fullName.split(" ").slice(0,2).map($=>{var le;return((le=$[0])==null?void 0:le.toUpperCase())??""}).join("")}),i.jsx("div",{className:"mt-3 text-sm text-slate-500",children:"No photo"})]}),i.jsx("div",{className:"absolute bottom-3 left-0 right-0 text-center text-xs font-semibold text-slate-500",children:"Tap to flip"})]})}),i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-xl",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:i.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center p-6 text-center",children:[i.jsx("div",{className:"text-2xl font-bold leading-tight text-slate-900",children:K.fullName}),i.jsx("div",{className:"mt-2 text-sm text-slate-600",children:"Tap again to see photo"}),i.jsxs("div",{className:"mt-4 w-full max-w-sm space-y-2",children:[i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${Ve?"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50":"border border-slate-200 bg-white text-slate-400 cursor-not-allowed"}`,onClick:$=>{$.preventDefault(),$.stopPropagation(),he()},disabled:!Ve,children:dt?"Pause audio":"Play audio"}),i.jsx("button",{className:"w-full rounded-2xl px-4 py-3 text-sm font-semibold transition border border-indigo-200 bg-indigo-50 text-indigo-700 hover:bg-indigo-100",onClick:$=>{$.preventDefault(),$.stopPropagation(),X(!0)},children:K.audioFileId?"Re-record audio":"Record audio"})]}),i.jsx("audio",{ref:$t,src:Ve||void 0,onEnded:()=>et(!1),onPause:()=>et(!1)}),i.jsxs("div",{className:"mt-6 w-full max-w-sm space-y-2",children:[i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${D===ce?"bg-emerald-600 text-white hover:bg-emerald-700":"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,onClick:$=>{$.preventDefault(),$.stopPropagation(),tt()},children:" Ive learned this"}),i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${B===ce?"bg-violet-600 text-white hover:bg-violet-700":"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,onClick:$=>{$.preventDefault(),$.stopPropagation(),ze()},children:" Still learning"})]})]})})]})})}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("button",{className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:h===0,onClick:vn,children:"Prev"}),i.jsx("div",{className:"px-2 text-xs font-semibold text-slate-500",children:N.length===0?"0 / 0":`${h+1} / ${N.length}`}),i.jsx("button",{className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:N.length===0||h>=N.length-1,onClick:wr,children:"Next"})]}),fe&&K&&i.jsx(Jg,{open:!0,studentId:K.id,studentFullName:K.fullName,existingAudioFileId:K.audioFileId??null,existingAudioUpdatedAt:K.audioUpdatedAt??null,driveSession:s,onClose:()=>X(!1),onUploadComplete:({fileId:$,audioUpdatedAt:le})=>{o(K.id,$,le),X(!1)},onDeleteComplete:()=>{l(K.id),X(!1)}})]}):i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center space-y-2",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:"No students found."}),i.jsx("div",{className:"text-sm text-slate-600",children:"This period doesnt have any students yet."})]})}),i.jsx(Hp,{open:L,title:"Shuffle deck?",body:"This will randomize the order of the current deck once.",confirmText:"Shuffle",cancelText:"Cancel",onConfirm:P,onCancel:()=>_e(!1)}),i.jsx(Hp,{open:O,title:"Clear learned students?",body:"This resets learned progress for this period on this device.",confirmText:"Clear",cancelText:"Cancel",danger:!0,onConfirm:ve,onCancel:()=>Y(!1)})]})}const g1=.85,y1=900,x1=1200,v1=4,w1=60,S1=160;function b1({studentId:e,studentFullName:t,existingPhotoFileId:n,open:r,onClose:s,onAccept:o,onUploadComplete:l,title:u="Take Photo"}){const c=xd(),d=f.useRef(null),y=f.useRef(null),v=f.useRef(null),w=f.useRef(null),j=f.useRef(null),k=f.useRef(!1),N=f.useRef(new Map),q=f.useRef(null),h=f.useRef(null),m=f.useRef(1),x=f.useRef(null),_=f.useRef(null),[D,U]=f.useState(null),[B,M]=f.useState(!1),[fe,X]=f.useState(!1),[me,Fe]=f.useState(!1),[Qe,re]=f.useState(1),[Re,L]=f.useState(!1),[_e,O]=f.useState(!1),Y=f.useRef(null),Z=f.useMemo(()=>{if(typeof navigator>"u")return{isIOS:!1,isAndroid:!1};const F=navigator.userAgent||"",z=/iPad|iPhone|iPod/i.test(F)||F.includes("Mac")&&typeof document<"u"&&"ontouchend"in document,W=/Android/i.test(F);return{isIOS:z,isAndroid:W}},[]),ce=()=>{N.current.clear(),q.current=null,x.current&&(cancelAnimationFrame(x.current),x.current=null),_.current=null},K=()=>{w.current=null,h.current=null,m.current=1,re(1),Fe(!1),ce()},ct=()=>(Y.current||(Y.current=document.createElement("canvas")),Y.current),Ve=F=>{const z=ct(),W=z.getContext("2d");if(!W)return 0;const Q=S1,se=Math.max(F.width,F.height)/Q,ge=Math.max(1,Math.round(F.width/(se||1))),Te=Math.max(1,Math.round(F.height/(se||1)));z.width=ge,z.height=Te,W.drawImage(F,0,0,ge,Te);const Se=W.getImageData(0,0,ge,Te).data;let Be=0;for(let rt=0;rt<Te;rt++){const Sr=rt*ge*4;for(let ft=0;ft<ge;ft++){const Wt=Sr+ft*4,Ks=(Se[Wt]+Se[Wt+1]+Se[Wt+2])/3;if(ft<ge-1){const vt=Wt+4,Yr=(Se[vt]+Se[vt+1]+Se[vt+2])/3;Be+=Math.abs(Ks-Yr)}if(rt<Te-1){const vt=Wt+ge*4,Yr=(Se[vt]+Se[vt+1]+Se[vt+2])/3;Be+=Math.abs(Ks-Yr)}}}return Be},$t=F=>{const{width:z,height:W}=F;if(!z||!W)return F;const Q=y1/z,se=x1/W,ge=Math.min(1,Q,se);if(ge>=.999)return F;const Te=Math.max(1,Math.round(z*ge)),Se=Math.max(1,Math.round(W*ge)),Be=document.createElement("canvas");Be.width=Te,Be.height=Se;const rt=Be.getContext("2d");return rt?(rt.drawImage(F,0,0,Te,Se),Be):F},dt=async F=>new Promise(z=>{F.toBlob(W=>{if(W){z(W);return}F.toBlob(Q=>z(Q),"image/png")},"image/jpeg",g1)}),et=async F=>{const z=$t(F);return dt(z)},cn=async F=>{try{const z=await createImageBitmap(F),W=document.createElement("canvas");W.width=z.width,W.height=z.height;const Q=W.getContext("2d");if(!Q)return null;if(Q.drawImage(z,0,0),"close"in z)try{z.close()}catch{}return W}catch{return new Promise(z=>{const W=URL.createObjectURL(F),Q=new Image;Q.onload=()=>{const se=document.createElement("canvas");se.width=Q.naturalWidth||Q.width,se.height=Q.naturalHeight||Q.height;const ge=se.getContext("2d");if(URL.revokeObjectURL(W),!ge){z(null);return}ge.drawImage(Q,0,0),z(se)},Q.onerror=()=>{URL.revokeObjectURL(W),z(null)},Q.src=W})}},wr=async(F,z)=>{const W=d.current,Q=y.current;if(!W||!Q)return null;const se=W.videoWidth,ge=W.videoHeight;if(!se||!ge)return null;Q.width=se,Q.height=ge;const Te=Q.getContext("2d");if(!Te)return null;let Se=-1/0,Be=null;for(let rt=0;rt<F;rt++){if(!k.current)return null;rt===0?await new Promise(ft=>requestAnimationFrame(()=>ft())):z>0&&await new Promise(ft=>setTimeout(ft,z)),Te.drawImage(W,0,0,se,ge);const Sr=Ve(Q);if(Sr>=Se){Se=Sr,Be||(Be=document.createElement("canvas")),Be.width=se,Be.height=ge;const ft=Be.getContext("2d");ft&&ft.drawImage(Q,0,0,se,ge)}}return Be||Q},vn=async()=>{if(typeof window>"u")return null;const F=w.current,z=window.ImageCapture;if(!F||!z)return null;try{const W=new z(F);return typeof W.takePhoto!="function"?null:await W.takePhoto()}catch{return null}},he=()=>{v.current&&(v.current.getTracks().forEach(F=>F.stop()),v.current=null),d.current&&(d.current.srcObject=null),K()},tt=()=>{D&&URL.revokeObjectURL(D),j.current=null,U(null)},ze=()=>{he(),tt(),M(!1),L(!1),O(!1),s()},P=F=>{const z=h.current;if(!z)return F;let W=Math.min(z.max,Math.max(z.min,F));if(typeof z.step=="number"&&z.step>0){const Q=Math.round((W-z.min)/z.step);W=z.min+Q*z.step,W=Math.min(z.max,Math.max(z.min,W))}return W},ve=F=>{const z=w.current;if(!z)return;const W=P(F);_.current=W,!x.current&&(x.current=requestAnimationFrame(()=>{x.current=null;const Q=_.current;_.current=null,typeof Q=="number"&&z.applyConstraints({advanced:[{zoom:Q}]}).then(()=>{m.current=Q,re(Q)}).catch(()=>{})}))},xt=async F=>{var z,W;X(!0),M(!1),K();try{let Q;try{Q=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"},width:{ideal:1280},height:{ideal:960},frameRate:{ideal:30}},audio:!1})}catch{Q=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}if(!F()){Q.getTracks().forEach(ge=>ge.stop());return}v.current=Q;const se=Q.getVideoTracks()[0]||null;if(w.current=se,se){const ge=(z=se.getCapabilities)==null?void 0:z.call(se),Te=ge==null?void 0:ge.zoom;if(Te&&typeof Te.min=="number"&&typeof Te.max=="number"){h.current={min:Te.min,max:Te.max,step:typeof Te.step=="number"?Te.step:void 0};const Se=(W=se.getSettings)==null?void 0:W.call(se),Be=typeof(Se==null?void 0:Se.zoom)=="number"?Se.zoom:Te.min,rt=P(Be);m.current=rt,re(rt),Fe(!0)}}if(d.current){d.current.srcObject=Q;try{await d.current.play()}catch{}}}catch{F()&&M(!0),he()}finally{F()&&X(!1)}};f.useEffect(()=>{let F=!0;return k.current=r,r?xt(()=>F):(he(),tt(),M(!1),O(!1)),()=>{F=!1,k.current=!1,he(),tt(),M(!1),O(!1)}},[r]);const $=async()=>{if(!_e){O(!0);try{let F=null;if(Z.isAndroid){const W=await vn();if(W){const Q=await cn(W);Q&&(F=await et(Q))}}if(!F){const W=Z.isIOS?v1:1,Q=Z.isIOS?w1:0,se=await wr(W,Q);se&&(F=await et(se))}if(!F)return;j.current=F;const z=URL.createObjectURL(F);U(z),he()}finally{O(!1)}}},le=async()=>{if(Re)return;const F=j.current;if(F){o(F),L(!0);try{const z=n?null:await Yw({studentId:e,fullName:t}),W=await cw({studentId:e,studentFullName:t,jpegBlob:F,fileId:n||(z==null?void 0:z.fileId)}),Q=Date.now();await Qw({studentId:e,fullName:t,fileId:W.fileId,updatedTime:W.modifiedTime,photoUpdatedAt:Q,blob:F}),l==null||l({fileId:W.fileId,photoUpdatedAt:Q}),ze()}catch(z){L(!1);const Q=(z instanceof Error?z.message:"").toLowerCase();Q.includes("sign in")&&Q.includes("drive")?c({message:"Please reconnect Google Drive to upload photos.",tone:"error"}):c({message:"Couldn't upload the photo. Your preview is still saved here - try again.",tone:"error"})}}},ue=()=>{tt(),O(!1),xt(()=>k.current)},Ue=F=>{if(!(!me||D)&&(F.preventDefault(),F.currentTarget.setPointerCapture(F.pointerId),N.current.set(F.pointerId,{x:F.clientX,y:F.clientY}),N.current.size===2)){const z=Array.from(N.current.values()),W=Math.hypot(z[0].x-z[1].x,z[0].y-z[1].y);q.current={initialDistance:W,initialZoom:m.current}}},nt=F=>{if(!me||D||!N.current.has(F.pointerId)||(F.preventDefault(),N.current.set(F.pointerId,{x:F.clientX,y:F.clientY}),N.current.size<2||!q.current))return;const z=Array.from(N.current.values()),W=Math.hypot(z[0].x-z[1].x,z[0].y-z[1].y);if(q.current.initialDistance<=0)return;const Q=W/q.current.initialDistance,se=q.current.initialZoom*Q;ve(se)},Bt=F=>{me&&(N.current.delete(F.pointerId),N.current.size<2&&(q.current=null))};if(!r)return null;const kt=me&&!D;return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:ze}),i.jsxs("div",{className:"relative w-full max-w-md rounded-2xl bg-white p-4 shadow-2xl space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-800",children:u}),i.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700",onClick:ze,"aria-label":"Close",children:""})]}),B?i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Camera unavailable. Check permissions and try again."}),i.jsx("button",{type:"button",className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:ze,children:"Close"})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full aspect-[3/4] rounded-xl bg-slate-100 overflow-hidden flex items-center justify-center",onPointerDown:kt?Ue:void 0,onPointerMove:kt?nt:void 0,onPointerUp:kt?Bt:void 0,onPointerCancel:kt?Bt:void 0,style:kt?{touchAction:"none"}:void 0,children:D?i.jsx("img",{src:D,alt:"",className:"w-full h-full object-cover"}):i.jsx("video",{ref:d,className:"w-full h-full object-cover",playsInline:!0,muted:!0})}),D?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2 text-sm disabled:opacity-50",onClick:ue,disabled:Re,children:"Retake"}),i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2 text-sm disabled:opacity-50",onClick:le,disabled:Re,children:Re?"Uploading...":"Accept"})]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2 text-sm disabled:opacity-50",onClick:$,disabled:fe||_e,children:_e?"Capturing...":"Take Photo"}),i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2 text-sm",onClick:ze,children:"Cancel"})]})]})]}),i.jsx("canvas",{ref:y,className:"hidden"})]})}const Vp=!1,Kp="726",N1="https://app.classseats.app",Jl="cs_mobile_last_drive_file",k1="cs_mobile_local_draft_v2",Gp="cs_mobile_students_mode_v1",Yp="cs_mobile_notes_sort_v1",Qp="cs_mobile_table_sort_v1",Jp="cs_mobile_seat_number_sort_v1",j1=14*24*60*60*1e3,qp=2e5,Xp=14;function du(e){return e?`${k1}:${e}`:null}function qg(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)}function Zp(e,t){const n={};return Object.entries(e||{}).forEach(([r,s])=>{const o=Object.keys(s||{}).filter(u=>qg(u));o.sort((u,c)=>c.localeCompare(u)),o.slice(0,t).forEach(u=>{const c=(s==null?void 0:s[u])||{};Object.keys(c).length!==0&&(n[r]||(n[r]={}),n[r][u]={...c})})}),n}function ql(e){const t={};return Object.entries(e||{}).forEach(([n,r])=>{const s={};Object.entries(r||{}).forEach(([o,l])=>{s[o]={...l||{}}}),Object.keys(s).length>0&&(t[n]=s)}),t}function C1({student:e,attendance:t,points:n,pointsEnabled:r,maxPoints:s,hasNote:o,absenceStreak:l,tardyCount:u,leftEarlyCount:c,onShowAbsenceHelp:d,onShowTardyHelp:y,onShowLeftEarlyHelp:v,seatNumber:w,showSeatNumber:j=!1,statusBg:k,statusLabel:N,tempPhotoUrl:q,onOpenPhoto:h,onOpenMenu:m,driveClient:x,driveSession:_}){const D=Bg(n,s),{photoUrl:U}=zg({studentId:e.id,fullName:e.fullName,photoFileId:e.photoFileId,photoUpdatedAt:e.photoUpdatedAt,driveClient:x,driveSession:_}),[B,...M]=(e.fullName||"").split(" "),fe=M.join(" "),X=(()=>{switch(t){case"present":return"";case"absent":return"";case"tardy":return"";case"left_early":return"";default:return""}})(),me=N(t),Fe=q||U,Qe=t==="absent"&&(l||0)>=2,re=t==="tardy"&&(u||0)>0,Re=t==="left_early"&&(c||0)>0;return i.jsx("div",{className:`w-full rounded-2xl border px-4 py-3 shadow-sm ${k(t)}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[j&&i.jsx("div",{className:"flex h-[80px] w-8 shrink-0 items-center justify-center text-sm font-semibold text-slate-500",children:w||""}),i.jsx(Av,{studentId:e.id,hasPhoto:!!Fe,src:Fe,onClick:h,widthPx:60,heightPx:80}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"text-left min-w-0 flex-1",children:[i.jsx("div",{className:"text-base font-bold text-slate-900 leading-tight break-words",children:B}),i.jsx("div",{className:"text-base font-bold text-slate-900 leading-tight break-words",children:fe||""})]}),i.jsx("button",{className:"text-xl text-slate-600 px-3 py-2 rounded-full hover:bg-slate-200 flex-shrink-0",onClick:L=>{L.stopPropagation(),m()},children:""})]}),i.jsxs("div",{className:"mt-1 flex items-center justify-between text-sm px-1",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:X}),i.jsx("span",{className:"text-slate-700",children:me})]}),(Qe||re||Re)&&i.jsxs("div",{className:"flex items-center gap-2",children:[Qe&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-rose-700 bg-rose-100 border border-rose-200 rounded px-1.5 py-0.5",onClick:d,children:["A",l]}),re&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-amber-700 bg-amber-100 border border-amber-200 rounded px-1.5 py-0.5",onClick:y,children:["T",u]}),Re&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-orange-700 bg-orange-100 border border-orange-200 rounded px-1.5 py-0.5",onClick:v,children:["LE",c]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[r&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-lg",children:D.emoji}),i.jsx("span",{className:"text-emerald-700 font-semibold",children:n})]}),o&&i.jsx("span",{className:"text-indigo-600 text-lg",children:""})]})]})]})]})})}function E1(e,t,n){var v,w,j;if(!(e!=null&&e.activeGrouping)||!(e!=null&&e.tableAssignments))return null;let r=-1,s=-1;if(e.activeGrouping.forEach((k,N)=>{const q=k==null?void 0:k.findIndex(h=>String(h)===String(n));q!==-1&&(r=N,s=q)}),r===-1||s===-1)return null;const o=e.tableAssignments[String(r)];if(!o)return null;const l=String(o),u=((v=e.tableNumbering)==null?void 0:v.perTableSeatNumbers)&&e.tableNumbering.perTableSeatNumbers[l],c=(j=(w=t==null?void 0:t.tables)==null?void 0:w.find(k=>String(k.id)===l))==null?void 0:j.seatNumbers,d=u||c;if(!d)return null;const y=d[s];return y!=null?String(y):null}function fu(e,t){const n=e==null?void 0:e[t];if(!n||typeof n!="object")return{};const r=n.note&&typeof n.note=="object"?n.note:n,s={};return Object.entries(r||{}).forEach(([o,l])=>{l&&typeof l=="object"&&typeof l.note=="string"&&(s[String(o)]=l.note)}),s}function _1(){var of,lf,af;const e=xd(),t=FS(),n=f.useMemo(()=>Pv(),[]),r=f.useMemo(()=>({kind:"web",openExternal:a=>typeof window<"u"?window.open(a,"_blank","noopener,noreferrer"):null}),[]),s=!n.canUseDriveSync,o="Drive sync is disabled.",[l,u]=f.useState(null),[c,d]=f.useState([]),[y,v]=f.useState(!1),[w,j]=f.useState(null),[k,N]=f.useState(()=>s?o:null),[q,h]=f.useState(!1),[m,x]=f.useState(null),[_,D]=f.useState(!1),[U,B]=f.useState([]),[M,fe]=f.useState(""),[X,me]=f.useState(!1),[Fe,Qe]=f.useState(!1),[re,Re]=f.useState(null),[L,_e]=f.useState(null),[O,Y]=f.useState(!1),[Z,ce]=f.useState(!1),[K,ct]=f.useState(!1),[Ve,$t]=f.useState([]),[dt,et]=f.useState([]),[cn,wr]=f.useState(new Set),[vn,he]=f.useState(0),[tt,ze]=f.useState(null),[P,ve]=f.useState(null),[xt,$]=f.useState({}),[le,ue]=f.useState({}),[Ue,nt]=f.useState({}),[Bt,kt]=f.useState({}),[F,z]=f.useState(null),[W,Q]=f.useState({note:"",delta:0,reason:""}),[se,ge]=f.useState({pointsEnabled:!1,startingPoints:50,currentPoints:0,predictedPoints:0}),[Te,Se]=f.useState(null),[Be,rt]=f.useState(""),[Sr,ft]=f.useState(null),[Wt,Ks]=f.useState(null),[vt,Yr]=f.useState(null),[fa,t0]=f.useState({}),Sd=f.useRef({}),[n0,z1]=f.useState({}),[Mn,Gs]=f.useState(null),[bd,dl]=f.useState(0),[Nd,fl]=f.useState(null),[kd,pa]=f.useState(""),[st,Ys]=f.useState(null),[$1,r0]=f.useState([]),[B1,jd]=f.useState(!1),[W1,ma]=f.useState(null),[H1,V1]=f.useState(!1),[xe,Ht]=f.useState(null),[Vt,Cd]=f.useState(null),[Ed,_d]=f.useState(null),[Fn,Qs]=f.useState(null),[ha,Qr]=f.useState(null),[Js,Td]=f.useState(!1),[pl,qs]=f.useState(null),[wn,pt]=f.useState(!1),[K1,Sn]=f.useState(null),Jr=f.useRef(null),[Pd,qr]=f.useState(!1),ga=typeof navigator<"u"?navigator.onLine:!0,[Ad,Xs]=f.useState(ga),[Rd,ya]=f.useState(ga),[Pe,Zs]=f.useState(!ga),s0=f.useRef(null),o0=f.useRef(!1),zn=f.useRef(!1),l0=f.useRef(15e3),i0=f.useRef(0),Id=f.useRef(!1),$n=f.useRef(!1),Xr=f.useRef(!1),xa=f.useRef(new Set),Rt=f.useRef(null),Dd=f.useRef(null),Ld=f.useRef(void 0),Od=f.useRef(null),va=()=>{const a=new Date,p=a.getFullYear(),g=String(a.getMonth()+1).padStart(2,"0"),S=String(a.getDate()).padStart(2,"0");return`${p}-${g}-${S}`},[ie,eo]=f.useState(va()),[br,a0]=f.useState("table"),[jt,wa]=f.useState(()=>{try{const a=localStorage.getItem(Gp);return a==="notes"||a==="flashcards"?a:"attendance"}catch{return"attendance"}});f.useEffect(()=>{try{localStorage.setItem(Gp,jt)}catch{}},[jt]);const[ml,u0]=f.useState(()=>{try{return localStorage.getItem(Yp)==="last-first"?"last-first":"first-last"}catch{return"first-last"}});f.useEffect(()=>{try{localStorage.setItem(Yp,ml)}catch{}},[ml]);const[to,c0]=f.useState(()=>{try{return localStorage.getItem(Qp)==="desc"?"desc":"asc"}catch{return"asc"}});f.useEffect(()=>{try{localStorage.setItem(Qp,to)}catch{}},[to]);const[hl,d0]=f.useState(()=>{try{return localStorage.getItem(Jp)==="desc"?"desc":"asc"}catch{return"asc"}});f.useEffect(()=>{try{localStorage.setItem(Jp,hl)}catch{}},[hl]);const f0=f.useMemo(()=>new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),[]);f.useEffect(()=>{Sd.current=fa},[fa]),f.useEffect(()=>()=>{Object.values(Sd.current).forEach(a=>URL.revokeObjectURL(a))},[]);const[ot,Bn]=f.useState(!1),Wn=f.useRef(0),It=f.useRef(null),Ud=f.useRef({}),Md=f.useRef({}),gl=f.useRef(null),Zr=f.useRef({}),es=f.useRef({}),Sa=f.useRef(null),ba=f.useRef(!1),Na=f.useRef(!1),Fd=f.useRef(0),bn=f.useCallback(a=>{$t(a.messages),et(a.allMessages),he(a.unreadCount),wr(new Set(a.dismissedIds))},[]),Nr=f.useRef(null),zd=f.useRef(null),yl=f.useRef(!1),ka=f.useRef(!1),[$d,no]=f.useState(!1),xl=f.useRef(0),Nn=f.useRef(null),Bd=1500,kr=f.useRef(null),ja=f.useCallback(a=>a?Ud.current[a]??null:null,[]),Ct=f.useCallback((a,p)=>{a&&(Ud.current[a]=p||null)},[]),vl=f.useCallback(a=>a||"__local__",[]),Wd=f.useCallback(a=>Md.current[vl(a)]??null,[vl]),jr=f.useCallback((a,p)=>{p&&(Md.current[vl(a)]=p)},[vl]),Hn=f.useCallback(a=>{Zr.current={},es.current={};const p=du(a??(L==null?void 0:L.id));if(p)try{window.localStorage.removeItem(p)}catch{}Nr.current&&(window.clearTimeout(Nr.current),Nr.current=null)},[L==null?void 0:L.id]),ts=f.useCallback((a,p,g)=>{const S=Zr.current;S[a]||(S[a]={}),S[a][p]={...g}},[]),Hd=f.useCallback((a,p,g)=>{const S=es.current;S[a]||(S[a]={}),S[a][p]={...g}},[]),Vd=f.useCallback(()=>{const a=L==null?void 0:L.id,p=du(a);if(!p)return;const g=Zp(ql(Zr.current),Xp),S=Zp(ql(es.current),Xp),b={savedAt:Date.now(),lastEditAt:kr.current??Date.now(),selectedDate:ie,selectedPeriodId:st,pendingAttendanceByDate:g,pendingNotesByDate:S,pointsLocal:Ue,pointsHistoryLocal:Bt};let C=JSON.stringify(b);if(C.length>qp){const T={...b,pointsHistoryLocal:{}};C=JSON.stringify(T)}if(!(C.length>qp))try{window.localStorage.setItem(p,C)}catch{}},[L==null?void 0:L.id,Bt,Ue,ie,st]),Kd=f.useCallback(()=>{ot&&(Nr.current&&window.clearTimeout(Nr.current),Nr.current=window.setTimeout(()=>{Vd(),Nr.current=null},250))},[ot,Vd]),Ca=a=>{var p;return JSON.stringify({periodsState:((p=a.periodsState)==null?void 0:p.periods)||[],students:a.students||[]})},Cr=f.useRef(0),[G1,ro]=f.useState("unknown"),[Y1,Ea]=f.useState(0);f.useCallback(async()=>{const a=await An(l);return a&&u(a),a},[l]);const dn=f.useCallback(a=>{const p=`${new Date().toISOString()} ${a}`;B(g=>[p,...g].slice(0,200))},[]);f.useEffect(()=>{s&&N(o)},[o,s]);const p0=f.useCallback(async()=>{var p;const a=await Bv();if(x(a),dn(`startup info: state=${a.state} sessionLoaded=${a.sessionLoaded} hasRefresh=${a.hasRefresh} expiresAt=${a.expiresAt} source=${a.source} lastWriteAt=${a.lastWriteAt} lastWriteReason=${a.lastWriteReason}`),a.state==="ok"){const g=await Vv();g&&(u(g),(p=g.profile)!=null&&p.email&&N(null))}return a},[dn]),ns=f.useCallback(async a=>{const p=(l==null?void 0:l.expiresAt)||null,g=await An(l);return dn(`${a}: ensureFreshDriveSession ok=${!!g} before=${p} new=${g==null?void 0:g.expiresAt} hasRefresh=${!!(g!=null&&g.refreshToken)}`),g&&(u(g),h(!1)),g},[l,dn]),m0=f.useCallback(()=>{xl.current+=1,Nn.current&&window.clearTimeout(Nn.current),Nn.current=window.setTimeout(()=>{xl.current=0,Nn.current=null},2e3),xl.current>=5&&(D(a=>!a),xl.current=0,Nn.current&&(window.clearTimeout(Nn.current),Nn.current=null))},[]),h0=()=>{const a=new URL(N1);new URL(window.location.href).searchParams.forEach((g,S)=>a.searchParams.set(S,g)),a.searchParams.set("from","mobile"),window.location.assign(a.toString())},g0=a=>{var S,b;if(!P)return;const p=P.students.find(C=>String(C.id)===String(a));if(!p)return;const g=((S=p.periodIds)==null?void 0:S[0])||st||((b=P.periods[0])!=null&&b.id?String(P.periods[0].id):"");Qs({name:p.fullName,gender:p.gender||"F",periodId:g?String(g):""}),_d({id:String(a)})},wl=()=>{_d(null),Qs(null)},y0=a=>{if(!P)return;const p=P.students.find(S=>String(S.id)===String(a));!p||!window.confirm(`Delete ${p.fullName}? This removes them from this class list.`)||(xa.current.add(String(a)),ve(S=>{if(!S)return S;const b=S.students.filter(T=>String(T.id)!==String(a)),C=S.periods.map(T=>{const I={...T.attendance||{}};Object.keys(I).forEach(te=>{const A={...I[te]||{}};delete A[String(a)],Object.keys(A).length===0?delete I[te]:I[te]=A});const E={...T.behaviorNotes||{}};Object.keys(E).forEach(te=>{const A={...E[te]||{}};delete A[String(a)],Object.keys(A).length===0?delete E[te]:E[te]=A});const G={...T.pointsByStudent||{}};delete G[String(a)];const J={...T.attendanceResets||{}};delete J[String(a)];const ee=T.activeGrouping?T.activeGrouping.map(te=>te.filter(A=>String(A)!==String(a))):T.activeGrouping;return{...T,attendance:I,behaviorNotes:E,pointsByStudent:G,attendanceResets:J,activeGrouping:ee}});return{...S,students:b,periods:C}}),$(S=>{const b={...S||{}};return Object.keys(b).forEach(C=>{if(b[C]){const T={...b[C]||{}};delete T[String(a)],b[C]=T}}),b}),ue(S=>{const b={...S||{}};return Object.keys(b).forEach(C=>{if(b[C]){const T={...b[C]||{}};delete T[String(a)],b[C]=T}}),b}),nt(S=>{const b={...S||{}};return Object.keys(b).forEach(C=>{if(b[C]){const T={...b[C]||{}};delete T[String(a)],b[C]=T}}),b}),kt(S=>{const b={...S||{}};return Object.keys(b).forEach(C=>{b[C]=(b[C]||[]).filter(T=>String(T.studentId)!==String(a))}),b}),Ke(),Je({silent:!0}),Ht(null),Cd(null),wl())};f.useEffect(()=>()=>{Nn.current&&window.clearTimeout(Nn.current)},[]),f.useEffect(()=>{Zs(!Ad||!Rd)},[Ad,Rd]);const Gd=f.useCallback(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("classseats_debug_drive")==="1"}catch{return!1}},[]),so=f.useCallback(a=>{Gd()&&console.debug(a.startsWith("[Ping]")?a:`[Ping] ${a}`)},[Gd]);f.useEffect(()=>{zn.current=!1;const a=s0,p=o0,g=l0,S=i0,b=()=>{a.current&&(window.clearTimeout(a.current),a.current=null)},C=J=>{if(zn.current)return;b();const ee=typeof J=="number"?J:g.current;so(`[Ping] next ${ee}`),a.current=window.setTimeout(()=>{a.current=null,T()},ee)},T=async()=>{if(zn.current)return;if(S.current=Date.now(),so("[Ping] tick"),typeof document<"u"&&document.visibilityState!=="visible"){C(5e3);return}if(p.current){C(2e3);return}p.current=!0;const J=new AbortController,ee=window.setTimeout(()=>J.abort(),5e3),te=(()=>{try{return new URL(`/ping.txt?t=${Date.now()}`,window.location.origin).toString()}catch{return`/ping.txt?t=${Date.now()}`}})();let A=!1;try{const H=await fetch(te,{cache:"no-store",signal:J.signal});A=!!(H!=null&&H.ok),A?(Xs(!0),ya(!0),Zs(!1),g.current=15e3,so("[Ping] ok")):(Xs(!1),ya(!1),Zs(!0),g.current=Math.min(6e4,g.current*2),so(`[Ping] fail status=${H==null?void 0:H.status}`))}catch(H){Xs(!1),ya(!1),Zs(!0),g.current=Math.min(6e4,g.current*2),so(`[Ping] fail ${(H==null?void 0:H.message)||H}`)}finally{window.clearTimeout(ee),p.current=!1,zn.current||C()}},I=()=>{zn.current||(Xs(!0),T())},E=()=>{zn.current||(Xs(!1),Zs(!0),C(2e3))},G=()=>{zn.current||typeof document<"u"&&document.visibilityState==="visible"&&T()};return T(),window.addEventListener("online",I),window.addEventListener("offline",E),document.addEventListener("visibilitychange",G),()=>{zn.current=!0,b(),window.removeEventListener("online",I),window.removeEventListener("offline",E),document.removeEventListener("visibilitychange",G)}},[]);const Sl=f.useCallback((a,p)=>{$(p.periods.reduce((g,S)=>{var C,T;const b=(C=Zr.current[String(S.id)])==null?void 0:C[a];return g[S.id]=b?{...b}:(T=S.attendance)!=null&&T[a]?{...S.attendance[a]}:{},g},{})),ue(p.periods.reduce((g,S)=>{var C;const b=(C=es.current[String(S.id)])==null?void 0:C[a];return g[S.id]=b?{...b}:fu(S.behaviorNotes,a),g},{}))},[]);f.useEffect(()=>{if(!P)return;const a=Ld.current!==P.periods,p=Od.current!==ie;!a&&!p||(Ld.current=P.periods,Od.current=ie,Sl(ie,P))},[Sl,P,ie]),f.useEffect(()=>{const a=L==null?void 0:L.id;if(!a||zd.current===a)return;zd.current=a;const p=du(a);if(!p)return;let g=null;try{const C=window.localStorage.getItem(p);if(!C)return;g=JSON.parse(C)}catch{return}if(!g||typeof g.savedAt!="number")return;if(Date.now()-g.savedAt>j1){Hn(a);return}Zr.current=g.pendingAttendanceByDate||{},es.current=g.pendingNotesByDate||{},g.pointsLocal&&nt(g.pointsLocal),g.pointsHistoryLocal&&kt(g.pointsHistoryLocal),g.selectedPeriodId&&Ys(g.selectedPeriodId),g.lastEditAt&&(kr.current=g.lastEditAt);const S=g.selectedDate&&qg(g.selectedDate)?g.selectedDate:ie;g.selectedDate&&S!==ie&&eo(S),P&&Sl(S,P),(Object.keys(g.pendingAttendanceByDate||{}).length>0||Object.keys(g.pendingNotesByDate||{}).length>0||Object.keys(g.pointsHistoryLocal||{}).length>0)&&(Wn.current+=1,Bn(!0),pt(!0))},[L==null?void 0:L.id,Hn,Sl,P,ie]),f.useEffect(()=>{Kd()},[xt,le,Ue,Bt,ot,Kd]);const Yd=f.useCallback(a=>{const p={};return!a||typeof a!="object"||Object.entries(a).forEach(([g,S])=>{if(!S||typeof S!="object")return;const b={},C=S.note&&typeof S.note=="object"?S.note:S;Object.entries(C).forEach(([T,I])=>{I&&typeof I=="object"&&typeof I.note=="string"&&(b[String(T)]={note:I.note,timestamp:I.timestamp||new Date().toISOString()})}),Object.keys(b).length>0&&(p[g]=b)}),p},[]),rs=a=>e({tone:"success",message:a}),lt=a=>e({tone:"error",message:a}),ss=a=>e({tone:"info",message:a}),bl=["unmarked","absent","tardy","left_early","present"],x0=["present","absent","tardy","left_early","unmarked"],Nl=f.useCallback(a=>{if(!a)return!1;const p=a.toLowerCase();return p.includes("401")||p.includes("unauthorized")||p.includes("403")||p.includes("sign in with google drive first")},[]),v0=a=>{switch(a){case"present":return"bg-emerald-50 border-emerald-100";case"absent":return"bg-rose-50 border-rose-100";case"tardy":return"bg-amber-50 border-amber-100";case"left_early":return"bg-blue-50 border-blue-100";default:return"bg-slate-50 border-slate-200"}},Qd=a=>{switch(a){case"present":return"Present";case"absent":return"Absent";case"tardy":return"Tardy";case"left_early":return"Left Early";default:return"Unmarked"}},_a=(a,p)=>Bg(a,p).emoji,w0=()=>`${Date.now()}-${Math.random().toString(36).slice(2)}`,S0=a=>{const p=String(a.getMonth()+1).padStart(2,"0"),g=String(a.getDate()).padStart(2,"0");return`${p}-${g}-${a.getFullYear()}`},Ta=a=>`https://docs.google.com/document/d/${a}/edit`,Pa=f.useCallback(a=>{if(!a)return;const p=Date.now(),g=Dd.current;if(g&&g.url===a&&p-g.at<600)return;Dd.current={url:a,at:p};try{if(r!=null&&r.openExternal){r.openExternal(a);return}}catch{}window.open(a,"_blank","noopener,noreferrer")||N==null||N("Pop-up blocked  please allow pop-ups to open Google Docs.")},[r]),Vn=f.useCallback(a=>HS(a),[]),Ie=f.useCallback(async(a,p="preflight")=>{if(s)return N(o),null;if(Pe)return N("Offline  will sync when back online."),h(!0),dn(`${p}: offline; skipping refresh`),null;try{const g=await ns(p);if(g)return g}catch(g){console.warn("[Drive] refresh failed",g),dn(`${p}: refresh failed ${(g==null?void 0:g.message)||g}`)}if(!a)return h(!0),N("Reconnect to Google Drive to continue syncing."),dn(`${p}: interactive=false; would trigger OAuth if allowed`),null;dn(`triggerOAuth: reason=${p} hadSession=${!!l} hasRefresh=${!!(l!=null&&l.refreshToken)}`);try{await Zv()}catch(g){lt((g==null?void 0:g.message)||"Google sign-in was cancelled.")}return null},[o,l,s,lt,Pe,dn,ns]),kl=f.useCallback(async()=>{if(!(s||Pe)&&!ba.current){ba.current=!0;try{const a=await Ie(!1,"announcements-sync");if(!(a!=null&&a.accessToken))return;const p=a.accessToken,g=await mw(p,[zi,Lp]);let S=Sa.current;if(!S){const te=(await Ep(p)).find(A=>(A==null?void 0:A.name)===Op);te!=null&&te.id&&(S=te.id,Sa.current=te.id,await gw(p,te.id,g))}if(!S){const ee=JSON.stringify(Up(Vi()),null,2),te=await xw(p,g,Op,ee);if(!(te!=null&&te.id))return;S=te.id,Sa.current=te.id}const b=await Yl(p,S),C=t1(b),T=Vi(),I=n1(T,(C==null?void 0:C.dismissed)||[]),E=I.size!==T.size;E&&Yg(I);const G=new Set(((C==null?void 0:C.dismissed)||[]).map(String));let J=I.size!==G.size;if(!J){for(const ee of I)if(!G.has(ee)){J=!0;break}}if(J){const ee=JSON.stringify(Up(I),null,2);await Cp(p,S,ee)}if(E||J){const ee=uu();bn(ee)}await hw(p,Lp)}catch{}finally{ba.current=!1}}},[bn,s,Ie,Pe]),Kn=f.useCallback(async a=>{if(!Na.current){Na.current=!0;try{l&&!s&&!Pe&&await kl();const g=await Mp(a==="heartbeat"?24:12);bn(g)}catch{}finally{Na.current=!1}}},[bn,l,s,Pe,kl]),jl=f.useCallback(a=>{if(!l||s||Pe)return;const p=Date.now();p-Fd.current<45e3||(Fd.current=p,Kn("heartbeat"))},[l,s,Pe,Kn]),b0=f.useCallback(()=>{ct(!0),Kn("manual")},[Kn]),N0=f.useCallback(a=>{e1(a);const p=uu();bn(p),kl()},[bn,kl]);f.useEffect(()=>{let a=!0;const p=uu();return a&&bn(p),(async()=>{const g=await Mp(12);a&&bn(g)})(),()=>{a=!1}},[bn]),f.useEffect(()=>{let a=!0;const p=60*60*1e3,g=window.setInterval(()=>{(async()=>a&&await Kn("heartbeat"))()},p);return()=>{a=!1,window.clearInterval(g)}},[Kn]),f.useEffect(()=>{l&&Kn("drive-connect")},[l,Kn]);const Cl=f.useCallback(async(a,p,g)=>{let S=!1;const b=async()=>{let C=g;if(C||(C=await Ie(!0,`${p}-download`)),!C)throw new Error("Reconnect to Google Drive to continue.");try{return{data:await Yl(C.accessToken,a)}}catch(T){const I=(T==null?void 0:T.message)||"";if(!S&&Nl(I))return S=!0,wo("[Drive][Mobile] auth error on download, retrying once",{context:p,error:I}),g=null,b();throw T}};return b()},[Ie,Nl]),Jd=f.useCallback(async(a,p,g,S)=>{let b=!1;const C=async()=>{let T=S;if(T||(T=await Ie(!0,`${g}-upload`)),!T)throw new Error("Reconnect to Google Drive to continue.");try{return await Cp(T.accessToken,a,p)}catch(I){const E=(I==null?void 0:I.message)||"";if(!b&&Nl(E))return b=!0,wo("[Drive][Mobile] auth error on upload, retrying once",{context:g,error:E}),S=null,C();throw I}};return C()},[Ie,Nl]),os=f.useCallback((a,p)=>{var I;if(!((I=a==null?void 0:a.periodsState)!=null&&I.periods)||!(a!=null&&a.students))return"failed";const g=Ca(a),S=(p==null?void 0:p.id)||It.current;if(S){const E=GS({incomingUpdatedAt:a.updatedAt,lastAppliedUpdatedAt:Wd(S),incomingRevisionId:(p==null?void 0:p.revisionId)||null,lastRevisionId:ja(S)??null});if(wo("[Sync][Mobile] apply decision",{fileKey:S,decision:E}),E.action==="skip")return p&&(It.current=p.id,_e(p),Ct(p.id,p.revisionId||null)),Cr.current=Date.now(),"skipped"}Wn.current=0,$n.current=!1,Xr.current=!1,Bn(!1),pt(!1),Sn(null),no(!1),Hn(),Rt.current&&(window.clearTimeout(Rt.current),Rt.current=null);const b=(a.layouts||[]).reduce((E,G)=>(E[String(G.id)]={id:String(G.id),name:G.name,tables:(G.tables||[]).map(J=>({id:String(J.id),name:J.name||"Table",seatNumbers:Array.isArray(J.seatNumbers)?J.seatNumbers:void 0}))},E),{}),C=a.periodsState.periods.map(E=>({id:String(E.id),name:E.name,layoutId:E.layoutId||null,tableAssignments:E.tableAssignments||{},activeGrouping:E.activeGrouping||[],tableNumbering:E.tableNumbering||void 0,attendance:E.attendance||{},attendanceResets:E.attendanceResets||{},behaviorNotes:Yd(E.behaviorNotes),pointsByStudent:E.pointsByStudent||{},pointsEnabled:E.pointsEnabled??!1,startingPoints:E.startingPoints??50,pointsHistory:E.pointsHistory||[]})),T=(a.students||[]).map(E=>{var G;return{id:String(E.id),fullName:E.fullName||E.name||"Student",gender:typeof E.gender=="string"?E.gender:void 0,periodIds:((G=E.periodIds)==null?void 0:G.map(J=>String(J)))||[],profileUpdatedAt:typeof E.profileUpdatedAt=="string"?E.profileUpdatedAt:void 0,quickNote:typeof E.quickNote=="string"?E.quickNote:void 0,quickNoteUpdatedAt:typeof E.quickNoteUpdatedAt=="string"?E.quickNoteUpdatedAt:void 0,photoFileId:typeof E.photoFileId=="string"?E.photoFileId:E.photoFileId==null?null:String(E.photoFileId),photoUpdatedAt:(()=>{if(typeof E.photoUpdatedAt=="number")return E.photoUpdatedAt;if(typeof E.photoUpdatedAt=="string"){const J=Number.parseInt(E.photoUpdatedAt,10);return Number.isFinite(J)?J:null}return null})(),audioFileId:typeof E.audioFileId=="string"?E.audioFileId:E.audioFileId==null?null:String(E.audioFileId),audioUpdatedAt:(()=>{if(typeof E.audioUpdatedAt=="number")return E.audioUpdatedAt;if(typeof E.audioUpdatedAt=="string"){const J=Number.parseInt(E.audioUpdatedAt,10);return Number.isFinite(J)?J:null}return null})(),docs:Array.isArray(E.docs)?E.docs.map(J=>({...J,id:String(J.id),driveFileId:String(J.driveFileId)})):[]}});return ve({periods:C,students:T,layouts:b}),Ys(E=>{var A;const G=E?String(E):null,J=a.periodsState.currentId?String(a.periodsState.currentId):null;return[G,J,((A=C[0])==null?void 0:A.id)||null].filter(Boolean).find(H=>C.some(ae=>String(ae.id)===H))||null}),$(C.reduce((E,G)=>{var J;return E[G.id]=(J=G.attendance)!=null&&J[ie]?{...G.attendance[ie]}:{},E},{})),ue(C.reduce((E,G)=>(E[G.id]=fu(G.behaviorNotes,ie),E),{})),nt(C.reduce((E,G)=>{var ee;const J=G.pointsByStudent?{...G.pointsByStudent}:{};return G.pointsEnabled&&((ee=G.studentsIds)==null||ee.forEach(te=>{J[te]===void 0&&(J[te]=G.startingPoints??50)})),E[G.id]=J,E},{})),gl.current=g,ro(a.lastWriter||"unknown"),p?(It.current=p.id,_e(p),Ct(p.id,p.revisionId||null)):Ct(It.current,null),qs(null),Ea(E=>E+1),jr(S,a.updatedAt),Cr.current=Date.now(),"applied"},[ie,Wd,Yd,fu,$,ue,nt,Ys,ve,Bn,pt,_e,Ct,Sn,no,ro,qs,Ea,jr,Hn]),Ke=f.useCallback(()=>{Wn.current+=1,kr.current=Date.now(),Bn(!0),pt(!0)},[]),Aa=f.useCallback((a,p,g)=>{ve(S=>S&&{...S,periods:S.periods.map(b=>{if(String(b.id)!==String(a))return b;const C={...b.attendanceResets||{}},T={...C[String(p)]||{}};return T[g]=ie,C[String(p)]=T,{...b,attendanceResets:C}})}),Ke()},[Ke,ie]),Ra=f.useCallback((a,p,g)=>{$(S=>{const b={...S||{}};return b[a]={...b[a]||{}},g==="unmarked"?delete b[a][p]:b[a][p]=g,ts(String(a),ie,b[a]),b}),Ke()},[Ke,ie,ts]);f.useCallback((a,p)=>{var C;const g=((C=xt[a])==null?void 0:C[p])||"unmarked",S=bl.indexOf(g),b=bl[(S+1)%bl.length];Ra(a,p,b)},[xt,Ra,bl]);const El=f.useCallback((a,p)=>{$(g=>{const S={...g||{}};return S[a]={...S[a]||{}},p.forEach(b=>{S[a][b]||(S[a][b]="present")}),ts(String(a),ie,S[a]),S}),Ke()},[Ke,ie,ts]),k0=f.useCallback((a,p,g,S)=>{if(g===0||p.length===0)return;const b=(S==null?void 0:S.trim())||"Bulk points update",C=P==null?void 0:P.periods.find(I=>I.id===a),T=(C==null?void 0:C.startingPoints)??50;nt(I=>{const E={...I||{}};return E[a]={...E[a]||{}},p.forEach(G=>{const J=E[a][G]??T;E[a][G]=Math.max(0,J+g)}),E}),kt(I=>{const E={...I||{}},G=E[a]?[...E[a]]:[];return p.forEach(J=>G.push({studentId:J,delta:g,reason:b,date:ie})),E[a]=G,E}),Ke()},[P==null?void 0:P.periods,ie,Ke]),qd=f.useCallback(a=>{$(p=>{const g={...p||{}};return g[a]={},ts(String(a),ie,g[a]),g}),ss("Reset attendance to unmarked for this date."),Ke()},[ss,Ke,ie,ts]),j0=f.useCallback(()=>{if(!F)return;const{periodId:a,studentId:p}=F,{note:g,delta:S,reason:b}=W,C=se;if(C.pointsEnabled&&S!==0&&!b.trim()){lt("Please provide a reason when changing points.");return}ue(T=>{const I={...T||{}};return I[a]={...I[a]||{}},g.trim()?I[a][p]=g.trim():delete I[a][p],Hd(String(a),ie,I[a]),I}),C.pointsEnabled&&S!==0&&(nt(T=>{const I={...T||{}};I[a]={...I[a]||{}};const E=I[a][p]??C.startingPoints??0,G=Math.max(0,E+S);return I[a][p]=G,I}),kt(T=>{const I={...T||{}},E=I[a]?[...I[a]]:[];return E.push({studentId:p,delta:S,reason:b||"Behavior note",date:ie}),I[a]=E,I})),Ke(),z(null),Q({note:"",delta:0,reason:""})},[F,W,se,Ke,ie,Hd,ue,nt,lt]),Xd=f.useCallback((a,p,g)=>{var I,E;const S=((I=le[a])==null?void 0:I[p])||"",b=P==null?void 0:P.periods.find(G=>G.id===a),C=(b==null?void 0:b.startingPoints)??50,T=((E=Ue[a])==null?void 0:E[p])??C;Q({note:S,delta:0,reason:""}),ge({pointsEnabled:!!(b!=null&&b.pointsEnabled),startingPoints:C,currentPoints:T,predictedPoints:T}),z({periodId:a,studentId:p,studentName:g})},[le,Ue,P]),C0=f.useCallback((a,p,g)=>{Xd(a,p,g)},[Xd]);f.useEffect(()=>{if(s){N(o);return}let a=!0;return(async()=>{await p0();const g=await ew().catch(()=>null);if(!g||!a)return;const S=await An(g),b=S||g;if(dn(`startup refresh result: ok=${!!S} expiresAt=${S==null?void 0:S.expiresAt}`),!!a&&(u(b),!Id.current)){Id.current=!0;try{const C=localStorage.getItem(Jl);if(!C){yl.current=!0;return}const T=JSON.parse(C);if(T!=null&&T.id&&(T!=null&&T.name)){ka.current=!0;const I={id:T.id,name:T.name,modifiedTime:T.modifiedTime,size:T.size,revisionId:T.revisionId};Re(I),N(`Restoring ${I.name}`);const E=await Yl(g.accessToken,I.id),G=typeof E=="string"?JSON.parse(E):E,J=Vn(G);if(!J)throw new Error("Drive file could not be parsed.");const ee=os(J,I);ee==="applied"?(_e(I),N(`Loaded ${I.name} from Drive.`),qs(new Date().toISOString())):ee==="skipped"&&(_e(I),N("Drive file is older than current data  keeping existing state."))}yl.current=!0}catch(C){console.error("[Drive] Restore failed",C),N("Google sign-in failed. Please try again."),ka.current=!1,yl.current=!0}}})(),()=>{a=!1}},[]),f.useEffect(()=>{s||l&&(O||P||L!=null&&L.id||yl.current&&(ka.current||Y(!0)))},[L,l,s,P,O]),f.useEffect(()=>{const a=window.setInterval(async()=>{if(!l)return;const p=await ns("timer");p&&u(p)},3e5);return()=>window.clearInterval(a)},[l,ns]),f.useEffect(()=>{const a=async()=>{if(!l)return;const p=await ns("visibility");p&&u(p)};return document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)},[l,ns]),f.useEffect(()=>{if(y){const a=window.setTimeout(()=>{v(!1),j("Still loading Drive files. Try Sign in with Google then tap Refresh Cloud Files.")},12e3);return ze(a),()=>window.clearTimeout(a)}tt&&(window.clearTimeout(tt),ze(null)),Rt.current&&(window.clearTimeout(Rt.current),Rt.current=null)},[y,tt]);const E0=f.useCallback(()=>{tw(),u(null),d([]),Re(null),_e(null),N(null),ss("Signed out of Google Drive."),Hi("drive-disconnect")},[ss,Hi]),_0=f.useCallback(async()=>{var a;!L||!((a=window.desktopBridge)!=null&&a.uploadDriveFile)||confirm(`Delete ${L.name} from Drive? This cannot be undone.`)&&(await window.desktopBridge.uploadDriveFile({fileId:L.id,content:JSON.stringify({deleted:!0,message:"File deleted by user."})}),ve(null),$({}),ue({}),nt({}),kt({}),Hn(),_e(null),Ys(null),N("Deleted active file from Drive."))},[L,Hn]);f.useCallback(async()=>{},[os,Vn,_e,Ct]);const T0=f.useCallback(async(a=!0,p=!1)=>{if(!(y&&!p)){v(!0),j(null);try{const g=await Ie(a,"refreshFiles");if(!g){j("Sign in with Google to view cloud files.");return}const S=await jp(g.accessToken);d(S),N(null)}catch(g){const S=(g==null?void 0:g.message)||"Unable to load Drive files.";j(S),lt(S)}finally{v(!1)}}},[Ie,lt,y]);f.useCallback(async()=>{jd(!0),ma(null);try{const a=await Ie(!0,"importList");if(!a){ma("Sign in first to import.");return}const p=await Ep(a.accessToken);r0(p)}catch(a){const p=(a==null?void 0:a.message)||"Unable to list Drive files.";ma(p),lt(p)}finally{jd(!1)}},[Ie,lt]);const P0=f.useCallback(async()=>{if(!re){j("Select a cloud file first.");return}if($n.current){j("Sync in progress. Please wait.");return}if(ot||wn)if(window.confirm("You have unsynced changes. Sync them to Drive before switching files? Click OK to sync, Cancel to discard changes.")){if(await Je({silent:!0}),ot||wn){j("Sync did not complete. Try again before switching files.");return}}else{if(!window.confirm("Discard unsynced changes and load the selected file?"))return;Wn.current=0,Bn(!1),pt(!1),Sn(null)}if(await Ie(!0,"loadSelected")){Qe(!0);try{const p=await Cl(re.id,"loadSelected"),g=typeof p.data=="string"?JSON.parse(p.data):p.data,S=Vn(g);if(!S)throw new Error("File could not be parsed.");const b=os(S,re);if(b==="applied")N(`Loaded ${re.name}. Data available locally.`),Y(!1);else if(b==="skipped")N("Drive file is older than current data. Keeping existing data.");else throw new Error("File could not be parsed.");localStorage.setItem(Jl,JSON.stringify({id:re.id,name:re.name,modifiedTime:re.modifiedTime,size:re.size,revisionId:re.revisionId})),rs(`Loaded ${re.name} from Drive.`)}catch(p){const g=(p==null?void 0:p.message)||"Unable to load Drive file.";j(g),lt(g)}finally{Qe(!1)}}},[Ie,re,lt,rs,os,Vn,ot,wn,Cl]),A0=f.useCallback(async()=>{const a=M.trim();if(!a){j("Enter a file name first.");return}const p=await Ie(!0,"createFile");if(p){me(!0),j(null);try{const S={...zS(void 0,void 0,P==null?void 0:P.students),lastWriter:"mobile",updatedAt:new Date().toISOString()},b=await yw(p.accessToken,a,JSON.stringify(S,null,2));d(C=>[b,...C]),_e(b),It.current=b.id,Ct(b.id,b.revisionId||null),jr(b.id,S.updatedAt),Re(b),fe(""),localStorage.setItem(Jl,JSON.stringify({id:b.id,name:b.name,modifiedTime:b.modifiedTime,size:b.size,revisionId:b.revisionId})),rs(`Created ${b.name} in Drive.`)}catch(g){const S=(g==null?void 0:g.message)||"Unable to create Drive file.";j(S),lt(S)}finally{me(!1)}}},[M,Ie,P,jr,lt,rs]),Zd=f.useCallback((a,p)=>{const g={...a||{}};return Object.entries(p||{}).forEach(([S,b])=>{if(!b||typeof b!="object")return;const C=g[S]||{},T={...C};["absent","tardy","leftEarly"].forEach(I=>{const E=b[I],G=C[I];E&&(!G||E>G)?T[I]=E:G&&(T[I]=G)}),g[S]=T}),g},[]),Je=f.useCallback(async a=>{var g,S,b;if(s){N(o);return}if($n.current||a!=null&&a.silent&&!ot)return;if(!((g=P==null?void 0:P.periods)!=null&&g.length)||!((S=P==null?void 0:P.students)!=null&&S.length)){N("Cannot sync until data is loaded. Open a file first.");return}if(Pe){pt(!0),Sn("Offline - changes will sync when back online."),no(!0);return}if(Xr.current){N("Sync already running.");return}const p=Wn.current;try{const C=await Ie(!(a!=null&&a.silent),"syncUpload");if(!C){Sn("Reconnect to Google Drive to continue syncing."),pt(!0);return}if(!L){N("Select a cloud file before syncing."),Sn("Select a cloud file before syncing."),pt(!0);return}const T=VS({isOffline:Pe,isLocked:Xr.current,inFlight:$n.current,hasSession:!0,hasFile:!!L,dirty:ot,now:Date.now(),lastLocalEditAt:kr.current,graceMs:Bd});if(wo("[Sync][Mobile] upload decision",T),T.action==="skip"&&!(T.reason==="clean"&&!(a!=null&&a.silent))){T.reason==="no-file"&&(N("Select a cloud file before syncing."),Sn("Select a cloud file before syncing."),pt(!0));return}Xr.current=!0,$n.current=!0,Td(!0);const I=ql(Zr.current),E=ql(es.current),G=await Cl(L.id,"syncUpload",C),J=typeof G.data=="string"?JSON.parse(G.data):G.data,ee=Vn(J);if(!((b=ee==null?void 0:ee.periodsState)!=null&&b.periods))throw new Error("Drive file missing periods.");const te=xa.current,A=new Date().toISOString(),H=(ee.periodsState.periods||[]).map(ne=>{const we=String(ne.id),qe=Ue[we]||{},Dt=Array.isArray(ne.pointsHistory)?[...ne.pointsHistory]:[],tn=Bt[we]||[],Gt=P==null?void 0:P.periods.find(jn=>String(jn.id)===we),_r=Zd(ne.attendanceResets||{},(Gt==null?void 0:Gt.attendanceResets)||{}),io=$p(ne.attendance,I[we],te),Pl=Bp(ne.behaviorNotes,E[we],te,A),ao=[...Dt,...tn].filter(jn=>!te.has(String(jn.studentId))),uo={...qe};te.forEach(jn=>{delete uo[jn]});const uf={..._r||{}};te.forEach(jn=>{delete uf[jn]});const D0=ne.activeGrouping?ne.activeGrouping.map(jn=>jn.filter(L0=>!te.has(String(L0)))):ne.activeGrouping;return{...ne,attendance:io,attendanceResets:uf,behaviorNotes:Pl,pointsByStudent:uo,pointsHistory:ao,activeGrouping:D0}}),ae=ee.students||[],oe=(P==null?void 0:P.students)||[],ke=new Map(oe.map(ne=>[String(ne.id),ne])),We=ae.filter(ne=>!te.has(String(ne.id))).map(ne=>{const we=ke.get(String(ne.id));if(!we)return ne;let qe={...ne};const Dt=we.profileUpdatedAt||"",tn=ne.profileUpdatedAt||"";Dt&&(!tn||Dt>tn)&&(qe={...qe,fullName:we.fullName,gender:we.gender,periodIds:we.periodIds,profileUpdatedAt:Dt});const Gt=we.quickNoteUpdatedAt||"",_r=ne.quickNoteUpdatedAt||"";Gt&&(!_r||Gt>_r)&&(qe={...qe,quickNote:we.quickNote,quickNoteUpdatedAt:we.quickNoteUpdatedAt});const io=typeof we.photoUpdatedAt=="number"?we.photoUpdatedAt:0,Pl=typeof ne.photoUpdatedAt=="number"?ne.photoUpdatedAt:0;io&&(!Pl||io>Pl)&&(qe={...qe,photoFileId:we.photoFileId??null,photoUpdatedAt:io});const ao=typeof we.audioUpdatedAt=="number"?we.audioUpdatedAt:0,uo=typeof ne.audioUpdatedAt=="number"?ne.audioUpdatedAt:0;return ao&&(!uo||ao>uo)&&(qe={...qe,audioFileId:we.audioFileId??null,audioUpdatedAt:ao}),qe}),Er=new Set(ae.map(ne=>String(ne.id)));oe.forEach(ne=>{te.has(String(ne.id))||Er.has(String(ne.id))||We.push(ne)});const kn={...ee,schemaVersion:1,version:1,lastWriter:"mobile",lastEditedPeriodId:st?String(st):null,lastEditedDate:ie,updatedAt:A,students:We,periodsState:{...ee.periodsState,periods:H}},lo=JSON.stringify(kn,null,2),be=await Jd(L.id,lo,"syncUpload",C);kt(ne=>{const we={...ne||{}};return delete we[st||""],we}),be?(gl.current=Ca(kn),Ct(be.id,be.revisionId||null),It.current=be.id,_e(be),jr(be.id,kn.updatedAt),Cr.current=Date.now()):jr(L.id,kn.updatedAt),xa.current.clear(),ro("mobile"),a!=null&&a.silent||(N("Synced with Google Drive."),rs("Synced with Google Drive.")),qs(new Date().toISOString()),jl("push"),pt(!1),localStorage.setItem(Jl,JSON.stringify({id:(be==null?void 0:be.id)||L.id,name:(be==null?void 0:be.name)||L.name,modifiedTime:(be==null?void 0:be.modifiedTime)||L.modifiedTime,size:(be==null?void 0:be.size)||L.size,revisionId:(be==null?void 0:be.revisionId)||L.revisionId})),Wn.current===p&&(ve(ne=>{if(!ne)return ne;const we=ne.periods.map(qe=>{const Dt=String(qe.id),tn=$p(qe.attendance,I[Dt],new Set),Gt=Bp(qe.behaviorNotes,E[Dt],new Set,A);return{...qe,attendance:tn,behaviorNotes:Gt}});return{...ne,periods:we}}),Bn(!1),pt(!1),Hn())}catch(C){const T=(C==null?void 0:C.message)||"Failed to sync with Drive.";N(T),lt(T),pt(!0)}finally{Td(!1),$n.current=!1,Xr.current=!1}},[L,Ie,lt,rs,Ue,Bt,P,ie,st,ot,o,s,Pe,Vn,Hn,ve,jr,Ct,Cl,Jd,Zd,jl]),_l=f.useCallback(()=>{s||Pe||ot&&L&&l&&(pt(!0),Je({silent:!0}))},[ot,L,l,s,Je,Pe]);f.useEffect(()=>{const a=()=>{document.visibilityState==="visible"&&_l()};return window.addEventListener("online",_l),document.addEventListener("visibilitychange",a),()=>{window.removeEventListener("online",_l),document.removeEventListener("visibilitychange",a)}},[_l]),f.useEffect(()=>{if(Pe){no(!0);return}if(!$d||!L||!l)return;(async()=>{pt(!0),Sn("Reconnected  refreshing data"),await Je({silent:!0}),no(!1),Sn(null)})()},[Pe,$d,L,l,Je]),f.useEffect(()=>{if(!L||!ot||$n.current)return;const a=window.setTimeout(()=>{Je({silent:!0})},1500);return()=>window.clearTimeout(a)},[ot,L,Je]),f.useEffect(()=>{L&&Ct(L.id,L.revisionId||null)},[L,Ct]),f.useEffect(()=>{It.current=(L==null?void 0:L.id)||null},[L]);const Tl=f.useCallback(async()=>{if(s)return;const a=It.current;if(!a)return;const p=KS({isOffline:Pe,isLocked:Xr.current||wn||Js,inFlight:$n.current,dirty:ot,now:Date.now(),lastLocalEditAt:kr.current,lastPullAt:Cr.current,graceMs:Bd});if(wo("[Sync][Mobile] pull decision",p),p.action==="skip")return;const g=await Ie(!1,"pull");if(g&&It.current===a)try{const S=await jp(g.accessToken);if(It.current!==a)return;const b=S.find(C=>C.id===a);if(b!=null&&b.revisionId&&b.revisionId!==ja(a)){const C=await Yl(g.accessToken,a);if(It.current!==a)return;const T=typeof C=="string"?JSON.parse(C):C,I=Vn(T);if(!I)return;const E=Ca(I);if(gl.current&&E===gl.current){Ct(a,b.revisionId||null),Cr.current=Date.now(),ro(I.lastWriter||"unknown");return}const G=os(I,b);G==="applied"&&It.current===a?(qs(new Date().toISOString()),Ct(a,b.revisionId||null),Cr.current=Date.now(),ro(I.lastWriter||"unknown"),Ea(J=>J+1),ss("Updated from Drive."),jl("pull")):G==="skipped"&&(Ct(a,b.revisionId||null),Cr.current=Date.now())}}catch{}},[os,Ie,Vn,ss,ot,Js,wn,Pe,s,ja,Ct,jl]);f.useEffect(()=>{if(s)return;let a=null;const p=async()=>{await Tl(),a=window.setTimeout(p,15e3)};return a=window.setTimeout(p,15e3),()=>{a&&window.clearTimeout(a)}},[s,Tl]),f.useEffect(()=>{if(Rt.current&&(window.clearTimeout(Rt.current),Rt.current=null),!s&&!(ot||wn||Js||Pe||!L))return Rt.current=window.setTimeout(()=>{Tl()},5e3),()=>{Rt.current&&(window.clearTimeout(Rt.current),Rt.current=null)}},[ot,wn,Js,Pe,L,s,Tl]);const ef=(m==null?void 0:m.state)??"unknown";let tf=ef==="ok"&&l?"Connected to Google Drive":"Google Drive Sync",ls="Link Google Drive to save and sync. Files stay in your Drive.",is=l?"Manage Files":"Connect to Drive";switch(ef){case"no-session-yet":is=l?"Manage Files":"Connect to Google Drive",ls="Store your seating data in a private folder in your Google Drive.";break;case"device-storage-wipe":is=l?"Manage Files":"Reconnect Google Drive",ls="Your device cleared your Google connection. Tap below to reconnect; your files are still in your Drive.";break;case"oauth-failure":is=l?"Manage Files":"Reconnect Google Drive",ls="There was a Google sign-in problem. Reconnect to continue syncing.";break;case"user-logged-out":is=l?"Manage Files":"Connect to Google Drive",ls="You disconnected from Google Drive.";break}s&&(tf="Drive sync disabled",ls=o,is="Drive disabled");const as=xe&&Vt&&(P!=null&&P.periods)&&P.periods.find(a=>String(a.id)===String(Vt))||null,Kt=f.useMemo(()=>!xe||!P?null:P.students.find(a=>String(a.id)===String(xe.id))||null,[xe,P]),{audioUrl:oo}=yd({studentId:(Kt==null?void 0:Kt.id)??"menu",audioFileId:(Kt==null?void 0:Kt.audioFileId)??null,audioUpdatedAt:(Kt==null?void 0:Kt.audioUpdatedAt)??null,driveSession:l}),Ia=!!(Kt!=null&&Kt.audioFileId),us=as?{...as.attendance||{},[ie]:xt[as.id]||{}}:null,Da=(as==null?void 0:as.attendanceResets)||{},nf=us&&xe?vo({attendance:us,studentId:xe.id,date:ie,status:"absent",resets:Da}):null,rf=us&&xe?vo({attendance:us,studentId:xe.id,date:ie,status:"tardy",resets:Da}):null,sf=us&&xe?vo({attendance:us,studentId:xe.id,date:ie,status:"left_early",resets:Da}):null;f.useEffect(()=>{xe||(qr(!1),Jr.current&&Jr.current.pause())},[xe]),f.useEffect(()=>{qr(!1),Jr.current&&Jr.current.pause()},[oo]);const R0=async()=>{if(!oo)return;const a=Jr.current;if(a){if(Pd){a.pause(),qr(!1);return}try{await a.play(),qr(!0)}catch{e({message:"Could not play audio. Please try again.",tone:"error"})}}},I0=jt==="attendance"&&!!P&&!!st;return i.jsx(u1,{children:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"min-h-[100dvh] h-[100dvh] bg-gradient-to-b from-violet-900 to-indigo-800 text-white flex flex-col relative",children:[i.jsxs("div",{className:"bg-emerald-50 text-emerald-900 text-xs px-4 py-1 text-center",children:[i.jsx("span",{role:"img","aria-label":"lock",className:"mr-1",children:""}),"Privacy: Data stays on this device and in your Google Drive. Use your school Google account. No data is sent to our servers."]}),Pe&&i.jsx("div",{className:"bg-slate-900 text-white text-xs px-4 py-1 text-center",children:"Offline  edits are saved locally and will sync when youre back online."}),i.jsxs("div",{className:"px-4 pt-2 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{className:"text-[11px] px-2 py-1 rounded bg-white/80 text-slate-800 shadow",onClick:m0,title:"Version",type:"button",children:["Rev ",Kp]}),i.jsx("button",{className:"text-[11px] px-2 py-1 rounded border border-white/60 bg-white/20 text-white shadow hover:bg-white/30",onClick:()=>ce(!0),type:"button",children:"About"}),i.jsx("a",{href:"https://help.classseats.app/",target:"_blank",rel:"noopener noreferrer",className:"text-[11px] px-2 py-1 rounded bg-white/80 text-slate-800 shadow hover:bg-white",title:"Open ClassSeats Help Center",children:" Help"})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[i.jsx("span",{className:"text-[16px] font-bold tracking-wide text-white/90 whitespace-nowrap",children:"ClassSeats Mobile"}),!t&&i.jsx(MS,{current:"mobile",onGoDesktop:h0,onGoMobile:()=>{}})]})]}),I0&&i.jsx("div",{className:"mt-[76px]"}),Vp,jt==="attendance"&&P&&st&&(()=>{const a=P.periods.find(ee=>ee.id===st);if(!a)return null;const p=P.students.filter(ee=>{var te;return(te=ee.periodIds)==null?void 0:te.includes(String(a.id))}),g=xt[a.id]||{},S=p.length||1,b=p.filter(ee=>g[ee.id]==="present").length,C=p.filter(ee=>g[ee.id]==="absent").length,T=p.filter(ee=>g[ee.id]==="tardy").length,I=p.filter(ee=>g[ee.id]==="left_early").length,E=b+C+T+I,G=Math.round(E/S*100),J=Math.round(b/S*100);return i.jsx("div",{className:"fixed left-0 right-0 z-40 px-4 pt-2",style:{top:"76px"},children:i.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow px-3 py-2 flex flex-wrap items-center gap-2 text-xs text-slate-800",children:[i.jsxs("span",{className:"font-semibold",children:["Progress: ",G,"%  Present: ",J,"%"]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-emerald-100 text-emerald-800 font-semibold",children:[" Present: ",b]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-rose-100 text-rose-800 font-semibold",children:[" Absent: ",C]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-amber-100 text-amber-800 font-semibold",children:[" Tardy: ",T]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-800 font-semibold",children:[" Left Early: ",I]})]})})})(),i.jsxs("main",{className:"flex-1 min-h-0 overflow-y-auto px-4 pb-28 pt-20 space-y-6 relative",children:[i.jsx(AS,{variant:"inline"}),i.jsx("section",{className:"max-w-2xl mx-auto bg-white/95 text-slate-900 rounded-3xl shadow-xl p-5",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-base font-semibold text-slate-900",children:tf}),i.jsx("p",{className:"text-xs text-slate-600",children:ls}),i.jsxs("p",{className:"text-[11px] text-slate-500",children:[l?((of=l.profile)==null?void 0:of.email)||"Signed in":"Not signed in"," "," ",(L==null?void 0:L.name)||(re==null?void 0:re.name)||"No file selected",Pe&&"  Offline"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[wn&&i.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-amber-100 text-amber-800",children:"Pending sync"}),Pe&&i.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-slate-200 text-slate-700",children:"Offline"}),i.jsx("button",{className:"rounded-full bg-slate-900 text-white font-semibold px-4 py-2 text-sm disabled:opacity-50",disabled:s||!l||!L,onClick:()=>{if(s){N(o);return}Je()},title:s?o:void 0,children:"Sync Now"}),i.jsx("button",{className:"rounded-full bg-emerald-600 text-white font-semibold px-4 py-2 text-sm",onClick:()=>{if(s){N(o);return}return l?Y(!0):void Ie(!0,"cta")},disabled:s,title:s?o:void 0,children:is})]})]})}),s&&i.jsx("p",{className:"max-w-2xl mx-auto text-sm text-rose-100 text-left",children:"Drive sync is disabled."}),_&&i.jsxs("section",{className:"max-w-2xl mx-auto bg-slate-900 text-slate-100 rounded-2xl shadow-inner p-3 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold",children:"Drive Debug"}),i.jsx("button",{className:"text-slate-200 underline",onClick:()=>D(!1),children:"Close"})]}),i.jsx("button",{className:"text-slate-200 underline",onClick:()=>B([]),children:"Clear"})]}),i.jsxs("div",{className:"border border-slate-700 rounded p-2 h-48 overflow-y-auto space-y-1 bg-slate-800/70",children:[U.length===0&&i.jsx("div",{className:"text-slate-400",children:"No debug entries yet."}),U.map((a,p)=>i.jsx("div",{className:"font-mono text-[11px] whitespace-pre-wrap break-all",children:a},p))]})]}),i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsx("div",{className:"mt-3",children:i.jsx("div",{className:"inline-flex w-full rounded-xl border border-slate-200 bg-slate-50 p-1",children:i.jsxs("div",{className:"grid w-full grid-cols-3 gap-1",children:[i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${jt==="attendance"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>wa("attendance"),children:"Attendance"}),i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${jt==="notes"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>wa("notes"),children:"Notes"}),i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${jt==="flashcards"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>wa("flashcards"),children:"Flashcards"})]})})})}),i.jsxs("section",{className:"max-w-2xl mx-auto bg-white/95 text-slate-900 rounded-3xl shadow-xl p-6 space-y-6",children:[P&&i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 text-left",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsx("div",{children:i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:jt==="attendance"?"Attendance & Behavior":jt==="notes"?"Student Notes":"Flashcards"})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[jt==="attendance"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Date:"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 text-sm",onClick:()=>{const a=new Date(ie);a.setDate(a.getDate()-1),eo(a.toISOString().slice(0,10))},children:""}),i.jsx("input",{type:"date",className:"rounded border border-slate-300 px-2 py-1 text-sm",value:ie,onChange:a=>eo(a.target.value||va())}),i.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 text-sm",onClick:()=>{const a=new Date(ie);a.setDate(a.getDate()+1),eo(a.toISOString().slice(0,10))},children:""}),i.jsx("button",{className:"px-2 py-1 rounded border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm font-semibold",onClick:()=>eo(va()),children:"Today"})]})]}),jt==="notes"&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Sort:"}),i.jsxs("select",{className:"rounded border border-slate-300 bg-white text-slate-900 px-3 py-2 text-sm shadow-sm",value:ml,onChange:a=>u0(a.target.value),children:[i.jsx("option",{value:"first-last",children:"First Last"}),i.jsx("option",{value:"last-first",children:"Last, First"})]})]}),jt==="attendance"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"View:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:br,onChange:a=>a0(a.target.value),children:[i.jsx("option",{value:"table",children:"Table View"}),i.jsx("option",{value:"list-last-first",children:"List (Last, First)"}),i.jsx("option",{value:"list-first-last",children:"List (First Last)"}),i.jsx("option",{value:"list-seat-number",children:"List (Seat Number)"})]}),br==="table"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Table Order:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:to,onChange:a=>c0(a.target.value),children:[i.jsx("option",{value:"asc",children:"Ascending (1, 2, 3 / A, B, C)"}),i.jsx("option",{value:"desc",children:"Descending (3, 2, 1 / C, B, A)"})]})]}),br==="list-seat-number"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Seat Order:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:hl,onChange:a=>d0(a.target.value),children:[i.jsx("option",{value:"asc",children:"Ascending (1, 2, 3)"}),i.jsx("option",{value:"desc",children:"Descending (3, 2, 1)"})]})]})]}),P.periods.length>0&&i.jsx("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:st||"",onChange:a=>Ys(a.target.value||null),children:P.periods.map(a=>i.jsx("option",{value:a.id,children:a.name},a.id))})]})]}),st?(()=>{const a=P.periods.find(A=>A.id===st);if(!a)return i.jsx("p",{className:"text-sm text-slate-500",children:"Period not found."});if(jt==="notes"){const A=P.students.filter(H=>{var ae;return(ae=H.periodIds)==null?void 0:ae.includes(String(st))}).slice().sort((H,ae)=>{const[oe,...ke]=H.fullName.split(" "),[We,...Er]=ae.fullName.split(" ");return ml==="last-first"?ke.join(" ").localeCompare(Er.join(" ")):oe.localeCompare(We)});return i.jsx("div",{className:"space-y-3",children:A.length===0?i.jsx("p",{className:"text-sm text-slate-500",children:"No students found."}):A.map(H=>{var oe;const ae=(oe=H.docs)==null?void 0:oe.find(ke=>ke.pinned);return i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800 truncate",children:[H.fullName,"  QuickNote"]}),H.quickNote&&i.jsxs("div",{className:"relative mt-1",children:[i.jsx("div",{className:"text-xs text-slate-600 whitespace-pre-wrap break-words max-h-28 overflow-hidden pr-2",children:H.quickNote}),H.quickNote.length>180&&i.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-white to-transparent"}),i.jsx("div",{className:"mt-1 text-[11px] text-slate-400",children:"Open Quick Note to view/edit more."})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>{rt(H.quickNote||""),Se({studentId:H.id,studentName:H.fullName})},children:"Quick Note"}),i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:!ae,onClick:ke=>{ke.preventDefault(),ke.stopPropagation(),ae&&Pa(Ta(ae.driveFileId))},children:"Pinned Note"}),i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>ft({studentId:H.id,studentName:H.fullName}),children:"Docs"})]})]})})},H.id)})})}if(jt==="flashcards"){const A=P.students.filter(H=>{var ae;return(ae=H.periodIds)==null?void 0:ae.includes(String(st))});return i.jsx(h1,{students:A,periodId:String(st),driveFileId:It.current,driveClient:r,driveSession:l,onAudioSaved:(H,ae,oe)=>{ve(ke=>ke&&{...ke,students:ke.students.map(We=>String(We.id)===String(H)?{...We,audioFileId:ae,audioUpdatedAt:oe}:We)}),Ke(),Je({silent:!0})},onAudioDeleted:H=>{ve(ae=>ae&&{...ae,students:ae.students.map(oe=>String(oe.id)===String(H)?{...oe,audioFileId:null,audioUpdatedAt:null}:oe)}),Ke(),Je({silent:!0})}})}const p=a.layoutId?P.layouts[a.layoutId]:null,g=P.students.filter(A=>{var H;return(H=A.periodIds)==null?void 0:H.includes(String(a.id))}),S=g.reduce((A,H)=>(A[String(H.id)]=H,A),{}),b={};p==null||p.tables.forEach(A=>b[A.id]={id:A.id,name:A.name,students:[]});const C=[],T=a.tableAssignments||{};Array.isArray(a.activeGrouping)&&Object.keys(T||{}).length>0?(a.activeGrouping.forEach((A,H)=>{const ae=T[String(H)]||T[H],oe=ae?b[ae]:null;A==null||A.forEach(ke=>{const We=S[String(ke)];We&&(oe?oe.students.push(We):C.push(We))})}),g.forEach(A=>{(a.activeGrouping||[]).some(ae=>ae==null?void 0:ae.some(oe=>String(oe)===String(A.id)))||C.push(A)})):g.forEach(A=>{const H=T[String(A.id)]||T[A.id];H&&b[H]?b[H].students.push(A):C.push(A)});const I=Object.values(b).sort((A,H)=>{const ae=A.name||"",oe=H.name||"",ke=f0.compare(ae,oe);if(ke!==0)return to==="asc"?ke:-ke;const We=String(A.id).localeCompare(String(H.id));return to==="asc"?We:-We}),E=xt[a.id]||{},G={...a.attendance||{},[ie]:E},J=a.attendanceResets||{};le[a.id];const ee=Ue[a.id]||{};n0[a.id];const te=(A,H,ae)=>{var ne;const oe=E[A.id],ke=_S({attendance:G,studentId:A.id,date:ie,resets:J}),We=vo({attendance:G,studentId:A.id,date:ie,status:"tardy",resets:J}),Er=vo({attendance:G,studentId:A.id,date:ie,status:"left_early",resets:J}),kn=typeof ee[A.id]=="number"?ee[A.id]:a.startingPoints??50,lo=!!((ne=le[a.id])!=null&&ne[A.id]),be=fa[String(A.id)]||null;return i.jsx(C1,{student:A,attendance:oe,points:kn,pointsEnabled:!!a.pointsEnabled,maxPoints:a.startingPoints??50,hasNote:lo,absenceStreak:ke,tardyCount:We,leftEarlyCount:Er,onShowAbsenceHelp:()=>Qr("absent"),onShowTardyHelp:()=>Qr("tardy"),onShowLeftEarlyHelp:()=>Qr("leftEarly"),seatNumber:H,showSeatNumber:ae,statusBg:v0,statusLabel:Qd,tempPhotoUrl:be,onOpenPhoto:()=>{Ks({id:String(A.id),fullName:A.fullName,photoFileId:A.photoFileId??null})},onOpenMenu:()=>{Ht({id:A.id,name:A.fullName}),Cd(a.id)},driveClient:r,driveSession:l},A.id)};if(br!=="table"){const A=new Map;g.forEach(oe=>{A.set(String(oe.id),E1(a,p,oe.id))});const H=br==="list-seat-number",ae=[...g].sort((oe,ke)=>{const[We,...Er]=oe.fullName.split(" "),[kn,...lo]=ke.fullName.split(" "),be=Er.join(" "),ne=lo.join(" ");if(br==="list-seat-number"){const we=A.get(String(oe.id)),qe=A.get(String(ke.id)),Dt=parseInt(String(we??""),10),tn=parseInt(String(qe??""),10),Gt=Number.isFinite(Dt),_r=Number.isFinite(tn);return Gt!==_r?Gt?-1:1:Gt&&_r&&Dt!==tn?hl==="asc"?Dt-tn:tn-Dt:`${oe.fullName||""}`.localeCompare(`${ke.fullName||""}`)}return br==="list-last-first"?`${be} ${We}`.localeCompare(`${ne} ${kn}`):`${We} ${be}`.localeCompare(`${kn} ${ne}`)});return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{className:"rounded bg-emerald-500 text-white text-xs font-semibold px-3 py-2",onClick:()=>El(a.id,g.map(oe=>oe.id)),children:"Mark Rest Present (All)"}),i.jsx("button",{className:"rounded bg-rose-100 text-rose-800 text-xs font-semibold px-3 py-2 border border-rose-200",onClick:()=>qd(a.id),children:"Reset Today"})]}),i.jsx("div",{className:"space-y-2",children:ae.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No students found."}):ae.map(oe=>te(oe,H?A.get(String(oe.id)):null,H))})]})}return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{className:"rounded bg-emerald-500 text-white text-xs font-semibold px-3 py-2",onClick:()=>El(a.id,g.map(A=>A.id)),children:"Mark Rest Present (All)"}),i.jsx("button",{className:"rounded bg-rose-100 text-rose-800 text-xs font-semibold px-3 py-2 border border-rose-200",onClick:()=>qd(a.id),children:"Reset Today"})]}),I.map(A=>{const H=A.students.filter(oe=>E[oe.id]!=="absent").map(oe=>oe.id),ae=A.name.replace("Table","").trim()||A.name;return i.jsxs("div",{className:"rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200 gap-3",children:[i.jsxs("div",{className:"flex flex-col leading-tight text-center min-w-[54px]",children:[i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Table"}),i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:ae})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-xs rounded bg-emerald-100 text-emerald-800 px-2 py-1",onClick:()=>El(a.id,A.students.map(oe=>oe.id)),children:"Mark Rest Present"}),a.pointsEnabled&&i.jsx("button",{className:"text-[11px] rounded bg-amber-600 text-white px-3 py-2 font-semibold",onClick:()=>{fl(null),dl(0),pa(""),Gs({periodId:a.id,tableName:A.name,studentIds:H})},children:"Table Points"})]})]}),i.jsx("div",{className:"p-3 flex flex-wrap gap-2",children:A.students.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No students assigned."}):A.students.map(oe=>te(oe))})]},A.id)}),i.jsxs("div",{className:"rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Unassigned"}),i.jsx("button",{className:"text-xs rounded bg-emerald-100 text-emerald-800 px-2 py-1",onClick:()=>El(a.id,C.map(A=>A.id)),children:"Mark Rest Present"})]}),i.jsx("div",{className:"p-3 flex flex-wrap gap-2",children:C.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No unassigned students."}):C.map(A=>te(A))})]})]})})():i.jsx("p",{className:"text-sm text-slate-500",children:"Load and select a period to begin."})]}),Wt&&i.jsx(b1,{open:!0,studentId:Wt.id,studentFullName:Wt.fullName,existingPhotoFileId:Wt.photoFileId,onClose:()=>Ks(null),onAccept:a=>{const p=Wt.id;if(!p)return;const g=URL.createObjectURL(a);t0(S=>{const b=S[p];return b&&URL.revokeObjectURL(b),{...S,[p]:g}})},onUploadComplete:({fileId:a,photoUpdatedAt:p})=>{const g=Wt.id;ve(S=>S&&{...S,students:S.students.map(b=>b.id===g?{...b,photoFileId:a,photoUpdatedAt:p}:b)}),Ke(),Je({silent:!0})}}),vt&&i.jsx(Jg,{open:!0,studentId:vt.id,studentFullName:vt.fullName,existingAudioFileId:vt.audioFileId,existingAudioUpdatedAt:vt.audioUpdatedAt,driveSession:l,onClose:()=>Yr(null),onUploadComplete:({fileId:a,audioUpdatedAt:p})=>{const g=vt.id;ve(S=>S&&{...S,students:S.students.map(b=>b.id===g?{...b,audioFileId:a,audioUpdatedAt:p}:b)}),Ke(),Je({silent:!0})},onDeleteComplete:()=>{const a=vt.id;ve(p=>p&&{...p,students:p.students.map(g=>g.id===a?{...g,audioFileId:null,audioUpdatedAt:null}:g)}),Ke(),Je({silent:!0})}}),Ed&&Fn&&i.jsx(ad,{isOpen:!0,onRequestClose:wl,title:"Edit Student",maxWidth:"md",showCloseX:!0,footer:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{className:"rounded border px-4 py-2 text-sm text-slate-600",onClick:wl,children:"Cancel"}),i.jsx("button",{className:"rounded bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",onClick:()=>{const a=Fn.name.trim();if(!a||!Fn.periodId){alert("Name and period are required.");return}const p=Ed.id;ve(g=>g&&{...g,students:g.students.map(S=>String(S.id)===String(p)?{...S,fullName:a,gender:Fn.gender,periodIds:[String(Fn.periodId)],profileUpdatedAt:new Date().toISOString()}:S)}),Ke(),Je({silent:!0}),wl()},children:"Save"})]}),children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Full Name"}),i.jsx("input",{className:"mt-1 w-full rounded border px-3 py-2",value:Fn.name,onChange:a=>Qs(p=>p&&{...p,name:a.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Gender"}),i.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2",value:Fn.gender,onChange:a=>Qs(p=>p&&{...p,gender:a.target.value}),children:[i.jsx("option",{value:"F",children:"Female"}),i.jsx("option",{value:"M",children:"Male"}),i.jsx("option",{value:"O",children:"Other/Prefer not"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Class Period"}),i.jsx("select",{className:"mt-1 w-full rounded border px-3 py-2",value:Fn.periodId,onChange:a=>Qs(p=>p&&{...p,periodId:a.target.value}),children:((P==null?void 0:P.periods)||[]).map(a=>i.jsx("option",{value:String(a.id),children:a.name},String(a.id)))})]})]})}),xe&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center px-4",onClick:()=>Ht(null),children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-4 w-full max-w-sm space-y-3",onClick:a=>a.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:xe.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Actions"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-600 hover:text-slate-800",onClick:()=>{Ht(null),g0(xe.id)},"aria-label":"Edit student",children:""}),i.jsx("button",{type:"button",className:"rounded-md p-1 text-rose-600 hover:text-rose-700",onClick:()=>y0(xe.id),"aria-label":"Delete student",children:""}),i.jsx("button",{className:"rounded-md p-1 text-slate-500 hover:text-slate-700",onClick:()=>Ht(null),children:""})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:x0.map(a=>i.jsx("button",{className:"rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{Vt&&Ra(Vt,xe.id,a),Ht(null)},children:Qd(a)},a))}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{Vt&&C0(Vt,xe.id,xe.name),Ht(null)},children:" Notes and Points"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{className:`rounded-lg border px-2 py-2 text-xs text-left ${Ia&&oo?"border-slate-200 text-slate-700 hover:bg-slate-50":"border-slate-200 text-slate-400 cursor-not-allowed"}`,onClick:()=>{R0()},disabled:!Ia||!oo,children:Pd?" Pause audio":" Play audio"}),i.jsxs("button",{className:"rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{const a=P==null?void 0:P.students.find(p=>String(p.id)===String(xe.id));Yr({id:xe.id,fullName:xe.name,audioFileId:(a==null?void 0:a.audioFileId)??null,audioUpdatedAt:(a==null?void 0:a.audioUpdatedAt)??null}),Ht(null)},children:[" ",Ia?"Re-record audio":"Record audio"]})]})]}),i.jsx("audio",{ref:Jr,src:oo||void 0,onEnded:()=>qr(!1),onPause:()=>qr(!1)}),nf!==null&&rf!==null&&sf!==null&&i.jsxs("div",{className:"rounded-lg border border-slate-200 px-3 py-2 text-xs text-slate-600",children:[i.jsx("div",{className:"font-semibold text-slate-700",children:"Counters (since reset)"}),i.jsxs("div",{children:["Absent ",nf,"  Tardy ",rf,"  Left early ",sf]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-lg border border-rose-200 px-2 py-2 text-xs text-left hover:bg-rose-50 text-rose-700",onClick:()=>{Vt&&xe&&Aa(Vt,xe.id,"absent"),Ht(null)},children:" Reset absence streak"}),i.jsx("button",{className:"w-full rounded-lg border border-amber-200 px-2 py-2 text-xs text-left hover:bg-amber-50 text-amber-700",onClick:()=>{Vt&&xe&&Aa(Vt,xe.id,"tardy"),Ht(null)},children:" Reset tardy counter"}),i.jsx("button",{className:"w-full rounded-lg border border-orange-200 px-2 py-2 text-xs text-left hover:bg-orange-50 text-orange-700",onClick:()=>{Vt&&xe&&Aa(Vt,xe.id,"leftEarly"),Ht(null)},children:" Reset left early counter"})]}),i.jsx("button",{className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:()=>Ht(null),children:"Close"})]})}),ha&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Qr(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-sm p-5 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"About this badge"}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Qr(null),children:""})]}),ha==="absent"?i.jsx("p",{className:"text-sm text-slate-700",children:"A# shows the absence streak since the last present or reset. Unmarked days are skipped."}):ha==="leftEarly"?i.jsx("p",{className:"text-sm text-slate-700",children:"LE# shows the left early count since the last reset."}):i.jsx("p",{className:"text-sm text-slate-700",children:"T# shows the tardy count since the last reset."}),i.jsx("button",{className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:()=>Qr(null),children:"Got it"})]})]}),F&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>z(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:["Behavior for ",F.studentName]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Today  Points ",se.pointsEnabled?`${_a(se.currentPoints,se.startingPoints)} ${se.currentPoints}`:"disabled"]})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>z(null),children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note"}),i.jsx("textarea",{value:W.note,onChange:a=>Q(p=>({...p,note:a.target.value})),className:"w-full border-2 border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none",rows:4,placeholder:"Enter behavior note...",autoFocus:!0,onMouseDown:a=>a.stopPropagation(),onClick:a=>a.stopPropagation()}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[" Excellent participation"," Needs redirection"," Academic progress"," Positive peer interactions"].map(a=>i.jsx("button",{onClick:()=>Q(p=>({...p,note:p.note?p.note+" "+a:a})),className:"text-[11px] px-2.5 py-1 rounded-lg bg-slate-100 hover:bg-slate-200 border border-slate-200 text-slate-700",children:a},a))})]}),se.pointsEnabled&&i.jsxs("div",{className:"space-y-3 border border-slate-200 rounded-xl p-3 bg-slate-50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Points"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsxs("span",{children:[_a(se.currentPoints,se.startingPoints)," ",se.currentPoints]}),i.jsx("span",{className:"text-slate-400",children:""}),i.jsxs("span",{children:[_a(Math.max(0,se.currentPoints+W.delta),se.startingPoints)," ",Math.max(0,se.currentPoints+W.delta)]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[2,1,0,-1,-2].map(a=>i.jsx("button",{onClick:()=>Q(p=>({...p,delta:a,reason:p.reason})),className:`px-3 py-1.5 rounded border text-sm font-semibold ${W.delta===a?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-indigo-50"}`,children:a>0?`+${a}`:a},a)),i.jsx("button",{onClick:()=>{const a=prompt("Enter custom point change:",String(W.delta));if(a===null)return;const p=parseInt(a,10);Number.isNaN(p)||Q(g=>({...g,delta:p,reason:g.reason}))},className:"px-3 py-1.5 rounded border text-sm font-semibold bg-white text-slate-700 border-slate-300 hover:bg-indigo-50",children:"Custom"})]}),W.delta!==0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-[11px] font-semibold text-slate-700",children:"Reason (required)"}),i.jsx("input",{value:W.reason,onChange:a=>Q(p=>({...p,reason:a.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1 text-sm",placeholder:"Enter reason for point change"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2",onClick:j0,children:"Save"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>z(null),children:"Cancel"})]})]})]}),Te&&P&&(()=>{const a=P.students.find(p=>p.id===Te.studentId);return a?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Se(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Quick Note"}),i.jsx("p",{className:"text-xs text-slate-500",children:a.fullName})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Se(null),children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note"}),i.jsx("textarea",{value:Be,onChange:p=>rt(p.target.value),className:"w-full border-2 border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none",rows:5,placeholder:"Add a quick note...",autoFocus:!0,onMouseDown:p=>p.stopPropagation(),onClick:p=>p.stopPropagation()})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2",onClick:()=>{const p=Te.studentId,g=Be;ve(S=>S&&{...S,students:S.students.map(b=>b.id===p?{...b,quickNote:g,quickNoteUpdatedAt:new Date().toISOString()}:b)}),Wn.current+=1,Bn(!0),pt(!0),kr.current=Date.now(),Je({silent:!0}),Se(null)},children:"Save"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>Se(null),children:"Cancel"})]})]})]}):null})(),Sr&&P&&(()=>{const a=P.students.find(b=>b.id===Sr.studentId);if(!a)return null;const p=P.periods.find(b=>b.id===st),S=(a.docs||[]).slice().sort((b,C)=>{if(b.pinned&&!C.pinned)return-1;if(!b.pinned&&C.pinned)return 1;const T=b.createdAt?new Date(b.createdAt).getTime():0;return(C.createdAt?new Date(C.createdAt).getTime():0)-T});return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>ft(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Student Docs"}),i.jsx("p",{className:"text-xs text-slate-500",children:a.fullName})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>ft(null),children:""})]}),i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Tap a doc to open it in Google Docs."}),i.jsx("p",{className:"text-[11px] leading-snug text-slate-500",children:"To protect privacy, ClassSeats can only see the documents it helps create."}),i.jsx("p",{className:"text-[11px] leading-snug text-slate-500",children:"All documents are created in the ClassSeats/Student Docs folder in your Google Drive."})]}),i.jsx("button",{className:"rounded-lg bg-emerald-600 text-white text-xs font-semibold px-3 py-2 disabled:opacity-50",disabled:!n.canUseDriveSync,onClick:async()=>{if(n.canUseDriveSync)try{const b=await Ie(!0,"studentDocCreate");if(!b)return;const C=(p==null?void 0:p.name)||"Period",T=`Notes - ${a.fullName} - ${C} ${S0(new Date)}`,I=window.prompt("Name this Doc:",T);if(!I||!I.trim())return;const E=I.trim(),G=await lw(b.accessToken),J=await uw(b.accessToken,G,E),ee=new Date().toISOString(),te={id:w0(),driveFileId:J.fileId,title:J.title||E,createdAt:ee,lastOpenedAt:ee};ve(A=>A&&{...A,students:A.students.map(H=>H.id===a.id?{...H,docs:[...H.docs||[],te]}:H)}),Wn.current+=1,Bn(!0),pt(!0),kr.current=Date.now(),Pa(Ta(J.fileId))}catch(b){lt((b==null?void 0:b.message)||"Unable to create Google Doc.")}},children:"+ New Doc"})]}),i.jsx("div",{className:"max-h-72 overflow-y-auto space-y-2",children:S.length===0?i.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-600",children:"No Docs yet."}):S.map(b=>i.jsx("button",{className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-left text-sm text-slate-700 hover:bg-slate-50",onClick:C=>{C.preventDefault(),C.stopPropagation(),Pa(Ta(b.driveFileId))},children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-900",children:b.title}),b.pinned&&i.jsx("span",{className:"text-[10px] font-semibold text-emerald-700 bg-emerald-100 px-2 py-0.5 rounded-full",children:"PINNED"})]})},b.id))}),i.jsx("button",{className:"w-full rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>ft(null),children:"Close"})]})]})})(),!P&&i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 text-left",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"No class file loaded yet."}),i.jsx("p",{className:"text-sm text-slate-600",children:"To take attendance or track points, open a class file from your Google Drive."}),i.jsx("button",{className:"w-full rounded-lg bg-emerald-600 text-white font-semibold py-2",onClick:()=>{if(s){N(o);return}return l?Y(!0):void Ie(!0,"empty-state")},disabled:s,title:s?o:void 0,children:"Manage Files"})]}),Mn&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Gs(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:Mn.tableName}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Apply points to ",Mn.studentIds.length," present student",Mn.studentIds.length===1?"":"s"]})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Gs(null),children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note (required)"}),i.jsx("textarea",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Describe why youre adjusting points",value:kd,onChange:a=>pa(a.target.value),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Choose points"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[2,1,-1,-2].map(a=>{const p=Nd===a;return i.jsxs("button",{className:`px-3 py-2 rounded-lg text-sm font-semibold border ${p?"bg-amber-600 text-white border-amber-600":"bg-white text-amber-800 border-amber-300"}`,onClick:()=>{fl(a),dl(0)},children:[a>0?`+${a}`:a," pts"]},a)}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("input",{type:"number",className:"w-24 rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Custom",value:bd,onFocus:()=>fl(null),onChange:a=>dl(Number(a.target.value)||0)})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-amber-600 text-white font-semibold py-2",onClick:()=>{const a=kd.trim(),p=Nd??bd;if(!a){lt("Enter a note for the point change.");return}if(!p){lt("Select a point value.");return}k0(Mn.periodId,Mn.studentIds,p,a),fl(null),dl(0),pa(""),Gs(null)},children:"Apply"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>Gs(null),children:"Cancel"})]}),i.jsx("p",{className:"text-[11px] text-slate-500",children:"Only present students at this table receive the adjustment. Absent students are skipped."}),(()=>{const a=(Bt[Mn.periodId]||[]).filter(g=>{var S;return((S=g.date)==null?void 0:S.startsWith(ie))&&Mn.studentIds.includes(String(g.studentId))});if(a.length===0)return null;const p=g=>{var S;return((S=P==null?void 0:P.students.find(b=>String(b.id)===String(g)))==null?void 0:S.fullName)||`Student ${g}`};return i.jsxs("div",{className:"border-t border-slate-200 pt-2 space-y-1",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Todays table adjustments"}),i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:a.map((g,S)=>i.jsxs("div",{className:"text-xs text-slate-700 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:p(g.studentId)}),i.jsxs("span",{children:[g.delta>0?"+":"",g.delta,"  ",g.reason||"No note"]})]},`${g.studentId}-${S}`))})]})})()]})]})]}),O&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Y(!1)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Manage Files"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Sign in, load, create, or import ClassSeats files."})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Y(!1),children:""})]}),s?i.jsx("div",{className:"space-y-2 text-sm text-rose-700",children:i.jsx("p",{children:o})}):l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[i.jsxs("div",{children:[i.jsxs("p",{children:["Signed in as ",i.jsx("span",{className:"font-semibold text-slate-900",children:((lf=l.profile)==null?void 0:lf.email)||"your account"})]}),i.jsxs("p",{children:["Active file: ",i.jsx("span",{className:"font-semibold text-slate-900",children:(L==null?void 0:L.name)||(re==null?void 0:re.name)||"None selected"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[L&&i.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white font-semibold",onClick:()=>void _0(),children:" Delete Active File"}),i.jsx("button",{className:"text-rose-600 underline",onClick:E0,children:"Sign out"})]})]}),Vp,i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-2xl bg-slate-900 text-white font-semibold py-2",onClick:()=>void T0(!0),children:" Refresh Cloud Files"}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-3 max-h-64 overflow-auto space-y-2",children:[y&&i.jsx("p",{className:"text-sm text-slate-500",children:"Loading Drive files"}),w&&i.jsx("p",{className:"text-sm text-rose-600",children:w}),!y&&!w&&c.length===0&&i.jsxs("div",{className:"text-sm text-slate-700 space-y-1",children:[i.jsx("p",{className:"font-semibold",children:"Youre signed into Google Drive, but no class file is loaded yet."}),i.jsx("p",{className:"text-slate-500",children:"Choose an existing class file or create a new one linked to your desktop setup."})]}),!y&&!w&&c.length>0&&c.map(a=>{const p=(re==null?void 0:re.id)===a.id,g=(L==null?void 0:L.id)===a.id;return i.jsxs("button",{className:`w-full text-left rounded-xl border px-3 py-2 transition ${p?"border-indigo-400 bg-indigo-50 text-indigo-900":g?"border-emerald-400 bg-emerald-50 text-emerald-900":"border-slate-200 bg-white hover:bg-slate-100"}`,onClick:()=>Re(a),children:[i.jsx("p",{className:"text-sm font-semibold",children:a.name}),i.jsxs("p",{className:"text-[11px] text-slate-500",children:["Updated ",a.modifiedTime?new Date(a.modifiedTime).toLocaleString():"",a.size?`  ${(Number(a.size)/1024).toFixed(1)} KB`:""]}),g&&i.jsx("p",{className:"text-[11px] text-emerald-700 font-semibold",children:"Active"})]},a.id)})]}),i.jsx("button",{className:"w-full rounded-2xl bg-emerald-600 text-white font-semibold py-2 disabled:opacity-50",onClick:P0,disabled:!re||Fe,children:Fe?"Loading":re?`Load "${re.name}"`:"Load Selected File"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("button",{className:"w-full rounded-2xl bg-emerald-600 text-white font-semibold py-2 disabled:opacity-50",onClick:()=>void Je(),disabled:!L,children:" Sync (pull latest, then save)"}),i.jsx("p",{className:"text-[11px] text-slate-500 text-center",children:"Uses the selected cloud file. Select or create one first."})]})]}),i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"space-y-2 border-b border-slate-200 pb-3",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Create a new cloud file"}),i.jsx("input",{type:"text",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"e.g., Semester 2 24-25",value:M,onChange:a=>fe(a.target.value)}),i.jsx("button",{className:"w-full rounded-2xl bg-slate-900 text-white font-semibold py-2 disabled:opacity-50",onClick:A0,disabled:X,children:X?"Creating":"Create Cloud File"})]})})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-slate-700",children:"Sign in with Google to access Drive."}),i.jsx("p",{className:"text-[11px] text-amber-700",children:"Use your school Google account. Files stay in your Drive (ClassSeats folder)."}),i.jsx("button",{className:"w-full rounded-2xl bg-indigo-600 text-white font-semibold py-2",onClick:()=>{Y(!1),Ie(!0)},children:" Sign in with Google"})]})]})]})]})]}),i.jsx("div",{className:"fixed inset-x-0 bottom-0 px-4 pb-[env(safe-area-inset-bottom)]",children:i.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow-lg px-4 py-3 flex flex-wrap items-center gap-2 text-xs text-slate-700",children:[i.jsxs("div",{className:"flex-1 min-w-[180px]",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:Js?"Saving":pl?`Synced ${new Date(pl).toLocaleTimeString()}`:"Ready"}),i.jsxs("p",{className:"text-[11px] text-slate-500 truncate",children:[l?((af=l.profile)==null?void 0:af.email)||"Signed in":"Not signed in"," "," ",(L==null?void 0:L.name)||(re==null?void 0:re.name)||"No file selected",Pe&&"  Offline"]}),wn&&i.jsx("p",{className:"text-[11px] text-amber-700",children:"Pending sync"})]}),i.jsxs("div",{className:"flex w-full items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"rounded-full bg-emerald-600 text-white px-3 py-2 text-xs font-semibold disabled:opacity-50 flex-none",disabled:!l||!L,onClick:()=>void Je(),children:"Sync Now"}),i.jsx("button",{className:"rounded-full bg-slate-900 text-white px-3 py-2 text-xs font-semibold flex-none",onClick:()=>l?Y(!0):void Ie(!0,"cta"),children:"Manage Files"})]}),i.jsxs("button",{type:"button",onClick:b0,className:"relative ml-auto inline-flex h-9 w-9 items-center justify-center rounded-full bg-slate-100 text-slate-700 hover:bg-slate-200 flex-none",title:"Messages","aria-label":"Messages",children:[i.jsx("span",{"aria-hidden":!0,className:"text-2xl leading-none",children:""}),vn>0&&i.jsx("span",{className:"absolute -top-1 -right-1 inline-flex min-w-[16px] items-center justify-center rounded-full bg-violet-600 text-white px-1 py-0.5 text-[10px] font-semibold",children:vn})]})]})]})}),i.jsx(US,{isOpen:K,onRequestClose:()=>ct(!1),unreadMessages:Ve,allMessages:dt,dismissedIds:cn,onDismiss:N0}),i.jsx(DS,{open:Z,onClose:()=>ce(!1),buildRevision:Kp})]}),Pe&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center px-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-4 text-center space-y-2 text-slate-900",children:[i.jsx("p",{className:"text-base font-semibold",children:"Mobile paused while offline"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Edits are disabled while offline. Reconnect to resume."}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Last sync: ",pl?new Date(pl).toLocaleTimeString():"No sync yet"]})]})})]})})}function T1({toasts:e}){return i.jsx("div",{className:"fixed right-4 top-4 z-[1000] flex w-[320px] max-w-[calc(100vw-2rem)] flex-col gap-2",children:e.map(t=>{const n=t.kind==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":t.kind==="error"?"border-rose-200 bg-rose-50 text-rose-900":t.kind==="warning"?"border-amber-200 bg-amber-50 text-amber-900":"border-slate-200 bg-slate-50 text-slate-800",r=t.kind==="success"?"":t.kind==="error"?"":t.kind==="warning"?"":"";return i.jsx("div",{className:`rounded-xl border px-3 py-2 shadow-sm ${n}`,children:i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx("span",{"aria-hidden":"true",children:r}),i.jsx("div",{className:"leading-snug",children:t.message})]})},t.id)})})}function P1({open:e,opts:t,onCancel:n,onConfirm:r}){if(!e||!t)return null;const s=t.tone??"default",o=t.confirmText??"Confirm",l=t.cancelText===null,u=t.cancelText??"Cancel",c=s==="danger"?"bg-rose-600 hover:bg-rose-700 text-white":"bg-indigo-600 hover:bg-indigo-700 text-white";return i.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/40 p-4",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl border border-slate-200",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.title}),i.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t.message})]}),i.jsxs("div",{className:"p-5 flex items-center justify-end gap-2",children:[!l&&i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:n,children:u}),i.jsx("button",{className:`rounded-xl px-4 py-2 text-sm font-semibold ${c}`,onClick:r,children:o})]})]})})}function A1({open:e,opts:t,onCancel:n,onConfirm:r}){const[s,o]=f.useState("");if(f.useEffect(()=>{e&&t&&o(t.defaultValue??"")},[e,t]),!e||!t)return null;const l=t.confirmText??"OK",u=t.cancelText??"Cancel",c=t.inputType??"text";return i.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/40 p-4",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl border border-slate-200",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.title}),t.message&&i.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t.message})]}),i.jsxs("div",{className:"p-5 space-y-3",children:[i.jsx("input",{autoFocus:!0,type:c,value:s,onChange:d=>o(d.target.value),placeholder:t.placeholder??"",className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-200"}),i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:n,children:u}),i.jsx("button",{className:"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700",onClick:()=>r(s),children:l})]})]})]})})}function R1(){return Math.random().toString(16).slice(2)+Date.now().toString(16)}function I1({children:e}){const[t,n]=f.useState([]),r=f.useRef(null),[s,o]=f.useState(!1),[l,u]=f.useState(null),c=f.useRef(null),[d,y]=f.useState(!1),[v,w]=f.useState(null),j=f.useCallback((h,m,x=2500)=>{const _=R1(),D={id:_,kind:h,message:m,durationMs:x};n(U=>[...U,D]),window.setTimeout(()=>{n(U=>U.filter(B=>B.id!==_))},x)},[]),k=f.useCallback(h=>(u(h),o(!0),new Promise(m=>{r.current=m})),[]),N=f.useCallback(h=>(w(h),y(!0),new Promise(m=>{c.current=m})),[]),q=f.useMemo(()=>({toast:j,confirm:k,prompt:N}),[j,k,N]);return i.jsxs(kv.Provider,{value:q,children:[e,i.jsx(T1,{toasts:t}),i.jsx(P1,{open:s,opts:l,onCancel:()=>{o(!1);const h=r.current;r.current=null,h==null||h(!1)},onConfirm:()=>{o(!1);const h=r.current;r.current=null,h==null||h(!0)}}),i.jsx(A1,{open:d,opts:v,onCancel:()=>{y(!1);const h=c.current;c.current=null,h==null||h(null)},onConfirm:h=>{y(!1);const m=c.current;c.current=null,m==null||m(h)}})]})}const fr={waiting:!1,registration:null},fc=new Set;let em=null;const pc="cs_sw_update_requested_v1",D1=2*60*1e3;function Xg(){for(const e of fc)e({...fr})}function tm(e){e&&em===e||(e&&(em=e),!fr.waiting&&(fr.waiting=!0,Xg()))}function L1(e){return fc.add(e),e({...fr}),()=>{fc.delete(e)}}async function O1(){var e,t,n;if("serviceWorker"in navigator&&!window.__cs_sw_registered){window.__cs_sw_registered=!0;try{const o=await navigator.serviceWorker.register("/service-worker.js?rev=d988790c804262e64079ff7c056b07be0d4ce632",{updateViaCache:"none"});fr.registration=o;const l=()=>{try{const d=window.sessionStorage.getItem(pc);if(!d)return!1;const y=Number(d);if(!Number.isFinite(y))return!1;const v=Date.now()-y<D1;return v||window.sessionStorage.removeItem(pc),v}catch{return!1}};if(o.waiting&&navigator.serviceWorker.controller){const d=l();console.info("[PWA] waiting SW detected",{active:(e=o.active)==null?void 0:e.scriptURL,waiting:(t=o.waiting)==null?void 0:t.scriptURL,controller:(n=navigator.serviceWorker.controller)==null?void 0:n.scriptURL,updateRequested:d}),d?o.waiting.postMessage({type:"SKIP_WAITING"}):tm(o.waiting.scriptURL)}o.addEventListener("updatefound",()=>{const d=o.installing;d&&d.addEventListener("statechange",()=>{var y,v,w,j;if(d.state==="installed"&&navigator.serviceWorker.controller){const k=l();console.info("[PWA] SW installed update",{active:(y=o.active)==null?void 0:y.scriptURL,waiting:(v=o.waiting)==null?void 0:v.scriptURL,installing:d.scriptURL,controller:(w=navigator.serviceWorker.controller)==null?void 0:w.scriptURL,updateRequested:k}),k?(j=o.waiting)==null||j.postMessage({type:"SKIP_WAITING"}):tm(d.scriptURL)}})});const u=()=>{fr.waiting||o.update().catch(()=>{})};window.addEventListener("focus",u),window.setInterval(u,6e4),Xg();let c=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{c||(c=!0,fr.waiting=!1,window.location.reload())})}catch(r){console.warn("[PWA] SW registration failed",r)}}}async function U1(){var t,n,r;const e=fr.registration;if(e!=null&&e.waiting){console.info("[PWA] activate update",{active:(t=e.active)==null?void 0:t.scriptURL,waiting:(n=e.waiting)==null?void 0:n.scriptURL,controller:(r=navigator.serviceWorker.controller)==null?void 0:r.scriptURL});try{window.sessionStorage.setItem(pc,String(Date.now()))}catch{}e.waiting.postMessage({type:"SKIP_WAITING"})}}function M1(){const[e,t]=f.useState({waiting:!1,registration:null});return f.useEffect(()=>L1(t),[]),e.waiting?i.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-[9999]",children:i.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-slate-900 text-white px-4 py-3 shadow-xl",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Update available"}),i.jsx("button",{className:"rounded-xl bg-white/15 hover:bg-white/25 px-3 py-1 text-sm font-semibold",onClick:async()=>{await U1()},children:"Refresh"})]})}):null}const F1=document.getElementById("root"),nm="cs_chunk_recovery";function Zg(e){if(!e)return!1;const t=typeof e=="string"?e:typeof e.message=="string"?e.message:"";return t.includes("Loading chunk")||t.includes("ChunkLoadError")||t.includes("Failed to fetch dynamically imported module")||t.includes("Importing a module script failed")}function e0(){sessionStorage.getItem(nm)||(sessionStorage.setItem(nm,"1"),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(e=>Promise.all(e.map(t=>t.unregister()))).finally(()=>window.location.reload()):window.location.reload())}window.addEventListener("error",e=>{Zg(e.error||e.message)&&e0()});window.addEventListener("unhandledrejection",e=>{Zg(e.reason)&&e0()});mu.createRoot(F1).render(i.jsx(pu.StrictMode,{children:i.jsx(uS,{children:i.jsxs(I1,{children:[i.jsx(_1,{}),i.jsx(M1,{})]})})})),O1();
