(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function hg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ep={exports:{}},vi={},tp={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),gg=Symbol.for("react.portal"),vg=Symbol.for("react.fragment"),yg=Symbol.for("react.strict_mode"),xg=Symbol.for("react.profiler"),wg=Symbol.for("react.provider"),Sg=Symbol.for("react.context"),Ng=Symbol.for("react.forward_ref"),kg=Symbol.for("react.suspense"),jg=Symbol.for("react.memo"),bg=Symbol.for("react.lazy"),xd=Symbol.iterator;function Cg(e){return e===null||typeof e!="object"?null:(e=xd&&e[xd]||e["@@iterator"],typeof e=="function"?e:null)}var np={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rp=Object.assign,sp={};function _s(e,t,n){this.props=e,this.context=t,this.refs=sp,this.updater=n||np}_s.prototype.isReactComponent={};_s.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lp(){}lp.prototype=_s.prototype;function Au(e,t,n){this.props=e,this.context=t,this.refs=sp,this.updater=n||np}var Lu=Au.prototype=new lp;Lu.constructor=Au;rp(Lu,_s.prototype);Lu.isPureReactComponent=!0;var wd=Array.isArray,op=Object.prototype.hasOwnProperty,Ou={current:null},ip={key:!0,ref:!0,__self:!0,__source:!0};function ap(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)op.call(t,r)&&!ip.hasOwnProperty(r)&&(s[r]=t[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Al,type:e,key:l,ref:o,props:s,_owner:Ou.current}}function Eg(e,t){return{$$typeof:Al,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Al}function _g(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sd=/\/+/g;function la(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_g(""+e.key):t.toString(36)}function Co(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Al:case gg:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+la(o,0):r,wd(s)?(n="",e!=null&&(n=e.replace(Sd,"$&/")+"/"),Co(s,t,n,"",function(d){return d})):s!=null&&(Mu(s)&&(s=Eg(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",wd(e))for(var u=0;u<e.length;u++){l=e[u];var c=r+la(l,u);o+=Co(l,t,n,c,s)}else if(c=Cg(e),typeof c=="function")for(e=c.call(e),u=0;!(l=e.next()).done;)l=l.value,c=r+la(l,u++),o+=Co(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function oo(e,t,n){if(e==null)return e;var r=[],s=0;return Co(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Pg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},Eo={transition:null},Tg={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Eo,ReactCurrentOwner:Ou};function up(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:oo,forEach:function(e,t,n){oo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return oo(e,function(){t++}),t},toArray:function(e){return oo(e,function(t){return t})||[]},only:function(e){if(!Mu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=_s;ne.Fragment=vg;ne.Profiler=xg;ne.PureComponent=Au;ne.StrictMode=yg;ne.Suspense=kg;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tg;ne.act=up;ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rp({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Ou.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)op.call(t,c)&&!ip.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Al,type:e.type,key:s,ref:l,props:r,_owner:o}};ne.createContext=function(e){return e={$$typeof:Sg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wg,_context:e},e.Consumer=e};ne.createElement=ap;ne.createFactory=function(e){var t=ap.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:Ng,render:e}};ne.isValidElement=Mu;ne.lazy=function(e){return{$$typeof:bg,_payload:{_status:-1,_result:e},_init:Pg}};ne.memo=function(e,t){return{$$typeof:jg,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=Eo.transition;Eo.transition={};try{e()}finally{Eo.transition=t}};ne.unstable_act=up;ne.useCallback=function(e,t){return ct.current.useCallback(e,t)};ne.useContext=function(e){return ct.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};ne.useEffect=function(e,t){return ct.current.useEffect(e,t)};ne.useId=function(){return ct.current.useId()};ne.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};ne.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return ct.current.useMemo(e,t)};ne.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};ne.useRef=function(e){return ct.current.useRef(e)};ne.useState=function(e){return ct.current.useState(e)};ne.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};ne.useTransition=function(){return ct.current.useTransition()};ne.version="18.3.1";tp.exports=ne;var p=tp.exports;const Ig=hg(p);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg=p,Dg=Symbol.for("react.element"),Ag=Symbol.for("react.fragment"),Lg=Object.prototype.hasOwnProperty,Og=Rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mg={key:!0,ref:!0,__self:!0,__source:!0};function cp(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Lg.call(t,r)&&!Mg.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Dg,type:e,key:l,ref:o,props:s,_owner:Og.current}}vi.Fragment=Ag;vi.jsx=cp;vi.jsxs=cp;ep.exports=vi;var i=ep.exports,La={},dp={exports:{}},Dt={},fp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,Q){var X=T.length;T.push(Q);e:for(;0<X;){var pe=X-1>>>1,me=T[pe];if(0<s(me,Q))T[pe]=Q,T[X]=me,X=pe;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var Q=T[0],X=T.pop();if(X!==Q){T[0]=X;e:for(var pe=0,me=T.length,Ht=me>>>1;pe<Ht;){var L=2*(pe+1)-1,Ke=T[L],Fe=L+1,Be=T[Fe];if(0>s(Ke,X))Fe<me&&0>s(Be,Ke)?(T[pe]=Be,T[Fe]=X,pe=Fe):(T[pe]=Ke,T[L]=X,pe=L);else if(Fe<me&&0>s(Be,X))T[pe]=Be,T[Fe]=X,pe=Fe;else break e}}return Q}function s(T,Q){var X=T.sortIndex-Q.sortIndex;return X!==0?X:T.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,u=o.now();e.unstable_now=function(){return o.now()-u}}var c=[],d=[],y=1,S=null,x=3,j=!1,b=!1,k=!1,J=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=T)r(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=n(d)}}function C(T){if(k=!1,g(T),!b)if(n(c)!==null)b=!0,W(A);else{var Q=n(d);Q!==null&&he(C,Q.startTime-T)}}function A(T,Q){b=!1,k&&(k=!1,h(z),z=-1),j=!0;var X=x;try{for(g(Q),S=n(c);S!==null&&(!(S.expirationTime>Q)||T&&!ke());){var pe=S.callback;if(typeof pe=="function"){S.callback=null,x=S.priorityLevel;var me=pe(S.expirationTime<=Q);Q=e.unstable_now(),typeof me=="function"?S.callback=me:S===n(c)&&r(c),g(Q)}else r(c);S=n(c)}if(S!==null)var Ht=!0;else{var L=n(d);L!==null&&he(C,L.startTime-Q),Ht=!1}return Ht}finally{S=null,x=X,j=!1}}var O=!1,F=null,z=-1,de=5,q=-1;function ke(){return!(e.unstable_now()-q<de)}function Ze(){if(F!==null){var T=e.unstable_now();q=T;var Q=!0;try{Q=F(!0,T)}finally{Q?et():(O=!1,F=null)}}else O=!1}var et;if(typeof f=="function")et=function(){f(Ze)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,Me=Z.port2;Z.port1.onmessage=Ze,et=function(){Me.postMessage(null)}}else et=function(){J(Ze,0)};function W(T){F=T,O||(O=!0,et())}function he(T,Q){z=J(function(){T(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){b||j||(b=!0,W(A))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var X=x;x=Q;try{return T()}finally{x=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,Q){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var X=x;x=T;try{return Q()}finally{x=X}},e.unstable_scheduleCallback=function(T,Q,X){var pe=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?pe+X:pe):X=pe,T){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,T={id:y++,callback:Q,priorityLevel:T,startTime:X,expirationTime:me,sortIndex:-1},X>pe?(T.sortIndex=X,t(d,T),n(c)===null&&T===n(d)&&(k?(h(z),z=-1):k=!0,he(C,X-pe))):(T.sortIndex=me,t(c,T),b||j||(b=!0,W(A))),T},e.unstable_shouldYield=ke,e.unstable_wrapCallback=function(T){var Q=x;return function(){var X=x;x=Q;try{return T.apply(this,arguments)}finally{x=X}}}})(pp);fp.exports=pp;var Fg=fp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug=p,Rt=Fg;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mp=new Set,vl={};function Ar(e,t){ys(e,t),ys(e+"Capture",t)}function ys(e,t){for(vl[e]=t,e=0;e<t.length;e++)mp.add(t[e])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oa=Object.prototype.hasOwnProperty,zg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nd={},kd={};function $g(e){return Oa.call(kd,e)?!0:Oa.call(Nd,e)?!1:zg.test(e)?kd[e]=!0:(Nd[e]=!0,!1)}function Bg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wg(e,t,n,r){if(t===null||typeof t>"u"||Bg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fu=/[\-:]([a-z])/g;function Uu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fu,Uu);qe[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fu,Uu);qe[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fu,Uu);qe[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function zu(e,t,n,r){var s=qe.hasOwnProperty(t)?qe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wg(t,n,s,r)&&(n=null),r||s===null?$g(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Tn=Ug.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,io=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),$u=Symbol.for("react.strict_mode"),Ma=Symbol.for("react.profiler"),hp=Symbol.for("react.provider"),gp=Symbol.for("react.context"),Bu=Symbol.for("react.forward_ref"),Fa=Symbol.for("react.suspense"),Ua=Symbol.for("react.suspense_list"),Wu=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),vp=Symbol.for("react.offscreen"),jd=Symbol.iterator;function Ws(e){return e===null||typeof e!="object"?null:(e=jd&&e[jd]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,oa;function el(e){if(oa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);oa=t&&t[1]||""}return`
`+oa+e}var ia=!1;function aa(e,t){if(!e||ia)return"";ia=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,u=l.length-1;1<=o&&0<=u&&s[o]!==l[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==l[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==l[u]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=u);break}}}finally{ia=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?el(e):""}function Hg(e){switch(e.tag){case 5:return el(e.type);case 16:return el("Lazy");case 13:return el("Suspense");case 19:return el("SuspenseList");case 0:case 2:case 15:return e=aa(e.type,!1),e;case 11:return e=aa(e.type.render,!1),e;case 1:return e=aa(e.type,!0),e;default:return""}}function za(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qr:return"Fragment";case Xr:return"Portal";case Ma:return"Profiler";case $u:return"StrictMode";case Fa:return"Suspense";case Ua:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gp:return(e.displayName||"Context")+".Consumer";case hp:return(e._context.displayName||"Context")+".Provider";case Bu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wu:return t=e.displayName||null,t!==null?t:za(e.type)||"Memo";case Bn:t=e._payload,e=e._init;try{return za(e(t))}catch{}}return null}function Vg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return za(t);case 8:return t===$u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gg(e){var t=yp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ao(e){e._valueTracker||(e._valueTracker=Gg(e))}function xp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=yp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $a(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wp(e,t){t=t.checked,t!=null&&zu(e,"checked",t,!1)}function Ba(e,t){wp(e,t);var n=sr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Wa(e,t.type,sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Wa(e,t,n){(t!=="number"||Bo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tl=Array.isArray;function us(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ha(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ed(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(tl(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sr(n)}}function Sp(e,t){var n=sr(t.value),r=sr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _d(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Np(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Va(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Np(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uo,kp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kg=["Webkit","ms","Moz","O"];Object.keys(il).forEach(function(e){Kg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),il[t]=il[e]})});function jp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||il.hasOwnProperty(e)&&il[e]?(""+t).trim():t+"px"}function bp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Qg=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ga(e,t){if(t){if(Qg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function Ka(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa=null;function Hu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ya=null,cs=null,ds=null;function Pd(e){if(e=Ml(e)){if(typeof Ya!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Ni(t),Ya(e.stateNode,e.type,t))}}function Cp(e){cs?ds?ds.push(e):ds=[e]:cs=e}function Ep(){if(cs){var e=cs,t=ds;if(ds=cs=null,Pd(e),t)for(e=0;e<t.length;e++)Pd(t[e])}}function _p(e,t){return e(t)}function Pp(){}var ua=!1;function Tp(e,t,n){if(ua)return e(t,n);ua=!0;try{return _p(e,t,n)}finally{ua=!1,(cs!==null||ds!==null)&&(Pp(),Ep())}}function xl(e,t){var n=e.stateNode;if(n===null)return null;var r=Ni(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var Ja=!1;if(Cn)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){Ja=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{Ja=!1}function Yg(e,t,n,r,s,l,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(y){this.onError(y)}}var al=!1,Wo=null,Ho=!1,Xa=null,Jg={onError:function(e){al=!0,Wo=e}};function Xg(e,t,n,r,s,l,o,u,c){al=!1,Wo=null,Yg.apply(Jg,arguments)}function qg(e,t,n,r,s,l,o,u,c){if(Xg.apply(this,arguments),al){if(al){var d=Wo;al=!1,Wo=null}else throw Error(I(198));Ho||(Ho=!0,Xa=d)}}function Lr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ip(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Td(e){if(Lr(e)!==e)throw Error(I(188))}function Zg(e){var t=e.alternate;if(!t){if(t=Lr(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Td(s),e;if(l===r)return Td(s),t;l=l.sibling}throw Error(I(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=l;break}if(u===r){o=!0,r=s,n=l;break}u=u.sibling}if(!o){for(u=l.child;u;){if(u===n){o=!0,n=l,r=s;break}if(u===r){o=!0,r=l,n=s;break}u=u.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function Rp(e){return e=Zg(e),e!==null?Dp(e):null}function Dp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dp(e);if(t!==null)return t;e=e.sibling}return null}var Ap=Rt.unstable_scheduleCallback,Id=Rt.unstable_cancelCallback,e0=Rt.unstable_shouldYield,t0=Rt.unstable_requestPaint,Re=Rt.unstable_now,n0=Rt.unstable_getCurrentPriorityLevel,Vu=Rt.unstable_ImmediatePriority,Lp=Rt.unstable_UserBlockingPriority,Vo=Rt.unstable_NormalPriority,r0=Rt.unstable_LowPriority,Op=Rt.unstable_IdlePriority,yi=null,un=null;function s0(e){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(yi,e,void 0,(e.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:i0,l0=Math.log,o0=Math.LN2;function i0(e){return e>>>=0,e===0?32:31-(l0(e)/o0|0)|0}var co=64,fo=4194304;function nl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Go(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=nl(u):(l&=o,l!==0&&(r=nl(l)))}else o=n&~s,o!==0?r=nl(o):l!==0&&(r=nl(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qt(t),s=1<<n,r|=e[n],t&=~s;return r}function a0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-qt(l),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=a0(u,t)):c<=t&&(e.expiredLanes|=u),l&=~u}}function qa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mp(){var e=co;return co<<=1,!(co&4194240)&&(co=64),e}function ca(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ll(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qt(t),e[t]=n}function c0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-qt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Gu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var fe=0;function Fp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Up,Ku,zp,$p,Bp,Za=!1,po=[],Qn=null,Yn=null,Jn=null,wl=new Map,Sl=new Map,Hn=[],d0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rd(e,t){switch(e){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":wl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(t.pointerId)}}function Vs(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Ml(t),t!==null&&Ku(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function f0(e,t,n,r,s){switch(t){case"focusin":return Qn=Vs(Qn,e,t,n,r,s),!0;case"dragenter":return Yn=Vs(Yn,e,t,n,r,s),!0;case"mouseover":return Jn=Vs(Jn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return wl.set(l,Vs(wl.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Sl.set(l,Vs(Sl.get(l)||null,e,t,n,r,s)),!0}return!1}function Wp(e){var t=Sr(e.target);if(t!==null){var n=Lr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ip(n),t!==null){e.blockedOn=t,Bp(e.priority,function(){zp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _o(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=eu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Qa=r,n.target.dispatchEvent(r),Qa=null}else return t=Ml(n),t!==null&&Ku(t),e.blockedOn=n,!1;t.shift()}return!0}function Dd(e,t,n){_o(e)&&n.delete(t)}function p0(){Za=!1,Qn!==null&&_o(Qn)&&(Qn=null),Yn!==null&&_o(Yn)&&(Yn=null),Jn!==null&&_o(Jn)&&(Jn=null),wl.forEach(Dd),Sl.forEach(Dd)}function Gs(e,t){e.blockedOn===t&&(e.blockedOn=null,Za||(Za=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,p0)))}function Nl(e){function t(s){return Gs(s,e)}if(0<po.length){Gs(po[0],e);for(var n=1;n<po.length;n++){var r=po[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Qn!==null&&Gs(Qn,e),Yn!==null&&Gs(Yn,e),Jn!==null&&Gs(Jn,e),wl.forEach(t),Sl.forEach(t),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)Wp(n),n.blockedOn===null&&Hn.shift()}var fs=Tn.ReactCurrentBatchConfig,Ko=!0;function m0(e,t,n,r){var s=fe,l=fs.transition;fs.transition=null;try{fe=1,Qu(e,t,n,r)}finally{fe=s,fs.transition=l}}function h0(e,t,n,r){var s=fe,l=fs.transition;fs.transition=null;try{fe=4,Qu(e,t,n,r)}finally{fe=s,fs.transition=l}}function Qu(e,t,n,r){if(Ko){var s=eu(e,t,n,r);if(s===null)wa(e,t,r,Qo,n),Rd(e,r);else if(f0(s,e,t,n,r))r.stopPropagation();else if(Rd(e,r),t&4&&-1<d0.indexOf(e)){for(;s!==null;){var l=Ml(s);if(l!==null&&Up(l),l=eu(e,t,n,r),l===null&&wa(e,t,r,Qo,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else wa(e,t,r,null,n)}}var Qo=null;function eu(e,t,n,r){if(Qo=null,e=Hu(r),e=Sr(e),e!==null)if(t=Lr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ip(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qo=e,null}function Hp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n0()){case Vu:return 1;case Lp:return 4;case Vo:case r0:return 16;case Op:return 536870912;default:return 16}default:return 16}}var Gn=null,Yu=null,Po=null;function Vp(){if(Po)return Po;var e,t=Yu,n=t.length,r,s="value"in Gn?Gn.value:Gn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return Po=s.slice(e,1<r?1-r:void 0)}function To(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mo(){return!0}function Ad(){return!1}function At(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?mo:Ad,this.isPropagationStopped=Ad,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),t}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=At(Ps),Ol=Pe({},Ps,{view:0,detail:0}),g0=At(Ol),da,fa,Ks,xi=Pe({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ks&&(Ks&&e.type==="mousemove"?(da=e.screenX-Ks.screenX,fa=e.screenY-Ks.screenY):fa=da=0,Ks=e),da)},movementY:function(e){return"movementY"in e?e.movementY:fa}}),Ld=At(xi),v0=Pe({},xi,{dataTransfer:0}),y0=At(v0),x0=Pe({},Ol,{relatedTarget:0}),pa=At(x0),w0=Pe({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),S0=At(w0),N0=Pe({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),k0=At(N0),j0=Pe({},Ps,{data:0}),Od=At(j0),b0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=E0[e])?!!t[e]:!1}function Xu(){return _0}var P0=Pe({},Ol,{key:function(e){if(e.key){var t=b0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=To(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?C0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xu,charCode:function(e){return e.type==="keypress"?To(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?To(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),T0=At(P0),I0=Pe({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Md=At(I0),R0=Pe({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xu}),D0=At(R0),A0=Pe({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),L0=At(A0),O0=Pe({},xi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),M0=At(O0),F0=[9,13,27,32],qu=Cn&&"CompositionEvent"in window,ul=null;Cn&&"documentMode"in document&&(ul=document.documentMode);var U0=Cn&&"TextEvent"in window&&!ul,Gp=Cn&&(!qu||ul&&8<ul&&11>=ul),Fd=" ",Ud=!1;function Kp(e,t){switch(e){case"keyup":return F0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function z0(e,t){switch(e){case"compositionend":return Qp(t);case"keypress":return t.which!==32?null:(Ud=!0,Fd);case"textInput":return e=t.data,e===Fd&&Ud?null:e;default:return null}}function $0(e,t){if(Zr)return e==="compositionend"||!qu&&Kp(e,t)?(e=Vp(),Po=Yu=Gn=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gp&&t.locale!=="ko"?null:t.data;default:return null}}var B0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!B0[e.type]:t==="textarea"}function Yp(e,t,n,r){Cp(r),t=Yo(t,"onChange"),0<t.length&&(n=new Ju("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var cl=null,kl=null;function W0(e){om(e,0)}function wi(e){var t=ns(e);if(xp(t))return e}function H0(e,t){if(e==="change")return t}var Jp=!1;if(Cn){var ma;if(Cn){var ha="oninput"in document;if(!ha){var $d=document.createElement("div");$d.setAttribute("oninput","return;"),ha=typeof $d.oninput=="function"}ma=ha}else ma=!1;Jp=ma&&(!document.documentMode||9<document.documentMode)}function Bd(){cl&&(cl.detachEvent("onpropertychange",Xp),kl=cl=null)}function Xp(e){if(e.propertyName==="value"&&wi(kl)){var t=[];Yp(t,kl,e,Hu(e)),Tp(W0,t)}}function V0(e,t,n){e==="focusin"?(Bd(),cl=t,kl=n,cl.attachEvent("onpropertychange",Xp)):e==="focusout"&&Bd()}function G0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wi(kl)}function K0(e,t){if(e==="click")return wi(t)}function Q0(e,t){if(e==="input"||e==="change")return wi(t)}function Y0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var en=typeof Object.is=="function"?Object.is:Y0;function jl(e,t){if(en(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Oa.call(t,s)||!en(e[s],t[s]))return!1}return!0}function Wd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hd(e,t){var n=Wd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wd(n)}}function qp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zp(){for(var e=window,t=Bo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bo(e.document)}return t}function Zu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function J0(e){var t=Zp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&qp(n.ownerDocument.documentElement,n)){if(r!==null&&Zu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Hd(n,l);var o=Hd(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var X0=Cn&&"documentMode"in document&&11>=document.documentMode,es=null,tu=null,dl=null,nu=!1;function Vd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nu||es==null||es!==Bo(r)||(r=es,"selectionStart"in r&&Zu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&jl(dl,r)||(dl=r,r=Yo(tu,"onSelect"),0<r.length&&(t=new Ju("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=es)))}function ho(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ts={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionend:ho("Transition","TransitionEnd")},ga={},em={};Cn&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function Si(e){if(ga[e])return ga[e];if(!ts[e])return e;var t=ts[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in em)return ga[e]=t[n];return e}var tm=Si("animationend"),nm=Si("animationiteration"),rm=Si("animationstart"),sm=Si("transitionend"),lm=new Map,Gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){lm.set(e,t),Ar(t,[e])}for(var va=0;va<Gd.length;va++){var ya=Gd[va],q0=ya.toLowerCase(),Z0=ya[0].toUpperCase()+ya.slice(1);ir(q0,"on"+Z0)}ir(tm,"onAnimationEnd");ir(nm,"onAnimationIteration");ir(rm,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(sm,"onTransitionEnd");ys("onMouseEnter",["mouseout","mouseover"]);ys("onMouseLeave",["mouseout","mouseover"]);ys("onPointerEnter",["pointerout","pointerover"]);ys("onPointerLeave",["pointerout","pointerover"]);Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ev=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function Kd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qg(r,t,void 0,e),e.currentTarget=null}function om(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==l&&s.isPropagationStopped())break e;Kd(s,u,d),l=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==l&&s.isPropagationStopped())break e;Kd(s,u,d),l=c}}}if(Ho)throw e=Xa,Ho=!1,Xa=null,e}function Se(e,t){var n=t[iu];n===void 0&&(n=t[iu]=new Set);var r=e+"__bubble";n.has(r)||(im(t,e,2,!1),n.add(r))}function xa(e,t,n){var r=0;t&&(r|=4),im(n,e,r,t)}var go="_reactListening"+Math.random().toString(36).slice(2);function bl(e){if(!e[go]){e[go]=!0,mp.forEach(function(n){n!=="selectionchange"&&(ev.has(n)||xa(n,!1,e),xa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[go]||(t[go]=!0,xa("selectionchange",!1,t))}}function im(e,t,n,r){switch(Hp(t)){case 1:var s=m0;break;case 4:s=h0;break;default:s=Qu}n=s.bind(null,t,n,e),s=void 0,!Ja||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function wa(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Sr(u),o===null)return;if(c=o.tag,c===5||c===6){r=l=o;continue e}u=u.parentNode}}r=r.return}Tp(function(){var d=l,y=Hu(n),S=[];e:{var x=lm.get(e);if(x!==void 0){var j=Ju,b=e;switch(e){case"keypress":if(To(n)===0)break e;case"keydown":case"keyup":j=T0;break;case"focusin":b="focus",j=pa;break;case"focusout":b="blur",j=pa;break;case"beforeblur":case"afterblur":j=pa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=y0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=D0;break;case tm:case nm:case rm:j=S0;break;case sm:j=L0;break;case"scroll":j=g0;break;case"wheel":j=M0;break;case"copy":case"cut":case"paste":j=k0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Md}var k=(t&4)!==0,J=!k&&e==="scroll",h=k?x!==null?x+"Capture":null:x;k=[];for(var f=d,g;f!==null;){g=f;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,h!==null&&(C=xl(f,h),C!=null&&k.push(Cl(f,C,g)))),J)break;f=f.return}0<k.length&&(x=new j(x,b,null,n,y),S.push({event:x,listeners:k}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",x&&n!==Qa&&(b=n.relatedTarget||n.fromElement)&&(Sr(b)||b[En]))break e;if((j||x)&&(x=y.window===y?y:(x=y.ownerDocument)?x.defaultView||x.parentWindow:window,j?(b=n.relatedTarget||n.toElement,j=d,b=b?Sr(b):null,b!==null&&(J=Lr(b),b!==J||b.tag!==5&&b.tag!==6)&&(b=null)):(j=null,b=d),j!==b)){if(k=Ld,C="onMouseLeave",h="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(k=Md,C="onPointerLeave",h="onPointerEnter",f="pointer"),J=j==null?x:ns(j),g=b==null?x:ns(b),x=new k(C,f+"leave",j,n,y),x.target=J,x.relatedTarget=g,C=null,Sr(y)===d&&(k=new k(h,f+"enter",b,n,y),k.target=g,k.relatedTarget=J,C=k),J=C,j&&b)t:{for(k=j,h=b,f=0,g=k;g;g=Yr(g))f++;for(g=0,C=h;C;C=Yr(C))g++;for(;0<f-g;)k=Yr(k),f--;for(;0<g-f;)h=Yr(h),g--;for(;f--;){if(k===h||h!==null&&k===h.alternate)break t;k=Yr(k),h=Yr(h)}k=null}else k=null;j!==null&&Qd(S,x,j,k,!1),b!==null&&J!==null&&Qd(S,J,b,k,!0)}}e:{if(x=d?ns(d):window,j=x.nodeName&&x.nodeName.toLowerCase(),j==="select"||j==="input"&&x.type==="file")var A=H0;else if(zd(x))if(Jp)A=Q0;else{A=G0;var O=V0}else(j=x.nodeName)&&j.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(A=K0);if(A&&(A=A(e,d))){Yp(S,A,n,y);break e}O&&O(e,x,d),e==="focusout"&&(O=x._wrapperState)&&O.controlled&&x.type==="number"&&Wa(x,"number",x.value)}switch(O=d?ns(d):window,e){case"focusin":(zd(O)||O.contentEditable==="true")&&(es=O,tu=d,dl=null);break;case"focusout":dl=tu=es=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,Vd(S,n,y);break;case"selectionchange":if(X0)break;case"keydown":case"keyup":Vd(S,n,y)}var F;if(qu)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Zr?Kp(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(Gp&&n.locale!=="ko"&&(Zr||z!=="onCompositionStart"?z==="onCompositionEnd"&&Zr&&(F=Vp()):(Gn=y,Yu="value"in Gn?Gn.value:Gn.textContent,Zr=!0)),O=Yo(d,z),0<O.length&&(z=new Od(z,e,null,n,y),S.push({event:z,listeners:O}),F?z.data=F:(F=Qp(n),F!==null&&(z.data=F)))),(F=U0?z0(e,n):$0(e,n))&&(d=Yo(d,"onBeforeInput"),0<d.length&&(y=new Od("onBeforeInput","beforeinput",null,n,y),S.push({event:y,listeners:d}),y.data=F))}om(S,t)})}function Cl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=xl(e,n),l!=null&&r.unshift(Cl(e,l,s)),l=xl(e,t),l!=null&&r.push(Cl(e,l,s))),e=e.return}return r}function Yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qd(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=xl(n,l),c!=null&&o.unshift(Cl(n,c,u))):s||(c=xl(n,l),c!=null&&o.push(Cl(n,c,u)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var tv=/\r\n?/g,nv=/\u0000|\uFFFD/g;function Yd(e){return(typeof e=="string"?e:""+e).replace(tv,`
`).replace(nv,"")}function vo(e,t,n){if(t=Yd(t),Yd(e)!==t&&n)throw Error(I(425))}function Jo(){}var ru=null,su=null;function lu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ou=typeof setTimeout=="function"?setTimeout:void 0,rv=typeof clearTimeout=="function"?clearTimeout:void 0,Jd=typeof Promise=="function"?Promise:void 0,sv=typeof queueMicrotask=="function"?queueMicrotask:typeof Jd<"u"?function(e){return Jd.resolve(null).then(e).catch(lv)}:ou;function lv(e){setTimeout(function(){throw e})}function Sa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Nl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nl(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),an="__reactFiber$"+Ts,El="__reactProps$"+Ts,En="__reactContainer$"+Ts,iu="__reactEvents$"+Ts,ov="__reactListeners$"+Ts,iv="__reactHandles$"+Ts;function Sr(e){var t=e[an];if(t)return t;for(var n=e.parentNode;n;){if(t=n[En]||n[an]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xd(e);e!==null;){if(n=e[an])return n;e=Xd(e)}return t}e=n,n=e.parentNode}return null}function Ml(e){return e=e[an]||e[En],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ns(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Ni(e){return e[El]||null}var au=[],rs=-1;function ar(e){return{current:e}}function Ne(e){0>rs||(e.current=au[rs],au[rs]=null,rs--)}function we(e,t){rs++,au[rs]=e.current,e.current=t}var lr={},st=ar(lr),St=ar(!1),Er=lr;function xs(e,t){var n=e.type.contextTypes;if(!n)return lr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(e){return e=e.childContextTypes,e!=null}function Xo(){Ne(St),Ne(st)}function qd(e,t,n){if(st.current!==lr)throw Error(I(168));we(st,t),we(St,n)}function am(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(I(108,Vg(e)||"Unknown",s));return Pe({},n,r)}function qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lr,Er=st.current,we(st,e),we(St,St.current),!0}function Zd(e,t,n){var r=e.stateNode;if(!r)throw Error(I(169));n?(e=am(e,t,Er),r.__reactInternalMemoizedMergedChildContext=e,Ne(St),Ne(st),we(st,e)):Ne(St),we(St,n)}var Sn=null,ki=!1,Na=!1;function um(e){Sn===null?Sn=[e]:Sn.push(e)}function av(e){ki=!0,um(e)}function ur(){if(!Na&&Sn!==null){Na=!0;var e=0,t=fe;try{var n=Sn;for(fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Sn=null,ki=!1}catch(s){throw Sn!==null&&(Sn=Sn.slice(e+1)),Ap(Vu,ur),s}finally{fe=t,Na=!1}}return null}var ss=[],ls=0,Zo=null,ei=0,Ft=[],Ut=0,_r=null,Nn=1,kn="";function yr(e,t){ss[ls++]=ei,ss[ls++]=Zo,Zo=e,ei=t}function cm(e,t,n){Ft[Ut++]=Nn,Ft[Ut++]=kn,Ft[Ut++]=_r,_r=e;var r=Nn;e=kn;var s=32-qt(r)-1;r&=~(1<<s),n+=1;var l=32-qt(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Nn=1<<32-qt(t)+s|n<<s|r,kn=l+e}else Nn=1<<l|n<<s|r,kn=e}function ec(e){e.return!==null&&(yr(e,1),cm(e,1,0))}function tc(e){for(;e===Zo;)Zo=ss[--ls],ss[ls]=null,ei=ss[--ls],ss[ls]=null;for(;e===_r;)_r=Ft[--Ut],Ft[Ut]=null,kn=Ft[--Ut],Ft[Ut]=null,Nn=Ft[--Ut],Ft[Ut]=null}var It=null,Tt=null,be=!1,Xt=null;function dm(e,t){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ef(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,Tt=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,Tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_r!==null?{id:Nn,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,It=e,Tt=null,!0):!1;default:return!1}}function uu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cu(e){if(be){var t=Tt;if(t){var n=t;if(!ef(e,t)){if(uu(e))throw Error(I(418));t=Xn(n.nextSibling);var r=It;t&&ef(e,t)?dm(r,n):(e.flags=e.flags&-4097|2,be=!1,It=e)}}else{if(uu(e))throw Error(I(418));e.flags=e.flags&-4097|2,be=!1,It=e}}}function tf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function yo(e){if(e!==It)return!1;if(!be)return tf(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lu(e.type,e.memoizedProps)),t&&(t=Tt)){if(uu(e))throw fm(),Error(I(418));for(;t;)dm(e,t),t=Xn(t.nextSibling)}if(tf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Tt=Xn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Tt=null}}else Tt=It?Xn(e.stateNode.nextSibling):null;return!0}function fm(){for(var e=Tt;e;)e=Xn(e.nextSibling)}function ws(){Tt=It=null,be=!1}function nc(e){Xt===null?Xt=[e]:Xt.push(e)}var uv=Tn.ReactCurrentBatchConfig;function Qs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var u=s.refs;o===null?delete u[l]:u[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function xo(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nf(e){var t=e._init;return t(e._payload)}function pm(e){function t(h,f){if(e){var g=h.deletions;g===null?(h.deletions=[f],h.flags|=16):g.push(f)}}function n(h,f){if(!e)return null;for(;f!==null;)t(h,f),f=f.sibling;return null}function r(h,f){for(h=new Map;f!==null;)f.key!==null?h.set(f.key,f):h.set(f.index,f),f=f.sibling;return h}function s(h,f){return h=tr(h,f),h.index=0,h.sibling=null,h}function l(h,f,g){return h.index=g,e?(g=h.alternate,g!==null?(g=g.index,g<f?(h.flags|=2,f):g):(h.flags|=2,f)):(h.flags|=1048576,f)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function u(h,f,g,C){return f===null||f.tag!==6?(f=Pa(g,h.mode,C),f.return=h,f):(f=s(f,g),f.return=h,f)}function c(h,f,g,C){var A=g.type;return A===qr?y(h,f,g.props.children,C,g.key):f!==null&&(f.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Bn&&nf(A)===f.type)?(C=s(f,g.props),C.ref=Qs(h,f,g),C.return=h,C):(C=Mo(g.type,g.key,g.props,null,h.mode,C),C.ref=Qs(h,f,g),C.return=h,C)}function d(h,f,g,C){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Ta(g,h.mode,C),f.return=h,f):(f=s(f,g.children||[]),f.return=h,f)}function y(h,f,g,C,A){return f===null||f.tag!==7?(f=Cr(g,h.mode,C,A),f.return=h,f):(f=s(f,g),f.return=h,f)}function S(h,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Pa(""+f,h.mode,g),f.return=h,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case io:return g=Mo(f.type,f.key,f.props,null,h.mode,g),g.ref=Qs(h,null,f),g.return=h,g;case Xr:return f=Ta(f,h.mode,g),f.return=h,f;case Bn:var C=f._init;return S(h,C(f._payload),g)}if(tl(f)||Ws(f))return f=Cr(f,h.mode,g,null),f.return=h,f;xo(h,f)}return null}function x(h,f,g,C){var A=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return A!==null?null:u(h,f,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case io:return g.key===A?c(h,f,g,C):null;case Xr:return g.key===A?d(h,f,g,C):null;case Bn:return A=g._init,x(h,f,A(g._payload),C)}if(tl(g)||Ws(g))return A!==null?null:y(h,f,g,C,null);xo(h,g)}return null}function j(h,f,g,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return h=h.get(g)||null,u(f,h,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case io:return h=h.get(C.key===null?g:C.key)||null,c(f,h,C,A);case Xr:return h=h.get(C.key===null?g:C.key)||null,d(f,h,C,A);case Bn:var O=C._init;return j(h,f,g,O(C._payload),A)}if(tl(C)||Ws(C))return h=h.get(g)||null,y(f,h,C,A,null);xo(f,C)}return null}function b(h,f,g,C){for(var A=null,O=null,F=f,z=f=0,de=null;F!==null&&z<g.length;z++){F.index>z?(de=F,F=null):de=F.sibling;var q=x(h,F,g[z],C);if(q===null){F===null&&(F=de);break}e&&F&&q.alternate===null&&t(h,F),f=l(q,f,z),O===null?A=q:O.sibling=q,O=q,F=de}if(z===g.length)return n(h,F),be&&yr(h,z),A;if(F===null){for(;z<g.length;z++)F=S(h,g[z],C),F!==null&&(f=l(F,f,z),O===null?A=F:O.sibling=F,O=F);return be&&yr(h,z),A}for(F=r(h,F);z<g.length;z++)de=j(F,h,z,g[z],C),de!==null&&(e&&de.alternate!==null&&F.delete(de.key===null?z:de.key),f=l(de,f,z),O===null?A=de:O.sibling=de,O=de);return e&&F.forEach(function(ke){return t(h,ke)}),be&&yr(h,z),A}function k(h,f,g,C){var A=Ws(g);if(typeof A!="function")throw Error(I(150));if(g=A.call(g),g==null)throw Error(I(151));for(var O=A=null,F=f,z=f=0,de=null,q=g.next();F!==null&&!q.done;z++,q=g.next()){F.index>z?(de=F,F=null):de=F.sibling;var ke=x(h,F,q.value,C);if(ke===null){F===null&&(F=de);break}e&&F&&ke.alternate===null&&t(h,F),f=l(ke,f,z),O===null?A=ke:O.sibling=ke,O=ke,F=de}if(q.done)return n(h,F),be&&yr(h,z),A;if(F===null){for(;!q.done;z++,q=g.next())q=S(h,q.value,C),q!==null&&(f=l(q,f,z),O===null?A=q:O.sibling=q,O=q);return be&&yr(h,z),A}for(F=r(h,F);!q.done;z++,q=g.next())q=j(F,h,z,q.value,C),q!==null&&(e&&q.alternate!==null&&F.delete(q.key===null?z:q.key),f=l(q,f,z),O===null?A=q:O.sibling=q,O=q);return e&&F.forEach(function(Ze){return t(h,Ze)}),be&&yr(h,z),A}function J(h,f,g,C){if(typeof g=="object"&&g!==null&&g.type===qr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case io:e:{for(var A=g.key,O=f;O!==null;){if(O.key===A){if(A=g.type,A===qr){if(O.tag===7){n(h,O.sibling),f=s(O,g.props.children),f.return=h,h=f;break e}}else if(O.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Bn&&nf(A)===O.type){n(h,O.sibling),f=s(O,g.props),f.ref=Qs(h,O,g),f.return=h,h=f;break e}n(h,O);break}else t(h,O);O=O.sibling}g.type===qr?(f=Cr(g.props.children,h.mode,C,g.key),f.return=h,h=f):(C=Mo(g.type,g.key,g.props,null,h.mode,C),C.ref=Qs(h,f,g),C.return=h,h=C)}return o(h);case Xr:e:{for(O=g.key;f!==null;){if(f.key===O)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(h,f.sibling),f=s(f,g.children||[]),f.return=h,h=f;break e}else{n(h,f);break}else t(h,f);f=f.sibling}f=Ta(g,h.mode,C),f.return=h,h=f}return o(h);case Bn:return O=g._init,J(h,f,O(g._payload),C)}if(tl(g))return b(h,f,g,C);if(Ws(g))return k(h,f,g,C);xo(h,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(h,f.sibling),f=s(f,g),f.return=h,h=f):(n(h,f),f=Pa(g,h.mode,C),f.return=h,h=f),o(h)):n(h,f)}return J}var Ss=pm(!0),mm=pm(!1),ti=ar(null),ni=null,os=null,rc=null;function sc(){rc=os=ni=null}function lc(e){var t=ti.current;Ne(ti),e._currentValue=t}function du(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ps(e,t){ni=e,rc=os=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(rc!==e)if(e={context:e,memoizedValue:t,next:null},os===null){if(ni===null)throw Error(I(308));os=e,ni.dependencies={lanes:0,firstContext:e}}else os=os.next=e;return t}var Nr=null;function oc(e){Nr===null?Nr=[e]:Nr.push(e)}function hm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,oc(t)):(n.next=s.next,s.next=n),t.interleaved=n,_n(e,r)}function _n(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wn=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,_n(e,n)}return s=r.interleaved,s===null?(t.next=t,oc(r)):(t.next=s.next,s.next=t),r.interleaved=t,_n(e,n)}function Io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gu(e,n)}}function rf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ri(e,t,n,r){var s=e.updateQueue;Wn=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var y=e.alternate;y!==null&&(y=y.updateQueue,u=y.lastBaseUpdate,u!==o&&(u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=c))}if(l!==null){var S=s.baseState;o=0,y=d=c=null,u=l;do{var x=u.lane,j=u.eventTime;if((r&x)===x){y!==null&&(y=y.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=e,k=u;switch(x=t,j=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){S=b.call(j,S,x);break e}S=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,x=typeof b=="function"?b.call(j,S,x):b,x==null)break e;S=Pe({},S,x);break e;case 2:Wn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,x=s.effects,x===null?s.effects=[u]:x.push(u))}else j={eventTime:j,lane:x,tag:u.tag,payload:u.payload,callback:u.callback,next:null},y===null?(d=y=j,c=S):y=y.next=j,o|=x;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;x=u,u=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(y===null&&(c=S),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=y,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Tr|=o,e.lanes=o,e.memoizedState=S}}function sf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(I(191,s));s.call(r)}}}var Fl={},cn=ar(Fl),_l=ar(Fl),Pl=ar(Fl);function kr(e){if(e===Fl)throw Error(I(174));return e}function ac(e,t){switch(we(Pl,t),we(_l,e),we(cn,Fl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Va(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Va(t,e)}Ne(cn),we(cn,t)}function Ns(){Ne(cn),Ne(_l),Ne(Pl)}function vm(e){kr(Pl.current);var t=kr(cn.current),n=Va(t,e.type);t!==n&&(we(_l,e),we(cn,n))}function uc(e){_l.current===e&&(Ne(cn),Ne(_l))}var Ee=ar(0);function si(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ka=[];function cc(){for(var e=0;e<ka.length;e++)ka[e]._workInProgressVersionPrimary=null;ka.length=0}var Ro=Tn.ReactCurrentDispatcher,ja=Tn.ReactCurrentBatchConfig,Pr=0,_e=null,ze=null,Ve=null,li=!1,fl=!1,Tl=0,cv=0;function tt(){throw Error(I(321))}function dc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!en(e[n],t[n]))return!1;return!0}function fc(e,t,n,r,s,l){if(Pr=l,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ro.current=e===null||e.memoizedState===null?mv:hv,e=n(r,s),fl){l=0;do{if(fl=!1,Tl=0,25<=l)throw Error(I(301));l+=1,Ve=ze=null,t.updateQueue=null,Ro.current=gv,e=n(r,s)}while(fl)}if(Ro.current=oi,t=ze!==null&&ze.next!==null,Pr=0,Ve=ze=_e=null,li=!1,t)throw Error(I(300));return e}function pc(){var e=Tl!==0;return Tl=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?_e.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function Wt(){if(ze===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Ve===null?_e.memoizedState:Ve.next;if(t!==null)Ve=t,ze=e;else{if(e===null)throw Error(I(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ve===null?_e.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function Il(e,t){return typeof t=="function"?t(e):t}function ba(e){var t=Wt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=ze,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var u=o=null,c=null,d=l;do{var y=d.lane;if((Pr&y)===y)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var S={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=S,o=r):c=c.next=S,_e.lanes|=y,Tr|=y}d=d.next}while(d!==null&&d!==l);c===null?o=r:c.next=u,en(r,t.memoizedState)||(wt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,_e.lanes|=l,Tr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ca(e){var t=Wt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);en(l,t.memoizedState)||(wt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function ym(){}function xm(e,t){var n=_e,r=Wt(),s=t(),l=!en(r.memoizedState,s);if(l&&(r.memoizedState=s,wt=!0),r=r.queue,mc(Nm.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Rl(9,Sm.bind(null,n,r,s,t),void 0,null),Ge===null)throw Error(I(349));Pr&30||wm(n,t,s)}return s}function wm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sm(e,t,n,r){t.value=n,t.getSnapshot=r,km(t)&&jm(e)}function Nm(e,t,n){return n(function(){km(t)&&jm(e)})}function km(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!en(e,n)}catch{return!0}}function jm(e){var t=_n(e,1);t!==null&&Zt(t,e,1,-1)}function lf(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:e},t.queue=e,e=e.dispatch=pv.bind(null,_e,e),[t.memoizedState,e]}function Rl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bm(){return Wt().memoizedState}function Do(e,t,n,r){var s=ln();_e.flags|=e,s.memoizedState=Rl(1|t,n,void 0,r===void 0?null:r)}function ji(e,t,n,r){var s=Wt();r=r===void 0?null:r;var l=void 0;if(ze!==null){var o=ze.memoizedState;if(l=o.destroy,r!==null&&dc(r,o.deps)){s.memoizedState=Rl(t,n,l,r);return}}_e.flags|=e,s.memoizedState=Rl(1|t,n,l,r)}function of(e,t){return Do(8390656,8,e,t)}function mc(e,t){return ji(2048,8,e,t)}function Cm(e,t){return ji(4,2,e,t)}function Em(e,t){return ji(4,4,e,t)}function _m(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pm(e,t,n){return n=n!=null?n.concat([e]):null,ji(4,4,_m.bind(null,t,e),n)}function hc(){}function Tm(e,t){var n=Wt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&dc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Im(e,t){var n=Wt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&dc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Rm(e,t,n){return Pr&21?(en(n,t)||(n=Mp(),_e.lanes|=n,Tr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=n)}function dv(e,t){var n=fe;fe=n!==0&&4>n?n:4,e(!0);var r=ja.transition;ja.transition={};try{e(!1),t()}finally{fe=n,ja.transition=r}}function Dm(){return Wt().memoizedState}function fv(e,t,n){var r=er(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Am(e))Lm(t,n);else if(n=hm(e,t,n,r),n!==null){var s=ut();Zt(n,e,r,s),Om(n,t,r)}}function pv(e,t,n){var r=er(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Am(e))Lm(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,u=l(o,n);if(s.hasEagerState=!0,s.eagerState=u,en(u,o)){var c=t.interleaved;c===null?(s.next=s,oc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=hm(e,t,s,r),n!==null&&(s=ut(),Zt(n,e,r,s),Om(n,t,r))}}function Am(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function Lm(e,t){fl=li=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Om(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gu(e,n)}}var oi={readContext:Bt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},mv={readContext:Bt,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:of,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Do(4194308,4,_m.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ln();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=fv.bind(null,_e,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:lf,useDebugValue:hc,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=lf(!1),t=e[0];return e=dv.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_e,s=ln();if(be){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),Ge===null)throw Error(I(349));Pr&30||wm(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,of(Nm.bind(null,r,l,e),[e]),r.flags|=2048,Rl(9,Sm.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=ln(),t=Ge.identifierPrefix;if(be){var n=kn,r=Nn;n=(r&~(1<<32-qt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Tl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hv={readContext:Bt,useCallback:Tm,useContext:Bt,useEffect:mc,useImperativeHandle:Pm,useInsertionEffect:Cm,useLayoutEffect:Em,useMemo:Im,useReducer:ba,useRef:bm,useState:function(){return ba(Il)},useDebugValue:hc,useDeferredValue:function(e){var t=Wt();return Rm(t,ze.memoizedState,e)},useTransition:function(){var e=ba(Il)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:ym,useSyncExternalStore:xm,useId:Dm,unstable_isNewReconciler:!1},gv={readContext:Bt,useCallback:Tm,useContext:Bt,useEffect:mc,useImperativeHandle:Pm,useInsertionEffect:Cm,useLayoutEffect:Em,useMemo:Im,useReducer:Ca,useRef:bm,useState:function(){return Ca(Il)},useDebugValue:hc,useDeferredValue:function(e){var t=Wt();return ze===null?t.memoizedState=e:Rm(t,ze.memoizedState,e)},useTransition:function(){var e=Ca(Il)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:ym,useSyncExternalStore:xm,useId:Dm,unstable_isNewReconciler:!1};function Yt(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function fu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bi={isMounted:function(e){return(e=e._reactInternals)?Lr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),s=er(e),l=jn(r,s);l.payload=t,n!=null&&(l.callback=n),t=qn(e,l,s),t!==null&&(Zt(t,e,s,r),Io(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),s=er(e),l=jn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=qn(e,l,s),t!==null&&(Zt(t,e,s,r),Io(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=er(e),s=jn(n,r);s.tag=2,t!=null&&(s.callback=t),t=qn(e,s,r),t!==null&&(Zt(t,e,r,n),Io(t,e,r))}};function af(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!jl(n,r)||!jl(s,l):!0}function Mm(e,t,n){var r=!1,s=lr,l=t.contextType;return typeof l=="object"&&l!==null?l=Bt(l):(s=Nt(t)?Er:st.current,r=t.contextTypes,l=(r=r!=null)?xs(e,s):lr),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bi,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function uf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bi.enqueueReplaceState(t,t.state,null)}function pu(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ic(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Bt(l):(l=Nt(t)?Er:st.current,s.context=xs(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(fu(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&bi.enqueueReplaceState(s,s.state,null),ri(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ks(e,t){try{var n="",r=t;do n+=Hg(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Ea(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function mu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vv=typeof WeakMap=="function"?WeakMap:Map;function Fm(e,t,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ai||(ai=!0,ju=r),mu(e,t)},n}function Um(e,t,n){n=jn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){mu(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){mu(e,t),typeof r!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function cf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new vv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Iv.bind(null,e,t,n),t.then(e,e))}function df(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ff(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jn(-1,1),t.tag=2,qn(n,t,1))),n.lanes|=1),e)}var yv=Tn.ReactCurrentOwner,wt=!1;function at(e,t,n,r){t.child=e===null?mm(t,null,n,r):Ss(t,e.child,n,r)}function pf(e,t,n,r,s){n=n.render;var l=t.ref;return ps(t,s),r=fc(e,t,n,r,l,s),n=pc(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pn(e,t,s)):(be&&n&&ec(t),t.flags|=1,at(e,t,r,s),t.child)}function mf(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!kc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,zm(e,t,l,r,s)):(e=Mo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:jl,n(o,r)&&e.ref===t.ref)return Pn(e,t,s)}return t.flags|=1,e=tr(l,r),e.ref=t.ref,e.return=t,t.child=e}function zm(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(jl(l,r)&&e.ref===t.ref)if(wt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,Pn(e,t,s)}return hu(e,t,n,r,s)}function $m(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(as,Pt),Pt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(as,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,we(as,Pt),Pt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,we(as,Pt),Pt|=r;return at(e,t,s,n),t.child}function Bm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function hu(e,t,n,r,s){var l=Nt(n)?Er:st.current;return l=xs(t,l),ps(t,s),n=fc(e,t,n,r,l,s),r=pc(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pn(e,t,s)):(be&&r&&ec(t),t.flags|=1,at(e,t,n,s),t.child)}function hf(e,t,n,r,s){if(Nt(n)){var l=!0;qo(t)}else l=!1;if(ps(t,s),t.stateNode===null)Ao(e,t),Mm(t,n,r),pu(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,u=t.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Bt(d):(d=Nt(n)?Er:st.current,d=xs(t,d));var y=n.getDerivedStateFromProps,S=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function";S||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&uf(t,o,r,d),Wn=!1;var x=t.memoizedState;o.state=x,ri(t,r,o,s),c=t.memoizedState,u!==r||x!==c||St.current||Wn?(typeof y=="function"&&(fu(t,n,y,r),c=t.memoizedState),(u=Wn||af(t,n,u,r,x,c,d))?(S||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,gm(e,t),u=t.memoizedProps,d=t.type===t.elementType?u:Yt(t.type,u),o.props=d,S=t.pendingProps,x=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bt(c):(c=Nt(n)?Er:st.current,c=xs(t,c));var j=n.getDerivedStateFromProps;(y=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==S||x!==c)&&uf(t,o,r,c),Wn=!1,x=t.memoizedState,o.state=x,ri(t,r,o,s);var b=t.memoizedState;u!==S||x!==b||St.current||Wn?(typeof j=="function"&&(fu(t,n,j,r),b=t.memoizedState),(d=Wn||af(t,n,d,r,x,b,c)||!1)?(y||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return gu(e,t,n,r,l,s)}function gu(e,t,n,r,s,l){Bm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Zd(t,n,!1),Pn(e,t,l);r=t.stateNode,yv.current=t;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ss(t,e.child,null,l),t.child=Ss(t,null,u,l)):at(e,t,u,l),t.memoizedState=r.state,s&&Zd(t,n,!0),t.child}function Wm(e){var t=e.stateNode;t.pendingContext?qd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qd(e,t.context,!1),ac(e,t.containerInfo)}function gf(e,t,n,r,s){return ws(),nc(s),t.flags|=256,at(e,t,n,r),t.child}var vu={dehydrated:null,treeContext:null,retryLane:0};function yu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hm(e,t,n){var r=t.pendingProps,s=Ee.current,l=!1,o=(t.flags&128)!==0,u;if((u=o)||(u=e!==null&&e.memoizedState===null?!1:(s&2)!==0),u?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),we(Ee,s&1),e===null)return cu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=_i(o,r,0,null),e=Cr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=yu(n),t.memoizedState=vu,e):gc(t,o));if(s=e.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return xv(e,t,o,r,u,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=tr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?l=tr(u,l):(l=Cr(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?yu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=vu,r}return l=e.child,e=l.sibling,r=tr(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function gc(e,t){return t=_i({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wo(e,t,n,r){return r!==null&&nc(r),Ss(t,e.child,null,n),e=gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xv(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=Ea(Error(I(422))),wo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=_i({mode:"visible",children:r.children},s,0,null),l=Cr(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Ss(t,e.child,null,o),t.child.memoizedState=yu(o),t.memoizedState=vu,l);if(!(t.mode&1))return wo(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,l=Error(I(419)),r=Ea(l,r,void 0),wo(e,t,o,r)}if(u=(o&e.childLanes)!==0,wt||u){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,_n(e,s),Zt(r,e,s,-1))}return Nc(),r=Ea(Error(I(421))),wo(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Rv.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,Tt=Xn(s.nextSibling),It=t,be=!0,Xt=null,e!==null&&(Ft[Ut++]=Nn,Ft[Ut++]=kn,Ft[Ut++]=_r,Nn=e.id,kn=e.overflow,_r=t),t=gc(t,r.children),t.flags|=4096,t)}function vf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),du(e.return,t,n)}function _a(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Vm(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(at(e,t,r.children,n),r=Ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vf(e,n,t);else if(e.tag===19)vf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(Ee,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&si(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),_a(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&si(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}_a(t,!0,n,null,l);break;case"together":_a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ao(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function wv(e,t,n){switch(t.tag){case 3:Wm(t),ws();break;case 5:vm(t);break;case 1:Nt(t.type)&&qo(t);break;case 4:ac(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;we(ti,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(Ee,Ee.current&1),t.flags|=128,null):n&t.child.childLanes?Hm(e,t,n):(we(Ee,Ee.current&1),e=Pn(e,t,n),e!==null?e.sibling:null);we(Ee,Ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Vm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ee,Ee.current),r)break;return null;case 22:case 23:return t.lanes=0,$m(e,t,n)}return Pn(e,t,n)}var Gm,xu,Km,Qm;Gm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xu=function(){};Km=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,kr(cn.current);var l=null;switch(n){case"input":s=$a(e,s),r=$a(e,r),l=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),l=[];break;case"textarea":s=Ha(e,s),r=Ha(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Jo)}Ga(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vl.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Se("scroll",e),l||u===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Qm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ys(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Sv(e,t,n){var r=t.pendingProps;switch(tc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return Nt(t.type)&&Xo(),nt(t),null;case 3:return r=t.stateNode,Ns(),Ne(St),Ne(st),cc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(yo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xt!==null&&(Eu(Xt),Xt=null))),xu(e,t),nt(t),null;case 5:uc(t);var s=kr(Pl.current);if(n=t.type,e!==null&&t.stateNode!=null)Km(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(I(166));return nt(t),null}if(e=kr(cn.current),yo(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[an]=t,r[El]=l,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<rl.length;s++)Se(rl[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":bd(r,l),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Se("invalid",r);break;case"textarea":Ed(r,l),Se("invalid",r)}Ga(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="children"?typeof u=="string"?r.textContent!==u&&(l.suppressHydrationWarning!==!0&&vo(r.textContent,u,e),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(l.suppressHydrationWarning!==!0&&vo(r.textContent,u,e),s=["children",""+u]):vl.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":ao(r),Cd(r,l,!0);break;case"textarea":ao(r),_d(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Jo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Np(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[an]=t,e[El]=r,Gm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ka(n,r),n){case"dialog":Se("cancel",e),Se("close",e),s=r;break;case"iframe":case"object":case"embed":Se("load",e),s=r;break;case"video":case"audio":for(s=0;s<rl.length;s++)Se(rl[s],e);s=r;break;case"source":Se("error",e),s=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),s=r;break;case"details":Se("toggle",e),s=r;break;case"input":bd(e,r),s=$a(e,r),Se("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),Se("invalid",e);break;case"textarea":Ed(e,r),s=Ha(e,r),Se("invalid",e);break;default:s=r}Ga(n,s),u=s;for(l in u)if(u.hasOwnProperty(l)){var c=u[l];l==="style"?bp(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&kp(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yl(e,c):typeof c=="number"&&yl(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vl.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Se("scroll",e):c!=null&&zu(e,l,c,o))}switch(n){case"input":ao(e),Cd(e,r,!1);break;case"textarea":ao(e),_d(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sr(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?us(e,!!r.multiple,l,!1):r.defaultValue!=null&&us(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Jo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)Qm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(I(166));if(n=kr(Pl.current),kr(cn.current),yo(t)){if(r=t.stateNode,n=t.memoizedProps,r[an]=t,(l=r.nodeValue!==n)&&(e=It,e!==null))switch(e.tag){case 3:vo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vo(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=t,t.stateNode=r}return nt(t),null;case 13:if(Ne(Ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&Tt!==null&&t.mode&1&&!(t.flags&128))fm(),ws(),t.flags|=98560,l=!1;else if(l=yo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(I(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(I(317));l[an]=t}else ws(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),l=!1}else Xt!==null&&(Eu(Xt),Xt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?$e===0&&($e=3):Nc())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return Ns(),xu(e,t),e===null&&bl(t.stateNode.containerInfo),nt(t),null;case 10:return lc(t.type._context),nt(t),null;case 17:return Nt(t.type)&&Xo(),nt(t),null;case 19:if(Ne(Ee),l=t.memoizedState,l===null)return nt(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Ys(l,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=si(e),o!==null){for(t.flags|=128,Ys(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Ee,Ee.current&1|2),t.child}e=e.sibling}l.tail!==null&&Re()>js&&(t.flags|=128,r=!0,Ys(l,!1),t.lanes=4194304)}else{if(!r)if(e=si(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ys(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!be)return nt(t),null}else 2*Re()-l.renderingStartTime>js&&n!==1073741824&&(t.flags|=128,r=!0,Ys(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Re(),t.sibling=null,n=Ee.current,we(Ee,r?n&1|2:n&1),t):(nt(t),null);case 22:case 23:return Sc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pt&1073741824&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function Nv(e,t){switch(tc(t),t.tag){case 1:return Nt(t.type)&&Xo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ns(),Ne(St),Ne(st),cc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uc(t),null;case 13:if(Ne(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Ee),null;case 4:return Ns(),null;case 10:return lc(t.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var So=!1,rt=!1,kv=typeof WeakSet=="function"?WeakSet:Set,B=null;function is(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(e,t,r)}else n.current=null}function wu(e,t,n){try{n()}catch(r){Te(e,t,r)}}var yf=!1;function jv(e,t){if(ru=Ko,e=Zp(),Zu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,y=0,S=e,x=null;t:for(;;){for(var j;S!==n||s!==0&&S.nodeType!==3||(u=o+s),S!==l||r!==0&&S.nodeType!==3||(c=o+r),S.nodeType===3&&(o+=S.nodeValue.length),(j=S.firstChild)!==null;)x=S,S=j;for(;;){if(S===e)break t;if(x===n&&++d===s&&(u=o),x===l&&++y===r&&(c=o),(j=S.nextSibling)!==null)break;S=x,x=S.parentNode}S=j}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(su={focusedElem:e,selectionRange:n},Ko=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,J=b.memoizedState,h=t.stateNode,f=h.getSnapshotBeforeUpdate(t.elementType===t.type?k:Yt(t.type,k),J);h.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(C){Te(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return b=yf,yf=!1,b}function pl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&wu(t,n,l)}s=s.next}while(s!==r)}}function Ci(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Su(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ym(e){var t=e.alternate;t!==null&&(e.alternate=null,Ym(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[El],delete t[iu],delete t[ov],delete t[iv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jm(e){return e.tag===5||e.tag===3||e.tag===4}function xf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jo));else if(r!==4&&(e=e.child,e!==null))for(Nu(e,t,n),e=e.sibling;e!==null;)Nu(e,t,n),e=e.sibling}function ku(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ku(e,t,n),e=e.sibling;e!==null;)ku(e,t,n),e=e.sibling}var Je=null,Jt=!1;function $n(e,t,n){for(n=n.child;n!==null;)Xm(e,t,n),n=n.sibling}function Xm(e,t,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(yi,n)}catch{}switch(n.tag){case 5:rt||is(n,t);case 6:var r=Je,s=Jt;Je=null,$n(e,t,n),Je=r,Jt=s,Je!==null&&(Jt?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Jt?(e=Je,n=n.stateNode,e.nodeType===8?Sa(e.parentNode,n):e.nodeType===1&&Sa(e,n),Nl(e)):Sa(Je,n.stateNode));break;case 4:r=Je,s=Jt,Je=n.stateNode.containerInfo,Jt=!0,$n(e,t,n),Je=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&wu(n,t,o),s=s.next}while(s!==r)}$n(e,t,n);break;case 1:if(!rt&&(is(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Te(n,t,u)}$n(e,t,n);break;case 21:$n(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,$n(e,t,n),rt=r):$n(e,t,n);break;default:$n(e,t,n)}}function wf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new kv),t.forEach(function(r){var s=Dv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,u=o;e:for(;u!==null;){switch(u.tag){case 5:Je=u.stateNode,Jt=!1;break e;case 3:Je=u.stateNode.containerInfo,Jt=!0;break e;case 4:Je=u.stateNode.containerInfo,Jt=!0;break e}u=u.return}if(Je===null)throw Error(I(160));Xm(l,o,s),Je=null,Jt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Te(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qm(t,e),t=t.sibling}function qm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),sn(e),r&4){try{pl(3,e,e.return),Ci(3,e)}catch(k){Te(e,e.return,k)}try{pl(5,e,e.return)}catch(k){Te(e,e.return,k)}}break;case 1:Qt(t,e),sn(e),r&512&&n!==null&&is(n,n.return);break;case 5:if(Qt(t,e),sn(e),r&512&&n!==null&&is(n,n.return),e.flags&32){var s=e.stateNode;try{yl(s,"")}catch(k){Te(e,e.return,k)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&l.type==="radio"&&l.name!=null&&wp(s,l),Ka(u,o);var d=Ka(u,l);for(o=0;o<c.length;o+=2){var y=c[o],S=c[o+1];y==="style"?bp(s,S):y==="dangerouslySetInnerHTML"?kp(s,S):y==="children"?yl(s,S):zu(s,y,S,d)}switch(u){case"input":Ba(s,l);break;case"textarea":Sp(s,l);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var j=l.value;j!=null?us(s,!!l.multiple,j,!1):x!==!!l.multiple&&(l.defaultValue!=null?us(s,!!l.multiple,l.defaultValue,!0):us(s,!!l.multiple,l.multiple?[]:"",!1))}s[El]=l}catch(k){Te(e,e.return,k)}}break;case 6:if(Qt(t,e),sn(e),r&4){if(e.stateNode===null)throw Error(I(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(k){Te(e,e.return,k)}}break;case 3:if(Qt(t,e),sn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(t.containerInfo)}catch(k){Te(e,e.return,k)}break;case 4:Qt(t,e),sn(e);break;case 13:Qt(t,e),sn(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(xc=Re())),r&4&&wf(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(d=rt)||y,Qt(t,e),rt=d):Qt(t,e),sn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!y&&e.mode&1)for(B=e,y=e.child;y!==null;){for(S=B=y;B!==null;){switch(x=B,j=x.child,x.tag){case 0:case 11:case 14:case 15:pl(4,x,x.return);break;case 1:is(x,x.return);var b=x.stateNode;if(typeof b.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(k){Te(r,n,k)}}break;case 5:is(x,x.return);break;case 22:if(x.memoizedState!==null){Nf(S);continue}}j!==null?(j.return=x,B=j):Nf(S)}y=y.sibling}e:for(y=null,S=e;;){if(S.tag===5){if(y===null){y=S;try{s=S.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(u=S.stateNode,c=S.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=jp("display",o))}catch(k){Te(e,e.return,k)}}}else if(S.tag===6){if(y===null)try{S.stateNode.nodeValue=d?"":S.memoizedProps}catch(k){Te(e,e.return,k)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;y===S&&(y=null),S=S.return}y===S&&(y=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:Qt(t,e),sn(e),r&4&&wf(e);break;case 21:break;default:Qt(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jm(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yl(s,""),r.flags&=-33);var l=xf(e);ku(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=xf(e);Nu(e,u,o);break;default:throw Error(I(161))}}catch(c){Te(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bv(e,t,n){B=e,Zm(e)}function Zm(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var s=B,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||So;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||rt;u=So;var d=rt;if(So=o,(rt=c)&&!d)for(B=s;B!==null;)o=B,c=o.child,o.tag===22&&o.memoizedState!==null?kf(s):c!==null?(c.return=o,B=c):kf(s);for(;l!==null;)B=l,Zm(l),l=l.sibling;B=s,So=u,rt=d}Sf(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,B=l):Sf(e)}}function Sf(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||Ci(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Yt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&sf(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}sf(t,o,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var S=y.dehydrated;S!==null&&Nl(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}rt||t.flags&512&&Su(t)}catch(x){Te(t,t.return,x)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Nf(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function kf(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ci(4,t)}catch(c){Te(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Te(t,s,c)}}var l=t.return;try{Su(t)}catch(c){Te(t,l,c)}break;case 5:var o=t.return;try{Su(t)}catch(c){Te(t,o,c)}}}catch(c){Te(t,t.return,c)}if(t===e){B=null;break}var u=t.sibling;if(u!==null){u.return=t.return,B=u;break}B=t.return}}var Cv=Math.ceil,ii=Tn.ReactCurrentDispatcher,vc=Tn.ReactCurrentOwner,$t=Tn.ReactCurrentBatchConfig,ue=0,Ge=null,Oe=null,Xe=0,Pt=0,as=ar(0),$e=0,Dl=null,Tr=0,Ei=0,yc=0,ml=null,xt=null,xc=0,js=1/0,wn=null,ai=!1,ju=null,Zn=null,No=!1,Kn=null,ui=0,hl=0,bu=null,Lo=-1,Oo=0;function ut(){return ue&6?Re():Lo!==-1?Lo:Lo=Re()}function er(e){return e.mode&1?ue&2&&Xe!==0?Xe&-Xe:uv.transition!==null?(Oo===0&&(Oo=Mp()),Oo):(e=fe,e!==0||(e=window.event,e=e===void 0?16:Hp(e.type)),e):1}function Zt(e,t,n,r){if(50<hl)throw hl=0,bu=null,Error(I(185));Ll(e,n,r),(!(ue&2)||e!==Ge)&&(e===Ge&&(!(ue&2)&&(Ei|=n),$e===4&&Vn(e,Xe)),kt(e,r),n===1&&ue===0&&!(t.mode&1)&&(js=Re()+500,ki&&ur()))}function kt(e,t){var n=e.callbackNode;u0(e,t);var r=Go(e,e===Ge?Xe:0);if(r===0)n!==null&&Id(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Id(n),t===1)e.tag===0?av(jf.bind(null,e)):um(jf.bind(null,e)),sv(function(){!(ue&6)&&ur()}),n=null;else{switch(Fp(r)){case 1:n=Vu;break;case 4:n=Lp;break;case 16:n=Vo;break;case 536870912:n=Op;break;default:n=Vo}n=ih(n,eh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function eh(e,t){if(Lo=-1,Oo=0,ue&6)throw Error(I(327));var n=e.callbackNode;if(ms()&&e.callbackNode!==n)return null;var r=Go(e,e===Ge?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ci(e,r);else{t=r;var s=ue;ue|=2;var l=nh();(Ge!==e||Xe!==t)&&(wn=null,js=Re()+500,br(e,t));do try{Pv();break}catch(u){th(e,u)}while(!0);sc(),ii.current=l,ue=s,Oe!==null?t=0:(Ge=null,Xe=0,t=$e)}if(t!==0){if(t===2&&(s=qa(e),s!==0&&(r=s,t=Cu(e,s))),t===1)throw n=Dl,br(e,0),Vn(e,r),kt(e,Re()),n;if(t===6)Vn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ev(s)&&(t=ci(e,r),t===2&&(l=qa(e),l!==0&&(r=l,t=Cu(e,l))),t===1))throw n=Dl,br(e,0),Vn(e,r),kt(e,Re()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(I(345));case 2:xr(e,xt,wn);break;case 3:if(Vn(e,r),(r&130023424)===r&&(t=xc+500-Re(),10<t)){if(Go(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ou(xr.bind(null,e,xt,wn),t);break}xr(e,xt,wn);break;case 4:if(Vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-qt(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cv(r/1960))-r,10<r){e.timeoutHandle=ou(xr.bind(null,e,xt,wn),r);break}xr(e,xt,wn);break;case 5:xr(e,xt,wn);break;default:throw Error(I(329))}}}return kt(e,Re()),e.callbackNode===n?eh.bind(null,e):null}function Cu(e,t){var n=ml;return e.current.memoizedState.isDehydrated&&(br(e,t).flags|=256),e=ci(e,t),e!==2&&(t=xt,xt=n,t!==null&&Eu(t)),e}function Eu(e){xt===null?xt=e:xt.push.apply(xt,e)}function Ev(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!en(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t){for(t&=~yc,t&=~Ei,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function jf(e){if(ue&6)throw Error(I(327));ms();var t=Go(e,0);if(!(t&1))return kt(e,Re()),null;var n=ci(e,t);if(e.tag!==0&&n===2){var r=qa(e);r!==0&&(t=r,n=Cu(e,r))}if(n===1)throw n=Dl,br(e,0),Vn(e,t),kt(e,Re()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xr(e,xt,wn),kt(e,Re()),null}function wc(e,t){var n=ue;ue|=1;try{return e(t)}finally{ue=n,ue===0&&(js=Re()+500,ki&&ur())}}function Ir(e){Kn!==null&&Kn.tag===0&&!(ue&6)&&ms();var t=ue;ue|=1;var n=$t.transition,r=fe;try{if($t.transition=null,fe=1,e)return e()}finally{fe=r,$t.transition=n,ue=t,!(ue&6)&&ur()}}function Sc(){Pt=as.current,Ne(as)}function br(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,rv(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(tc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xo();break;case 3:Ns(),Ne(St),Ne(st),cc();break;case 5:uc(r);break;case 4:Ns();break;case 13:Ne(Ee);break;case 19:Ne(Ee);break;case 10:lc(r.type._context);break;case 22:case 23:Sc()}n=n.return}if(Ge=e,Oe=e=tr(e.current,null),Xe=Pt=t,$e=0,Dl=null,yc=Ei=Tr=0,xt=ml=null,Nr!==null){for(t=0;t<Nr.length;t++)if(n=Nr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}Nr=null}return e}function th(e,t){do{var n=Oe;try{if(sc(),Ro.current=oi,li){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}li=!1}if(Pr=0,Ve=ze=_e=null,fl=!1,Tl=0,vc.current=null,n===null||n.return===null){$e=1,Dl=t,Oe=null;break}e:{var l=e,o=n.return,u=n,c=t;if(t=Xe,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,y=u,S=y.tag;if(!(y.mode&1)&&(S===0||S===11||S===15)){var x=y.alternate;x?(y.updateQueue=x.updateQueue,y.memoizedState=x.memoizedState,y.lanes=x.lanes):(y.updateQueue=null,y.memoizedState=null)}var j=df(o);if(j!==null){j.flags&=-257,ff(j,o,u,l,t),j.mode&1&&cf(l,d,t),t=j,c=d;var b=t.updateQueue;if(b===null){var k=new Set;k.add(c),t.updateQueue=k}else b.add(c);break e}else{if(!(t&1)){cf(l,d,t),Nc();break e}c=Error(I(426))}}else if(be&&u.mode&1){var J=df(o);if(J!==null){!(J.flags&65536)&&(J.flags|=256),ff(J,o,u,l,t),nc(ks(c,u));break e}}l=c=ks(c,u),$e!==4&&($e=2),ml===null?ml=[l]:ml.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var h=Fm(l,c,t);rf(l,h);break e;case 1:u=c;var f=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Zn===null||!Zn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var C=Um(l,u,t);rf(l,C);break e}}l=l.return}while(l!==null)}sh(n)}catch(A){t=A,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function nh(){var e=ii.current;return ii.current=oi,e===null?oi:e}function Nc(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(Tr&268435455)&&!(Ei&268435455)||Vn(Ge,Xe)}function ci(e,t){var n=ue;ue|=2;var r=nh();(Ge!==e||Xe!==t)&&(wn=null,br(e,t));do try{_v();break}catch(s){th(e,s)}while(!0);if(sc(),ue=n,ii.current=r,Oe!==null)throw Error(I(261));return Ge=null,Xe=0,$e}function _v(){for(;Oe!==null;)rh(Oe)}function Pv(){for(;Oe!==null&&!e0();)rh(Oe)}function rh(e){var t=oh(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?sh(e):Oe=t,vc.current=null}function sh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Nv(n,t),n!==null){n.flags&=32767,Oe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Oe=null;return}}else if(n=Sv(n,t,Pt),n!==null){Oe=n;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);$e===0&&($e=5)}function xr(e,t,n){var r=fe,s=$t.transition;try{$t.transition=null,fe=1,Tv(e,t,n,r)}finally{$t.transition=s,fe=r}return null}function Tv(e,t,n,r){do ms();while(Kn!==null);if(ue&6)throw Error(I(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(c0(e,l),e===Ge&&(Oe=Ge=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||No||(No=!0,ih(Vo,function(){return ms(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=$t.transition,$t.transition=null;var o=fe;fe=1;var u=ue;ue|=4,vc.current=null,jv(e,n),qm(n,e),J0(su),Ko=!!ru,su=ru=null,e.current=n,bv(n),t0(),ue=u,fe=o,$t.transition=l}else e.current=n;if(No&&(No=!1,Kn=e,ui=s),l=e.pendingLanes,l===0&&(Zn=null),s0(n.stateNode),kt(e,Re()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ai)throw ai=!1,e=ju,ju=null,e;return ui&1&&e.tag!==0&&ms(),l=e.pendingLanes,l&1?e===bu?hl++:(hl=0,bu=e):hl=0,ur(),null}function ms(){if(Kn!==null){var e=Fp(ui),t=$t.transition,n=fe;try{if($t.transition=null,fe=16>e?16:e,Kn===null)var r=!1;else{if(e=Kn,Kn=null,ui=0,ue&6)throw Error(I(331));var s=ue;for(ue|=4,B=e.current;B!==null;){var l=B,o=l.child;if(B.flags&16){var u=l.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(B=d;B!==null;){var y=B;switch(y.tag){case 0:case 11:case 15:pl(8,y,l)}var S=y.child;if(S!==null)S.return=y,B=S;else for(;B!==null;){y=B;var x=y.sibling,j=y.return;if(Ym(y),y===d){B=null;break}if(x!==null){x.return=j,B=x;break}B=j}}}var b=l.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var J=k.sibling;k.sibling=null,k=J}while(k!==null)}}B=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,B=o;else e:for(;B!==null;){if(l=B,l.flags&2048)switch(l.tag){case 0:case 11:case 15:pl(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,B=h;break e}B=l.return}}var f=e.current;for(B=f;B!==null;){o=B;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,B=g;else e:for(o=f;B!==null;){if(u=B,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ci(9,u)}}catch(A){Te(u,u.return,A)}if(u===o){B=null;break e}var C=u.sibling;if(C!==null){C.return=u.return,B=C;break e}B=u.return}}if(ue=s,ur(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(yi,e)}catch{}r=!0}return r}finally{fe=n,$t.transition=t}}return!1}function bf(e,t,n){t=ks(n,t),t=Fm(e,t,1),e=qn(e,t,1),t=ut(),e!==null&&(Ll(e,1,t),kt(e,t))}function Te(e,t,n){if(e.tag===3)bf(e,e,n);else for(;t!==null;){if(t.tag===3){bf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){e=ks(n,e),e=Um(t,e,1),t=qn(t,e,1),e=ut(),t!==null&&(Ll(t,1,e),kt(t,e));break}}t=t.return}}function Iv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(Xe&n)===n&&($e===4||$e===3&&(Xe&130023424)===Xe&&500>Re()-xc?br(e,0):yc|=n),kt(e,t)}function lh(e,t){t===0&&(e.mode&1?(t=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):t=1);var n=ut();e=_n(e,t),e!==null&&(Ll(e,t,n),kt(e,n))}function Rv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lh(e,n)}function Dv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(t),lh(e,n)}var oh;oh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)wt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return wt=!1,wv(e,t,n);wt=!!(e.flags&131072)}else wt=!1,be&&t.flags&1048576&&cm(t,ei,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ao(e,t),e=t.pendingProps;var s=xs(t,st.current);ps(t,n),s=fc(null,t,r,e,s,n);var l=pc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(r)?(l=!0,qo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ic(t),s.updater=bi,t.stateNode=s,s._reactInternals=t,pu(t,r,e,n),t=gu(null,t,r,!0,l,n)):(t.tag=0,be&&l&&ec(t),at(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ao(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Lv(r),e=Yt(r,e),s){case 0:t=hu(null,t,r,e,n);break e;case 1:t=hf(null,t,r,e,n);break e;case 11:t=pf(null,t,r,e,n);break e;case 14:t=mf(null,t,r,Yt(r.type,e),n);break e}throw Error(I(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Yt(r,s),hu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Yt(r,s),hf(e,t,r,s,n);case 3:e:{if(Wm(t),e===null)throw Error(I(387));r=t.pendingProps,l=t.memoizedState,s=l.element,gm(e,t),ri(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=ks(Error(I(423)),t),t=gf(e,t,r,n,s);break e}else if(r!==s){s=ks(Error(I(424)),t),t=gf(e,t,r,n,s);break e}else for(Tt=Xn(t.stateNode.containerInfo.firstChild),It=t,be=!0,Xt=null,n=mm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ws(),r===s){t=Pn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return vm(t),e===null&&cu(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,lu(r,s)?o=null:l!==null&&lu(r,l)&&(t.flags|=32),Bm(e,t),at(e,t,o,n),t.child;case 6:return e===null&&cu(t),null;case 13:return Hm(e,t,n);case 4:return ac(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ss(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Yt(r,s),pf(e,t,r,s,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,we(ti,r._currentValue),r._currentValue=o,l!==null)if(en(l.value,o)){if(l.children===s.children&&!St.current){t=Pn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var u=l.dependencies;if(u!==null){o=l.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=jn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?c.next=c:(c.next=y.next,y.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),du(l.return,n,t),u.lanes|=n;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(I(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),du(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}at(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ps(t,n),s=Bt(s),r=r(s),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,s=Yt(r,t.pendingProps),s=Yt(r.type,s),mf(e,t,r,s,n);case 15:return zm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Yt(r,s),Ao(e,t),t.tag=1,Nt(r)?(e=!0,qo(t)):e=!1,ps(t,n),Mm(t,r,s),pu(t,r,s,n),gu(null,t,r,!0,e,n);case 19:return Vm(e,t,n);case 22:return $m(e,t,n)}throw Error(I(156,t.tag))};function ih(e,t){return Ap(e,t)}function Av(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,n,r){return new Av(e,t,n,r)}function kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lv(e){if(typeof e=="function")return kc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bu)return 11;if(e===Wu)return 14}return 2}function tr(e,t){var n=e.alternate;return n===null?(n=zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mo(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")kc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case qr:return Cr(n.children,s,l,t);case $u:o=8,s|=8;break;case Ma:return e=zt(12,n,t,s|2),e.elementType=Ma,e.lanes=l,e;case Fa:return e=zt(13,n,t,s),e.elementType=Fa,e.lanes=l,e;case Ua:return e=zt(19,n,t,s),e.elementType=Ua,e.lanes=l,e;case vp:return _i(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hp:o=10;break e;case gp:o=9;break e;case Bu:o=11;break e;case Wu:o=14;break e;case Bn:o=16,r=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=zt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Cr(e,t,n,r){return e=zt(7,e,r,t),e.lanes=n,e}function _i(e,t,n,r){return e=zt(22,e,r,t),e.elementType=vp,e.lanes=n,e.stateNode={isHidden:!1},e}function Pa(e,t,n){return e=zt(6,e,null,t),e.lanes=n,e}function Ta(e,t,n){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ov(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ca(0),this.expirationTimes=ca(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ca(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,s,l,o,u,c){return e=new Ov(e,t,n,u,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=zt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(l),e}function Mv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ah(e){if(!e)return lr;e=e._reactInternals;e:{if(Lr(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(Nt(n))return am(e,n,t)}return t}function uh(e,t,n,r,s,l,o,u,c){return e=jc(n,r,!0,e,s,l,o,u,c),e.context=ah(null),n=e.current,r=ut(),s=er(n),l=jn(r,s),l.callback=t??null,qn(n,l,s),e.current.lanes=s,Ll(e,s,r),kt(e,r),e}function Pi(e,t,n,r){var s=t.current,l=ut(),o=er(s);return n=ah(n),t.context===null?t.context=n:t.pendingContext=n,t=jn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qn(s,t,o),e!==null&&(Zt(e,s,o,l),Io(e,s,o)),o}function di(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function bc(e,t){Cf(e,t),(e=e.alternate)&&Cf(e,t)}function Fv(){return null}var ch=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cc(e){this._internalRoot=e}Ti.prototype.render=Cc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));Pi(e,t,null,null)};Ti.prototype.unmount=Cc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){Pi(null,e,null,null)}),t[En]=null}};function Ti(e){this._internalRoot=e}Ti.prototype.unstable_scheduleHydration=function(e){if(e){var t=$p();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hn.length&&t!==0&&t<Hn[n].priority;n++);Hn.splice(n,0,e),n===0&&Wp(e)}};function Ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ii(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ef(){}function Uv(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=di(o);l.call(d)}}var o=uh(t,r,e,0,null,!1,!1,"",Ef);return e._reactRootContainer=o,e[En]=o.current,bl(e.nodeType===8?e.parentNode:e),Ir(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=di(c);u.call(d)}}var c=jc(e,0,!1,null,null,!1,!1,"",Ef);return e._reactRootContainer=c,e[En]=c.current,bl(e.nodeType===8?e.parentNode:e),Ir(function(){Pi(t,c,n,r)}),c}function Ri(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var u=s;s=function(){var c=di(o);u.call(c)}}Pi(t,o,e,s)}else o=Uv(n,t,e,s,r);return di(o)}Up=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=nl(t.pendingLanes);n!==0&&(Gu(t,n|1),kt(t,Re()),!(ue&6)&&(js=Re()+500,ur()))}break;case 13:Ir(function(){var r=_n(e,1);if(r!==null){var s=ut();Zt(r,e,1,s)}}),bc(e,1)}};Ku=function(e){if(e.tag===13){var t=_n(e,134217728);if(t!==null){var n=ut();Zt(t,e,134217728,n)}bc(e,134217728)}};zp=function(e){if(e.tag===13){var t=er(e),n=_n(e,t);if(n!==null){var r=ut();Zt(n,e,t,r)}bc(e,t)}};$p=function(){return fe};Bp=function(e,t){var n=fe;try{return fe=e,t()}finally{fe=n}};Ya=function(e,t,n){switch(t){case"input":if(Ba(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ni(r);if(!s)throw Error(I(90));xp(r),Ba(r,s)}}}break;case"textarea":Sp(e,n);break;case"select":t=n.value,t!=null&&us(e,!!n.multiple,t,!1)}};_p=wc;Pp=Ir;var zv={usingClientEntryPoint:!1,Events:[Ml,ns,Ni,Cp,Ep,wc]},Js={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$v={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rp(e),e===null?null:e.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||Fv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ko.isDisabled&&ko.supportsFiber)try{yi=ko.inject($v),un=ko}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zv;Dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(t))throw Error(I(200));return Mv(e,t,null,n)};Dt.createRoot=function(e,t){if(!Ec(e))throw Error(I(299));var n=!1,r="",s=ch;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=jc(e,1,!1,null,null,n,!1,r,s),e[En]=t.current,bl(e.nodeType===8?e.parentNode:e),new Cc(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=Rp(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Ir(e)};Dt.hydrate=function(e,t,n){if(!Ii(t))throw Error(I(200));return Ri(null,e,t,!0,n)};Dt.hydrateRoot=function(e,t,n){if(!Ec(e))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=ch;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=uh(t,null,e,1,n??null,s,!1,l,o),e[En]=t.current,bl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ti(t)};Dt.render=function(e,t,n){if(!Ii(t))throw Error(I(200));return Ri(null,e,t,!1,n)};Dt.unmountComponentAtNode=function(e){if(!Ii(e))throw Error(I(40));return e._reactRootContainer?(Ir(function(){Ri(null,null,e,!1,function(){e._reactRootContainer=null,e[En]=null})}),!0):!1};Dt.unstable_batchedUpdates=wc;Dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ii(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return Ri(e,t,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function dh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dh)}catch(e){console.error(e)}}dh(),dp.exports=Dt;var Bv=dp.exports,_f=Bv;La.createRoot=_f.createRoot,La.hydrateRoot=_f.hydrateRoot;const Wv={1:[{rows:1,cols:1}],2:[{rows:1,cols:2},{rows:2,cols:1}],3:[{rows:2,cols:2},{rows:1,cols:3},{rows:3,cols:1}],4:[{rows:2,cols:2},{rows:1,cols:4},{rows:4,cols:1}],5:[{rows:2,cols:3},{rows:3,cols:2},{rows:1,cols:5},{rows:5,cols:1}],6:[{rows:2,cols:3},{rows:3,cols:2},{rows:1,cols:6},{rows:6,cols:1}],7:[{rows:2,cols:4},{rows:4,cols:2}],8:[{rows:2,cols:4},{rows:4,cols:2},{rows:3,cols:3}],9:[{rows:3,cols:3},{rows:2,cols:5},{rows:5,cols:2}],10:[{rows:2,cols:5},{rows:5,cols:2}]},hs=(e,t)=>{if(!Number.isFinite(e))return t;const n=Math.floor(e);return n>0?n:t};function Hv(e){const t=hs(e,1);return(Wv[t]||[]).map(r=>({...r}))}function _u(e,t){if(!e)return null;const n=hs(t,1),r=hs(e.rows,1),s=hs(e.cols,1),l=r*s;if(l<n)return null;let o=e.emptySeatIndex??null;return l>n?(o==null||o<0||o>=l)&&(o=l-1):o=null,{rows:r,cols:s,emptySeatIndex:o}}const Pf=(e,t)=>{const n=hs(e,1),r=(t||0)===90,s=Math.ceil(Math.sqrt(n)),l=r?s:Math.ceil(n/s),o=Math.ceil(n/l);return _u({rows:l,cols:o},n)||{rows:1,cols:n}};function fh(e,t,n){const r=hs(e,1),s=_u(n,r);if(s)return s;const l=Hv(r);if(!l.length)return Pf(r,t);const o=(t||0)===90,c=l.filter(d=>o?d.rows>=d.cols:d.cols>=d.rows)[0]||l[0];return _u(c,r)||Pf(r,t)}const Vv="newui_app_state",Pu=1;function Gv(e){const t=Math.max(0,e.capacity||0),n=Array.isArray(e.preferredSeatIndexes)?e.preferredSeatIndexes:[],r=[];for(const s of n){const l=typeof s=="number"?s:parseInt(String(s),10);!Number.isFinite(l)||!Number.isInteger(l)||l<0||l>=t||r.push(l)}return Array.from(new Set(r)).sort((s,l)=>s-l)}function Kv(e){const t=(e.seatIds??[]).slice(),n=Math.max(0,e.capacity||0);if(t.length<n)for(let l=t.length;l<n;l++)t[l]=String(e.id)+"_s"+l;else t.length>n&&(t.length=n);const r=Gv(e),s=fh(n,e.rotation||0,e.seatLayout);return{...e,seatIds:t,preferredSeatIndexes:r,seatLayout:s}}function Qv(e){return{...e,tables:e.tables.map(Kv)}}function Yv(e){const n=((e||{layouts:[]}).layouts||[]).map(Qv);return{version:Pu,layouts:n}}function Jv(){try{const e=localStorage.getItem(Vv);if(!e)return{version:Pu,layouts:[]};const t=JSON.parse(e);return Yv(t)}catch{return{version:Pu,layouts:[]}}}function Xv(){return Jv().layouts}const qv="newui_periods_state";function Zv(){try{const e=localStorage.getItem(qv);if(!e)return{periods:[],currentId:null};const t=JSON.parse(e);return{periods:t.periods??[],currentId:t.currentId??null}}catch{return{periods:[],currentId:null}}}function Tu(){return Zv()}const ey="newui_tags_state_v1";function ty(){try{const e=localStorage.getItem(ey);return e?{version:1,tags:JSON.parse(e).tags??[]}:{version:1,tags:[]}}catch{return{version:1,tags:[]}}}function ny(){return ty().tags}const ry=p.createContext(null),sy="newui_students_state_v1";function ly(){try{const e=localStorage.getItem(sy);return e?{version:1,students:JSON.parse(e).students??[]}:{version:1,students:[]}}catch{return{version:1,students:[]}}}function oy(){return ly().students}function iy(){return"pro"}function ay(e=iy()){return{tier:e,canUseDriveSync:e!=="free",canUseLocalSave:!0,canExportPDF:e!=="free",canUseAdvancedReports:e==="school"||e==="pro",canUseImports:!0,canUseMobile:!0}}function uy({studentId:e,hasPhoto:t=!1,src:n=null,onClick:r,widthPx:s,heightPx:l,sizePx:o=44}){const d={width:s??o,height:l??o};return i.jsx("button",{type:"button","aria-label":t?"Update student photo":"Add student photo",className:"flex-shrink-0 rounded-xl border border-slate-200 bg-white/60 overflow-hidden active:scale-[0.98]",style:d,onClick:y=>{y.stopPropagation(),r==null||r(e)},children:t&&n?i.jsx("img",{src:n,alt:"Student photo",className:"w-full h-full object-cover",draggable:!1}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18","aria-hidden":"true",className:"text-slate-500",children:i.jsx("path",{fill:"currentColor",d:"M9.5 4.5h5l1.2 1.8H19a2.5 2.5 0 0 1 2.5 2.5v8.7A2.5 2.5 0 0 1 19 20H5a2.5 2.5 0 0 1-2.5-2.5V8.8A2.5 2.5 0 0 1 5 6.3h3.3l1.2-1.8ZM12 9a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm0 1.7a2.3 2.3 0 1 1 0 4.6 2.3 2.3 0 0 1 0-4.6Z"})})})})}function cy(e){const t=(e||"").trim();if(!t)return{first:"Unknown",last:"Unknown"};if(t.includes(",")){const[l,o]=t.split(",",2),u=(l||"").trim()||"Unknown";return{first:(o||"").trim().split(/\s+/).filter(Boolean)[0]||"Unknown",last:u}}const n=t.split(/\s+/).filter(Boolean);if(n.length===1)return{first:n[0],last:"Unknown"};const r=n[0]||"Unknown",s=n[n.length-1]||"Unknown";return{first:r,last:s}}function Tf(e){return(e||"").trim().replace(/\s+/g,"_").replace(/[^A-Za-z0-9_-]/g,"").replace(/_+/g,"_")||"Unknown"}function _c(e,t){const n=cy(t),r=Tf(n.first);return`${Tf(n.last)}_${r}__id_${e}.jpg`}var qf,Zf;const Iu=((Zf=(qf=import.meta)==null?void 0:qf.env)==null?void 0:Zf.VITE_GOOGLE_CLIENT_ID)??"403722152172-rm3rvd6kba8s10a8svv60jbj2s93kv1e.apps.googleusercontent.com",dy="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/userinfo.email",If="ClassSeats",ph="classseats_mobile_drive_session_v2",Pc="classseats_mobile_drive_folder_v1",Tc="classseats_student_docs_folder_v1",fy={classseats:"data_v1"},Rf="Student Docs",Df="studentPhotos",mh="https://us-east1-classseats-sync.cloudfunctions.net/exchangecode",Fo="classseats_mobile_drive_pkce_verifier",gl="classseats_mobile_drive_return_to",Uo="classseats_mobile_drive_redirect_uri",hh="https://app.classseats.app/ClassSeatsMobile";function py(){if(typeof window>"u")return hh;const e=window.location.origin;return e==="https://app.classseats.app"?"https://app.classseats.app/ClassSeatsMobile":e==="https://mifish3474.github.io"?"https://mifish3474.github.io/ClassSeats-Mobile-Testing/ClassSeatsMobile":`${e}/ClassSeatsMobile`}const my=45*60*1e3,hy="classseats_auth",gy=1,or="driveSession",fi="singleton";let wr=null,on=null,sl=!1,zo="none";function vy(e){const{sessionLoaded:t}=e,n=(e.lastWriteReason||"").trim();return t?"ok":n?n==="explicit-disconnect"?"user-logged-out":n==="fatal-oauth-error"?"oauth-failure":n==="login-success"?"device-storage-wipe":"unknown":"no-session-yet"}function Ic(){return new Promise((e,t)=>{const n=indexedDB.open(hy,gy);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(or)||r.createObjectStore(or,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error||new Error("IndexedDB open failed"))})}async function yy(){const e=await Ic();return new Promise((t,n)=>{const l=e.transaction(or,"readonly").objectStore(or).get(fi);l.onsuccess=()=>{const o=l.result;if(o){on={lastWriteAt:o.lastWriteAt,lastWriteReason:o.lastWriteReason};const{id:u,lastWriteAt:c,lastWriteReason:d,...y}=o;t(y)}else t(null)},l.onerror=()=>n(l.error||new Error("IDB get failed"))})}async function gh(e,t){const n=await Ic();return new Promise((r,s)=>{const l=n.transaction(or,"readwrite"),o=l.objectStore(or);if(!e)console.info("[Drive][IDB] CLEAR session",{reason:t}),o.delete(fi),on={lastWriteAt:Date.now(),lastWriteReason:t};else{const u={id:fi,...e,lastWriteAt:Date.now(),lastWriteReason:t};console.info("[Drive][IDB] WRITE session",{reason:t,hasRefresh:!!e.refreshToken,expiresAt:e.expiresAt}),o.put(u),on={lastWriteAt:u.lastWriteAt,lastWriteReason:u.lastWriteReason}}l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB put/delete failed"))})}async function xy(){try{const e=await Ic();return await new Promise((t,n)=>{const l=e.transaction(or,"readonly").objectStore(or).get(fi);l.onsuccess=()=>{const o=l.result;o?(on={lastWriteAt:o.lastWriteAt,lastWriteReason:o.lastWriteReason},t(o)):t(null)},l.onerror=()=>n(l.error||new Error("IDB get failed"))})}catch(e){return console.warn("[Drive][IDB] getDriveSessionRecord failed",e),null}}async function wy(){const e=await xy(),t=!!e,n=!!(e!=null&&e.refreshToken),r=(e==null?void 0:e.expiresAt)??null,s=(e==null?void 0:e.lastWriteAt)??(on==null?void 0:on.lastWriteAt)??null,l=(e==null?void 0:e.lastWriteReason)??(on==null?void 0:on.lastWriteReason)??null,o=e?"idb":"none",u=e==null?void 0:e.profile,c=vy({sessionLoaded:t,lastWriteReason:l}),d={sessionLoaded:t,hasRefresh:n,expiresAt:r,source:o,lastWriteAt:s,lastWriteReason:l,state:c,profile:u};return console.info("startup:",d),console.info("[Drive] startupSessionState",{state:c,lastWriteReason:l}),d}function Sy(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(ph);return e?JSON.parse(e):null}catch{return null}}function Ny(){typeof window>"u"||window.localStorage.removeItem(ph)}async function Di(){if(sl)return wr;try{const t=await yy();if(t)return wr=t,zo="idb",sl=!0,wr}catch{}const e=Sy();if(e){wr=e,zo="legacy",sl=!0;try{await gh(e,"startup-migration")}catch{}return wr}return wr=null,zo="none",sl=!0,null}async function Rc(e,t){wr=e,sl=!0,zo=e?"idb":"none";try{await gh(e,t)}catch(n){console.warn("[Drive][IDB] persistSession failed",n)}}async function vh(e){await Rc(null,e),Ny()}async function ky(){return Di()}function jy(e,t=5*60*1e3){return!e||e.expiresAt<=Date.now()+t}function by(e){return e.replace(/^#/,"").split("&").map(t=>t.split("=")).reduce((t,[n,r])=>(n&&(t[decodeURIComponent(n)]=decodeURIComponent(r||"")),t),{})}function yh(e,t,n,r){const s=t?t*1e3:my;return{accessToken:e,expiresAt:Date.now()+s-60*1e3,refreshToken:n,profile:r}}async function xh(e){try{const t=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)return;const n=await t.json();return{email:n.email,name:n.name,picture:n.picture}}catch{return}}async function Cy(){const e=new Uint8Array(32);return crypto.getRandomValues(e),btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ey(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=Array.from(new Uint8Array(r));return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _y(e,t){const n=await Cy(),r=await Ey(n),s=btoa(JSON.stringify({v:n,r:t||null}));return window.localStorage.setItem(Fo,n),t?window.localStorage.setItem(gl,t):window.localStorage.removeItem(gl),window.localStorage.setItem(Uo,e),`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:Iu,redirect_uri:e,response_type:"code",scope:dy,include_granted_scopes:"true",state:s,prompt:"consent",access_type:"offline",code_challenge:r,code_challenge_method:"S256"}).toString()}`}async function Py(e,t,n){const r={grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:n,client_id:Iu};console.info("[Drive] Exchanging code",{redirect_uri:n,client_id:Iu,code_preview:e?`${e.slice(0,4)}...${e.slice(-4)}`:"none"});const s=await fetch(mh,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const l=await s.text().catch(()=>"");throw new Error(l||"Failed to exchange code for tokens.")}return s.json()}async function Ty(){if(typeof window>"u")return null;const e=window.location.search||"",t=new URLSearchParams(e);let n=t.get("code"),r=t.get("state");if(!n&&window.location.hash){const u=by(window.location.hash);n=u.code||n,r=u.state||r}if(!n)return null;let s=null,l=null,o=null;if(r)try{const u=JSON.parse(atob(r));u!=null&&u.v&&typeof u.v=="string"&&(s=u.v),u!=null&&u.r&&typeof u.r=="string"&&(l=u.r),u!=null&&u.d&&typeof u.d=="string"&&(o=u.d)}catch{}if(s||(s=window.localStorage.getItem(Fo)),l||(l=window.localStorage.getItem(gl)),o||(o=window.localStorage.getItem(Uo)||hh),!s)return null;try{const u=await Py(n,s,o),c=await xh(u.access_token),d=yh(u.access_token,u.expires_in,u.refresh_token,c||void 0);return await Rc(d,"login-success"),window.localStorage.removeItem(Fo),window.localStorage.removeItem(gl),window.localStorage.removeItem(Uo),l&&l!==o?window.location.replace(l):window.history.replaceState(null,document.title,o),d}catch{return window.localStorage.removeItem(Fo),window.localStorage.removeItem(gl),window.localStorage.removeItem(Uo),null}}async function Iy(e,t){if(typeof window>"u")throw new Error("Browser required.");const n=py(),r=await _y(n,window.location.href);return window.location.href=r,new Promise(()=>{})}async function wh(){const e=await Di();if(!e)return console.warn("[Drive] refreshDriveSession: no stored session"),null;if(e.expiresAt>Date.now()+60*1e3)return console.debug("[Drive] refreshDriveSession: not expiring soon; skipping refresh",{expiresAt:e.expiresAt}),e;if(!e.refreshToken)return console.warn("[Drive] refreshDriveSession: missing refresh token; cannot refresh; keeping existing session",{expiresAt:e.expiresAt}),e;try{const t=await fetch(mh,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:e.refreshToken})});if(!t.ok){const l=await t.text().catch(()=>"");throw console.warn("[Drive] refreshDriveSession: HTTP error from token endpoint",{status:t.status,statusText:t.statusText,bodySnippet:l.slice(0,200)}),new Error("Refresh failed: "+t.status)}const n=await t.json(),r=await xh(n.access_token),s=yh(n.access_token,n.expires_in,e.refreshToken,r||e.profile);return await Rc(s,"refresh-success"),s}catch(t){const n=String((t==null?void 0:t.message)||"");return console.warn("[Drive] refreshDriveSession: caught error",{message:n}),/invalid_grant|invalid_client/i.test(n)?(console.warn("[Drive] refreshDriveSession: treating as fatal OAuth error; clearing session"),await vh("fatal-oauth-error")):console.warn("[Drive] refreshDriveSession: non-fatal error; keeping stored session in IDB"),null}}async function gs(e){let t=e??await Di();return t?jy(t)?await wh():t:null}async function Ry(){const e=await Ty();if(e)return e;const t=await Di();return t&&t.expiresAt>Date.now()+60*1e3?t:wh()}async function Dy(){await vh("explicit-disconnect")}async function jt(e,t,n){const r=await fetch(t,{...n,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",...(n==null?void 0:n.headers)||{}}});if(!r.ok){const s=await r.text().catch(()=>"");throw new Error(s||"Google Drive request failed.")}return r}function pi(e){return e.replace(/'/g,"\\'")}async function Ai(e){const t=Ay();if(t){if(await Sh(e,t))return t;Ly()}const n=new URLSearchParams({q:`name='${If}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await jt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return Af(s.files[0].id),s.files[0].id;const o=await(await jt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:If,mimeType:"application/vnd.google-apps.folder"})})).json();return Af(o.id),o.id}function Af(e){typeof window>"u"||window.localStorage.setItem(Pc,e)}function Ay(){return typeof window>"u"?null:window.localStorage.getItem(Pc)}function Ly(){typeof window>"u"||window.localStorage.removeItem(Pc)}function Lf(e){typeof window>"u"||window.localStorage.setItem(Tc,e)}function Oy(){return typeof window>"u"?null:window.localStorage.getItem(Tc)}function My(){typeof window>"u"||window.localStorage.removeItem(Tc)}async function Sh(e,t){try{return(await jt(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id`)).ok}catch{return!1}}async function Fy(e){const t=Oy();if(t){if(await Sh(e,t))return t;My()}const n=await Ai(e),r=new URLSearchParams({q:`'${n}' in parents and name='${pi(Rf)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),l=await(await jt(e,`https://www.googleapis.com/drive/v3/files?${r.toString()}`)).json();if(Array.isArray(l.files)&&l.files.length>0)return Lf(l.files[0].id),l.files[0].id;const u=await(await jt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Rf,mimeType:"application/vnd.google-apps.folder",parents:[n]})})).json();if(!(u!=null&&u.id))throw new Error("Unable to create Student Docs folder.");return Lf(u.id),u.id}async function Uy(e){const t=await Ai(e),n=new URLSearchParams({q:`'${t}' in parents and name='${pi(Df)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await jt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return s.files[0].id;const o=await(await jt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Df,mimeType:"application/vnd.google-apps.folder",parents:[t]})})).json();if(!(o!=null&&o.id))throw new Error("Unable to create student photos folder.");return o.id}async function zy(e,t,n){const r=(n||"").trim();if(!r)throw new Error("Document title is required.");const l=await(await jt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:r,mimeType:"application/vnd.google-apps.document",parents:[t]})})).json();if(!(l!=null&&l.id))throw new Error("Unable to create Google Doc.");return{fileId:l.id,title:l.name||r}}async function $y(e){const t=await gs();if(!(t!=null&&t.accessToken))throw new Error("Sign in with Google Drive first.");const n=t.accessToken,r=await Uy(n),s=_c(e.studentId,e.studentFullName);let l=e.fileId?String(e.fileId):null;if(!l){const S=`name='${pi(s)}' and '${r}' in parents and trashed=false`,x=new URLSearchParams({q:S,fields:"files(id)",spaces:"drive"}),b=await(await jt(n,`https://www.googleapis.com/drive/v3/files?${x.toString()}`)).json();l=Array.isArray(b.files)&&b.files.length>0?b.files[0].id:null}if(!l){const S=`student_${e.studentId}.jpg`,x=`name='${pi(S)}' and '${r}' in parents and trashed=false`,j=new URLSearchParams({q:x,fields:"files(id)",spaces:"drive"}),k=await(await jt(n,`https://www.googleapis.com/drive/v3/files?${j.toString()}`)).json();l=Array.isArray(k.files)&&k.files.length>0?k.files[0].id:null}const o=l?{name:s,mimeType:"image/jpeg"}:{name:s,parents:[r],mimeType:"image/jpeg"},u=new FormData;u.append("metadata",new Blob([JSON.stringify(o)],{type:"application/json"})),u.append("file",e.jpegBlob,s);const c=l?`https://www.googleapis.com/upload/drive/v3/files/${l}?uploadType=multipart&fields=id,name,modifiedTime`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime",d=await fetch(c,{method:l?"PATCH":"POST",headers:{Authorization:`Bearer ${n}`},body:u,signal:e.signal});if(!d.ok){const S=await d.text().catch(()=>"");throw new Error(S||"Failed to upload student photo.")}const y=await d.json();if(!(y!=null&&y.id))throw new Error("Unable to upload student photo.");return{fileId:y.id,folderId:r,fileName:y.name||s,modifiedTime:y.modifiedTime}}async function Of(e){const t=await Ai(e),n=new URLSearchParams({q:`'${t}' in parents and trashed=false`,fields:"files(id,name,modifiedTime,size,headRevisionId)",orderBy:"modifiedTime desc",spaces:"drive"});return((await(await jt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json()).files||[]).map(Li)}async function By(e,t,n){const r=await Ai(e),s="classseats_drive_boundary",l={name:t,mimeType:"application/json",parents:[r],appProperties:fy},o=[`--${s}`,"Content-Type: application/json; charset=UTF-8","",JSON.stringify(l),`--${s}`,"Content-Type: application/json","",n,`--${s}--`,""].join(`\r
`),u=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime,size,headRevisionId",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":`multipart/related; boundary=${s}`},body:o});if(!u.ok){const d=await u.text().catch(()=>"");throw new Error(d||"Failed to create Google Drive file.")}const c=await u.json();return Li(c)}async function Ia(e,t){return(await jt(e,`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{method:"GET"})).text()}async function Wy(e,t,n){const r=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:n});if(!r.ok){const o=await r.text().catch(()=>"");throw new Error(o||"Failed to upload file to Google Drive.")}const l=await(await jt(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime,size,headRevisionId`,{method:"GET"})).json();return Li(l)}function Li(e){var t;return e?{id:e.id,name:e.name,modifiedTime:e.modifiedTime,size:e.size,revisionId:e.headRevisionId||e.revisionId||((t=e==null?void 0:e.appProperties)==null?void 0:t.revisionId)}:{id:"",name:""}}async function Hy(e){const t=new URLSearchParams({q:"mimeType='application/json' and trashed=false",fields:"files(id,name,modifiedTime,size,headRevisionId)",orderBy:"modifiedTime desc",spaces:"drive"});return((await(await jt(e,`https://www.googleapis.com/drive/v3/files?${t.toString()}`)).json()).files||[]).map(Li)}const jr=new Map;function Nh(e,t){const n=jr.get(e);if((n==null?void 0:n.value)!==void 0)return Promise.resolve(n.value);if(n!=null&&n.promise)return n.promise;const r=t().then(s=>(jr.set(e,{value:s}),s)).catch(s=>{throw jr.delete(e),s});return jr.set(e,{promise:r}),r}function bs(e){if(!e){jr.clear();return}for(const t of jr.keys())t.startsWith(e)&&jr.delete(t)}const Vy="classseats-cache",Gy=1,bn="driveFolders",nr="studentPhotoMap",rr="photoBlobs";function Oi(){return typeof indexedDB>"u"?Promise.resolve(null):new Promise((e,t)=>{const n=indexedDB.open(Vy,Gy);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(bn)||r.createObjectStore(bn,{keyPath:"key"}),r.objectStoreNames.contains(nr)||r.createObjectStore(nr,{keyPath:"studentId"}),r.objectStoreNames.contains(rr)||r.createObjectStore(rr,{keyPath:"fileId"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error||new Error("IndexedDB open failed"))})}function Dc(e,t){return t?Date.now()-e>t:!1}async function Is(e,t){const n=await Oi();return n?new Promise((r,s)=>{const u=n.transaction(e,"readonly").objectStore(e).get(t);u.onsuccess=()=>r(u.result||null),u.onerror=()=>s(u.error||new Error("IDB get failed"))}):null}async function Mi(e,t){const n=await Oi();if(n)return new Promise((r,s)=>{const l=n.transaction(e,"readwrite");l.objectStore(e).put(t),l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB put failed"))})}async function Cs(e,t){const n=await Oi();if(n)return new Promise((r,s)=>{const l=n.transaction(e,"readwrite");l.objectStore(e).delete(t),l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB delete failed"))})}async function Ra(e){const t=await Oi();if(t)return new Promise((n,r)=>{const s=t.transaction(e,"readwrite");s.objectStore(e).clear(),s.oncomplete=()=>n(),s.onerror=()=>r(s.error||new Error("IDB clear failed"))})}async function kh(e,t,n){const r=await Is(bn,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Cs(bn,e),null):Dc(r.updatedAt,t)?(await Cs(bn,e),null):r:null}async function jh(e){await Mi(bn,e)}async function Ky(e,t,n){const r=await Is(nr,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Cs(nr,e),null):Dc(r.fetchedAt,t)?(await Cs(nr,e),null):r:null}async function Qy(e,t){const n=await Is(nr,e);return!n||t&&n.accountKey&&n.accountKey!==t?null:n}async function Yy(e){await Mi(nr,e)}async function Jy(e,t,n){const r=await Is(rr,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Cs(rr,e),null):Dc(r.fetchedAt,t)?(await Cs(rr,e),null):r:null}async function Xy(e,t){const n=await Is(rr,e);return!n||t&&n.accountKey&&n.accountKey!==t?null:n}async function bh(e){await Mi(rr,e)}async function qy(){await Promise.all([Ra(bn),Ra(nr),Ra(rr)])}const Ch="driveAccountKey";async function Zy(){const e=await Is(bn,Ch);return(e==null?void 0:e.value)||null}async function ex(e){const t={key:Ch,value:e,updatedAt:Date.now(),accountKey:e};await Mi(bn,t)}const Mf="ClassSeats",Ff="studentPhotos",Eh=30*24*60*60*1e3,tx=7*24*60*60*1e3,nx=7*24*60*60*1e3,rx=5*60*1e3,sx="classseats_studentPhotoRefs_v1",lx=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("classseats_debug_drive")==="1"}catch{return!1}},_h=(e,t)=>{lx()&&console.debug(`[PhotoService] ${e}`,t)},Da={folderLookups:0,photoMetaLookups:0,mediaDownloads:0};function Es(e){Da[e]+=1,_h(`${e}=${Da[e]}`,{count:Da[e]})}const mi=new Map,hi=new Map,Rr=new Map;let $o=null;const Ph=(e,t)=>`${e}:${t||0}`;function Th(e){return e.replace(/'/g,"\\'")}function ox(e){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(sx);if(!t)return null;const n=JSON.parse(t);if(!n||typeof n!="object")return null;const r=n[e];return!r||typeof r.fileId!="string"?null:r.fileId}catch{return null}}function Ih(e){let t=0;const n=[],r=()=>{if(t>=e)return;const s=n.shift();s&&s()};return async function(l){t>=e&&await new Promise(o=>n.push(o)),t+=1;try{return await l()}finally{t-=1,r()}}}const Ac=Ih(4),Uf=Ih(3);async function Dr(e,t,n){const r={Authorization:`Bearer ${e}`},s=(n==null?void 0:n.body)instanceof FormData;n!=null&&n.body&&!s&&(r["Content-Type"]="application/json");const l=await fetch(t,{...n,headers:{...r,...(n==null?void 0:n.headers)||{}}});if(!l.ok){const o=await l.text().catch(()=>"");throw new Error(o||"Google Drive request failed.")}return l}async function ix(e){var n,r,s,l,o;if((r=(n=e.driveSession)==null?void 0:n.profile)!=null&&r.email)return e.driveSession.profile.email;if((s=e.driveClient)!=null&&s.getStatus)try{const u=await e.driveClient.getStatus();if(u.connected)return((l=u.profile)==null?void 0:l.email)||null}catch{}const t=await gs(e.driveSession);return((o=t==null?void 0:t.profile)==null?void 0:o.email)||null}async function Ul(e){const t=await ix(e);if(!t)return null;$o&&$o!==t&&await gi("account-change");const n=await Zy();return n&&n!==t&&await gi("account-change"),$o=t,n!==t&&await ex(t),t}async function Fi(e){var n,r;if((n=e.driveSession)!=null&&n.accessToken)return e.driveSession.accessToken;if(((r=e.driveClient)==null?void 0:r.kind)==="desktop")return null;const t=await gs(e.driveSession);return(t==null?void 0:t.accessToken)||null}async function Lc(e,t){const n=await Nh(e,t);return n==null&&bs(e),n}function ll(e,t){const n=Rr.get(e);n!=null&&n.url&&URL.revokeObjectURL(n.url);const r=URL.createObjectURL(t);return Rr.set(e,{url:r}),r}function ax(e){const t=Rr.get(e);return(t==null?void 0:t.url)||null}function Rh(e,t){const n=`${e}:`;for(const[r,s]of Rr.entries())r!==e&&!r.startsWith(n)||t&&r===t||(s!=null&&s.url&&URL.revokeObjectURL(s.url),Rr.delete(r))}function ux(e){const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),t}function cx(e){const t=e.replace(/\s+/g,"");return t.length<32||t.length%4!==0?!1:/^[A-Za-z0-9+/=]+$/.test(t)}function zf(e,t){try{const n=e.replace(/\s+/g,""),r=atob(n),s=new Uint8Array(r.length);for(let l=0;l<r.length;l+=1)s[l]=r.charCodeAt(l);return new Blob([s],{type:t||"image/jpeg"})}catch{return null}}function dx(e){if(!e)return null;if(e instanceof Blob)return e;if(e instanceof ArrayBuffer)return new Blob([e]);if(ArrayBuffer.isView(e))return new Blob([ux(e)]);if(typeof e=="string"){if(e.startsWith("data:")){const t=e.split(",",2);if(t.length===2){const n=t[0].match(/data:([^;]+)/),r=zf(t[1],n==null?void 0:n[1]);if(r)return r}}if(cx(e)){const t=zf(e);if(t)return t}return new Blob([e])}return null}async function $f(e,t,n,r){const s=`name='${Th(n)}' and '${t}' in parents and trashed=false`,l=new URLSearchParams({q:s,fields:"files(id,name,modifiedTime)",spaces:"drive"});return Es("photoMetaLookups"),Ac(async()=>{const u=await(await Dr(e,`https://www.googleapis.com/drive/v3/files?${l.toString()}`,{method:"GET",signal:r})).json();return!Array.isArray(u.files)||u.files.length===0?null:u.files[0]})}async function fx(e,t,n){return Es("photoMetaLookups"),Ac(async()=>{const s=await(await Dr(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime`,{method:"GET",signal:n})).json();return s!=null&&s.id?{id:s.id,name:s.name,modifiedTime:s.modifiedTime}:null})}async function px(e,t,n,r){return Ac(async()=>{const l=await(await Dr(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime`,{method:"PATCH",body:JSON.stringify({name:n}),signal:r})).json();return l!=null&&l.id?{id:l.id,name:l.name,modifiedTime:l.modifiedTime}:null})}async function mx(e){return Lc("driveFolder:classSeats",async()=>{const t=await Ul(e),n=await kh("classSeatsFolderId",Eh,t||void 0);if(n!=null&&n.value)return n.value;const r=await Fi(e);if(!r)return null;Es("folderLookups");const s=new URLSearchParams({q:`name='${Mf}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),o=await(await Dr(r,`https://www.googleapis.com/drive/v3/files?${s.toString()}`,{method:"GET"})).json();let u=null;if(Array.isArray(o.files)&&o.files.length>0&&(u=o.files[0].id),!u){const d=await(await Dr(r,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Mf,mimeType:"application/vnd.google-apps.folder"})})).json();u=(d==null?void 0:d.id)||null}return u?(await jh({key:"classSeatsFolderId",value:u,updatedAt:Date.now(),accountKey:t||void 0}),u):null})}async function hx(e){return Lc("driveFolder:studentPhotos",async()=>{const t=await Ul(e),n=await kh("studentPhotosFolderId",Eh,t||void 0);if(n!=null&&n.value)return n.value;const r=await Fi(e);if(!r)return null;const s=await mx(e);if(!s)return null;Es("folderLookups");const l=new URLSearchParams({q:`'${s}' in parents and name='${Th(Ff)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),u=await(await Dr(r,`https://www.googleapis.com/drive/v3/files?${l.toString()}`,{method:"GET"})).json();let c=null;if(Array.isArray(u.files)&&u.files.length>0&&(c=u.files[0].id),!c){const y=await(await Dr(r,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Ff,mimeType:"application/vnd.google-apps.folder",parents:[s]})})).json();c=(y==null?void 0:y.id)||null}return c?(await jh({key:"studentPhotosFolderId",value:c,updatedAt:Date.now(),accountKey:t||void 0}),c):null})}async function ol(e){mi.set(e.studentId,e),hi.delete(e.studentId),bs(`studentPhoto:${e.studentId}`),await Yy(e)}async function gx(e,t,n,r){const s=String(e),l=await Ul(n),o=mi.get(s);if(o&&(!l||o.accountKey===l))return o;const u=await Ky(s,tx,l||void 0);if(u)return mi.set(s,u),u;const c=await Qy(s,l||void 0),d=hi.get(s);if(d&&Date.now()-d<rx)return c||null;const y=await Fi(n);if(!y)return c||null;if(c!=null&&c.fileId)try{const b=await fx(y,c.fileId,r);if(b){const k={studentId:s,fileId:b.id,fileName:b.name,updatedTime:b.modifiedTime,fetchedAt:Date.now(),accountKey:l||void 0};return await ol(k),k}}catch{}const S=await hx(n);if(!S)return c||null;const x=t?_c(e,t):c==null?void 0:c.fileName;if(x)try{const b=await $f(y,S,x,r);if(b){const k={studentId:s,fileId:b.id,fileName:b.name,updatedTime:b.modifiedTime,fetchedAt:Date.now(),accountKey:l||void 0};return await ol(k),k}}catch{return c||null}try{const b=`student_${e}.jpg`,k=await $f(y,S,b,r);if(k){let J=k.name,h=k.modifiedTime;if(x&&k.name!==x){const g=await px(y,k.id,x,r);g!=null&&g.name&&(J=g.name,h=g.modifiedTime)}const f={studentId:s,fileId:k.id,fileName:J,updatedTime:h,fetchedAt:Date.now(),accountKey:l||void 0};return await ol(f),f}}catch{return c||null}const j=ox(s);if(j){const b={studentId:s,fileId:j,fileName:x||void 0,fetchedAt:Date.now(),accountKey:l||void 0};return await ol(b),b}return hi.set(s,Date.now()),c||null}async function vx(e,t,n){var s;if(((s=t.driveClient)==null?void 0:s.kind)==="desktop"&&t.driveClient.downloadFile)return Es("mediaDownloads"),Uf(async()=>{var o,u;const l=await((u=(o=t.driveClient)==null?void 0:o.downloadFile)==null?void 0:u.call(o,e));return dx(l==null?void 0:l.data)});const r=await Fi(t);return r?(Es("mediaDownloads"),Uf(async()=>{const l=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{method:"GET",headers:{Authorization:`Bearer ${r}`},signal:n});return l.ok?l.blob():null})):null}async function yx(e,t,n,r){const s=Ph(e,t);Rh(e,s);const l=ax(s);if(l)return l;const o=await Ul(n),u=await Jy(s,nx,o||void 0);if(u)return ll(s,u.blob);const c=await Xy(s,o||void 0);try{const d=await Nh(`photoBlob:${s}`,async()=>vx(e,n,r));if(!d)return bs(`photoBlob:${s}`),c?ll(s,c.blob):null;const y={fileId:s,blob:d,fetchedAt:Date.now(),accountKey:o||void 0};return await bh(y),ll(s,d)}catch{return bs(`photoBlob:${s}`),c?ll(s,c.blob):null}}async function xx(e){const t=e.photoFileId?String(e.photoFileId):"";if(!t)return{fileId:null,url:null};const n=await yx(t,e.photoUpdatedAt,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal);return{fileId:t,url:n}}async function wx(e){const t=`studentPhoto:${String(e.studentId)}`;return Lc(t,async()=>gx(e.studentId,e.fullName,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal))}async function Sx(e){const t=Ph(e.fileId,e.photoUpdatedAt);bs(`photoBlob:${t}`);const n=String(e.studentId),r=await Ul({driveClient:e.driveClient,driveSession:e.driveSession}),s=_c(e.studentId,e.fullName),l={studentId:n,fileId:e.fileId,fileName:s,updatedTime:e.updatedTime,fetchedAt:Date.now(),accountKey:r||void 0};await ol(l);const o={fileId:t,blob:e.blob,updatedTime:e.updatedTime,fetchedAt:Date.now(),accountKey:r||void 0};await bh(o),Rh(e.fileId,t),ll(t,e.blob)}async function gi(e){e&&_h("cache clear",{reason:e});for(const t of Rr.values())URL.revokeObjectURL(t.url);Rr.clear(),mi.clear(),hi.clear(),$o=null,bs(),await qy()}function Dh({studentId:e,fullName:t,photoFileId:n,photoUpdatedAt:r,driveClient:s,driveSession:l,driveAccountKey:o}){const[u,c]=p.useState(null),[d,y]=p.useState(null),[S,x]=p.useState(!1),j=p.useMemo(()=>String(e),[e]),b=p.useMemo(()=>n?String(n):"",[n]),k=(l==null?void 0:l.accessToken)||"",J=o||"";return p.useEffect(()=>{let h=!0;const f=new AbortController;return b?(x(!0),c(null),xx({photoFileId:b,photoUpdatedAt:r,driveClient:s,driveSession:l,signal:f.signal}).then(g=>{h&&(c(g.url),y(g.fileId))}).catch(()=>{h&&(c(null),y(null))}).finally(()=>{h&&x(!1)}),()=>{h=!1,f.abort()}):(c(null),y(null),x(!1),()=>{h=!1,f.abort()})},[j,b,r,s,l,k,J,t]),{photoUrl:u,fileId:d,loading:S}}const Bf=72,Nx=64,kx={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","6xl":"max-w-6xl","7xl":"max-w-7xl"};function jx({isOpen:e,onRequestClose:t,title:n,subtitle:r,headerRight:s,footer:l,children:o,maxWidth:u="6xl",bodyClassName:c,bodyPadding:d=!0,showCloseX:y=!1}){if(p.useEffect(()=>{if(!e)return;const j=b=>{b.key==="Escape"&&t()};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[e,t]),!e)return null;const S=l?`max-h-[calc(90vh-${Bf}px-${Nx}px)]`:`max-h-[calc(90vh-${Bf}px)]`,x=d?"px-5 py-4":"";return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",style:{width:"100dvw",height:"100dvh"},onMouseDown:t}),i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{width:"100dvw",height:"100dvh"},children:i.jsxs("div",{role:"dialog","aria-modal":"true",className:`relative w-full rounded-xl bg-white shadow-xl border border-slate-200 max-h-[90vh] overflow-hidden ${kx[u]}`,onMouseDown:j=>j.stopPropagation(),children:[i.jsx("div",{className:"border-b border-slate-200 px-5 py-4 bg-white",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"min-w-0",children:[n&&i.jsx("div",{className:"text-lg font-semibold text-slate-900",children:n}),r&&i.jsx("div",{className:"text-sm text-slate-500",children:r})]}),(s||y)&&i.jsxs("div",{className:"flex items-center gap-2",children:[s,y&&i.jsx("button",{type:"button","aria-label":"Close",onClick:t,className:"rounded-md p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:i.jsx("span",{"aria-hidden":"true",className:"text-lg leading-none",children:""})})]})]})}),i.jsx("div",{className:`overflow-y-auto overscroll-contain ${S} ${x} ${c??""}`,children:o}),l&&i.jsx("div",{className:"border-t border-slate-200 px-5 py-4 bg-slate-50",children:l})]})})]})}const bx="newui_constraints_v1";function Cx(){try{const e=localStorage.getItem(bx);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function Ex(){return Cx()}const Ah=p.createContext(null);function _x({children:e}){const[t,n]=p.useState([]),r=p.useCallback(o=>{n(u=>u.filter(c=>c.id!==o))},[]),s=p.useCallback(o=>{const u=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,c=o.tone||"info",d=o.duration??4e3;n(y=>[...y,{...o,id:u,tone:c}]),d>0&&typeof window<"u"&&window.setTimeout(()=>r(u),d)},[r]),l=p.useMemo(()=>s,[s]);return i.jsxs(Ah.Provider,{value:l,children:[e,i.jsx("div",{className:"pointer-events-none fixed top-6 left-1/2 -translate-x-1/2 z-[1000] flex flex-col gap-4 w-full max-w-lg items-center",children:t.map(o=>{const u=o.tone==="success"?"bg-emerald-600 text-white shadow-emerald-500/40":o.tone==="error"?"bg-rose-600 text-white shadow-rose-500/40":o.tone==="warning"?"bg-amber-500 text-slate-900 shadow-amber-400/40":"bg-slate-800 text-white shadow-slate-900/40";return i.jsxs("div",{className:`pointer-events-auto rounded-3xl px-5 py-4 shadow-2xl flex items-start gap-4 text-base font-semibold w-full ${u}`,children:[i.jsx("div",{className:"flex-1 text-sm font-semibold",children:o.message}),i.jsx("button",{className:"text-base font-bold opacity-80 hover:opacity-100",onClick:()=>r(o.id),"aria-label":"Dismiss notification",children:""})]},o.id)})})]})}function Lh(){const e=p.useContext(Ah);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}const Px="newui_history_v1";function Tx(){try{const e=localStorage.getItem(Px);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function Ix(){return Tx()}console.log(" GroupingAlgorithm.js (FIXED v2) file loaded!");console.log(" GroupingAlgorithm v2 loaded successfully!");const Rx="newui_groupings_v1";function Dx(){try{const e=localStorage.getItem(Rx);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function Ax(){return Dx()}const Lx="newui_print_settings_v1",Ox={seatingChartEditor:{lastUpdated:new Date(0).toISOString()}};function Mx(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Xs(e,t,n,r){const s=typeof e=="number"?e:parseFloat(String(e));return Number.isFinite(s)?Math.min(r,Math.max(n,s)):t}function Fx(e){return e==="a4"||e==="legal"||e==="tabloid"?e:"letter"}function Ux(e){return Array.isArray(e)?e.filter(t=>typeof t=="string"||typeof t=="number"):null}function zx(){const e=Mx(localStorage.getItem(Lx)),t=(e==null?void 0:e.seatingChartEditor)??{};return{seatingChartEditor:{paper:Fx(t.paper),orientation:t.orientation==="portrait"?"portrait":"landscape",marginMode:t.marginMode==="max"?"max":"safe",showPhotos:t.showPhotos!==!1,showTags:t.showTags!==!1,showSeatNumbers:t.showSeatNumbers===!0,selectedTagIds:Ux(t.selectedTagIds),textScale:Xs(t.textScale,1,.5,2.5),photoScale:Xs(t.photoScale,1,.5,2),zoom:Xs(t.zoom,1,.1,4),offsetX:Xs(t.offsetX,0,-5e3,5e3),offsetY:Xs(t.offsetY,0,-5e3,5e3),lastUpdated:typeof t.lastUpdated=="string"?t.lastUpdated:Ox.seatingChartEditor.lastUpdated}}}function Oh(e,t=50){const n=t>0?t:50,r=Math.ceil(n*.9),s=Math.ceil(n*.7),l=Math.ceil(n*.5);return e>=r?{label:"Good Standing",color:"green",emoji:"",min:r}:e>=s?{label:"Caution",color:"yellow",emoji:"",min:s,max:r-1}:e>=l?{label:"Warning",color:"orange",emoji:"",min:l,max:s-1}:{label:"Alert",color:"red",emoji:"",min:0,max:l-1}}function $x(){return{periods:Tu().periods.map(t=>({id:t.id,behaviorNotes:t.behaviorNotes||{},pointsByStudent:t.pointsByStudent||{},pointsHistory:t.pointsHistory||[],pointsEnabled:t.pointsEnabled,startingPoints:t.startingPoints}))}}const Bx=e=>{const[t,n,r]=e.split("-").map(s=>Number(s));return!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(r)?null:new Date(Date.UTC(t,n-1,r))},Wx=e=>{const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return`${t}-${n}-${r}`},Hx=e=>{const t=Bx(e);return t?(t.setUTCDate(t.getUTCDate()-1),Wx(t)):e},Mh=(e,t,n)=>{if(!e)return null;const r=e[String(t)];return r&&r[n]||null},Vx=e=>{if(!e)return null;const t=Object.keys(e);return t.length===0?null:t.reduce((n,r)=>r<n?r:n,t[0])};function qs(e){var y;const{attendance:t,studentId:n,date:r,status:s,resets:l}=e;if(!t)return 0;const o=String(n),c=Mh(l,n,s==="left_early"?"leftEarly":s==="tardy"?"tardy":"absent");let d=0;for(const S of Object.keys(t))S>r||c&&S<c||((y=t[S])==null?void 0:y[o])===s&&(d+=1);return d}function Gx(e){var S,x;const{attendance:t,studentId:n,date:r,resets:s}=e;if(!t)return 0;const l=String(n);if((((S=t[r])==null?void 0:S[l])||"unmarked")!=="absent")return 0;const u=Mh(s,n,"absent");if(u&&r<u)return 0;const c=Vx(t);let d=r,y=0;for(;!(u&&d<u);){const j=((x=t[d])==null?void 0:x[l])||"unmarked";if(j==="absent")y+=1;else if(j!=="unmarked")break;if(!c||d<=c)break;d=Hx(d)}return y}const Fh="https://www.classseats.com/updates",Oc="https://classseats.com",Kx=`${Oc}/privacy.html`,Qx=`${Oc}/terms.html`;function Yx({variant:e="floating",className:t}){const n=new Date().getFullYear(),r=i.jsxs("div",{className:"w-full max-w-[420px] rounded-xl border border-indigo-100 bg-white/95 px-3 py-3 text-left text-slate-800 shadow-lg backdrop-blur",children:[i.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-700 flex flex-wrap items-center gap-1",children:["Early Access   ",n," ClassSeats "," ",i.jsx("a",{href:Fh,target:"_blank",rel:"noreferrer",className:"text-indigo-700 underline decoration-indigo-300 decoration-2 underline-offset-4 hover:text-indigo-800",children:"Get updates"})]}),i.jsx("p",{className:"mt-1 text-[11px] leading-snug text-slate-700",children:"ClassSeats is in active development. Features and pricing may change."})]});return e==="floating"?i.jsx("div",{className:`pointer-events-none fixed bottom-3 left-3 right-3 z-40 flex justify-end md:left-auto md:right-4 md:max-w-[420px] ${t??""}`,children:i.jsx("div",{className:"pointer-events-auto w-full md:w-auto",children:r})}):i.jsx("div",{className:t,children:r})}const Jx="0.1.0",Xx=new Date().toLocaleDateString();function qx({open:e,onClose:t,buildRevision:n}){const r=new Date().getFullYear();return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),i.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl bg-white p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-indigo-700",children:"ClassSeats (Early Access)"}),i.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"About"})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:t,"aria-label":"Close about",children:""})]}),i.jsx("p",{className:"mt-2 text-sm leading-relaxed text-slate-700",children:"ClassSeats is in active development. Features and pricing may change. Data is stored in your Google Drive or locally on your device  ClassSeats does not store student data on its servers."}),i.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-800 space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"App version"}),i.jsx("span",{children:Jx})]}),n&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Build revision"}),i.jsxs("span",{children:["Rev ",n]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Build date"}),i.jsx("span",{children:Xx})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[i.jsx(jo,{href:Oc,label:"Home"}),i.jsx(jo,{href:Kx,label:"Privacy"}),i.jsx(jo,{href:Qx,label:"Terms"}),i.jsx(jo,{href:Fh,label:"Get updates"})]}),i.jsxs("p",{className:"mt-4 text-[11px] text-slate-500",children:[" ",r," ClassSeats. All rights reserved."]}),i.jsx("p",{className:"mt-1 text-[10px] text-slate-400",children:"Google Drive is a trademark of Google LLC"})]})]}):null}function jo({href:e,label:t}){return i.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-800 shadow-sm hover:border-indigo-200 hover:text-indigo-700",children:[t,i.jsx("span",{"aria-hidden":"true",children:""})]})}function Zx({current:e,onGoDesktop:t,onGoMobile:n}){const r="px-3 py-1.5 text-xs font-semibold rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500",s="bg-slate-900 text-white",l="bg-white text-slate-700 border border-slate-200 hover:bg-slate-50";return i.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white/80 p-1 shadow-sm",children:[i.jsx("button",{type:"button","aria-pressed":e==="desktop",className:`${r} ${e==="desktop"?s:l}`,onClick:t,children:"Desktop"}),i.jsx("button",{type:"button","aria-pressed":e==="mobile",className:`${r} ${e==="mobile"?s:l}`,onClick:n,children:"Mobile"})]})}function ew(){var n;if(typeof navigator>"u")return!1;const e=(n=navigator.userAgentData)==null?void 0:n.mobile;if(typeof e=="boolean")return e;const t=navigator.userAgent||"";return/iPhone|Android.+Mobile|Windows Phone|iPod/i.test(t)}function tw(e,t,n){const r=Tu().currentId,s=r!=null?String(r):null,l=new Date().toISOString();return{schemaVersion:1,version:1,exportedAt:l,updatedAt:l,lastWriter:"unknown",layouts:Xv(),periodsState:Tu(),lastEditedPeriodId:s,lastEditedDate:null,students:n||oy(),tags:ny(),behaviorState:$x(),constraintsState:Ex(),historyState:Ix(),groupingsState:Ax(),printSettings:zx()}}const Jr=e=>!!e&&typeof e=="object",nw=e=>e===!0||e==="true"||e===1||e==="1",Uh=e=>{const t=typeof e=="number"?e:parseInt(String(e),10);return Number.isFinite(t)&&Number.isInteger(t)?t:null};function rw(e,t){if(!Array.isArray(e))return[];const n=[];for(const r of e){const s=Uh(r);s!=null&&(s<0||s>=t||n.push(s))}return Array.from(new Set(n)).sort((r,s)=>r-s)}function sw(e){var u;if(!e||typeof e!="object"||(e.schemaVersion??(e.version===1?1:void 0))!==1)return null;const n=typeof e.exportedAt=="string"?e.exportedAt:new Date().toISOString(),r=typeof e.updatedAt=="string"?e.updatedAt:n,s=e.lastWriter==="desktop"||e.lastWriter==="mobile"||e.lastWriter==="unknown"?e.lastWriter:"unknown",l={...e,schemaVersion:1,version:e.version??1,exportedAt:n,updatedAt:r,lastWriter:s};if(l.behaviorState=Jr(e.behaviorState)?e.behaviorState:{},!Jr(l.periodsState)||!Array.isArray((u=l.periodsState)==null?void 0:u.periods)||!Array.isArray(l.students)||!Array.isArray(l.layouts)||!Jr(l.behaviorState)||!Jr(l.constraintsState)||!Jr(l.historyState)||!Jr(l.groupingsState))return null;switch((e.schemaVersion!==l.schemaVersion||e.updatedAt!==l.updatedAt||e.exportedAt!==l.exportedAt||e.lastWriter!==l.lastWriter)&&console.log("[Payload] migrated to schema v1",{hadSchemaVersion:e.schemaVersion,hadVersion:e.version,addedUpdatedAt:e.updatedAt!==l.updatedAt,addedLastWriter:e.lastWriter!==l.lastWriter}),l.schemaVersion){case 1:return l.students=(l.students||[]).map(c=>({...c,needsPreferredSeating:nw(c.needsPreferredSeating),quickNote:(typeof c.quickNote=="string",c.quickNote),quickNoteUpdatedAt:(typeof c.quickNoteUpdatedAt=="string",c.quickNoteUpdatedAt),photoFileId:typeof c.photoFileId=="string"?c.photoFileId:c.photoFileId==null?null:String(c.photoFileId),photoUpdatedAt:Uh(c.photoUpdatedAt)})),l.layouts=(l.layouts||[]).map(c=>({...c,tables:(c.tables||[]).map(d=>{const y=Math.max(0,d.capacity||0);return{...d,preferredSeatIndexes:rw(d.preferredSeatIndexes,y),seatLayout:fh(y||1,d.rotation||0,d.seatLayout||null)}})})),l;default:return null}}function lw(e){return e.isOffline?{action:"skip",reason:"offline"}:e.isLocked?{action:"skip",reason:"locked"}:e.inFlight?{action:"skip",reason:"in-flight"}:e.hasFile?e.dirty?{action:"upload",reason:"ready"}:{action:"skip",reason:"clean"}:{action:"skip",reason:"no-file"}}function ow(e){const t=e.graceMs;return e.isOffline?{action:"skip",reason:"offline"}:e.isLocked?{action:"skip",reason:"locked"}:e.inFlight?{action:"skip",reason:"in-flight"}:e.dirty?{action:"skip",reason:"dirty"}:e.lastLocalEditAt&&e.now-e.lastLocalEditAt<t?{action:"skip",reason:"grace-window"}:{action:"pull",reason:"ready"}}function iw(e){const t=e.incomingUpdatedAt?Date.parse(e.incomingUpdatedAt):NaN,n=e.lastAppliedUpdatedAt?Date.parse(e.lastAppliedUpdatedAt):NaN;return Number.isFinite(t)&&Number.isFinite(n)&&t<=n?{action:"skip",reason:"stale-updatedAt"}:e.incomingRevisionId&&e.lastRevisionId&&e.incomingRevisionId===e.lastRevisionId?{action:"skip",reason:"same-revision"}:{action:"apply",reason:"fresh"}}const aw=new Set(["students","periodsState","layouts","tags","constraintsState","historyState","groupingsState","behaviorNotes","attendance","notes","alerts","payload"]),Ru=(e,t,n)=>{if(aw.has(t))return"[omitted]";if(typeof e=="string")return e.length>200?`[string ${e.length}]`:e;if(Array.isArray(e)){const r=e.slice(0,5).map(s=>Ru(s,"",n+1));return e.length>5&&r.push(`[+${e.length-5} more]`),n>1?`[array len=${e.length}]`:r}if(e&&typeof e=="object"){if(n>1)return"[object]";const r=Object.entries(e).slice(0,10).map(([s,l])=>[s,Ru(l,s,n+1)]);return r.length===0?e:Object.fromEntries(r)}return e};function Zs(e,t){if(!(typeof console>"u"))try{const n=t?Ru(t,"",0):void 0;n!==void 0?console.log(e,n):console.log(e)}catch{console.log(e)}}function uw({children:e}){return i.jsx(i.Fragment,{children:e})}function cw(e){const t=e.slice();for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function Mt(e){return String(e)}function Wf(e){try{const t=localStorage.getItem(e);if(!t)return new Set;const n=JSON.parse(t);return Array.isArray(n)?new Set(n.map(String)):new Set}catch{return new Set}}function Aa(e,t){try{localStorage.setItem(e,JSON.stringify(Array.from(t)))}catch{}}function Hf({open:e,title:t,body:n,confirmText:r,cancelText:s,onConfirm:l,onCancel:o,danger:u}){return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center p-4 sm:items-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:o}),i.jsxs("div",{className:"relative w-full max-w-md overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-2xl",children:[i.jsxs("div",{className:"space-y-2 p-5",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:t}),i.jsx("div",{className:"text-sm text-slate-600",children:n})]}),i.jsxs("div",{className:"flex gap-2 p-4 pt-0",children:[i.jsx("button",{className:"flex-1 rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 hover:bg-slate-50",onClick:o,children:s}),i.jsx("button",{className:`flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold text-white ${u?"bg-rose-600 hover:bg-rose-700":"bg-violet-600 hover:bg-violet-700"}`,onClick:l,children:r})]})]})]}):null}function dw({students:e,periodId:t,driveFileId:n,driveClient:r,driveSession:s}){const l=n??"local",o=`cs_mobile_flashcards_learned_v1:${l}:${t}`,[u,c]=p.useState(!1),[d,y]=p.useState(()=>Wf(o)),S=p.useRef(d);p.useEffect(()=>{S.current=d},[d]),p.useEffect(()=>{const V=Wf(o);S.current=V,y(V),c(!1)},[o]);const x=e.length,[j,b]=p.useState([]),[k,J]=p.useState(0),[h,f]=p.useState(!1),[g,C]=p.useState(null),[A,O]=p.useState(null),F=p.useMemo(()=>{if(u)return e;const V=d;return e.filter(ee=>!V.has(Mt(ee.id))||Mt(ee.id)===g)},[e,u,d,g]),z=p.useMemo(()=>e.map(V=>Mt(V.id)).join("|"),[e]),de=p.useMemo(()=>F.map(V=>Mt(V.id)).join("|"),[F]),q=p.useMemo(()=>{const V=new Set(e.map(le=>Mt(le.id)));let ee=0;return d.forEach(le=>{V.has(le)&&ee++}),ee},[e,d]),ke=Math.max(0,x-q),[Ze,et]=p.useState(!1),[Z,Me]=p.useState(!1);p.useEffect(()=>{const V=S.current,ee=(u?e:e.filter(le=>!V.has(Mt(le.id)))).map(le=>Mt(le.id));b(ee),J(0),f(!1),C(null),O(null)},[u,t,l,z]),p.useEffect(()=>{const V=new Set(F.map(ee=>Mt(ee.id)));b(ee=>{const le=ee.filter(De=>V.has(De));return le.length===ee.length?ee:(J(De=>Math.min(De,Math.max(0,le.length-1))),le)})},[de]);const W=p.useMemo(()=>new Map(F.map(V=>[Mt(V.id),V])),[F]),he=j[k]??null,T=he?W.get(he)??null:null,{photoUrl:Q}=Dh({studentId:(T==null?void 0:T.id)??"unknown",fullName:(T==null?void 0:T.fullName)??null,photoFileId:(T==null?void 0:T.photoFileId)??null,photoUpdatedAt:(T==null?void 0:T.photoUpdatedAt)??null,driveClient:r,driveSession:s}),X=V=>!he||g!==he||u?!1:(b(ee=>{const le=ee.filter(De=>De!==he);return J(De=>le.length===0?0:V==="prev"?Math.max(0,De-1):Math.min(De,le.length-1)),le}),C(null),!0),pe=()=>{f(!1),O(null),!X("next")&&J(V=>j.length===0?0:Math.min(V+1,j.length-1))},me=()=>{f(!1),O(null),!X("prev")&&J(V=>Math.max(0,V-1))},Ht=()=>{if(!T)return;const V=Mt(T.id);O(null),y(ee=>{const le=new Set(ee);return le.add(V),Aa(o,le),le}),C(V)},L=()=>{if(!T)return;const V=Mt(T.id);C(null),O(ee=>ee===V?null:V),y(ee=>{if(!ee.has(V))return ee;const le=new Set(ee);return le.delete(V),Aa(o,le),le})},Ke=()=>{et(!1),f(!1),C(null),O(null),b(V=>cw(V)),J(0)},Fe=()=>{Me(!1),f(!1),C(null),O(null);const V=new Set;y(V),Aa(o,V);const ee=e.map(le=>Mt(le.id));b(ee),J(0)},Be=!u&&ke===0&&x>0;return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Flashcards"}),i.jsxs("div",{className:"text-xs text-slate-600",children:["Learned ",q," / ",x,"  Remaining ",ke]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:j.length<2,onClick:()=>et(!0),children:"Shuffle"}),i.jsx("button",{className:`rounded-xl border px-3 py-2 text-xs font-semibold ${u?"border-violet-200 bg-violet-50 text-violet-900":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}`,onClick:()=>{c(V=>!V),f(!1),C(null),O(null)},children:u?"Including learned":"Include learned"}),i.jsx("button",{className:"rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>Me(!0),children:"Clear learned"})]})]}),Be?i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center space-y-2",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:"All learned!"}),i.jsx("div",{className:"text-sm text-slate-600",children:"Youve marked everyone in this period as learned."}),i.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[i.jsx("button",{className:"rounded-xl bg-violet-600 px-4 py-3 text-sm font-semibold text-white hover:bg-violet-700",onClick:()=>c(!0),children:"Review learned students"}),i.jsx("button",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>Me(!0),children:"Clear learned for this period"})]})]}):i.jsx("div",{className:"space-y-3",children:T?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative w-full",style:{perspective:1200},children:i.jsx("button",{type:"button",onClick:()=>f(V=>!V),className:"w-full text-left","aria-label":"Flip flashcard",children:i.jsxs("div",{className:"relative h-[380px] w-full",style:{transformStyle:"preserve-3d",transition:"transform 420ms cubic-bezier(0.2, 0.8, 0.2, 1)",transform:h?"rotateY(180deg)":"rotateY(0deg)"},children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-xl",style:{backfaceVisibility:"hidden"},children:i.jsxs("div",{className:"h-full w-full bg-slate-50 flex items-center justify-center",children:[Q?i.jsx("img",{src:Q,alt:"",className:"h-full w-full object-cover"}):i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-slate-200 text-2xl font-bold text-slate-700",children:T.fullName.split(" ").slice(0,2).map(V=>{var ee;return((ee=V[0])==null?void 0:ee.toUpperCase())??""}).join("")}),i.jsx("div",{className:"mt-3 text-sm text-slate-500",children:"No photo"})]}),i.jsx("div",{className:"absolute bottom-3 left-0 right-0 text-center text-xs font-semibold text-slate-500",children:"Tap to flip"})]})}),i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-xl",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:i.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center p-6 text-center",children:[i.jsx("div",{className:"text-2xl font-bold leading-tight text-slate-900",children:T.fullName}),i.jsx("div",{className:"mt-2 text-sm text-slate-600",children:"Tap again to see photo"}),i.jsxs("div",{className:"mt-6 w-full max-w-sm space-y-2",children:[i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${g===he?"bg-emerald-600 text-white hover:bg-emerald-700":"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,onClick:V=>{V.preventDefault(),V.stopPropagation(),Ht()},children:" Ive learned this"}),i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${A===he?"bg-violet-600 text-white hover:bg-violet-700":"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,onClick:V=>{V.preventDefault(),V.stopPropagation(),L()},children:" Still learning"})]})]})})]})})}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("button",{className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:k===0,onClick:me,children:"Prev"}),i.jsx("div",{className:"px-2 text-xs font-semibold text-slate-500",children:j.length===0?"0 / 0":`${k+1} / ${j.length}`}),i.jsx("button",{className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:j.length===0||k>=j.length-1,onClick:pe,children:"Next"})]})]}):i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center space-y-2",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:"No students found."}),i.jsx("div",{className:"text-sm text-slate-600",children:"This period doesnt have any students yet."})]})}),i.jsx(Hf,{open:Ze,title:"Shuffle deck?",body:"This will randomize the order of the current deck once.",confirmText:"Shuffle",cancelText:"Cancel",onConfirm:Ke,onCancel:()=>et(!1)}),i.jsx(Hf,{open:Z,title:"Clear learned students?",body:"This resets learned progress for this period on this device.",confirmText:"Clear",cancelText:"Cancel",danger:!0,onConfirm:Fe,onCancel:()=>Me(!1)})]})}const fw=.85,pw=900,mw=1200,hw=4,gw=60,vw=160;function yw({studentId:e,studentFullName:t,existingPhotoFileId:n,open:r,onClose:s,onAccept:l,onUploadComplete:o,title:u="Take Photo"}){const c=Lh(),d=p.useRef(null),y=p.useRef(null),S=p.useRef(null),x=p.useRef(null),j=p.useRef(null),b=p.useRef(!1),k=p.useRef(new Map),J=p.useRef(null),h=p.useRef(null),f=p.useRef(1),g=p.useRef(null),C=p.useRef(null),[A,O]=p.useState(null),[F,z]=p.useState(!1),[de,q]=p.useState(!1),[ke,Ze]=p.useState(!1),[et,Z]=p.useState(1),[Me,W]=p.useState(!1),[he,T]=p.useState(!1),Q=p.useRef(null),X=p.useMemo(()=>{if(typeof navigator>"u")return{isIOS:!1,isAndroid:!1};const M=navigator.userAgent||"",U=/iPad|iPhone|iPod/i.test(M)||M.includes("Mac")&&typeof document<"u"&&"ontouchend"in document,K=/Android/i.test(M);return{isIOS:U,isAndroid:K}},[]),pe=()=>{k.current.clear(),J.current=null,g.current&&(cancelAnimationFrame(g.current),g.current=null),C.current=null},me=()=>{x.current=null,h.current=null,f.current=1,Z(1),Ze(!1),pe()},Ht=()=>(Q.current||(Q.current=document.createElement("canvas")),Q.current),L=M=>{const U=Ht(),K=U.getContext("2d");if(!K)return 0;const Y=vw,ie=Math.max(M.width,M.height)/Y,ae=Math.max(1,Math.round(M.width/(ie||1))),Ce=Math.max(1,Math.round(M.height/(ie||1)));U.width=ae,U.height=Ce,K.drawImage(M,0,0,ae,Ce);const je=K.getImageData(0,0,ae,Ce).data;let Ue=0;for(let Qe=0;Qe<Ce;Qe++){const Mr=Qe*ae*4;for(let Lt=0;Lt<ae;Lt++){const ft=Mr+Lt*4,Dn=(je[ft]+je[ft+1]+je[ft+2])/3;if(Lt<ae-1){const nn=ft+4,An=(je[nn]+je[nn+1]+je[nn+2])/3;Ue+=Math.abs(Dn-An)}if(Qe<Ce-1){const nn=ft+ae*4,An=(je[nn]+je[nn+1]+je[nn+2])/3;Ue+=Math.abs(Dn-An)}}}return Ue},Ke=M=>{const{width:U,height:K}=M;if(!U||!K)return M;const Y=pw/U,ie=mw/K,ae=Math.min(1,Y,ie);if(ae>=.999)return M;const Ce=Math.max(1,Math.round(U*ae)),je=Math.max(1,Math.round(K*ae)),Ue=document.createElement("canvas");Ue.width=Ce,Ue.height=je;const Qe=Ue.getContext("2d");return Qe?(Qe.drawImage(M,0,0,Ce,je),Ue):M},Fe=async M=>new Promise(U=>{M.toBlob(K=>{if(K){U(K);return}M.toBlob(Y=>U(Y),"image/png")},"image/jpeg",fw)}),Be=async M=>{const U=Ke(M);return Fe(U)},V=async M=>{try{const U=await createImageBitmap(M),K=document.createElement("canvas");K.width=U.width,K.height=U.height;const Y=K.getContext("2d");if(!Y)return null;if(Y.drawImage(U,0,0),"close"in U)try{U.close()}catch{}return K}catch{return new Promise(U=>{const K=URL.createObjectURL(M),Y=new Image;Y.onload=()=>{const ie=document.createElement("canvas");ie.width=Y.naturalWidth||Y.width,ie.height=Y.naturalHeight||Y.height;const ae=ie.getContext("2d");if(URL.revokeObjectURL(K),!ae){U(null);return}ae.drawImage(Y,0,0),U(ie)},Y.onerror=()=>{URL.revokeObjectURL(K),U(null)},Y.src=K})}},ee=async(M,U)=>{const K=d.current,Y=y.current;if(!K||!Y)return null;const ie=K.videoWidth,ae=K.videoHeight;if(!ie||!ae)return null;Y.width=ie,Y.height=ae;const Ce=Y.getContext("2d");if(!Ce)return null;let je=-1/0,Ue=null;for(let Qe=0;Qe<M;Qe++){if(!b.current)return null;Qe===0?await new Promise(Lt=>requestAnimationFrame(()=>Lt())):U>0&&await new Promise(Lt=>setTimeout(Lt,U)),Ce.drawImage(K,0,0,ie,ae);const Mr=L(Y);if(Mr>=je){je=Mr,Ue||(Ue=document.createElement("canvas")),Ue.width=ie,Ue.height=ae;const Lt=Ue.getContext("2d");Lt&&Lt.drawImage(Y,0,0,ie,ae)}}return Ue||Y},le=async()=>{if(typeof window>"u")return null;const M=x.current,U=window.ImageCapture;if(!M||!U)return null;try{const K=new U(M);return typeof K.takePhoto!="function"?null:await K.takePhoto()}catch{return null}},De=()=>{S.current&&(S.current.getTracks().forEach(M=>M.stop()),S.current=null),d.current&&(d.current.srcObject=null),me()},bt=()=>{A&&URL.revokeObjectURL(A),j.current=null,O(null)},dn=()=>{De(),bt(),z(!1),W(!1),T(!1),s()},In=M=>{const U=h.current;if(!U)return M;let K=Math.min(U.max,Math.max(U.min,M));if(typeof U.step=="number"&&U.step>0){const Y=Math.round((K-U.min)/U.step);K=U.min+Y*U.step,K=Math.min(U.max,Math.max(U.min,K))}return K},cr=M=>{const U=x.current;if(!U)return;const K=In(M);C.current=K,!g.current&&(g.current=requestAnimationFrame(()=>{g.current=null;const Y=C.current;C.current=null,typeof Y=="number"&&U.applyConstraints({advanced:[{zoom:Y}]}).then(()=>{f.current=Y,Z(Y)}).catch(()=>{})}))},Rn=async M=>{var U,K;q(!0),z(!1),me();try{let Y;try{Y=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"},width:{ideal:1280},height:{ideal:960},frameRate:{ideal:30}},audio:!1})}catch{Y=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}if(!M()){Y.getTracks().forEach(ae=>ae.stop());return}S.current=Y;const ie=Y.getVideoTracks()[0]||null;if(x.current=ie,ie){const ae=(U=ie.getCapabilities)==null?void 0:U.call(ie),Ce=ae==null?void 0:ae.zoom;if(Ce&&typeof Ce.min=="number"&&typeof Ce.max=="number"){h.current={min:Ce.min,max:Ce.max,step:typeof Ce.step=="number"?Ce.step:void 0};const je=(K=ie.getSettings)==null?void 0:K.call(ie),Ue=typeof(je==null?void 0:je.zoom)=="number"?je.zoom:Ce.min,Qe=In(Ue);f.current=Qe,Z(Qe),Ze(!0)}}if(d.current){d.current.srcObject=Y;try{await d.current.play()}catch{}}}catch{M()&&z(!0),De()}finally{M()&&q(!1)}};p.useEffect(()=>{let M=!0;return b.current=r,r?Rn(()=>M):(De(),bt(),z(!1),T(!1)),()=>{M=!1,b.current=!1,De(),bt(),z(!1),T(!1)}},[r]);const tn=async()=>{if(!he){T(!0);try{let M=null;if(X.isAndroid){const K=await le();if(K){const Y=await V(K);Y&&(M=await Be(Y))}}if(!M){const K=X.isIOS?hw:1,Y=X.isIOS?gw:0,ie=await ee(K,Y);ie&&(M=await Be(ie))}if(!M)return;j.current=M;const U=URL.createObjectURL(M);O(U),De()}finally{T(!1)}}},fn=async()=>{if(Me)return;const M=j.current;if(M){l(M),W(!0);try{const U=n?null:await wx({studentId:e,fullName:t}),K=await $y({studentId:e,studentFullName:t,jpegBlob:M,fileId:n||(U==null?void 0:U.fileId)}),Y=Date.now();await Sx({studentId:e,fullName:t,fileId:K.fileId,updatedTime:K.modifiedTime,photoUpdatedAt:Y,blob:M}),o==null||o({fileId:K.fileId,photoUpdatedAt:Y}),dn()}catch(U){W(!1);const Y=(U instanceof Error?U.message:"").toLowerCase();Y.includes("sign in")&&Y.includes("drive")?c({message:"Please reconnect Google Drive to upload photos.",tone:"error"}):c({message:"Couldn't upload the photo. Your preview is still saved here - try again.",tone:"error"})}}},Or=()=>{bt(),T(!1),Rn(()=>b.current)},zl=M=>{if(!(!ke||A)&&(M.preventDefault(),M.currentTarget.setPointerCapture(M.pointerId),k.current.set(M.pointerId,{x:M.clientX,y:M.clientY}),k.current.size===2)){const U=Array.from(k.current.values()),K=Math.hypot(U[0].x-U[1].x,U[0].y-U[1].y);J.current={initialDistance:K,initialZoom:f.current}}},lt=M=>{if(!ke||A||!k.current.has(M.pointerId)||(M.preventDefault(),k.current.set(M.pointerId,{x:M.clientX,y:M.clientY}),k.current.size<2||!J.current))return;const U=Array.from(k.current.values()),K=Math.hypot(U[0].x-U[1].x,U[0].y-U[1].y);if(J.current.initialDistance<=0)return;const Y=K/J.current.initialDistance,ie=J.current.initialZoom*Y;cr(ie)},$l=M=>{ke&&(k.current.delete(M.pointerId),k.current.size<2&&(J.current=null))};if(!r)return null;const pn=ke&&!A;return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:dn}),i.jsxs("div",{className:"relative w-full max-w-md rounded-2xl bg-white p-4 shadow-2xl space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-800",children:u}),i.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700",onClick:dn,"aria-label":"Close",children:""})]}),F?i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Camera unavailable. Check permissions and try again."}),i.jsx("button",{type:"button",className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:dn,children:"Close"})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full aspect-[3/4] rounded-xl bg-slate-100 overflow-hidden flex items-center justify-center",onPointerDown:pn?zl:void 0,onPointerMove:pn?lt:void 0,onPointerUp:pn?$l:void 0,onPointerCancel:pn?$l:void 0,style:pn?{touchAction:"none"}:void 0,children:A?i.jsx("img",{src:A,alt:"",className:"w-full h-full object-cover"}):i.jsx("video",{ref:d,className:"w-full h-full object-cover",playsInline:!0,muted:!0})}),A?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2 text-sm disabled:opacity-50",onClick:Or,disabled:Me,children:"Retake"}),i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2 text-sm disabled:opacity-50",onClick:fn,disabled:Me,children:Me?"Uploading...":"Accept"})]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2 text-sm disabled:opacity-50",onClick:tn,disabled:de||he,children:he?"Capturing...":"Take Photo"}),i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2 text-sm",onClick:dn,children:"Cancel"})]})]})]}),i.jsx("canvas",{ref:y,className:"hidden"})]})}const Vf=!1,Gf="589",xw="https://app.classseats.app",bo="cs_mobile_last_drive_file",Kf="cs_mobile_students_mode_v1",Qf="cs_mobile_notes_sort_v1",Yf="cs_mobile_table_sort_v1",Jf="cs_mobile_seat_number_sort_v1";function ww({student:e,attendance:t,points:n,pointsEnabled:r,maxPoints:s,hasNote:l,absenceStreak:o,tardyCount:u,leftEarlyCount:c,onShowAbsenceHelp:d,onShowTardyHelp:y,onShowLeftEarlyHelp:S,seatNumber:x,showSeatNumber:j=!1,statusBg:b,statusLabel:k,tempPhotoUrl:J,onOpenPhoto:h,onOpenMenu:f,driveClient:g,driveSession:C}){const A=Oh(n,s),{photoUrl:O}=Dh({studentId:e.id,fullName:e.fullName,photoFileId:e.photoFileId,photoUpdatedAt:e.photoUpdatedAt,driveClient:g,driveSession:C}),[F,...z]=(e.fullName||"").split(" "),de=z.join(" "),q=(()=>{switch(t){case"present":return"";case"absent":return"";case"tardy":return"";case"left_early":return"";default:return""}})(),ke=k(t),Ze=J||O,et=t==="absent"&&(o||0)>=2,Z=t==="tardy"&&(u||0)>0,Me=t==="left_early"&&(c||0)>0;return i.jsx("div",{className:`w-full rounded-2xl border px-4 py-3 shadow-sm ${b(t)}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[j&&i.jsx("div",{className:"flex h-[80px] w-8 shrink-0 items-center justify-center text-sm font-semibold text-slate-500",children:x||""}),i.jsx(uy,{studentId:e.id,hasPhoto:!!Ze,src:Ze,onClick:h,widthPx:60,heightPx:80}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"text-left min-w-0 flex-1",children:[i.jsx("div",{className:"text-base font-bold text-slate-900 leading-tight break-words",children:F}),i.jsx("div",{className:"text-base font-bold text-slate-900 leading-tight break-words",children:de||""})]}),i.jsx("button",{className:"text-xl text-slate-600 px-3 py-2 rounded-full hover:bg-slate-200 flex-shrink-0",onClick:W=>{W.stopPropagation(),f()},children:""})]}),i.jsxs("div",{className:"mt-1 flex items-center justify-between text-sm px-1",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:q}),i.jsx("span",{className:"text-slate-700",children:ke})]}),(et||Z||Me)&&i.jsxs("div",{className:"flex items-center gap-2",children:[et&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-rose-700 bg-rose-100 border border-rose-200 rounded px-1.5 py-0.5",onClick:d,children:["A",o]}),Z&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-amber-700 bg-amber-100 border border-amber-200 rounded px-1.5 py-0.5",onClick:y,children:["T",u]}),Me&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-orange-700 bg-orange-100 border border-orange-200 rounded px-1.5 py-0.5",onClick:S,children:["LE",c]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[r&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-lg",children:A.emoji}),i.jsx("span",{className:"text-emerald-700 font-semibold",children:n})]}),l&&i.jsx("span",{className:"text-indigo-600 text-lg",children:""})]})]})]})]})})}function Sw(e,t,n){var S,x,j;if(!(e!=null&&e.activeGrouping)||!(e!=null&&e.tableAssignments))return null;let r=-1,s=-1;if(e.activeGrouping.forEach((b,k)=>{const J=b==null?void 0:b.findIndex(h=>String(h)===String(n));J!==-1&&(r=k,s=J)}),r===-1||s===-1)return null;const l=e.tableAssignments[String(r)];if(!l)return null;const o=String(l),u=((S=e.tableNumbering)==null?void 0:S.perTableSeatNumbers)&&e.tableNumbering.perTableSeatNumbers[o],c=(j=(x=t==null?void 0:t.tables)==null?void 0:x.find(b=>String(b.id)===o))==null?void 0:j.seatNumbers,d=u||c;if(!d)return null;const y=d[s];return y!=null?String(y):null}function Nw(){var pd,md,hd;const e=Lh(),t=ew(),n=p.useMemo(()=>ay(),[]),r=p.useMemo(()=>({kind:"web",openExternal:a=>typeof window<"u"?window.open(a,"_blank","noopener,noreferrer"):null}),[]),s=!n.canUseDriveSync,l="Drive sync is disabled.",[o,u]=p.useState(null),[c,d]=p.useState([]),[y,S]=p.useState(!1),[x,j]=p.useState(null),[b,k]=p.useState(()=>s?l:null),[J,h]=p.useState(!1),[f,g]=p.useState(null),[C,A]=p.useState(!1),[O,F]=p.useState([]),[z,de]=p.useState(""),[q,ke]=p.useState(!1),[Ze,et]=p.useState(!1),[Z,Me]=p.useState(null),[W,he]=p.useState(null),[T,Q]=p.useState(!1),[X,pe]=p.useState(!1),[me,Ht]=p.useState(null),[L,Ke]=p.useState(null),[Fe,Be]=p.useState({}),V=p.useRef({}),[ee,le]=p.useState({}),[De,bt]=p.useState({}),[dn,In]=p.useState({}),[cr,Rn]=p.useState(null),[tn,fn]=p.useState({note:"",delta:0,reason:""}),[Or,zl]=p.useState(""),[lt,$l]=p.useState({pointsEnabled:!1,startingPoints:50,currentPoints:0,predictedPoints:0}),[pn,M]=p.useState(null),[U,K]=p.useState(""),[Y,ie]=p.useState(null),[ae,Ce]=p.useState(null),[je,Ue]=p.useState({}),Qe=p.useRef({}),[Mr,Lt]=p.useState({}),[ft,Dn]=p.useState(null),[nn,An]=p.useState(0),[Mc,Bl]=p.useState(null),[Fc,Ui]=p.useState(""),[pt,Wl]=p.useState(null),[Dw,zh]=p.useState([]),[Aw,Uc]=p.useState(!1),[Lw,zi]=p.useState(null),[Ow,Mw]=p.useState(!1),[Ae,Vt]=p.useState(null),[Ot,zc]=p.useState(null),[$c,Bc]=p.useState(null),[Ln,Rs]=p.useState(null),[$i,Fr]=p.useState(null),[Ds,Wc]=p.useState(!1),[Hl,As]=p.useState(null),[mn,ot]=p.useState(!1),[Fw,hn]=p.useState(null),Bi=typeof navigator<"u"?navigator.onLine:!0,[Hc,Ls]=p.useState(Bi),[Vc,Wi]=p.useState(Bi),[We,Os]=p.useState(!Bi),$h=p.useRef(null),Bh=p.useRef(!1),On=p.useRef(!1),Wh=p.useRef(15e3),Hh=p.useRef(0),Gc=p.useRef(!1),Mn=p.useRef(!1),Ur=p.useRef(!1),Hi=p.useRef(new Set),Ct=p.useRef(null),Kc=p.useRef(null),Qc=p.useRef(void 0),Yc=p.useRef(null),Vi=()=>{const a=new Date,m=a.getFullYear(),v=String(a.getMonth()+1).padStart(2,"0"),N=String(a.getDate()).padStart(2,"0");return`${m}-${v}-${N}`},[te,Vl]=p.useState(Vi()),Gl=p.useCallback((a,m,v)=>{const N=te;V.current[a]||(V.current[a]={}),V.current[a][N]||(V.current[a][N]={}),V.current[a][N][m]=v==="unmarked"?null:v},[te]),Kl=p.useCallback((a,m,v)=>{var E;const N=(E=V.current[a])==null?void 0:E[m];if(!N)return v;const w={...v};return Object.entries(N).forEach(([P,D])=>{!D||D==="unmarked"?delete w[P]:w[P]=D}),w},[]),[dr,Vh]=p.useState("table"),[Et,Gi]=p.useState(()=>{try{const a=localStorage.getItem(Kf);return a==="notes"||a==="flashcards"?a:"attendance"}catch{return"attendance"}});p.useEffect(()=>{try{localStorage.setItem(Kf,Et)}catch{}},[Et]);const[Ql,Gh]=p.useState(()=>{try{return localStorage.getItem(Qf)==="last-first"?"last-first":"first-last"}catch{return"first-last"}});p.useEffect(()=>{try{localStorage.setItem(Qf,Ql)}catch{}},[Ql]);const[Ms,Kh]=p.useState(()=>{try{return localStorage.getItem(Yf)==="desc"?"desc":"asc"}catch{return"asc"}});p.useEffect(()=>{try{localStorage.setItem(Yf,Ms)}catch{}},[Ms]);const[Yl,Qh]=p.useState(()=>{try{return localStorage.getItem(Jf)==="desc"?"desc":"asc"}catch{return"asc"}});p.useEffect(()=>{try{localStorage.setItem(Jf,Yl)}catch{}},[Yl]);const Yh=p.useMemo(()=>new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),[]);p.useEffect(()=>{Qe.current=je},[je]),p.useEffect(()=>()=>{Object.values(Qe.current).forEach(a=>URL.revokeObjectURL(a))},[]);const[mt,fr]=p.useState(!1),pr=p.useRef(0),_t=p.useRef(null),Jc=p.useRef({}),Xc=p.useRef({}),Jl=p.useRef(null),Xl=p.useRef(!1),Ki=p.useRef(!1),[qc,Fs]=p.useState(!1),ql=p.useRef(0),gn=p.useRef(null),Zc=1500,Us=p.useRef(null),Qi=p.useCallback(a=>a?Jc.current[a]??null:null,[]),ht=p.useCallback((a,m)=>{a&&(Jc.current[a]=m||null)},[]),Zl=p.useCallback(a=>a||"__local__",[]),ed=p.useCallback(a=>Xc.current[Zl(a)]??null,[Zl]),mr=p.useCallback((a,m)=>{m&&(Xc.current[Zl(a)]=m)},[Zl]),Yi=a=>{var m;return JSON.stringify({periodsState:((m=a.periodsState)==null?void 0:m.periods)||[],students:a.students||[]})},hr=p.useRef(0),[Uw,zs]=p.useState("unknown"),[zw,Ji]=p.useState(0);p.useCallback(async()=>{const a=await gs(o);return a&&u(a),a},[o]);const rn=p.useCallback(a=>{const m=`${new Date().toISOString()} ${a}`;F(v=>[m,...v].slice(0,200))},[]);p.useEffect(()=>{s&&k(l)},[l,s]);const Jh=p.useCallback(async()=>{var m;const a=await wy();if(g(a),rn(`startup info: state=${a.state} sessionLoaded=${a.sessionLoaded} hasRefresh=${a.hasRefresh} expiresAt=${a.expiresAt} source=${a.source} lastWriteAt=${a.lastWriteAt} lastWriteReason=${a.lastWriteReason}`),a.state==="ok"){const v=await ky();v&&(u(v),(m=v.profile)!=null&&m.email&&k(null))}return a},[rn]),zr=p.useCallback(async a=>{const m=(o==null?void 0:o.expiresAt)||null,v=await gs(o);return rn(`${a}: ensureFreshDriveSession ok=${!!v} before=${m} new=${v==null?void 0:v.expiresAt} hasRefresh=${!!(v!=null&&v.refreshToken)}`),v&&(u(v),h(!1)),v},[o,rn]),Xh=p.useCallback(()=>{ql.current+=1,gn.current&&window.clearTimeout(gn.current),gn.current=window.setTimeout(()=>{ql.current=0,gn.current=null},2e3),ql.current>=5&&(A(a=>!a),ql.current=0,gn.current&&(window.clearTimeout(gn.current),gn.current=null))},[]),qh=()=>{const a=new URL(xw);new URL(window.location.href).searchParams.forEach((v,N)=>a.searchParams.set(N,v)),a.searchParams.set("from","mobile"),window.location.assign(a.toString())},Zh=a=>{var N,w;if(!L)return;const m=L.students.find(E=>String(E.id)===String(a));if(!m)return;const v=((N=m.periodIds)==null?void 0:N[0])||pt||((w=L.periods[0])!=null&&w.id?String(L.periods[0].id):"");Rs({name:m.fullName,gender:m.gender||"F",periodId:v?String(v):""}),Bc({id:String(a)})},eo=()=>{Bc(null),Rs(null)},eg=a=>{if(!L)return;const m=L.students.find(N=>String(N.id)===String(a));!m||!window.confirm(`Delete ${m.fullName}? This removes them from this class list.`)||(Hi.current.add(String(a)),Ke(N=>{if(!N)return N;const w=N.students.filter(P=>String(P.id)!==String(a)),E=N.periods.map(P=>{const D={...P.attendance||{}};Object.keys(D).forEach(ge=>{const R={...D[ge]||{}};delete R[String(a)],Object.keys(R).length===0?delete D[ge]:D[ge]=R});const _={...P.behaviorNotes||{}};Object.keys(_).forEach(ge=>{const R={..._[ge]||{}};delete R[String(a)],Object.keys(R).length===0?delete _[ge]:_[ge]=R});const $={...P.pointsByStudent||{}};delete $[String(a)];const G={...P.attendanceResets||{}};delete G[String(a)];const re=P.activeGrouping?P.activeGrouping.map(ge=>ge.filter(R=>String(R)!==String(a))):P.activeGrouping;return{...P,attendance:D,behaviorNotes:_,pointsByStudent:$,attendanceResets:G,activeGrouping:re}});return{...N,students:w,periods:E}}),Be(N=>{const w={...N||{}};return Object.keys(w).forEach(E=>{if(w[E]){const P={...w[E]||{}};delete P[String(a)],w[E]=P}}),w}),le(N=>{const w={...N||{}};return Object.keys(w).forEach(E=>{if(w[E]){const P={...w[E]||{}};delete P[String(a)],w[E]=P}}),w}),bt(N=>{const w={...N||{}};return Object.keys(w).forEach(E=>{if(w[E]){const P={...w[E]||{}};delete P[String(a)],w[E]=P}}),w}),In(N=>{const w={...N||{}};return Object.keys(w).forEach(E=>{w[E]=(w[E]||[]).filter(P=>String(P.studentId)!==String(a))}),w}),it(),gt({silent:!0}),Vt(null),zc(null),eo())};p.useEffect(()=>()=>{gn.current&&window.clearTimeout(gn.current)},[]),p.useEffect(()=>{Os(!Hc||!Vc)},[Hc,Vc]);const td=p.useCallback(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("classseats_debug_drive")==="1"}catch{return!1}},[]),$s=p.useCallback(a=>{td()&&console.debug(a.startsWith("[Ping]")?a:`[Ping] ${a}`)},[td]);p.useEffect(()=>{On.current=!1;const a=$h,m=Bh,v=Wh,N=Hh,w=()=>{a.current&&(window.clearTimeout(a.current),a.current=null)},E=G=>{if(On.current)return;w();const re=typeof G=="number"?G:v.current;$s(`[Ping] next ${re}`),a.current=window.setTimeout(()=>{a.current=null,P()},re)},P=async()=>{if(On.current)return;if(N.current=Date.now(),$s("[Ping] tick"),typeof document<"u"&&document.visibilityState!=="visible"){E(5e3);return}if(m.current){E(2e3);return}m.current=!0;const G=new AbortController,re=window.setTimeout(()=>G.abort(),5e3),ge=(()=>{try{return new URL(`/ping.txt?t=${Date.now()}`,window.location.origin).toString()}catch{return`/ping.txt?t=${Date.now()}`}})();let R=!1;try{const H=await fetch(ge,{cache:"no-store",signal:G.signal});R=!!(H!=null&&H.ok),R?(Ls(!0),Wi(!0),Os(!1),v.current=15e3,$s("[Ping] ok")):(Ls(!1),Wi(!1),Os(!0),v.current=Math.min(6e4,v.current*2),$s(`[Ping] fail status=${H==null?void 0:H.status}`))}catch(H){Ls(!1),Wi(!1),Os(!0),v.current=Math.min(6e4,v.current*2),$s(`[Ping] fail ${(H==null?void 0:H.message)||H}`)}finally{window.clearTimeout(re),m.current=!1,On.current||E()}},D=()=>{On.current||(Ls(!0),P())},_=()=>{On.current||(Ls(!1),Os(!0),E(2e3))},$=()=>{On.current||typeof document<"u"&&document.visibilityState==="visible"&&P()};return P(),window.addEventListener("online",D),window.addEventListener("offline",_),document.addEventListener("visibilitychange",$),()=>{On.current=!0,w(),window.removeEventListener("online",D),window.removeEventListener("offline",_),document.removeEventListener("visibilitychange",$)}},[]),p.useEffect(()=>{if(!L)return;const a=Qc.current!==L.periods,m=Yc.current!==te;!a&&!m||(Qc.current=L.periods,Yc.current=te,Be(L.periods.reduce((v,N)=>{var E;const w=(E=N.attendance)!=null&&E[te]?{...N.attendance[te]}:{};return v[N.id]=Kl(String(N.id),te,w),v},{})),le(L.periods.reduce((v,N)=>(v[N.id]=Xi(N.behaviorNotes,te),v),{})))},[L,te,Kl]);const nd=p.useCallback(a=>{const m={};return!a||typeof a!="object"||Object.entries(a).forEach(([v,N])=>{if(!N||typeof N!="object")return;const w={},E=N.note&&typeof N.note=="object"?N.note:N;Object.entries(E).forEach(([P,D])=>{D&&typeof D=="object"&&typeof D.note=="string"&&(w[String(P)]={note:D.note,timestamp:D.timestamp||new Date().toISOString()})}),Object.keys(w).length>0&&(m[v]=w)}),m},[]),$r=a=>e({tone:"success",message:a}),Ye=a=>e({tone:"error",message:a}),Br=a=>e({tone:"info",message:a}),Bs=["unmarked","absent","tardy","left_early","present"],to=p.useCallback(a=>{if(!a)return!1;const m=a.toLowerCase();return m.includes("401")||m.includes("unauthorized")||m.includes("403")||m.includes("sign in with google drive first")},[]),tg=a=>{switch(a){case"present":return"bg-emerald-50 border-emerald-100";case"absent":return"bg-rose-50 border-rose-100";case"tardy":return"bg-amber-50 border-amber-100";case"left_early":return"bg-blue-50 border-blue-100";default:return"bg-slate-50 border-slate-200"}},Xi=(a,m)=>{const v=a==null?void 0:a[m];if(!v||typeof v!="object")return{};const N=v.note&&typeof v.note=="object"?v.note:v,w={};return Object.entries(N||{}).forEach(([E,P])=>{P&&typeof P=="object"&&typeof P.note=="string"&&(w[String(E)]=P.note)}),w},rd=a=>{switch(a){case"present":return"Present";case"absent":return"Absent";case"tardy":return"Tardy";case"left_early":return"Left Early";default:return"Unmarked"}},qi=(a,m)=>Oh(a,m).emoji,ng=()=>`${Date.now()}-${Math.random().toString(36).slice(2)}`,rg=a=>{const m=String(a.getMonth()+1).padStart(2,"0"),v=String(a.getDate()).padStart(2,"0");return`${m}-${v}-${a.getFullYear()}`},Zi=a=>`https://docs.google.com/document/d/${a}/edit`,ea=p.useCallback(a=>{if(!a)return;const m=Date.now(),v=Kc.current;if(v&&v.url===a&&m-v.at<600)return;Kc.current={url:a,at:m};try{if(r!=null&&r.openExternal){r.openExternal(a);return}}catch{}window.open(a,"_blank","noopener,noreferrer")||k==null||k("Pop-up blocked  please allow pop-ups to open Google Docs.")},[r]),Fn=p.useCallback(a=>sw(a),[]),Ie=p.useCallback(async(a,m="preflight")=>{if(s)return k(l),null;if(We)return k("Offline  will sync when back online."),h(!0),rn(`${m}: offline; skipping refresh`),null;try{const v=await zr(m);if(v)return v}catch(v){console.warn("[Drive] refresh failed",v),rn(`${m}: refresh failed ${(v==null?void 0:v.message)||v}`)}if(!a)return h(!0),k("Reconnect to Google Drive to continue syncing."),rn(`${m}: interactive=false; would trigger OAuth if allowed`),null;rn(`triggerOAuth: reason=${m} hadSession=${!!o} hasRefresh=${!!(o!=null&&o.refreshToken)}`);try{await Iy()}catch(v){Ye((v==null?void 0:v.message)||"Google sign-in was cancelled.")}return null},[l,o,s,Ye,We,rn,zr]),no=p.useCallback(async(a,m,v)=>{let N=!1;const w=async()=>{let E=v;if(E||(E=await Ie(!0,`${m}-download`)),!E)throw new Error("Reconnect to Google Drive to continue.");try{return{data:await Ia(E.accessToken,a)}}catch(P){const D=(P==null?void 0:P.message)||"";if(!N&&to(D))return N=!0,Zs("[Drive][Mobile] auth error on download, retrying once",{context:m,error:D}),v=null,w();throw P}};return w()},[Ie,to]),sd=p.useCallback(async(a,m,v,N)=>{let w=!1;const E=async()=>{let P=N;if(P||(P=await Ie(!0,`${v}-upload`)),!P)throw new Error("Reconnect to Google Drive to continue.");try{return await Wy(P.accessToken,a,m)}catch(D){const _=(D==null?void 0:D.message)||"";if(!w&&to(_))return w=!0,Zs("[Drive][Mobile] auth error on upload, retrying once",{context:v,error:_}),N=null,E();throw D}};return E()},[Ie,to]),Wr=p.useCallback((a,m)=>{var D;if(!((D=a==null?void 0:a.periodsState)!=null&&D.periods)||!(a!=null&&a.students))return"failed";const v=Yi(a),N=(m==null?void 0:m.id)||_t.current;if(N){const _=iw({incomingUpdatedAt:a.updatedAt,lastAppliedUpdatedAt:ed(N),incomingRevisionId:(m==null?void 0:m.revisionId)||null,lastRevisionId:Qi(N)??null});if(Zs("[Sync][Mobile] apply decision",{fileKey:N,decision:_}),_.action==="skip")return m&&(_t.current=m.id,he(m),ht(m.id,m.revisionId||null)),hr.current=Date.now(),"skipped"}pr.current=0,Mn.current=!1,Ur.current=!1,fr(!1),ot(!1),hn(null),Fs(!1),Ct.current&&(window.clearTimeout(Ct.current),Ct.current=null);const w=(a.layouts||[]).reduce((_,$)=>(_[String($.id)]={id:String($.id),name:$.name,tables:($.tables||[]).map(G=>({id:String(G.id),name:G.name||"Table",seatNumbers:Array.isArray(G.seatNumbers)?G.seatNumbers:void 0}))},_),{}),E=a.periodsState.periods.map(_=>({id:String(_.id),name:_.name,layoutId:_.layoutId||null,tableAssignments:_.tableAssignments||{},activeGrouping:_.activeGrouping||[],tableNumbering:_.tableNumbering||void 0,attendance:_.attendance||{},attendanceResets:_.attendanceResets||{},behaviorNotes:nd(_.behaviorNotes),pointsByStudent:_.pointsByStudent||{},pointsEnabled:_.pointsEnabled??!1,startingPoints:_.startingPoints??50,pointsHistory:_.pointsHistory||[]})),P=(a.students||[]).map(_=>{var $;return{id:String(_.id),fullName:_.fullName||_.name||"Student",gender:typeof _.gender=="string"?_.gender:void 0,periodIds:(($=_.periodIds)==null?void 0:$.map(G=>String(G)))||[],profileUpdatedAt:typeof _.profileUpdatedAt=="string"?_.profileUpdatedAt:void 0,quickNote:typeof _.quickNote=="string"?_.quickNote:void 0,quickNoteUpdatedAt:typeof _.quickNoteUpdatedAt=="string"?_.quickNoteUpdatedAt:void 0,photoFileId:typeof _.photoFileId=="string"?_.photoFileId:_.photoFileId==null?null:String(_.photoFileId),photoUpdatedAt:(()=>{if(typeof _.photoUpdatedAt=="number")return _.photoUpdatedAt;if(typeof _.photoUpdatedAt=="string"){const G=Number.parseInt(_.photoUpdatedAt,10);return Number.isFinite(G)?G:null}return null})(),docs:Array.isArray(_.docs)?_.docs.map(G=>({...G,id:String(G.id),driveFileId:String(G.driveFileId)})):[]}});return Ke({periods:E,students:P,layouts:w}),Wl(_=>{var R;const $=_?String(_):null,G=a.periodsState.currentId?String(a.periodsState.currentId):null;return[$,G,((R=E[0])==null?void 0:R.id)||null].filter(Boolean).find(H=>E.some(ce=>String(ce.id)===H))||null}),V.current={},Be(E.reduce((_,$)=>{var re;const G=(re=$.attendance)!=null&&re[te]?{...$.attendance[te]}:{};return _[$.id]=Kl(String($.id),te,G),_},{})),le(E.reduce((_,$)=>(_[$.id]=Xi($.behaviorNotes,te),_),{})),bt(E.reduce((_,$)=>{var re;const G=$.pointsByStudent?{...$.pointsByStudent}:{};return $.pointsEnabled&&((re=$.studentsIds)==null||re.forEach(ge=>{G[ge]===void 0&&(G[ge]=$.startingPoints??50)})),_[$.id]=G,_},{})),Jl.current=v,zs(a.lastWriter||"unknown"),m?(_t.current=m.id,he(m),ht(m.id,m.revisionId||null)):ht(_t.current,null),As(null),Ji(_=>_+1),mr(N,a.updatedAt),hr.current=Date.now(),"applied"},[te,ed,nd,Xi,Kl,Be,le,bt,Wl,Ke,fr,ot,he,ht,hn,Fs,zs,As,Ji,mr]),it=p.useCallback(()=>{pr.current+=1,Us.current=Date.now(),fr(!0),ot(!0)},[]),ta=p.useCallback((a,m,v)=>{Ke(N=>N&&{...N,periods:N.periods.map(w=>{if(String(w.id)!==String(a))return w;const E={...w.attendanceResets||{}},P={...E[String(m)]||{}};return P[v]=te,E[String(m)]=P,{...w,attendanceResets:E}})}),it()},[it,te]),na=p.useCallback((a,m,v)=>{Be(N=>{const w={...N||{}};return w[a]={...w[a]||{}},v==="unmarked"?delete w[a][m]:w[a][m]=v,w}),Gl(a,m,v),it()},[Gl,it]);p.useCallback((a,m)=>{var E;const v=((E=Fe[a])==null?void 0:E[m])||"unmarked",N=Bs.indexOf(v),w=Bs[(N+1)%Bs.length];na(a,m,w)},[Fe,na,Bs]);const ro=p.useCallback((a,m)=>{Be(v=>{const N={...v||{}};return N[a]={...N[a]||{}},m.forEach(w=>{N[a][w]||(N[a][w]="present",Gl(a,w,"present"))}),N}),it()},[Gl,it]),sg=p.useCallback((a,m,v,N)=>{if(v===0||m.length===0)return;const w=(N==null?void 0:N.trim())||"Bulk points update",E=L==null?void 0:L.periods.find(D=>D.id===a),P=(E==null?void 0:E.startingPoints)??50;bt(D=>{const _={...D||{}};return _[a]={..._[a]||{}},m.forEach($=>{const G=_[a][$]??P;_[a][$]=Math.max(0,G+v)}),_}),In(D=>{const _={...D||{}},$=_[a]?[..._[a]]:[];return m.forEach(G=>$.push({studentId:G,delta:v,reason:w,date:te})),_[a]=$,_}),it()},[L==null?void 0:L.periods,te,it]),ld=p.useCallback(a=>{Be(m=>{const v={...m||{}};return v[a]={},v}),Br("Reset attendance to unmarked for this date."),it()},[Br,it]),lg=p.useCallback(()=>{if(!cr)return;const{periodId:a,studentId:m}=cr,{note:v,delta:N,reason:w}=tn,E=lt;if(E.pointsEnabled&&N!==0&&!w.trim()){Ye("Please provide a reason when changing points.");return}le(P=>{const D={...P||{}};return D[a]={...D[a]||{}},v.trim()?D[a][m]=v.trim():delete D[a][m],D}),E.pointsEnabled&&N!==0&&(bt(P=>{const D={...P||{}};D[a]={...D[a]||{}};const _=D[a][m]??E.startingPoints??0,$=Math.max(0,_+N);return D[a][m]=$,D}),In(P=>{const D={...P||{}},_=D[a]?[...D[a]]:[];return _.push({studentId:m,delta:N,reason:w||"Behavior note",date:te}),D[a]=_,D})),it(),Rn(null),fn({note:"",delta:0,reason:""})},[cr,tn,lt,it,le,bt,Ye]),od=p.useCallback((a,m,v)=>{var D,_;const N=((D=ee[a])==null?void 0:D[m])||"",w=L==null?void 0:L.periods.find($=>$.id===a),E=(w==null?void 0:w.startingPoints)??50,P=((_=De[a])==null?void 0:_[m])??E;fn({note:N,delta:0,reason:""}),$l({pointsEnabled:!!(w!=null&&w.pointsEnabled),startingPoints:E,currentPoints:P,predictedPoints:P}),Rn({periodId:a,studentId:m,studentName:v})},[ee,De,L]),og=p.useCallback((a,m,v)=>{od(a,m,v)},[od]);p.useEffect(()=>{if(s){k(l);return}let a=!0;return(async()=>{await Jh();const v=await Ry().catch(()=>null);if(!v||!a)return;const N=await gs(v),w=N||v;if(rn(`startup refresh result: ok=${!!N} expiresAt=${N==null?void 0:N.expiresAt}`),!!a&&(u(w),!Gc.current)){Gc.current=!0;try{const E=localStorage.getItem(bo);if(!E){Xl.current=!0;return}const P=JSON.parse(E);if(P!=null&&P.id&&(P!=null&&P.name)){Ki.current=!0;const D={id:P.id,name:P.name,modifiedTime:P.modifiedTime,size:P.size,revisionId:P.revisionId};Me(D),k(`Restoring ${D.name}`);const _=await Ia(v.accessToken,D.id),$=typeof _=="string"?JSON.parse(_):_,G=Fn($);if(!G)throw new Error("Drive file could not be parsed.");const re=Wr(G,D);re==="applied"?(he(D),k(`Loaded ${D.name} from Drive.`),As(new Date().toISOString())):re==="skipped"&&(he(D),k("Drive file is older than current data  keeping existing state."))}Xl.current=!0}catch(E){console.error("[Drive] Restore failed",E),k("Google sign-in failed. Please try again."),Ki.current=!1,Xl.current=!0}}})(),()=>{a=!1}},[]),p.useEffect(()=>{s||o&&(T||L||W!=null&&W.id||Xl.current&&(Ki.current||Q(!0)))},[W,o,s,L,T]),p.useEffect(()=>{const a=window.setInterval(async()=>{if(!o)return;const m=await zr("timer");m&&u(m)},3e5);return()=>window.clearInterval(a)},[o,zr]),p.useEffect(()=>{const a=async()=>{if(!o)return;const m=await zr("visibility");m&&u(m)};return document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)},[o,zr]),p.useEffect(()=>{if(y){const a=window.setTimeout(()=>{S(!1),j("Still loading Drive files. Try Sign in with Google then tap Refresh Cloud Files.")},12e3);return Ht(a),()=>window.clearTimeout(a)}me&&(window.clearTimeout(me),Ht(null)),Ct.current&&(window.clearTimeout(Ct.current),Ct.current=null)},[y,me]);const ig=p.useCallback(()=>{Dy(),u(null),d([]),Me(null),he(null),k(null),Br("Signed out of Google Drive."),gi("drive-disconnect")},[Br,gi]),ag=p.useCallback(async()=>{var a;!W||!((a=window.desktopBridge)!=null&&a.uploadDriveFile)||confirm(`Delete ${W.name} from Drive? This cannot be undone.`)&&(await window.desktopBridge.uploadDriveFile({fileId:W.id,content:JSON.stringify({deleted:!0,message:"File deleted by user."})}),Ke(null),Be({}),le({}),bt({}),In({}),he(null),Wl(null),k("Deleted active file from Drive."))},[W]);p.useCallback(async()=>{},[Wr,Fn,he,ht]);const ug=p.useCallback(async(a=!0,m=!1)=>{if(!(y&&!m)){S(!0),j(null);try{const v=await Ie(a,"refreshFiles");if(!v){j("Sign in with Google to view cloud files.");return}const N=await Of(v.accessToken);d(N),k(null)}catch(v){const N=(v==null?void 0:v.message)||"Unable to load Drive files.";j(N),Ye(N)}finally{S(!1)}}},[Ie,Ye,y]);p.useCallback(async()=>{Uc(!0),zi(null);try{const a=await Ie(!0,"importList");if(!a){zi("Sign in first to import.");return}const m=await Hy(a.accessToken);zh(m)}catch(a){const m=(a==null?void 0:a.message)||"Unable to list Drive files.";zi(m),Ye(m)}finally{Uc(!1)}},[Ie,Ye]);const cg=p.useCallback(async()=>{if(!Z){j("Select a cloud file first.");return}if(Mn.current){j("Sync in progress. Please wait.");return}if(mt||mn)if(window.confirm("You have unsynced changes. Sync them to Drive before switching files? Click OK to sync, Cancel to discard changes.")){if(await gt({silent:!0}),mt||mn){j("Sync did not complete. Try again before switching files.");return}}else{if(!window.confirm("Discard unsynced changes and load the selected file?"))return;pr.current=0,fr(!1),ot(!1),hn(null)}if(await Ie(!0,"loadSelected")){et(!0);try{const m=await no(Z.id,"loadSelected"),v=typeof m.data=="string"?JSON.parse(m.data):m.data,N=Fn(v);if(!N)throw new Error("File could not be parsed.");const w=Wr(N,Z);if(w==="applied")k(`Loaded ${Z.name}. Data available locally.`);else if(w==="skipped")k("Drive file is older than current data. Keeping existing data.");else throw new Error("File could not be parsed.");localStorage.setItem(bo,JSON.stringify({id:Z.id,name:Z.name,modifiedTime:Z.modifiedTime,size:Z.size,revisionId:Z.revisionId})),$r(`Loaded ${Z.name} from Drive.`)}catch(m){const v=(m==null?void 0:m.message)||"Unable to load Drive file.";j(v),Ye(v)}finally{et(!1)}}},[Ie,Z,Ye,$r,Wr,Fn,mt,mn,no]),dg=p.useCallback(async()=>{const a=z.trim();if(!a){j("Enter a file name first.");return}const m=await Ie(!0,"createFile");if(m){ke(!0),j(null);try{const N={...tw(void 0,void 0,L==null?void 0:L.students),lastWriter:"mobile",updatedAt:new Date().toISOString()},w=await By(m.accessToken,a,JSON.stringify(N,null,2));d(E=>[w,...E]),he(w),_t.current=w.id,ht(w.id,w.revisionId||null),mr(w.id,N.updatedAt),Me(w),de(""),localStorage.setItem(bo,JSON.stringify({id:w.id,name:w.name,modifiedTime:w.modifiedTime,size:w.size,revisionId:w.revisionId})),$r(`Created ${w.name} in Drive.`)}catch(v){const N=(v==null?void 0:v.message)||"Unable to create Drive file.";j(N),Ye(N)}finally{ke(!1)}}},[z,Ie,L,mr,Ye,$r]),id=p.useCallback((a,m)=>{const v={...a||{}};return Object.entries(m||{}).forEach(([N,w])=>{if(!w||typeof w!="object")return;const E=v[N]||{},P={...E};["absent","tardy","leftEarly"].forEach(D=>{const _=w[D],$=E[D];_&&(!$||_>$)?P[D]=_:$&&(P[D]=$)}),v[N]=P}),v},[]),gt=p.useCallback(async a=>{var v,N,w;if(s){k(l);return}if(Mn.current||a!=null&&a.silent&&!mt)return;if(!((v=L==null?void 0:L.periods)!=null&&v.length)||!((N=L==null?void 0:L.students)!=null&&N.length)){k("Cannot sync until data is loaded. Open a file first.");return}if(We){ot(!0),hn("Offline - changes will sync when back online."),Fs(!0);return}if(Ur.current){k("Sync already running.");return}const m=pr.current;try{const E=await Ie(!(a!=null&&a.silent),"syncUpload");if(!E){hn("Reconnect to Google Drive to continue syncing."),ot(!0);return}if(!W){k("Select a cloud file before syncing."),hn("Select a cloud file before syncing."),ot(!0);return}const P=lw({isOffline:We,isLocked:Ur.current,inFlight:Mn.current,hasSession:!0,hasFile:!!W,dirty:mt,now:Date.now(),lastLocalEditAt:Us.current,graceMs:Zc});if(Zs("[Sync][Mobile] upload decision",P),P.action==="skip"&&!(P.reason==="clean"&&!(a!=null&&a.silent))){P.reason==="no-file"&&(k("Select a cloud file before syncing."),hn("Select a cloud file before syncing."),ot(!0));return}Ur.current=!0,Mn.current=!0,Wc(!0);const D=await no(W.id,"syncUpload",E),_=typeof D.data=="string"?JSON.parse(D.data):D.data,$=Fn(_);if(!((w=$==null?void 0:$.periodsState)!=null&&w.periods))throw new Error("Drive file missing periods.");const G=Hi.current,re=($.periodsState.periods||[]).map(oe=>{const ye=String(oe.id),vt=Fe[ye]||{},Un=ee[ye]||{},Qr=De[ye]||{},vn=Array.isArray(oe.pointsHistory)?[...oe.pointsHistory]:[],yn=dn[ye]||[],Gt=L==null?void 0:L.periods.find(xe=>String(xe.id)===ye),vr=id(oe.attendanceResets||{},(Gt==null?void 0:Gt.attendanceResets)||{}),zn={...oe.attendance||{}},fg=V.current[ye]||{};Object.entries(fg).forEach(([xe,yt])=>{const Kt={...zn[xe]||{}};Object.entries(yt).forEach(([yd,sa])=>{!sa||sa==="unmarked"?delete Kt[yd]:Kt[yd]=sa}),Object.keys(Kt).length>0?zn[xe]=Kt:delete zn[xe]}),G.size&&Object.keys(zn).forEach(xe=>{const yt={...zn[xe]||{}};G.forEach(Kt=>{delete yt[Kt]}),Object.keys(yt).length===0?delete zn[xe]:zn[xe]=yt});const xn={...oe.behaviorNotes||{}};if(Object.keys(Un).length>0){const xe=xn[te]?{...xn[te]}:{};Object.entries(Un).forEach(([yt,Kt])=>{Kt?xe[yt]={note:Kt,timestamp:new Date().toISOString()}:delete xe[yt]}),Object.keys(xe).length>0?xn[te]=xe:delete xn[te]}G.size&&Object.keys(xn).forEach(xe=>{const yt={...xn[xe]||{}};G.forEach(Kt=>{delete yt[Kt]}),Object.keys(yt).length===0?delete xn[xe]:xn[xe]=yt});const pg=[...vn,...yn].filter(xe=>!G.has(String(xe.studentId))),gd={...Qr};G.forEach(xe=>{delete gd[xe]});const vd={...vr||{}};G.forEach(xe=>{delete vd[xe]});const mg=oe.activeGrouping?oe.activeGrouping.map(xe=>xe.filter(yt=>!G.has(String(yt)))):oe.activeGrouping;return{...oe,attendance:zn,attendanceResets:vd,behaviorNotes:xn,pointsByStudent:gd,pointsHistory:pg,activeGrouping:mg}}),ge=new Date().toISOString(),R=$.students||[],H=(L==null?void 0:L.students)||[],ce=new Map(H.map(oe=>[String(oe.id),oe])),se=R.filter(oe=>!G.has(String(oe.id))).map(oe=>{const ye=ce.get(String(oe.id));if(!ye)return oe;let vt={...oe};const Un=ye.profileUpdatedAt||"",Qr=oe.profileUpdatedAt||"";Un&&(!Qr||Un>Qr)&&(vt={...vt,fullName:ye.fullName,gender:ye.gender,periodIds:ye.periodIds,profileUpdatedAt:Un});const vn=ye.quickNoteUpdatedAt||"",yn=oe.quickNoteUpdatedAt||"";vn&&(!yn||vn>yn)&&(vt={...vt,quickNote:ye.quickNote,quickNoteUpdatedAt:ye.quickNoteUpdatedAt});const Gt=typeof ye.photoUpdatedAt=="number"?ye.photoUpdatedAt:0,vr=typeof oe.photoUpdatedAt=="number"?oe.photoUpdatedAt:0;return Gt&&(!vr||Gt>vr)&&(vt={...vt,photoFileId:ye.photoFileId??null,photoUpdatedAt:Gt}),vt}),Le=new Set(R.map(oe=>String(oe.id)));H.forEach(oe=>{G.has(String(oe.id))||Le.has(String(oe.id))||se.push(oe)});const He={...$,schemaVersion:1,version:1,lastWriter:"mobile",lastEditedPeriodId:pt?String(pt):null,lastEditedDate:te,updatedAt:ge,students:se,periodsState:{...$.periodsState,periods:re}},gr=JSON.stringify(He,null,2),ve=await sd(W.id,gr,"syncUpload",E);In(oe=>{const ye={...oe||{}};return delete ye[pt||""],ye}),ve?(Jl.current=Yi(He),ht(ve.id,ve.revisionId||null),_t.current=ve.id,he(ve),mr(ve.id,He.updatedAt),hr.current=Date.now()):mr(W.id,He.updatedAt),Hi.current.clear(),zs("mobile"),a!=null&&a.silent||(k("Synced with Google Drive."),$r("Synced with Google Drive.")),As(new Date().toISOString()),ot(!1),localStorage.setItem(bo,JSON.stringify({id:(ve==null?void 0:ve.id)||W.id,name:(ve==null?void 0:ve.name)||W.name,modifiedTime:(ve==null?void 0:ve.modifiedTime)||W.modifiedTime,size:(ve==null?void 0:ve.size)||W.size,revisionId:(ve==null?void 0:ve.revisionId)||W.revisionId})),pr.current===m&&(fr(!1),V.current={},ot(!1))}catch(E){const P=(E==null?void 0:E.message)||"Failed to sync with Drive.";k(P),Ye(P),ot(!0)}finally{Wc(!1),Mn.current=!1,Ur.current=!1}},[W,Ie,Ye,$r,Fe,ee,De,dn,L,te,pt,mt,l,s,We,Fn,mr,ht,no,sd,id]),so=p.useCallback(()=>{s||We||mt&&W&&o&&(ot(!0),gt({silent:!0}))},[mt,W,o,s,gt,We]);p.useEffect(()=>{const a=()=>{document.visibilityState==="visible"&&so()};return window.addEventListener("online",so),document.addEventListener("visibilitychange",a),()=>{window.removeEventListener("online",so),document.removeEventListener("visibilitychange",a)}},[so]),p.useEffect(()=>{if(We){Fs(!0);return}if(!qc||!W||!o)return;(async()=>{ot(!0),hn("Reconnected  refreshing data"),await gt({silent:!0}),Fs(!1),hn(null)})()},[We,qc,W,o,gt]),p.useEffect(()=>{if(!W||!mt||Mn.current)return;const a=window.setTimeout(()=>{gt({silent:!0})},1500);return()=>window.clearTimeout(a)},[mt,W,gt]),p.useEffect(()=>{W&&ht(W.id,W.revisionId||null)},[W,ht]),p.useEffect(()=>{_t.current=(W==null?void 0:W.id)||null},[W]);const lo=p.useCallback(async()=>{if(s)return;const a=_t.current;if(!a)return;const m=ow({isOffline:We,isLocked:Ur.current||mn||Ds,inFlight:Mn.current,dirty:mt,now:Date.now(),lastLocalEditAt:Us.current,lastPullAt:hr.current,graceMs:Zc});if(Zs("[Sync][Mobile] pull decision",m),m.action==="skip")return;const v=await Ie(!1,"pull");if(v&&_t.current===a)try{const N=await Of(v.accessToken);if(_t.current!==a)return;const w=N.find(E=>E.id===a);if(w!=null&&w.revisionId&&w.revisionId!==Qi(a)){const E=await Ia(v.accessToken,a);if(_t.current!==a)return;const P=typeof E=="string"?JSON.parse(E):E,D=Fn(P);if(!D)return;const _=Yi(D);if(Jl.current&&_===Jl.current){ht(a,w.revisionId||null),hr.current=Date.now(),zs(D.lastWriter||"unknown");return}const $=Wr(D,w);$==="applied"&&_t.current===a?(As(new Date().toISOString()),ht(a,w.revisionId||null),hr.current=Date.now(),zs(D.lastWriter||"unknown"),Ji(G=>G+1),Br("Updated from Drive.")):$==="skipped"&&(ht(a,w.revisionId||null),hr.current=Date.now())}}catch{}},[Wr,Ie,Fn,Br,mt,Ds,mn,We,s,Qi,ht]);p.useEffect(()=>{if(s)return;let a=null;const m=async()=>{await lo(),a=window.setTimeout(m,15e3)};return a=window.setTimeout(m,15e3),()=>{a&&window.clearTimeout(a)}},[s,lo]),p.useEffect(()=>{if(Ct.current&&(window.clearTimeout(Ct.current),Ct.current=null),!s&&!(mt||mn||Ds||We||!W))return Ct.current=window.setTimeout(()=>{lo()},5e3),()=>{Ct.current&&(window.clearTimeout(Ct.current),Ct.current=null)}},[mt,mn,Ds,We,W,s,lo]);const ad=(f==null?void 0:f.state)??"unknown";let ud=ad==="ok"&&o?"Connected to Google Drive":"Google Drive Sync",Hr="Link Google Drive to save and sync. Files stay in your Drive.",Vr=o?"Manage Files":"Connect to Drive";switch(ad){case"no-session-yet":Vr=o?"Manage Files":"Connect to Google Drive",Hr="Store your seating data in a private folder in your Google Drive.";break;case"device-storage-wipe":Vr=o?"Manage Files":"Reconnect Google Drive",Hr="Your device cleared your Google connection. Tap below to reconnect; your files are still in your Drive.";break;case"oauth-failure":Vr=o?"Manage Files":"Reconnect Google Drive",Hr="There was a Google sign-in problem. Reconnect to continue syncing.";break;case"user-logged-out":Vr=o?"Manage Files":"Connect to Google Drive",Hr="You disconnected from Google Drive.";break}s&&(ud="Drive sync disabled",Hr=l,Vr="Drive disabled");const Gr=Ae&&Ot&&(L!=null&&L.periods)&&L.periods.find(a=>String(a.id)===String(Ot))||null,Kr=Gr?{...Gr.attendance||{},[te]:Fe[Gr.id]||{}}:null,ra=(Gr==null?void 0:Gr.attendanceResets)||{},cd=Kr&&Ae?qs({attendance:Kr,studentId:Ae.id,date:te,status:"absent",resets:ra}):null,dd=Kr&&Ae?qs({attendance:Kr,studentId:Ae.id,date:te,status:"tardy",resets:ra}):null,fd=Kr&&Ae?qs({attendance:Kr,studentId:Ae.id,date:te,status:"left_early",resets:ra}):null;return i.jsx(uw,{children:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-violet-900 to-indigo-800 text-white flex flex-col relative",children:[i.jsxs("div",{className:"bg-emerald-50 text-emerald-900 text-xs px-4 py-1 text-center",children:[i.jsx("span",{role:"img","aria-label":"lock",className:"mr-1",children:""}),"Privacy: Data stays on this device and in your Google Drive. Use your school Google account. No data is sent to our servers."]}),We&&i.jsx("div",{className:"bg-slate-900 text-white text-xs px-4 py-1 text-center",children:"Offline  edits are saved locally and will sync when youre back online."}),i.jsxs("div",{className:"px-4 pt-2 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{className:"text-[11px] px-2 py-1 rounded bg-white/80 text-slate-800 shadow",onClick:Xh,title:"Version",type:"button",children:["Rev ",Gf]}),i.jsx("button",{className:"text-[11px] px-2 py-1 rounded border border-white/60 bg-white/20 text-white shadow hover:bg-white/30",onClick:()=>pe(!0),type:"button",children:"About"})]}),!t&&i.jsx(Zx,{current:"mobile",onGoDesktop:qh,onGoMobile:()=>{}})]}),i.jsx("header",{className:"px-6 pt-10 pb-4 text-center",children:i.jsx("h1",{className:"text-3xl font-black tracking-wide drop-shadow",children:"ClassSeats Mobile"})}),Vf,Et==="attendance"&&L&&pt&&(()=>{const a=L.periods.find(re=>re.id===pt);if(!a)return null;const m=L.students.filter(re=>{var ge;return(ge=re.periodIds)==null?void 0:ge.includes(String(a.id))}),v=Fe[a.id]||{},N=m.length||1,w=m.filter(re=>v[re.id]==="present").length,E=m.filter(re=>v[re.id]==="absent").length,P=m.filter(re=>v[re.id]==="tardy").length,D=m.filter(re=>v[re.id]==="left_early").length,_=w+E+P+D,$=Math.round(_/N*100),G=Math.round(w/N*100);return i.jsx("div",{className:"fixed left-0 right-0 z-40 px-4 pt-2",style:{top:"64px"},children:i.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow px-3 py-2 flex flex-wrap items-center gap-2 text-xs text-slate-800",children:[i.jsxs("span",{className:"font-semibold",children:["Progress: ",$,"%  Present: ",G,"%"]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-emerald-100 text-emerald-800 font-semibold",children:[" Present: ",w]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-rose-100 text-rose-800 font-semibold",children:[" Absent: ",E]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-amber-100 text-amber-800 font-semibold",children:[" Tardy: ",P]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-800 font-semibold",children:[" Left Early: ",D]})]})})})(),i.jsxs("main",{className:"flex-1 overflow-y-auto px-4 pb-28 pt-20 space-y-6 relative",children:[i.jsx(Yx,{variant:"inline"}),i.jsx("section",{className:"max-w-2xl mx-auto bg-white/95 text-slate-900 rounded-3xl shadow-xl p-5",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-base font-semibold text-slate-900",children:ud}),i.jsx("p",{className:"text-xs text-slate-600",children:Hr}),i.jsxs("p",{className:"text-[11px] text-slate-500",children:[o?((pd=o.profile)==null?void 0:pd.email)||"Signed in":"Not signed in"," "," ",(W==null?void 0:W.name)||(Z==null?void 0:Z.name)||"No file selected",We&&"  Offline"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[mn&&i.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-amber-100 text-amber-800",children:"Pending sync"}),We&&i.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-slate-200 text-slate-700",children:"Offline"}),i.jsx("button",{className:"rounded-full bg-slate-900 text-white font-semibold px-4 py-2 text-sm disabled:opacity-50",disabled:s||!o||!W,onClick:()=>{if(s){k(l);return}gt()},title:s?l:void 0,children:"Sync Now"}),i.jsx("button",{className:"rounded-full bg-emerald-600 text-white font-semibold px-4 py-2 text-sm",onClick:()=>{if(s){k(l);return}return o?Q(!0):void Ie(!0,"cta")},disabled:s,title:s?l:void 0,children:Vr})]})]})}),s&&i.jsx("p",{className:"max-w-2xl mx-auto text-sm text-rose-100 text-left",children:"Drive sync is disabled."}),C&&i.jsxs("section",{className:"max-w-2xl mx-auto bg-slate-900 text-slate-100 rounded-2xl shadow-inner p-3 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold",children:"Drive Debug"}),i.jsx("button",{className:"text-slate-200 underline",onClick:()=>A(!1),children:"Close"})]}),i.jsx("button",{className:"text-slate-200 underline",onClick:()=>F([]),children:"Clear"})]}),i.jsxs("div",{className:"border border-slate-700 rounded p-2 h-48 overflow-y-auto space-y-1 bg-slate-800/70",children:[O.length===0&&i.jsx("div",{className:"text-slate-400",children:"No debug entries yet."}),O.map((a,m)=>i.jsx("div",{className:"font-mono text-[11px] whitespace-pre-wrap break-all",children:a},m))]})]}),i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsx("div",{className:"mt-3",children:i.jsx("div",{className:"inline-flex w-full rounded-xl border border-slate-200 bg-slate-50 p-1",children:i.jsxs("div",{className:"grid w-full grid-cols-3 gap-1",children:[i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${Et==="attendance"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Gi("attendance"),children:"Attendance"}),i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${Et==="notes"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Gi("notes"),children:"Notes"}),i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${Et==="flashcards"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Gi("flashcards"),children:"Flashcards"})]})})})}),i.jsxs("section",{className:"max-w-2xl mx-auto bg-white/95 text-slate-900 rounded-3xl shadow-xl p-6 space-y-6",children:[L&&i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 text-left",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsx("div",{children:i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:Et==="attendance"?"Attendance & Behavior":Et==="notes"?"Student Notes":"Flashcards"})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[Et==="attendance"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Date:"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 text-sm",onClick:()=>{const a=new Date(te);a.setDate(a.getDate()-1),Vl(a.toISOString().slice(0,10))},children:""}),i.jsx("input",{type:"date",className:"rounded border border-slate-300 px-2 py-1 text-sm",value:te,onChange:a=>Vl(a.target.value||Vi())}),i.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 text-sm",onClick:()=>{const a=new Date(te);a.setDate(a.getDate()+1),Vl(a.toISOString().slice(0,10))},children:""}),i.jsx("button",{className:"px-2 py-1 rounded border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm font-semibold",onClick:()=>Vl(Vi()),children:"Today"})]})]}),Et==="notes"&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Sort:"}),i.jsxs("select",{className:"rounded border border-slate-300 bg-white text-slate-900 px-3 py-2 text-sm shadow-sm",value:Ql,onChange:a=>Gh(a.target.value),children:[i.jsx("option",{value:"first-last",children:"First Last"}),i.jsx("option",{value:"last-first",children:"Last, First"})]})]}),Et==="attendance"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"View:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:dr,onChange:a=>Vh(a.target.value),children:[i.jsx("option",{value:"table",children:"Table View"}),i.jsx("option",{value:"list-last-first",children:"List (Last, First)"}),i.jsx("option",{value:"list-first-last",children:"List (First Last)"}),i.jsx("option",{value:"list-seat-number",children:"List (Seat Number)"})]}),dr==="table"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Table Order:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:Ms,onChange:a=>Kh(a.target.value),children:[i.jsx("option",{value:"asc",children:"Ascending (1, 2, 3 / A, B, C)"}),i.jsx("option",{value:"desc",children:"Descending (3, 2, 1 / C, B, A)"})]})]}),dr==="list-seat-number"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Seat Order:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:Yl,onChange:a=>Qh(a.target.value),children:[i.jsx("option",{value:"asc",children:"Ascending (1, 2, 3)"}),i.jsx("option",{value:"desc",children:"Descending (3, 2, 1)"})]})]})]}),L.periods.length>0&&i.jsx("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:pt||"",onChange:a=>Wl(a.target.value||null),children:L.periods.map(a=>i.jsx("option",{value:a.id,children:a.name},a.id))})]})]}),pt?(()=>{const a=L.periods.find(R=>R.id===pt);if(!a)return i.jsx("p",{className:"text-sm text-slate-500",children:"Period not found."});if(Et==="notes"){const R=L.students.filter(H=>{var ce;return(ce=H.periodIds)==null?void 0:ce.includes(String(pt))}).slice().sort((H,ce)=>{const[se,...Le]=H.fullName.split(" "),[He,...gr]=ce.fullName.split(" ");return Ql==="last-first"?Le.join(" ").localeCompare(gr.join(" ")):se.localeCompare(He)});return i.jsx("div",{className:"space-y-3",children:R.length===0?i.jsx("p",{className:"text-sm text-slate-500",children:"No students found."}):R.map(H=>{var se;const ce=(se=H.docs)==null?void 0:se.find(Le=>Le.pinned);return i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800 truncate",children:[H.fullName,"  QuickNote"]}),H.quickNote&&i.jsxs("div",{className:"relative mt-1",children:[i.jsx("div",{className:"text-xs text-slate-600 whitespace-pre-wrap break-words max-h-28 overflow-hidden pr-2",children:H.quickNote}),H.quickNote.length>180&&i.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-white to-transparent"}),i.jsx("div",{className:"mt-1 text-[11px] text-slate-400",children:"Open Quick Note to view/edit more."})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>{K(H.quickNote||""),M({studentId:H.id,studentName:H.fullName})},children:"Quick Note"}),i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:!ce,onClick:Le=>{Le.preventDefault(),Le.stopPropagation(),ce&&ea(Zi(ce.driveFileId))},children:"Pinned Note"}),i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>ie({studentId:H.id,studentName:H.fullName}),children:"Docs"})]})]})})},H.id)})})}if(Et==="flashcards"){const R=L.students.filter(H=>{var ce;return(ce=H.periodIds)==null?void 0:ce.includes(String(pt))});return i.jsx(dw,{students:R,periodId:String(pt),driveFileId:_t.current,driveClient:r,driveSession:o})}const m=a.layoutId?L.layouts[a.layoutId]:null,v=L.students.filter(R=>{var H;return(H=R.periodIds)==null?void 0:H.includes(String(a.id))}),N=v.reduce((R,H)=>(R[String(H.id)]=H,R),{}),w={};m==null||m.tables.forEach(R=>w[R.id]={id:R.id,name:R.name,students:[]});const E=[],P=a.tableAssignments||{};Array.isArray(a.activeGrouping)&&Object.keys(P||{}).length>0?(a.activeGrouping.forEach((R,H)=>{const ce=P[String(H)]||P[H],se=ce?w[ce]:null;R==null||R.forEach(Le=>{const He=N[String(Le)];He&&(se?se.students.push(He):E.push(He))})}),v.forEach(R=>{(a.activeGrouping||[]).some(ce=>ce==null?void 0:ce.some(se=>String(se)===String(R.id)))||E.push(R)})):v.forEach(R=>{const H=P[String(R.id)]||P[R.id];H&&w[H]?w[H].students.push(R):E.push(R)});const D=Object.values(w).sort((R,H)=>{const ce=R.name||"",se=H.name||"",Le=Yh.compare(ce,se);if(Le!==0)return Ms==="asc"?Le:-Le;const He=String(R.id).localeCompare(String(H.id));return Ms==="asc"?He:-He}),_=Fe[a.id]||{},$={...a.attendance||{},[te]:_},G=a.attendanceResets||{};ee[a.id];const re=De[a.id]||{};Mr[a.id];const ge=(R,H,ce)=>{var vt;const se=_[R.id],Le=Gx({attendance:$,studentId:R.id,date:te,resets:G}),He=qs({attendance:$,studentId:R.id,date:te,status:"tardy",resets:G}),gr=qs({attendance:$,studentId:R.id,date:te,status:"left_early",resets:G}),ve=typeof re[R.id]=="number"?re[R.id]:a.startingPoints??50,oe=!!((vt=ee[a.id])!=null&&vt[R.id]),ye=je[String(R.id)]||null;return i.jsx(ww,{student:R,attendance:se,points:ve,pointsEnabled:!!a.pointsEnabled,maxPoints:a.startingPoints??50,hasNote:oe,absenceStreak:Le,tardyCount:He,leftEarlyCount:gr,onShowAbsenceHelp:()=>Fr("absent"),onShowTardyHelp:()=>Fr("tardy"),onShowLeftEarlyHelp:()=>Fr("leftEarly"),seatNumber:H,showSeatNumber:ce,statusBg:tg,statusLabel:rd,tempPhotoUrl:ye,onOpenPhoto:()=>{Ce({id:String(R.id),fullName:R.fullName,photoFileId:R.photoFileId??null})},onOpenMenu:()=>{Vt({id:R.id,name:R.fullName}),zc(a.id)},driveClient:r,driveSession:o},R.id)};if(dr!=="table"){const R=new Map;v.forEach(se=>{R.set(String(se.id),Sw(a,m,se.id))});const H=dr==="list-seat-number",ce=[...v].sort((se,Le)=>{const[He,...gr]=se.fullName.split(" "),[ve,...oe]=Le.fullName.split(" "),ye=gr.join(" "),vt=oe.join(" ");if(dr==="list-seat-number"){const Un=R.get(String(se.id)),Qr=R.get(String(Le.id)),vn=parseInt(String(Un??""),10),yn=parseInt(String(Qr??""),10),Gt=Number.isFinite(vn),vr=Number.isFinite(yn);return Gt!==vr?Gt?-1:1:Gt&&vr&&vn!==yn?Yl==="asc"?vn-yn:yn-vn:`${se.fullName||""}`.localeCompare(`${Le.fullName||""}`)}return dr==="list-last-first"?`${ye} ${He}`.localeCompare(`${vt} ${ve}`):`${He} ${ye}`.localeCompare(`${ve} ${vt}`)});return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{className:"rounded bg-emerald-500 text-white text-xs font-semibold px-3 py-2",onClick:()=>ro(a.id,v.map(se=>se.id)),children:"Mark Rest Present (All)"}),i.jsx("button",{className:"rounded bg-rose-100 text-rose-800 text-xs font-semibold px-3 py-2 border border-rose-200",onClick:()=>ld(a.id),children:"Reset Today"})]}),i.jsx("div",{className:"space-y-2",children:ce.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No students found."}):ce.map(se=>ge(se,H?R.get(String(se.id)):null,H))})]})}return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{className:"rounded bg-emerald-500 text-white text-xs font-semibold px-3 py-2",onClick:()=>ro(a.id,v.map(R=>R.id)),children:"Mark Rest Present (All)"}),i.jsx("button",{className:"rounded bg-rose-100 text-rose-800 text-xs font-semibold px-3 py-2 border border-rose-200",onClick:()=>ld(a.id),children:"Reset Today"})]}),D.map(R=>{const H=R.students.filter(se=>_[se.id]!=="absent").map(se=>se.id),ce=R.name.replace("Table","").trim()||R.name;return i.jsxs("div",{className:"rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200 gap-3",children:[i.jsxs("div",{className:"flex flex-col leading-tight text-center min-w-[54px]",children:[i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Table"}),i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:ce})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-xs rounded bg-emerald-100 text-emerald-800 px-2 py-1",onClick:()=>ro(a.id,R.students.map(se=>se.id)),children:"Mark Rest Present"}),a.pointsEnabled&&i.jsx("button",{className:"text-[11px] rounded bg-amber-600 text-white px-3 py-2 font-semibold",onClick:()=>{Bl(null),An(0),Ui(""),Dn({periodId:a.id,tableName:R.name,studentIds:H})},children:"Table Points"})]})]}),i.jsx("div",{className:"p-3 flex flex-wrap gap-2",children:R.students.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No students assigned."}):R.students.map(se=>ge(se))})]},R.id)}),i.jsxs("div",{className:"rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Unassigned"}),i.jsx("button",{className:"text-xs rounded bg-emerald-100 text-emerald-800 px-2 py-1",onClick:()=>ro(a.id,E.map(R=>R.id)),children:"Mark Rest Present"})]}),i.jsx("div",{className:"p-3 flex flex-wrap gap-2",children:E.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No unassigned students."}):E.map(R=>ge(R))})]})]})})():i.jsx("p",{className:"text-sm text-slate-500",children:"Load and select a period to begin."})]}),ae&&i.jsx(yw,{open:!0,studentId:ae.id,studentFullName:ae.fullName,existingPhotoFileId:ae.photoFileId,onClose:()=>Ce(null),onAccept:a=>{const m=ae.id;if(!m)return;const v=URL.createObjectURL(a);Ue(N=>{const w=N[m];return w&&URL.revokeObjectURL(w),{...N,[m]:v}})},onUploadComplete:({fileId:a,photoUpdatedAt:m})=>{const v=ae.id;Ke(N=>N&&{...N,students:N.students.map(w=>w.id===v?{...w,photoFileId:a,photoUpdatedAt:m}:w)}),it(),gt({silent:!0})}}),$c&&Ln&&i.jsx(jx,{isOpen:!0,onRequestClose:eo,title:"Edit Student",maxWidth:"md",showCloseX:!0,footer:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{className:"rounded border px-4 py-2 text-sm text-slate-600",onClick:eo,children:"Cancel"}),i.jsx("button",{className:"rounded bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",onClick:()=>{const a=Ln.name.trim();if(!a||!Ln.periodId){alert("Name and period are required.");return}const m=$c.id;Ke(v=>v&&{...v,students:v.students.map(N=>String(N.id)===String(m)?{...N,fullName:a,gender:Ln.gender,periodIds:[String(Ln.periodId)],profileUpdatedAt:new Date().toISOString()}:N)}),it(),gt({silent:!0}),eo()},children:"Save"})]}),children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Full Name"}),i.jsx("input",{className:"mt-1 w-full rounded border px-3 py-2",value:Ln.name,onChange:a=>Rs(m=>m&&{...m,name:a.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Gender"}),i.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2",value:Ln.gender,onChange:a=>Rs(m=>m&&{...m,gender:a.target.value}),children:[i.jsx("option",{value:"F",children:"Female"}),i.jsx("option",{value:"M",children:"Male"}),i.jsx("option",{value:"O",children:"Other/Prefer not"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Class Period"}),i.jsx("select",{className:"mt-1 w-full rounded border px-3 py-2",value:Ln.periodId,onChange:a=>Rs(m=>m&&{...m,periodId:a.target.value}),children:((L==null?void 0:L.periods)||[]).map(a=>i.jsx("option",{value:String(a.id),children:a.name},String(a.id)))})]})]})}),Ae&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center px-4",onClick:()=>Vt(null),children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-4 w-full max-w-sm space-y-3",onClick:a=>a.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:Ae.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Actions"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-600 hover:text-slate-800",onClick:()=>{Vt(null),Zh(Ae.id)},"aria-label":"Edit student",children:""}),i.jsx("button",{type:"button",className:"rounded-md p-1 text-rose-600 hover:text-rose-700",onClick:()=>eg(Ae.id),"aria-label":"Delete student",children:""}),i.jsx("button",{className:"rounded-md p-1 text-slate-500 hover:text-slate-700",onClick:()=>Vt(null),children:""})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Bs.map(a=>i.jsx("button",{className:"rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{Ot&&na(Ot,Ae.id,a),Vt(null)},children:rd(a)},a))}),cd!==null&&dd!==null&&fd!==null&&i.jsxs("div",{className:"rounded-lg border border-slate-200 px-3 py-2 text-xs text-slate-600",children:[i.jsx("div",{className:"font-semibold text-slate-700",children:"Counters (since reset)"}),i.jsxs("div",{children:["Absent ",cd,"  Tardy ",dd,"  Left early ",fd]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-lg border border-rose-200 px-2 py-2 text-xs text-left hover:bg-rose-50 text-rose-700",onClick:()=>{Ot&&Ae&&ta(Ot,Ae.id,"absent"),Vt(null)},children:" Reset absence streak"}),i.jsx("button",{className:"w-full rounded-lg border border-amber-200 px-2 py-2 text-xs text-left hover:bg-amber-50 text-amber-700",onClick:()=>{Ot&&Ae&&ta(Ot,Ae.id,"tardy"),Vt(null)},children:" Reset tardy counter"}),i.jsx("button",{className:"w-full rounded-lg border border-orange-200 px-2 py-2 text-xs text-left hover:bg-orange-50 text-orange-700",onClick:()=>{Ot&&Ae&&ta(Ot,Ae.id,"leftEarly"),Vt(null)},children:" Reset left early counter"})]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{className:"w-full rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{Ot&&og(Ot,Ae.id,Ae.name),Vt(null)},children:" Notes and Points"})}),i.jsx("button",{className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:()=>Vt(null),children:"Close"})]})}),$i&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Fr(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-sm p-5 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"About this badge"}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Fr(null),children:""})]}),$i==="absent"?i.jsx("p",{className:"text-sm text-slate-700",children:"A# shows the absence streak since the last present or reset. Unmarked days are skipped."}):$i==="tardy"?i.jsx("p",{className:"text-sm text-slate-700",children:"T# shows the tardy count since the last reset."}):i.jsx("p",{className:"text-sm text-slate-700",children:"LE# shows the left early count since the last reset."}),i.jsx("button",{className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:()=>Fr(null),children:"Got it"})]})]}),cr&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Rn(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:["Behavior for ",cr.studentName]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Today  Points ",lt.pointsEnabled?`${qi(lt.currentPoints,lt.startingPoints)} ${lt.currentPoints}`:"disabled"]})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Rn(null),children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note"}),i.jsx("textarea",{value:tn.note,onChange:a=>fn(m=>({...m,note:a.target.value})),className:"w-full border-2 border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none",rows:4,placeholder:"Enter behavior note...",autoFocus:!0,onMouseDown:a=>a.stopPropagation(),onClick:a=>a.stopPropagation()}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[" Excellent participation"," Needs redirection"," Academic progress"," Positive peer interactions"].map(a=>i.jsx("button",{onClick:()=>fn(m=>({...m,note:m.note?m.note+" "+a:a})),className:"text-[11px] px-2.5 py-1 rounded-lg bg-slate-100 hover:bg-slate-200 border border-slate-200 text-slate-700",children:a},a))}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded px-3 py-2 text-sm",placeholder:"Custom snippet",value:Or,onChange:a=>zl(a.target.value)}),i.jsx("button",{className:"text-xs rounded bg-indigo-600 text-white px-3 py-2",onClick:()=>{Or.trim()&&(fn(a=>({...a,note:a.note?`${a.note} ${Or}`:Or})),zl(""))},children:"Insert"})]})]}),lt.pointsEnabled&&i.jsxs("div",{className:"space-y-3 border border-slate-200 rounded-xl p-3 bg-slate-50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Points"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsxs("span",{children:[qi(lt.currentPoints,lt.startingPoints)," ",lt.currentPoints]}),i.jsx("span",{className:"text-slate-400",children:""}),i.jsxs("span",{children:[qi(Math.max(0,lt.currentPoints+tn.delta),lt.startingPoints)," ",Math.max(0,lt.currentPoints+tn.delta)]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[2,1,0,-1,-2].map(a=>i.jsx("button",{onClick:()=>fn(m=>({...m,delta:a,reason:m.reason})),className:`px-3 py-1.5 rounded border text-sm font-semibold ${tn.delta===a?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-indigo-50"}`,children:a>0?`+${a}`:a},a))}),tn.delta!==0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-[11px] font-semibold text-slate-700",children:"Reason (required)"}),i.jsx("input",{value:tn.reason,onChange:a=>fn(m=>({...m,reason:a.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1 text-sm",placeholder:"Enter reason for point change"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2",onClick:lg,children:"Save"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>Rn(null),children:"Cancel"})]})]})]}),pn&&L&&(()=>{const a=L.students.find(m=>m.id===pn.studentId);return a?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>M(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Quick Note"}),i.jsx("p",{className:"text-xs text-slate-500",children:a.fullName})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>M(null),children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note"}),i.jsx("textarea",{value:U,onChange:m=>K(m.target.value),className:"w-full border-2 border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none",rows:5,placeholder:"Add a quick note...",autoFocus:!0,onMouseDown:m=>m.stopPropagation(),onClick:m=>m.stopPropagation()})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2",onClick:()=>{const m=pn.studentId,v=U;Ke(N=>N&&{...N,students:N.students.map(w=>w.id===m?{...w,quickNote:v,quickNoteUpdatedAt:new Date().toISOString()}:w)}),pr.current+=1,fr(!0),ot(!0),Us.current=Date.now(),gt({silent:!0}),M(null)},children:"Save"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>M(null),children:"Cancel"})]})]})]}):null})(),Y&&L&&(()=>{const a=L.students.find(w=>w.id===Y.studentId);if(!a)return null;const m=L.periods.find(w=>w.id===pt),N=(a.docs||[]).slice().sort((w,E)=>{if(w.pinned&&!E.pinned)return-1;if(!w.pinned&&E.pinned)return 1;const P=w.createdAt?new Date(w.createdAt).getTime():0;return(E.createdAt?new Date(E.createdAt).getTime():0)-P});return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>ie(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Student Docs"}),i.jsx("p",{className:"text-xs text-slate-500",children:a.fullName})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>ie(null),children:""})]}),i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Tap a doc to open it in Google Docs."}),i.jsx("p",{className:"text-[11px] leading-snug text-slate-500",children:"To protect privacy, ClassSeats can only see the documents it helps create."}),i.jsx("p",{className:"text-[11px] leading-snug text-slate-500",children:"All documents are created in the ClassSeats/Student Docs folder in your Google Drive."})]}),i.jsx("button",{className:"rounded-lg bg-emerald-600 text-white text-xs font-semibold px-3 py-2 disabled:opacity-50",disabled:!n.canUseDriveSync,onClick:async()=>{if(n.canUseDriveSync)try{const w=await Ie(!0,"studentDocCreate");if(!w)return;const E=(m==null?void 0:m.name)||"Period",P=`Notes - ${a.fullName} - ${E} ${rg(new Date)}`,D=window.prompt("Name this Doc:",P);if(!D||!D.trim())return;const _=D.trim(),$=await Fy(w.accessToken),G=await zy(w.accessToken,$,_),re=new Date().toISOString(),ge={id:ng(),driveFileId:G.fileId,title:G.title||_,createdAt:re,lastOpenedAt:re};Ke(R=>R&&{...R,students:R.students.map(H=>H.id===a.id?{...H,docs:[...H.docs||[],ge]}:H)}),pr.current+=1,fr(!0),ot(!0),Us.current=Date.now(),ea(Zi(G.fileId))}catch(w){Ye((w==null?void 0:w.message)||"Unable to create Google Doc.")}},children:"+ New Doc"})]}),i.jsx("div",{className:"max-h-72 overflow-y-auto space-y-2",children:N.length===0?i.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-600",children:"No Docs yet."}):N.map(w=>i.jsx("button",{className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-left text-sm text-slate-700 hover:bg-slate-50",onClick:E=>{E.preventDefault(),E.stopPropagation(),ea(Zi(w.driveFileId))},children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-900",children:w.title}),w.pinned&&i.jsx("span",{className:"text-[10px] font-semibold text-emerald-700 bg-emerald-100 px-2 py-0.5 rounded-full",children:"PINNED"})]})},w.id))}),i.jsx("button",{className:"w-full rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>ie(null),children:"Close"})]})]})})(),!L&&i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 text-left",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"No class file loaded yet."}),i.jsx("p",{className:"text-sm text-slate-600",children:"To take attendance or track points, open a class file from your Google Drive."}),i.jsx("button",{className:"w-full rounded-lg bg-emerald-600 text-white font-semibold py-2",onClick:()=>{if(s){k(l);return}return o?Q(!0):void Ie(!0,"empty-state")},disabled:s,title:s?l:void 0,children:"Manage Files"})]}),ft&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Dn(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:ft.tableName}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Apply points to ",ft.studentIds.length," present student",ft.studentIds.length===1?"":"s"]})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Dn(null),children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note (required)"}),i.jsx("textarea",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Describe why youre adjusting points",value:Fc,onChange:a=>Ui(a.target.value),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Choose points"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[2,1,-1,-2].map(a=>{const m=Mc===a;return i.jsxs("button",{className:`px-3 py-2 rounded-lg text-sm font-semibold border ${m?"bg-amber-600 text-white border-amber-600":"bg-white text-amber-800 border-amber-300"}`,onClick:()=>{Bl(a),An(0)},children:[a>0?`+${a}`:a," pts"]},a)}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("input",{type:"number",className:"w-24 rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Custom",value:nn,onFocus:()=>Bl(null),onChange:a=>An(Number(a.target.value)||0)})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-amber-600 text-white font-semibold py-2",onClick:()=>{const a=Fc.trim(),m=Mc??nn;if(!a){Ye("Enter a note for the point change.");return}if(!m){Ye("Select a point value.");return}sg(ft.periodId,ft.studentIds,m,a),Bl(null),An(0),Ui(""),Dn(null)},children:"Apply"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>Dn(null),children:"Cancel"})]}),i.jsx("p",{className:"text-[11px] text-slate-500",children:"Only present students at this table receive the adjustment. Absent students are skipped."}),(()=>{const a=(dn[ft.periodId]||[]).filter(v=>{var N;return((N=v.date)==null?void 0:N.startsWith(te))&&ft.studentIds.includes(String(v.studentId))});if(a.length===0)return null;const m=v=>{var N;return((N=L==null?void 0:L.students.find(w=>String(w.id)===String(v)))==null?void 0:N.fullName)||`Student ${v}`};return i.jsxs("div",{className:"border-t border-slate-200 pt-2 space-y-1",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Todays table adjustments"}),i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:a.map((v,N)=>i.jsxs("div",{className:"text-xs text-slate-700 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:m(v.studentId)}),i.jsxs("span",{children:[v.delta>0?"+":"",v.delta,"  ",v.reason||"No note"]})]},`${v.studentId}-${N}`))})]})})()]})]})]}),T&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Q(!1)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Manage Files"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Sign in, load, create, or import ClassSeats files."})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Q(!1),children:""})]}),s?i.jsx("div",{className:"space-y-2 text-sm text-rose-700",children:i.jsx("p",{children:l})}):o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[i.jsxs("div",{children:[i.jsxs("p",{children:["Signed in as ",i.jsx("span",{className:"font-semibold text-slate-900",children:((md=o.profile)==null?void 0:md.email)||"your account"})]}),i.jsxs("p",{children:["Active file: ",i.jsx("span",{className:"font-semibold text-slate-900",children:(W==null?void 0:W.name)||(Z==null?void 0:Z.name)||"None selected"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[W&&i.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white font-semibold",onClick:()=>void ag(),children:" Delete Active File"}),i.jsx("button",{className:"text-rose-600 underline",onClick:ig,children:"Sign out"})]})]}),Vf,i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-2xl bg-slate-900 text-white font-semibold py-2",onClick:()=>void ug(!0),children:" Refresh Cloud Files"}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-3 max-h-64 overflow-auto space-y-2",children:[y&&i.jsx("p",{className:"text-sm text-slate-500",children:"Loading Drive files"}),x&&i.jsx("p",{className:"text-sm text-rose-600",children:x}),!y&&!x&&c.length===0&&i.jsxs("div",{className:"text-sm text-slate-700 space-y-1",children:[i.jsx("p",{className:"font-semibold",children:"Youre signed into Google Drive, but no class file is loaded yet."}),i.jsx("p",{className:"text-slate-500",children:"Choose an existing class file or create a new one linked to your desktop setup."})]}),!y&&!x&&c.length>0&&c.map(a=>{const m=(Z==null?void 0:Z.id)===a.id,v=(W==null?void 0:W.id)===a.id;return i.jsxs("button",{className:`w-full text-left rounded-xl border px-3 py-2 transition ${m?"border-indigo-400 bg-indigo-50 text-indigo-900":v?"border-emerald-400 bg-emerald-50 text-emerald-900":"border-slate-200 bg-white hover:bg-slate-100"}`,onClick:()=>Me(a),children:[i.jsx("p",{className:"text-sm font-semibold",children:a.name}),i.jsxs("p",{className:"text-[11px] text-slate-500",children:["Updated ",a.modifiedTime?new Date(a.modifiedTime).toLocaleString():"",a.size?`  ${(Number(a.size)/1024).toFixed(1)} KB`:""]}),v&&i.jsx("p",{className:"text-[11px] text-emerald-700 font-semibold",children:"Active"})]},a.id)})]}),i.jsx("button",{className:"w-full rounded-2xl bg-emerald-600 text-white font-semibold py-2 disabled:opacity-50",onClick:cg,disabled:!Z||Ze,children:Ze?"Loading":Z?`Load "${Z.name}"`:"Load Selected File"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("button",{className:"w-full rounded-2xl bg-emerald-600 text-white font-semibold py-2 disabled:opacity-50",onClick:()=>void gt(),disabled:!W,children:" Sync (pull latest, then save)"}),i.jsx("p",{className:"text-[11px] text-slate-500 text-center",children:"Uses the selected cloud file. Select or create one first."})]})]}),i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"space-y-2 border-b border-slate-200 pb-3",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Create a new cloud file"}),i.jsx("input",{type:"text",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"e.g., Semester 2 24-25",value:z,onChange:a=>de(a.target.value)}),i.jsx("button",{className:"w-full rounded-2xl bg-slate-900 text-white font-semibold py-2 disabled:opacity-50",onClick:dg,disabled:q,children:q?"Creating":"Create Cloud File"})]})})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-slate-700",children:"Sign in with Google to access Drive."}),i.jsx("p",{className:"text-[11px] text-amber-700",children:"Use your school Google account. Files stay in your Drive (ClassSeats folder)."}),i.jsx("button",{className:"w-full rounded-2xl bg-indigo-600 text-white font-semibold py-2",onClick:()=>{Q(!1),Ie(!0)},children:" Sign in with Google"})]})]})]})]})]}),i.jsx("div",{className:"fixed inset-x-0 bottom-0 px-4 pb-[env(safe-area-inset-bottom)]",children:i.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow-lg px-4 py-3 flex flex-wrap items-center gap-2 text-xs text-slate-700",children:[i.jsxs("div",{className:"flex-1 min-w-[180px]",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:Ds?"Saving":Hl?`Synced ${new Date(Hl).toLocaleTimeString()}`:"Ready"}),i.jsxs("p",{className:"text-[11px] text-slate-500 truncate",children:[o?((hd=o.profile)==null?void 0:hd.email)||"Signed in":"Not signed in"," "," ",(W==null?void 0:W.name)||(Z==null?void 0:Z.name)||"No file selected",We&&"  Offline"]}),mn&&i.jsx("p",{className:"text-[11px] text-amber-700",children:"Pending sync"})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[i.jsx("button",{className:"rounded-full bg-emerald-600 text-white px-3 py-2 text-xs font-semibold disabled:opacity-50 flex-none",disabled:!o||!W,onClick:()=>void gt(),children:"Sync Now"}),i.jsx("button",{className:"rounded-full bg-slate-900 text-white px-3 py-2 text-xs font-semibold flex-none",onClick:()=>o?Q(!0):void Ie(!0,"cta"),children:"Manage Files"})]})]})}),i.jsx(qx,{open:X,onClose:()=>pe(!1),buildRevision:Gf})]}),We&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center px-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-4 text-center space-y-2 text-slate-900",children:[i.jsx("p",{className:"text-base font-semibold",children:"Mobile paused while offline"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Edits are disabled while offline. Reconnect to resume."}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Last sync: ",Hl?new Date(Hl).toLocaleTimeString():"No sync yet"]})]})})]})})}function kw({toasts:e}){return i.jsx("div",{className:"fixed right-4 top-4 z-[1000] flex w-[320px] max-w-[calc(100vw-2rem)] flex-col gap-2",children:e.map(t=>{const n=t.kind==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":t.kind==="error"?"border-rose-200 bg-rose-50 text-rose-900":t.kind==="warning"?"border-amber-200 bg-amber-50 text-amber-900":"border-slate-200 bg-slate-50 text-slate-800",r=t.kind==="success"?"":t.kind==="error"?"":t.kind==="warning"?"":"";return i.jsx("div",{className:`rounded-xl border px-3 py-2 shadow-sm ${n}`,children:i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx("span",{"aria-hidden":"true",children:r}),i.jsx("div",{className:"leading-snug",children:t.message})]})},t.id)})})}function jw({open:e,opts:t,onCancel:n,onConfirm:r}){if(!e||!t)return null;const s=t.tone??"default",l=t.confirmText??"Confirm",o=t.cancelText===null,u=t.cancelText??"Cancel",c=s==="danger"?"bg-rose-600 hover:bg-rose-700 text-white":"bg-indigo-600 hover:bg-indigo-700 text-white";return i.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/40 p-4",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl border border-slate-200",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.title}),i.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t.message})]}),i.jsxs("div",{className:"p-5 flex items-center justify-end gap-2",children:[!o&&i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:n,children:u}),i.jsx("button",{className:`rounded-xl px-4 py-2 text-sm font-semibold ${c}`,onClick:r,children:l})]})]})})}function bw({open:e,opts:t,onCancel:n,onConfirm:r}){const[s,l]=p.useState("");if(p.useEffect(()=>{e&&t&&l(t.defaultValue??"")},[e,t]),!e||!t)return null;const o=t.confirmText??"OK",u=t.cancelText??"Cancel",c=t.inputType??"text";return i.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/40 p-4",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl border border-slate-200",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.title}),t.message&&i.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t.message})]}),i.jsxs("div",{className:"p-5 space-y-3",children:[i.jsx("input",{autoFocus:!0,type:c,value:s,onChange:d=>l(d.target.value),placeholder:t.placeholder??"",className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-200"}),i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:n,children:u}),i.jsx("button",{className:"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700",onClick:()=>r(s),children:o})]})]})]})})}function Cw(){return Math.random().toString(16).slice(2)+Date.now().toString(16)}function Ew({children:e}){const[t,n]=p.useState([]),r=p.useRef(null),[s,l]=p.useState(!1),[o,u]=p.useState(null),c=p.useRef(null),[d,y]=p.useState(!1),[S,x]=p.useState(null),j=p.useCallback((h,f,g=2500)=>{const C=Cw(),A={id:C,kind:h,message:f,durationMs:g};n(O=>[...O,A]),window.setTimeout(()=>{n(O=>O.filter(F=>F.id!==C))},g)},[]),b=p.useCallback(h=>(u(h),l(!0),new Promise(f=>{r.current=f})),[]),k=p.useCallback(h=>(x(h),y(!0),new Promise(f=>{c.current=f})),[]),J=p.useMemo(()=>({toast:j,confirm:b,prompt:k}),[j,b,k]);return i.jsxs(ry.Provider,{value:J,children:[e,i.jsx(kw,{toasts:t}),i.jsx(jw,{open:s,opts:o,onCancel:()=>{l(!1);const h=r.current;r.current=null,h==null||h(!1)},onConfirm:()=>{l(!1);const h=r.current;r.current=null,h==null||h(!0)}}),i.jsx(bw,{open:d,opts:S,onCancel:()=>{y(!1);const h=c.current;c.current=null,h==null||h(null)},onConfirm:h=>{y(!1);const f=c.current;c.current=null,f==null||f(h)}})]})}const vs={waiting:!1,registration:null},Du=new Set;function Xf(){for(const e of Du)e({...vs})}function _w(e){return Du.add(e),e({...vs}),()=>{Du.delete(e)}}async function Pw(){if("serviceWorker"in navigator&&!window.__cs_sw_registered){window.__cs_sw_registered=!0;try{const t=await navigator.serviceWorker.register("/service-worker.js",{updateViaCache:"none"});vs.registration=t,t.waiting&&navigator.serviceWorker.controller&&(vs.waiting=!0),t.addEventListener("updatefound",()=>{const s=t.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&navigator.serviceWorker.controller&&(vs.waiting=!0,Xf())})});const n=()=>t.update().catch(()=>{});window.addEventListener("focus",n),window.setInterval(n,6e4),Xf();let r=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{r||(r=!0,window.location.reload())})}catch(e){console.warn("[PWA] SW registration failed",e)}}}async function Tw(){const e=vs.registration;e!=null&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"})}function Iw(){const[e,t]=p.useState({waiting:!1,registration:null});return p.useEffect(()=>_w(t),[]),e.waiting?i.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-[9999]",children:i.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-slate-900 text-white px-4 py-3 shadow-xl",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Update available"}),i.jsx("button",{className:"rounded-xl bg-white/15 hover:bg-white/25 px-3 py-1 text-sm font-semibold",onClick:async()=>{await Tw()},children:"Refresh"})]})}):null}const Rw=document.getElementById("root");La.createRoot(Rw).render(i.jsx(Ig.StrictMode,{children:i.jsx(_x,{children:i.jsxs(Ew,{children:[i.jsx(Nw,{}),i.jsx(Iw,{})]})})})),Pw();
