(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Sg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var op={exports:{}},yi={},ip={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ol=Symbol.for("react.element"),Ng=Symbol.for("react.portal"),kg=Symbol.for("react.fragment"),jg=Symbol.for("react.strict_mode"),bg=Symbol.for("react.profiler"),Eg=Symbol.for("react.provider"),Cg=Symbol.for("react.context"),_g=Symbol.for("react.forward_ref"),Pg=Symbol.for("react.suspense"),Tg=Symbol.for("react.memo"),Rg=Symbol.for("react.lazy"),bd=Symbol.iterator;function Ig(e){return e===null||typeof e!="object"?null:(e=bd&&e[bd]||e["@@iterator"],typeof e=="function"?e:null)}var ap={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},up=Object.assign,cp={};function Rs(e,t,n){this.props=e,this.context=t,this.refs=cp,this.updater=n||ap}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dp(){}dp.prototype=Rs.prototype;function Mu(e,t,n){this.props=e,this.context=t,this.refs=cp,this.updater=n||ap}var Fu=Mu.prototype=new dp;Fu.constructor=Mu;up(Fu,Rs.prototype);Fu.isPureReactComponent=!0;var Ed=Array.isArray,fp=Object.prototype.hasOwnProperty,Uu={current:null},pp={key:!0,ref:!0,__self:!0,__source:!0};function mp(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)fp.call(t,r)&&!pp.hasOwnProperty(r)&&(s[r]=t[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Ol,type:e,key:l,ref:o,props:s,_owner:Uu.current}}function Dg(e,t){return{$$typeof:Ol,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ol}function Ag(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Cd=/\/+/g;function aa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ag(""+e.key):t.toString(36)}function _o(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ol:case Ng:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+aa(o,0):r,Ed(s)?(n="",e!=null&&(n=e.replace(Cd,"$&/")+"/"),_o(s,t,n,"",function(d){return d})):s!=null&&(zu(s)&&(s=Dg(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Cd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Ed(e))for(var u=0;u<e.length;u++){l=e[u];var c=r+aa(l,u);o+=_o(l,t,n,c,s)}else if(c=Ig(e),typeof c=="function")for(e=c.call(e),u=0;!(l=e.next()).done;)l=l.value,c=r+aa(l,u++),o+=_o(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ao(e,t,n){if(e==null)return e;var r=[],s=0;return _o(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Lg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dt={current:null},Po={transition:null},Og={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:Po,ReactCurrentOwner:Uu};function hp(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:ao,forEach:function(e,t,n){ao(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ao(e,function(){t++}),t},toArray:function(e){return ao(e,function(t){return t})||[]},only:function(e){if(!zu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Rs;oe.Fragment=kg;oe.Profiler=bg;oe.PureComponent=Mu;oe.StrictMode=jg;oe.Suspense=Pg;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Og;oe.act=hp;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=up({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Uu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)fp.call(t,c)&&!pp.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Ol,type:e.type,key:s,ref:l,props:r,_owner:o}};oe.createContext=function(e){return e={$$typeof:Cg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Eg,_context:e},e.Consumer=e};oe.createElement=mp;oe.createFactory=function(e){var t=mp.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:_g,render:e}};oe.isValidElement=zu;oe.lazy=function(e){return{$$typeof:Rg,_payload:{_status:-1,_result:e},_init:Lg}};oe.memo=function(e,t){return{$$typeof:Tg,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Po.transition;Po.transition={};try{e()}finally{Po.transition=t}};oe.unstable_act=hp;oe.useCallback=function(e,t){return dt.current.useCallback(e,t)};oe.useContext=function(e){return dt.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return dt.current.useDeferredValue(e)};oe.useEffect=function(e,t){return dt.current.useEffect(e,t)};oe.useId=function(){return dt.current.useId()};oe.useImperativeHandle=function(e,t,n){return dt.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return dt.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return dt.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return dt.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return dt.current.useReducer(e,t,n)};oe.useRef=function(e){return dt.current.useRef(e)};oe.useState=function(e){return dt.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return dt.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return dt.current.useTransition()};oe.version="18.3.1";ip.exports=oe;var f=ip.exports;const Mg=Sg(f);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=f,Ug=Symbol.for("react.element"),zg=Symbol.for("react.fragment"),$g=Object.prototype.hasOwnProperty,Bg=Fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wg={key:!0,ref:!0,__self:!0,__source:!0};function gp(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)$g.call(t,r)&&!Wg.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ug,type:e,key:l,ref:o,props:s,_owner:Bg.current}}yi.Fragment=zg;yi.jsx=gp;yi.jsxs=gp;op.exports=yi;var i=op.exports,Fa={},vp={exports:{}},It={},xp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,K){var q=R.length;R.push(K);e:for(;0<q;){var me=q-1>>>1,ge=R[me];if(0<s(ge,K))R[me]=K,R[q]=ge,q=me;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var K=R[0],q=R.pop();if(q!==K){R[0]=q;e:for(var me=0,ge=R.length,Wt=ge>>>1;me<Wt;){var A=2*(me+1)-1,Ke=R[A],Ue=A+1,We=R[Ue];if(0>s(Ke,q))Ue<ge&&0>s(We,Ke)?(R[me]=We,R[Ue]=q,me=Ue):(R[me]=Ke,R[A]=q,me=A);else if(Ue<ge&&0>s(We,q))R[me]=We,R[Ue]=q,me=Ue;else break e}}return K}function s(R,K){var q=R.sortIndex-K.sortIndex;return q!==0?q:R.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,u=o.now();e.unstable_now=function(){return o.now()-u}}var c=[],d=[],y=1,N=null,w=3,j=!1,b=!1,k=!1,Y=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=R)r(d),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(d)}}function C(R){if(k=!1,v(R),!b)if(n(c)!==null)b=!0,$(L);else{var K=n(d);K!==null&&he(C,K.startTime-R)}}function L(R,K){b=!1,k&&(k=!1,h(B),B=-1),j=!0;var q=w;try{for(v(K),N=n(c);N!==null&&(!(N.expirationTime>K)||R&&!je());){var me=N.callback;if(typeof me=="function"){N.callback=null,w=N.priorityLevel;var ge=me(N.expirationTime<=K);K=e.unstable_now(),typeof ge=="function"?N.callback=ge:N===n(c)&&r(c),v(K)}else r(c);N=n(c)}if(N!==null)var Wt=!0;else{var A=n(d);A!==null&&he(C,A.startTime-K),Wt=!1}return Wt}finally{N=null,w=q,j=!1}}var O=!1,F=null,B=-1,fe=5,Z=-1;function je(){return!(e.unstable_now()-Z<fe)}function Ze(){if(F!==null){var R=e.unstable_now();Z=R;var K=!0;try{K=F(!0,R)}finally{K?et():(O=!1,F=null)}}else O=!1}var et;if(typeof p=="function")et=function(){p(Ze)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Fe=ne.port2;ne.port1.onmessage=Ze,et=function(){Fe.postMessage(null)}}else et=function(){Y(Ze,0)};function $(R){F=R,O||(O=!0,et())}function he(R,K){B=Y(function(){R(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){b||j||(b=!0,$(L))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(w){case 1:case 2:case 3:var K=3;break;default:K=w}var q=w;w=K;try{return R()}finally{w=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,K){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var q=w;w=R;try{return K()}finally{w=q}},e.unstable_scheduleCallback=function(R,K,q){var me=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?me+q:me):q=me,R){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=q+ge,R={id:y++,callback:K,priorityLevel:R,startTime:q,expirationTime:ge,sortIndex:-1},q>me?(R.sortIndex=q,t(d,R),n(c)===null&&R===n(d)&&(k?(h(B),B=-1):k=!0,he(C,q-me))):(R.sortIndex=ge,t(c,R),b||j||(b=!0,$(L))),R},e.unstable_shouldYield=je,e.unstable_wrapCallback=function(R){var K=w;return function(){var q=w;w=K;try{return R.apply(this,arguments)}finally{w=q}}}})(yp);xp.exports=yp;var Hg=xp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg=f,Rt=Hg;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wp=new Set,yl={};function Lr(e,t){Ss(e,t),Ss(e+"Capture",t)}function Ss(e,t){for(yl[e]=t,e=0;e<t.length;e++)wp.add(t[e])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=Object.prototype.hasOwnProperty,Gg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_d={},Pd={};function Kg(e){return Ua.call(Pd,e)?!0:Ua.call(_d,e)?!1:Gg.test(e)?Pd[e]=!0:(_d[e]=!0,!1)}function Qg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Yg(e,t,n,r){if(t===null||typeof t>"u"||Qg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var $u=/[\-:]([a-z])/g;function Bu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($u,Bu);qe[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($u,Bu);qe[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($u,Bu);qe[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wu(e,t,n,r){var s=qe.hasOwnProperty(t)?qe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Yg(t,n,s,r)&&(n=null),r||s===null?Kg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var In=Vg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uo=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),Hu=Symbol.for("react.strict_mode"),za=Symbol.for("react.profiler"),Sp=Symbol.for("react.provider"),Np=Symbol.for("react.context"),Vu=Symbol.for("react.forward_ref"),$a=Symbol.for("react.suspense"),Ba=Symbol.for("react.suspense_list"),Gu=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),kp=Symbol.for("react.offscreen"),Td=Symbol.iterator;function Vs(e){return e===null||typeof e!="object"?null:(e=Td&&e[Td]||e["@@iterator"],typeof e=="function"?e:null)}var Te=Object.assign,ua;function nl(e){if(ua===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ua=t&&t[1]||""}return`
`+ua+e}var ca=!1;function da(e,t){if(!e||ca)return"";ca=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,u=l.length-1;1<=o&&0<=u&&s[o]!==l[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==l[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==l[u]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=u);break}}}finally{ca=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?nl(e):""}function Jg(e){switch(e.tag){case 5:return nl(e.type);case 16:return nl("Lazy");case 13:return nl("Suspense");case 19:return nl("SuspenseList");case 0:case 2:case 15:return e=da(e.type,!1),e;case 11:return e=da(e.type.render,!1),e;case 1:return e=da(e.type,!0),e;default:return""}}function Wa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ts:return"Fragment";case es:return"Portal";case za:return"Profiler";case Hu:return"StrictMode";case $a:return"Suspense";case Ba:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Np:return(e.displayName||"Context")+".Consumer";case Sp:return(e._context.displayName||"Context")+".Provider";case Vu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gu:return t=e.displayName||null,t!==null?t:Wa(e.type)||"Memo";case Qn:t=e._payload,e=e._init;try{return Wa(e(t))}catch{}}return null}function Xg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wa(t);case 8:return t===Hu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qg(e){var t=jp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function co(e){e._valueTracker||(e._valueTracker=qg(e))}function bp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=jp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ho(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ha(e,t){var n=t.checked;return Te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Rd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ep(e,t){t=t.checked,t!=null&&Wu(e,"checked",t,!1)}function Va(e,t){Ep(e,t);var n=cr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ga(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ga(e,t.type,cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Id(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ga(e,t,n){(t!=="number"||Ho(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rl=Array.isArray;function fs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ka(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return Te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(rl(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cr(n)}}function Cp(e,t){var n=cr(t.value),r=cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ad(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _p(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_p(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fo,Pp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fo=fo||document.createElement("div"),fo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zg=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(e){Zg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ul[t]=ul[e]})});function Tp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ul.hasOwnProperty(e)&&ul[e]?(""+t).trim():t+"px"}function Rp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Tp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var e0=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ya(e,t){if(t){if(e0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function Ja(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xa=null;function Ku(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qa=null,ps=null,ms=null;function Ld(e){if(e=Ul(e)){if(typeof qa!="function")throw Error(I(280));var t=e.stateNode;t&&(t=ji(t),qa(e.stateNode,e.type,t))}}function Ip(e){ps?ms?ms.push(e):ms=[e]:ps=e}function Dp(){if(ps){var e=ps,t=ms;if(ms=ps=null,Ld(e),t)for(e=0;e<t.length;e++)Ld(t[e])}}function Ap(e,t){return e(t)}function Lp(){}var fa=!1;function Op(e,t,n){if(fa)return e(t,n);fa=!0;try{return Ap(e,t,n)}finally{fa=!1,(ps!==null||ms!==null)&&(Lp(),Dp())}}function Sl(e,t){var n=e.stateNode;if(n===null)return null;var r=ji(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var Za=!1;if(_n)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){Za=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{Za=!1}function t0(e,t,n,r,s,l,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(y){this.onError(y)}}var cl=!1,Vo=null,Go=!1,eu=null,n0={onError:function(e){cl=!0,Vo=e}};function r0(e,t,n,r,s,l,o,u,c){cl=!1,Vo=null,t0.apply(n0,arguments)}function s0(e,t,n,r,s,l,o,u,c){if(r0.apply(this,arguments),cl){if(cl){var d=Vo;cl=!1,Vo=null}else throw Error(I(198));Go||(Go=!0,eu=d)}}function Or(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Mp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Od(e){if(Or(e)!==e)throw Error(I(188))}function l0(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Od(s),e;if(l===r)return Od(s),t;l=l.sibling}throw Error(I(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=l;break}if(u===r){o=!0,r=s,n=l;break}u=u.sibling}if(!o){for(u=l.child;u;){if(u===n){o=!0,n=l,r=s;break}if(u===r){o=!0,r=l,n=s;break}u=u.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function Fp(e){return e=l0(e),e!==null?Up(e):null}function Up(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Up(e);if(t!==null)return t;e=e.sibling}return null}var zp=Rt.unstable_scheduleCallback,Md=Rt.unstable_cancelCallback,o0=Rt.unstable_shouldYield,i0=Rt.unstable_requestPaint,Ae=Rt.unstable_now,a0=Rt.unstable_getCurrentPriorityLevel,Qu=Rt.unstable_ImmediatePriority,$p=Rt.unstable_UserBlockingPriority,Ko=Rt.unstable_NormalPriority,u0=Rt.unstable_LowPriority,Bp=Rt.unstable_IdlePriority,wi=null,dn=null;function c0(e){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(wi,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:p0,d0=Math.log,f0=Math.LN2;function p0(e){return e>>>=0,e===0?32:31-(d0(e)/f0|0)|0}var po=64,mo=4194304;function sl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=sl(u):(l&=o,l!==0&&(r=sl(l)))}else o=n&~s,o!==0?r=sl(o):l!==0&&(r=sl(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xt(t),s=1<<n,r|=e[n],t&=~s;return r}function m0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Xt(l),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=m0(u,t)):c<=t&&(e.expiredLanes|=u),l&=~u}}function tu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wp(){var e=po;return po<<=1,!(po&4194240)&&(po=64),e}function pa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ml(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=n}function g0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Xt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Yu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var pe=0;function Hp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vp,Ju,Gp,Kp,Qp,nu=!1,ho=[],er=null,tr=null,nr=null,Nl=new Map,kl=new Map,Jn=[],v0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fd(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Nl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(t.pointerId)}}function Ks(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Ul(t),t!==null&&Ju(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function x0(e,t,n,r,s){switch(t){case"focusin":return er=Ks(er,e,t,n,r,s),!0;case"dragenter":return tr=Ks(tr,e,t,n,r,s),!0;case"mouseover":return nr=Ks(nr,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Nl.set(l,Ks(Nl.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,kl.set(l,Ks(kl.get(l)||null,e,t,n,r,s)),!0}return!1}function Yp(e){var t=Nr(e.target);if(t!==null){var n=Or(t);if(n!==null){if(t=n.tag,t===13){if(t=Mp(n),t!==null){e.blockedOn=t,Qp(e.priority,function(){Gp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function To(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ru(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Xa=r,n.target.dispatchEvent(r),Xa=null}else return t=Ul(n),t!==null&&Ju(t),e.blockedOn=n,!1;t.shift()}return!0}function Ud(e,t,n){To(e)&&n.delete(t)}function y0(){nu=!1,er!==null&&To(er)&&(er=null),tr!==null&&To(tr)&&(tr=null),nr!==null&&To(nr)&&(nr=null),Nl.forEach(Ud),kl.forEach(Ud)}function Qs(e,t){e.blockedOn===t&&(e.blockedOn=null,nu||(nu=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,y0)))}function jl(e){function t(s){return Qs(s,e)}if(0<ho.length){Qs(ho[0],e);for(var n=1;n<ho.length;n++){var r=ho[n];r.blockedOn===e&&(r.blockedOn=null)}}for(er!==null&&Qs(er,e),tr!==null&&Qs(tr,e),nr!==null&&Qs(nr,e),Nl.forEach(t),kl.forEach(t),n=0;n<Jn.length;n++)r=Jn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jn.length&&(n=Jn[0],n.blockedOn===null);)Yp(n),n.blockedOn===null&&Jn.shift()}var hs=In.ReactCurrentBatchConfig,Yo=!0;function w0(e,t,n,r){var s=pe,l=hs.transition;hs.transition=null;try{pe=1,Xu(e,t,n,r)}finally{pe=s,hs.transition=l}}function S0(e,t,n,r){var s=pe,l=hs.transition;hs.transition=null;try{pe=4,Xu(e,t,n,r)}finally{pe=s,hs.transition=l}}function Xu(e,t,n,r){if(Yo){var s=ru(e,t,n,r);if(s===null)ka(e,t,r,Jo,n),Fd(e,r);else if(x0(s,e,t,n,r))r.stopPropagation();else if(Fd(e,r),t&4&&-1<v0.indexOf(e)){for(;s!==null;){var l=Ul(s);if(l!==null&&Vp(l),l=ru(e,t,n,r),l===null&&ka(e,t,r,Jo,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else ka(e,t,r,null,n)}}var Jo=null;function ru(e,t,n,r){if(Jo=null,e=Ku(r),e=Nr(e),e!==null)if(t=Or(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Mp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jo=e,null}function Jp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0()){case Qu:return 1;case $p:return 4;case Ko:case u0:return 16;case Bp:return 536870912;default:return 16}default:return 16}}var qn=null,qu=null,Ro=null;function Xp(){if(Ro)return Ro;var e,t=qu,n=t.length,r,s="value"in qn?qn.value:qn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return Ro=s.slice(e,1<r?1-r:void 0)}function Io(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function go(){return!0}function zd(){return!1}function Dt(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?go:zd,this.isPropagationStopped=zd,this}return Te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=go)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=go)},persist:function(){},isPersistent:go}),t}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=Dt(Is),Fl=Te({},Is,{view:0,detail:0}),N0=Dt(Fl),ma,ha,Ys,Si=Te({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ec,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ys&&(Ys&&e.type==="mousemove"?(ma=e.screenX-Ys.screenX,ha=e.screenY-Ys.screenY):ha=ma=0,Ys=e),ma)},movementY:function(e){return"movementY"in e?e.movementY:ha}}),$d=Dt(Si),k0=Te({},Si,{dataTransfer:0}),j0=Dt(k0),b0=Te({},Fl,{relatedTarget:0}),ga=Dt(b0),E0=Te({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),C0=Dt(E0),_0=Te({},Is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P0=Dt(_0),T0=Te({},Is,{data:0}),Bd=Dt(T0),R0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=D0[e])?!!t[e]:!1}function ec(){return A0}var L0=Te({},Fl,{key:function(e){if(e.key){var t=R0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Io(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?I0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ec,charCode:function(e){return e.type==="keypress"?Io(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Io(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),O0=Dt(L0),M0=Te({},Si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=Dt(M0),F0=Te({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ec}),U0=Dt(F0),z0=Te({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),$0=Dt(z0),B0=Te({},Si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),W0=Dt(B0),H0=[9,13,27,32],tc=_n&&"CompositionEvent"in window,dl=null;_n&&"documentMode"in document&&(dl=document.documentMode);var V0=_n&&"TextEvent"in window&&!dl,qp=_n&&(!tc||dl&&8<dl&&11>=dl),Hd=" ",Vd=!1;function Zp(e,t){switch(e){case"keyup":return H0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function em(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function G0(e,t){switch(e){case"compositionend":return em(t);case"keypress":return t.which!==32?null:(Vd=!0,Hd);case"textInput":return e=t.data,e===Hd&&Vd?null:e;default:return null}}function K0(e,t){if(ns)return e==="compositionend"||!tc&&Zp(e,t)?(e=Xp(),Ro=qu=qn=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qp&&t.locale!=="ko"?null:t.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Q0[e.type]:t==="textarea"}function tm(e,t,n,r){Ip(r),t=Xo(t,"onChange"),0<t.length&&(n=new Zu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fl=null,bl=null;function Y0(e){fm(e,0)}function Ni(e){var t=ls(e);if(bp(t))return e}function J0(e,t){if(e==="change")return t}var nm=!1;if(_n){var va;if(_n){var xa="oninput"in document;if(!xa){var Kd=document.createElement("div");Kd.setAttribute("oninput","return;"),xa=typeof Kd.oninput=="function"}va=xa}else va=!1;nm=va&&(!document.documentMode||9<document.documentMode)}function Qd(){fl&&(fl.detachEvent("onpropertychange",rm),bl=fl=null)}function rm(e){if(e.propertyName==="value"&&Ni(bl)){var t=[];tm(t,bl,e,Ku(e)),Op(Y0,t)}}function X0(e,t,n){e==="focusin"?(Qd(),fl=t,bl=n,fl.attachEvent("onpropertychange",rm)):e==="focusout"&&Qd()}function q0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ni(bl)}function Z0(e,t){if(e==="click")return Ni(t)}function ev(e,t){if(e==="input"||e==="change")return Ni(t)}function tv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:tv;function El(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ua.call(t,s)||!Zt(e[s],t[s]))return!1}return!0}function Yd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jd(e,t){var n=Yd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yd(n)}}function sm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lm(){for(var e=window,t=Ho();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ho(e.document)}return t}function nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nv(e){var t=lm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sm(n.ownerDocument.documentElement,n)){if(r!==null&&nc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Jd(n,l);var o=Jd(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rv=_n&&"documentMode"in document&&11>=document.documentMode,rs=null,su=null,pl=null,lu=!1;function Xd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lu||rs==null||rs!==Ho(r)||(r=rs,"selectionStart"in r&&nc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pl&&El(pl,r)||(pl=r,r=Xo(su,"onSelect"),0<r.length&&(t=new Zu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rs)))}function vo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ss={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionend:vo("Transition","TransitionEnd")},ya={},om={};_n&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function ki(e){if(ya[e])return ya[e];if(!ss[e])return e;var t=ss[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in om)return ya[e]=t[n];return e}var im=ki("animationend"),am=ki("animationiteration"),um=ki("animationstart"),cm=ki("transitionend"),dm=new Map,qd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(e,t){dm.set(e,t),Lr(t,[e])}for(var wa=0;wa<qd.length;wa++){var Sa=qd[wa],sv=Sa.toLowerCase(),lv=Sa[0].toUpperCase()+Sa.slice(1);pr(sv,"on"+lv)}pr(im,"onAnimationEnd");pr(am,"onAnimationIteration");pr(um,"onAnimationStart");pr("dblclick","onDoubleClick");pr("focusin","onFocus");pr("focusout","onBlur");pr(cm,"onTransitionEnd");Ss("onMouseEnter",["mouseout","mouseover"]);Ss("onMouseLeave",["mouseout","mouseover"]);Ss("onPointerEnter",["pointerout","pointerover"]);Ss("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ov=new Set("cancel close invalid load scroll toggle".split(" ").concat(ll));function Zd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,s0(r,t,void 0,e),e.currentTarget=null}function fm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==l&&s.isPropagationStopped())break e;Zd(s,u,d),l=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==l&&s.isPropagationStopped())break e;Zd(s,u,d),l=c}}}if(Go)throw e=eu,Go=!1,eu=null,e}function Ne(e,t){var n=t[cu];n===void 0&&(n=t[cu]=new Set);var r=e+"__bubble";n.has(r)||(pm(t,e,2,!1),n.add(r))}function Na(e,t,n){var r=0;t&&(r|=4),pm(n,e,r,t)}var xo="_reactListening"+Math.random().toString(36).slice(2);function Cl(e){if(!e[xo]){e[xo]=!0,wp.forEach(function(n){n!=="selectionchange"&&(ov.has(n)||Na(n,!1,e),Na(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xo]||(t[xo]=!0,Na("selectionchange",!1,t))}}function pm(e,t,n,r){switch(Jp(t)){case 1:var s=w0;break;case 4:s=S0;break;default:s=Xu}n=s.bind(null,t,n,e),s=void 0,!Za||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ka(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Nr(u),o===null)return;if(c=o.tag,c===5||c===6){r=l=o;continue e}u=u.parentNode}}r=r.return}Op(function(){var d=l,y=Ku(n),N=[];e:{var w=dm.get(e);if(w!==void 0){var j=Zu,b=e;switch(e){case"keypress":if(Io(n)===0)break e;case"keydown":case"keyup":j=O0;break;case"focusin":b="focus",j=ga;break;case"focusout":b="blur",j=ga;break;case"beforeblur":case"afterblur":j=ga;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=j0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=U0;break;case im:case am:case um:j=C0;break;case cm:j=$0;break;case"scroll":j=N0;break;case"wheel":j=W0;break;case"copy":case"cut":case"paste":j=P0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Wd}var k=(t&4)!==0,Y=!k&&e==="scroll",h=k?w!==null?w+"Capture":null:w;k=[];for(var p=d,v;p!==null;){v=p;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,h!==null&&(C=Sl(p,h),C!=null&&k.push(_l(p,C,v)))),Y)break;p=p.return}0<k.length&&(w=new j(w,b,null,n,y),N.push({event:w,listeners:k}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",w&&n!==Xa&&(b=n.relatedTarget||n.fromElement)&&(Nr(b)||b[Pn]))break e;if((j||w)&&(w=y.window===y?y:(w=y.ownerDocument)?w.defaultView||w.parentWindow:window,j?(b=n.relatedTarget||n.toElement,j=d,b=b?Nr(b):null,b!==null&&(Y=Or(b),b!==Y||b.tag!==5&&b.tag!==6)&&(b=null)):(j=null,b=d),j!==b)){if(k=$d,C="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(k=Wd,C="onPointerLeave",h="onPointerEnter",p="pointer"),Y=j==null?w:ls(j),v=b==null?w:ls(b),w=new k(C,p+"leave",j,n,y),w.target=Y,w.relatedTarget=v,C=null,Nr(y)===d&&(k=new k(h,p+"enter",b,n,y),k.target=v,k.relatedTarget=Y,C=k),Y=C,j&&b)t:{for(k=j,h=b,p=0,v=k;v;v=qr(v))p++;for(v=0,C=h;C;C=qr(C))v++;for(;0<p-v;)k=qr(k),p--;for(;0<v-p;)h=qr(h),v--;for(;p--;){if(k===h||h!==null&&k===h.alternate)break t;k=qr(k),h=qr(h)}k=null}else k=null;j!==null&&ef(N,w,j,k,!1),b!==null&&Y!==null&&ef(N,Y,b,k,!0)}}e:{if(w=d?ls(d):window,j=w.nodeName&&w.nodeName.toLowerCase(),j==="select"||j==="input"&&w.type==="file")var L=J0;else if(Gd(w))if(nm)L=ev;else{L=q0;var O=X0}else(j=w.nodeName)&&j.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(L=Z0);if(L&&(L=L(e,d))){tm(N,L,n,y);break e}O&&O(e,w,d),e==="focusout"&&(O=w._wrapperState)&&O.controlled&&w.type==="number"&&Ga(w,"number",w.value)}switch(O=d?ls(d):window,e){case"focusin":(Gd(O)||O.contentEditable==="true")&&(rs=O,su=d,pl=null);break;case"focusout":pl=su=rs=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,Xd(N,n,y);break;case"selectionchange":if(rv)break;case"keydown":case"keyup":Xd(N,n,y)}var F;if(tc)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else ns?Zp(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(qp&&n.locale!=="ko"&&(ns||B!=="onCompositionStart"?B==="onCompositionEnd"&&ns&&(F=Xp()):(qn=y,qu="value"in qn?qn.value:qn.textContent,ns=!0)),O=Xo(d,B),0<O.length&&(B=new Bd(B,e,null,n,y),N.push({event:B,listeners:O}),F?B.data=F:(F=em(n),F!==null&&(B.data=F)))),(F=V0?G0(e,n):K0(e,n))&&(d=Xo(d,"onBeforeInput"),0<d.length&&(y=new Bd("onBeforeInput","beforeinput",null,n,y),N.push({event:y,listeners:d}),y.data=F))}fm(N,t)})}function _l(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Sl(e,n),l!=null&&r.unshift(_l(e,l,s)),l=Sl(e,t),l!=null&&r.push(_l(e,l,s))),e=e.return}return r}function qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ef(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=Sl(n,l),c!=null&&o.unshift(_l(n,c,u))):s||(c=Sl(n,l),c!=null&&o.push(_l(n,c,u)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var iv=/\r\n?/g,av=/\u0000|\uFFFD/g;function tf(e){return(typeof e=="string"?e:""+e).replace(iv,`
`).replace(av,"")}function yo(e,t,n){if(t=tf(t),tf(e)!==t&&n)throw Error(I(425))}function qo(){}var ou=null,iu=null;function au(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uu=typeof setTimeout=="function"?setTimeout:void 0,uv=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,cv=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(e){return nf.resolve(null).then(e).catch(dv)}:uu;function dv(e){setTimeout(function(){throw e})}function ja(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),jl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);jl(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),cn="__reactFiber$"+Ds,Pl="__reactProps$"+Ds,Pn="__reactContainer$"+Ds,cu="__reactEvents$"+Ds,fv="__reactListeners$"+Ds,pv="__reactHandles$"+Ds;function Nr(e){var t=e[cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[cn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=rf(e);e!==null;){if(n=e[cn])return n;e=rf(e)}return t}e=n,n=e.parentNode}return null}function Ul(e){return e=e[cn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ls(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function ji(e){return e[Pl]||null}var du=[],os=-1;function mr(e){return{current:e}}function ke(e){0>os||(e.current=du[os],du[os]=null,os--)}function we(e,t){os++,du[os]=e.current,e.current=t}var dr={},st=mr(dr),St=mr(!1),_r=dr;function Ns(e,t){var n=e.type.contextTypes;if(!n)return dr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(e){return e=e.childContextTypes,e!=null}function Zo(){ke(St),ke(st)}function sf(e,t,n){if(st.current!==dr)throw Error(I(168));we(st,t),we(St,n)}function mm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(I(108,Xg(e)||"Unknown",s));return Te({},n,r)}function ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,_r=st.current,we(st,e),we(St,St.current),!0}function lf(e,t,n){var r=e.stateNode;if(!r)throw Error(I(169));n?(e=mm(e,t,_r),r.__reactInternalMemoizedMergedChildContext=e,ke(St),ke(st),we(st,e)):ke(St),we(St,n)}var kn=null,bi=!1,ba=!1;function hm(e){kn===null?kn=[e]:kn.push(e)}function mv(e){bi=!0,hm(e)}function hr(){if(!ba&&kn!==null){ba=!0;var e=0,t=pe;try{var n=kn;for(pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}kn=null,bi=!1}catch(s){throw kn!==null&&(kn=kn.slice(e+1)),zp(Qu,hr),s}finally{pe=t,ba=!1}}return null}var is=[],as=0,ti=null,ni=0,Mt=[],Ft=0,Pr=null,jn=1,bn="";function yr(e,t){is[as++]=ni,is[as++]=ti,ti=e,ni=t}function gm(e,t,n){Mt[Ft++]=jn,Mt[Ft++]=bn,Mt[Ft++]=Pr,Pr=e;var r=jn;e=bn;var s=32-Xt(r)-1;r&=~(1<<s),n+=1;var l=32-Xt(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,jn=1<<32-Xt(t)+s|n<<s|r,bn=l+e}else jn=1<<l|n<<s|r,bn=e}function rc(e){e.return!==null&&(yr(e,1),gm(e,1,0))}function sc(e){for(;e===ti;)ti=is[--as],is[as]=null,ni=is[--as],is[as]=null;for(;e===Pr;)Pr=Mt[--Ft],Mt[Ft]=null,bn=Mt[--Ft],Mt[Ft]=null,jn=Mt[--Ft],Mt[Ft]=null}var Tt=null,Pt=null,Ee=!1,Jt=null;function vm(e,t){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function of(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,Pt=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pr!==null?{id:jn,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tt=e,Pt=null,!0):!1;default:return!1}}function fu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pu(e){if(Ee){var t=Pt;if(t){var n=t;if(!of(e,t)){if(fu(e))throw Error(I(418));t=rr(n.nextSibling);var r=Tt;t&&of(e,t)?vm(r,n):(e.flags=e.flags&-4097|2,Ee=!1,Tt=e)}}else{if(fu(e))throw Error(I(418));e.flags=e.flags&-4097|2,Ee=!1,Tt=e}}}function af(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function wo(e){if(e!==Tt)return!1;if(!Ee)return af(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!au(e.type,e.memoizedProps)),t&&(t=Pt)){if(fu(e))throw xm(),Error(I(418));for(;t;)vm(e,t),t=rr(t.nextSibling)}if(af(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pt=rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=Tt?rr(e.stateNode.nextSibling):null;return!0}function xm(){for(var e=Pt;e;)e=rr(e.nextSibling)}function ks(){Pt=Tt=null,Ee=!1}function lc(e){Jt===null?Jt=[e]:Jt.push(e)}var hv=In.ReactCurrentBatchConfig;function Js(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var u=s.refs;o===null?delete u[l]:u[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function So(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uf(e){var t=e._init;return t(e._payload)}function ym(e){function t(h,p){if(e){var v=h.deletions;v===null?(h.deletions=[p],h.flags|=16):v.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function s(h,p){return h=ir(h,p),h.index=0,h.sibling=null,h}function l(h,p,v){return h.index=v,e?(v=h.alternate,v!==null?(v=v.index,v<p?(h.flags|=2,p):v):(h.flags|=2,p)):(h.flags|=1048576,p)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function u(h,p,v,C){return p===null||p.tag!==6?(p=Ia(v,h.mode,C),p.return=h,p):(p=s(p,v),p.return=h,p)}function c(h,p,v,C){var L=v.type;return L===ts?y(h,p,v.props.children,C,v.key):p!==null&&(p.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Qn&&uf(L)===p.type)?(C=s(p,v.props),C.ref=Js(h,p,v),C.return=h,C):(C=Uo(v.type,v.key,v.props,null,h.mode,C),C.ref=Js(h,p,v),C.return=h,C)}function d(h,p,v,C){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Da(v,h.mode,C),p.return=h,p):(p=s(p,v.children||[]),p.return=h,p)}function y(h,p,v,C,L){return p===null||p.tag!==7?(p=Cr(v,h.mode,C,L),p.return=h,p):(p=s(p,v),p.return=h,p)}function N(h,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ia(""+p,h.mode,v),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case uo:return v=Uo(p.type,p.key,p.props,null,h.mode,v),v.ref=Js(h,null,p),v.return=h,v;case es:return p=Da(p,h.mode,v),p.return=h,p;case Qn:var C=p._init;return N(h,C(p._payload),v)}if(rl(p)||Vs(p))return p=Cr(p,h.mode,v,null),p.return=h,p;So(h,p)}return null}function w(h,p,v,C){var L=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return L!==null?null:u(h,p,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case uo:return v.key===L?c(h,p,v,C):null;case es:return v.key===L?d(h,p,v,C):null;case Qn:return L=v._init,w(h,p,L(v._payload),C)}if(rl(v)||Vs(v))return L!==null?null:y(h,p,v,C,null);So(h,v)}return null}function j(h,p,v,C,L){if(typeof C=="string"&&C!==""||typeof C=="number")return h=h.get(v)||null,u(p,h,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case uo:return h=h.get(C.key===null?v:C.key)||null,c(p,h,C,L);case es:return h=h.get(C.key===null?v:C.key)||null,d(p,h,C,L);case Qn:var O=C._init;return j(h,p,v,O(C._payload),L)}if(rl(C)||Vs(C))return h=h.get(v)||null,y(p,h,C,L,null);So(p,C)}return null}function b(h,p,v,C){for(var L=null,O=null,F=p,B=p=0,fe=null;F!==null&&B<v.length;B++){F.index>B?(fe=F,F=null):fe=F.sibling;var Z=w(h,F,v[B],C);if(Z===null){F===null&&(F=fe);break}e&&F&&Z.alternate===null&&t(h,F),p=l(Z,p,B),O===null?L=Z:O.sibling=Z,O=Z,F=fe}if(B===v.length)return n(h,F),Ee&&yr(h,B),L;if(F===null){for(;B<v.length;B++)F=N(h,v[B],C),F!==null&&(p=l(F,p,B),O===null?L=F:O.sibling=F,O=F);return Ee&&yr(h,B),L}for(F=r(h,F);B<v.length;B++)fe=j(F,h,B,v[B],C),fe!==null&&(e&&fe.alternate!==null&&F.delete(fe.key===null?B:fe.key),p=l(fe,p,B),O===null?L=fe:O.sibling=fe,O=fe);return e&&F.forEach(function(je){return t(h,je)}),Ee&&yr(h,B),L}function k(h,p,v,C){var L=Vs(v);if(typeof L!="function")throw Error(I(150));if(v=L.call(v),v==null)throw Error(I(151));for(var O=L=null,F=p,B=p=0,fe=null,Z=v.next();F!==null&&!Z.done;B++,Z=v.next()){F.index>B?(fe=F,F=null):fe=F.sibling;var je=w(h,F,Z.value,C);if(je===null){F===null&&(F=fe);break}e&&F&&je.alternate===null&&t(h,F),p=l(je,p,B),O===null?L=je:O.sibling=je,O=je,F=fe}if(Z.done)return n(h,F),Ee&&yr(h,B),L;if(F===null){for(;!Z.done;B++,Z=v.next())Z=N(h,Z.value,C),Z!==null&&(p=l(Z,p,B),O===null?L=Z:O.sibling=Z,O=Z);return Ee&&yr(h,B),L}for(F=r(h,F);!Z.done;B++,Z=v.next())Z=j(F,h,B,Z.value,C),Z!==null&&(e&&Z.alternate!==null&&F.delete(Z.key===null?B:Z.key),p=l(Z,p,B),O===null?L=Z:O.sibling=Z,O=Z);return e&&F.forEach(function(Ze){return t(h,Ze)}),Ee&&yr(h,B),L}function Y(h,p,v,C){if(typeof v=="object"&&v!==null&&v.type===ts&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case uo:e:{for(var L=v.key,O=p;O!==null;){if(O.key===L){if(L=v.type,L===ts){if(O.tag===7){n(h,O.sibling),p=s(O,v.props.children),p.return=h,h=p;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Qn&&uf(L)===O.type){n(h,O.sibling),p=s(O,v.props),p.ref=Js(h,O,v),p.return=h,h=p;break e}n(h,O);break}else t(h,O);O=O.sibling}v.type===ts?(p=Cr(v.props.children,h.mode,C,v.key),p.return=h,h=p):(C=Uo(v.type,v.key,v.props,null,h.mode,C),C.ref=Js(h,p,v),C.return=h,h=C)}return o(h);case es:e:{for(O=v.key;p!==null;){if(p.key===O)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(h,p.sibling),p=s(p,v.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=Da(v,h.mode,C),p.return=h,h=p}return o(h);case Qn:return O=v._init,Y(h,p,O(v._payload),C)}if(rl(v))return b(h,p,v,C);if(Vs(v))return k(h,p,v,C);So(h,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(h,p.sibling),p=s(p,v),p.return=h,h=p):(n(h,p),p=Ia(v,h.mode,C),p.return=h,h=p),o(h)):n(h,p)}return Y}var js=ym(!0),wm=ym(!1),ri=mr(null),si=null,us=null,oc=null;function ic(){oc=us=si=null}function ac(e){var t=ri.current;ke(ri),e._currentValue=t}function mu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function gs(e,t){si=e,oc=us=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(oc!==e)if(e={context:e,memoizedValue:t,next:null},us===null){if(si===null)throw Error(I(308));us=e,si.dependencies={lanes:0,firstContext:e}}else us=us.next=e;return t}var kr=null;function uc(e){kr===null?kr=[e]:kr.push(e)}function Sm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,uc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yn=!1;function cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function En(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Tn(e,n)}return s=r.interleaved,s===null?(t.next=t,uc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Tn(e,n)}function Do(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yu(e,n)}}function cf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function li(e,t,n,r){var s=e.updateQueue;Yn=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var y=e.alternate;y!==null&&(y=y.updateQueue,u=y.lastBaseUpdate,u!==o&&(u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=c))}if(l!==null){var N=s.baseState;o=0,y=d=c=null,u=l;do{var w=u.lane,j=u.eventTime;if((r&w)===w){y!==null&&(y=y.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=e,k=u;switch(w=t,j=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){N=b.call(j,N,w);break e}N=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,w=typeof b=="function"?b.call(j,N,w):b,w==null)break e;N=Te({},N,w);break e;case 2:Yn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,w=s.effects,w===null?s.effects=[u]:w.push(u))}else j={eventTime:j,lane:w,tag:u.tag,payload:u.payload,callback:u.callback,next:null},y===null?(d=y=j,c=N):y=y.next=j,o|=w;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;w=u,u=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(y===null&&(c=N),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=y,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Rr|=o,e.lanes=o,e.memoizedState=N}}function df(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(I(191,s));s.call(r)}}}var zl={},fn=mr(zl),Tl=mr(zl),Rl=mr(zl);function jr(e){if(e===zl)throw Error(I(174));return e}function dc(e,t){switch(we(Rl,t),we(Tl,e),we(fn,zl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qa(t,e)}ke(fn),we(fn,t)}function bs(){ke(fn),ke(Tl),ke(Rl)}function km(e){jr(Rl.current);var t=jr(fn.current),n=Qa(t,e.type);t!==n&&(we(Tl,e),we(fn,n))}function fc(e){Tl.current===e&&(ke(fn),ke(Tl))}var _e=mr(0);function oi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ea=[];function pc(){for(var e=0;e<Ea.length;e++)Ea[e]._workInProgressVersionPrimary=null;Ea.length=0}var Ao=In.ReactCurrentDispatcher,Ca=In.ReactCurrentBatchConfig,Tr=0,Pe=null,$e=null,Ve=null,ii=!1,ml=!1,Il=0,gv=0;function tt(){throw Error(I(321))}function mc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zt(e[n],t[n]))return!1;return!0}function hc(e,t,n,r,s,l){if(Tr=l,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ao.current=e===null||e.memoizedState===null?wv:Sv,e=n(r,s),ml){l=0;do{if(ml=!1,Il=0,25<=l)throw Error(I(301));l+=1,Ve=$e=null,t.updateQueue=null,Ao.current=Nv,e=n(r,s)}while(ml)}if(Ao.current=ai,t=$e!==null&&$e.next!==null,Tr=0,Ve=$e=Pe=null,ii=!1,t)throw Error(I(300));return e}function gc(){var e=Il!==0;return Il=0,e}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Pe.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function Bt(){if($e===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Ve===null?Pe.memoizedState:Ve.next;if(t!==null)Ve=t,$e=e;else{if(e===null)throw Error(I(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ve===null?Pe.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function Dl(e,t){return typeof t=="function"?t(e):t}function _a(e){var t=Bt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=$e,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var u=o=null,c=null,d=l;do{var y=d.lane;if((Tr&y)===y)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var N={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=N,o=r):c=c.next=N,Pe.lanes|=y,Rr|=y}d=d.next}while(d!==null&&d!==l);c===null?o=r:c.next=u,Zt(r,t.memoizedState)||(wt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Pe.lanes|=l,Rr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=Bt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);Zt(l,t.memoizedState)||(wt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function jm(){}function bm(e,t){var n=Pe,r=Bt(),s=t(),l=!Zt(r.memoizedState,s);if(l&&(r.memoizedState=s,wt=!0),r=r.queue,vc(_m.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Al(9,Cm.bind(null,n,r,s,t),void 0,null),Ge===null)throw Error(I(349));Tr&30||Em(n,t,s)}return s}function Em(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cm(e,t,n,r){t.value=n,t.getSnapshot=r,Pm(t)&&Tm(e)}function _m(e,t,n){return n(function(){Pm(t)&&Tm(e)})}function Pm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zt(e,n)}catch{return!0}}function Tm(e){var t=Tn(e,1);t!==null&&qt(t,e,1,-1)}function ff(e){var t=an();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:e},t.queue=e,e=e.dispatch=yv.bind(null,Pe,e),[t.memoizedState,e]}function Al(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Rm(){return Bt().memoizedState}function Lo(e,t,n,r){var s=an();Pe.flags|=e,s.memoizedState=Al(1|t,n,void 0,r===void 0?null:r)}function Ei(e,t,n,r){var s=Bt();r=r===void 0?null:r;var l=void 0;if($e!==null){var o=$e.memoizedState;if(l=o.destroy,r!==null&&mc(r,o.deps)){s.memoizedState=Al(t,n,l,r);return}}Pe.flags|=e,s.memoizedState=Al(1|t,n,l,r)}function pf(e,t){return Lo(8390656,8,e,t)}function vc(e,t){return Ei(2048,8,e,t)}function Im(e,t){return Ei(4,2,e,t)}function Dm(e,t){return Ei(4,4,e,t)}function Am(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lm(e,t,n){return n=n!=null?n.concat([e]):null,Ei(4,4,Am.bind(null,t,e),n)}function xc(){}function Om(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Fm(e,t,n){return Tr&21?(Zt(n,t)||(n=Wp(),Pe.lanes|=n,Rr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=n)}function vv(e,t){var n=pe;pe=n!==0&&4>n?n:4,e(!0);var r=Ca.transition;Ca.transition={};try{e(!1),t()}finally{pe=n,Ca.transition=r}}function Um(){return Bt().memoizedState}function xv(e,t,n){var r=or(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zm(e))$m(t,n);else if(n=Sm(e,t,n,r),n!==null){var s=ct();qt(n,e,r,s),Bm(n,t,r)}}function yv(e,t,n){var r=or(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zm(e))$m(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,u=l(o,n);if(s.hasEagerState=!0,s.eagerState=u,Zt(u,o)){var c=t.interleaved;c===null?(s.next=s,uc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Sm(e,t,s,r),n!==null&&(s=ct(),qt(n,e,r,s),Bm(n,t,r))}}function zm(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function $m(e,t){ml=ii=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Bm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yu(e,n)}}var ai={readContext:$t,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},wv={readContext:$t,useCallback:function(e,t){return an().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:pf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Lo(4194308,4,Am.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var n=an();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=an();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xv.bind(null,Pe,e),[r.memoizedState,e]},useRef:function(e){var t=an();return e={current:e},t.memoizedState=e},useState:ff,useDebugValue:xc,useDeferredValue:function(e){return an().memoizedState=e},useTransition:function(){var e=ff(!1),t=e[0];return e=vv.bind(null,e[1]),an().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pe,s=an();if(Ee){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),Ge===null)throw Error(I(349));Tr&30||Em(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,pf(_m.bind(null,r,l,e),[e]),r.flags|=2048,Al(9,Cm.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=an(),t=Ge.identifierPrefix;if(Ee){var n=bn,r=jn;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Il++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sv={readContext:$t,useCallback:Om,useContext:$t,useEffect:vc,useImperativeHandle:Lm,useInsertionEffect:Im,useLayoutEffect:Dm,useMemo:Mm,useReducer:_a,useRef:Rm,useState:function(){return _a(Dl)},useDebugValue:xc,useDeferredValue:function(e){var t=Bt();return Fm(t,$e.memoizedState,e)},useTransition:function(){var e=_a(Dl)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:jm,useSyncExternalStore:bm,useId:Um,unstable_isNewReconciler:!1},Nv={readContext:$t,useCallback:Om,useContext:$t,useEffect:vc,useImperativeHandle:Lm,useInsertionEffect:Im,useLayoutEffect:Dm,useMemo:Mm,useReducer:Pa,useRef:Rm,useState:function(){return Pa(Dl)},useDebugValue:xc,useDeferredValue:function(e){var t=Bt();return $e===null?t.memoizedState=e:Fm(t,$e.memoizedState,e)},useTransition:function(){var e=Pa(Dl)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:jm,useSyncExternalStore:bm,useId:Um,unstable_isNewReconciler:!1};function Qt(e,t){if(e&&e.defaultProps){t=Te({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Te({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ci={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ct(),s=or(e),l=En(r,s);l.payload=t,n!=null&&(l.callback=n),t=sr(e,l,s),t!==null&&(qt(t,e,s,r),Do(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ct(),s=or(e),l=En(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=sr(e,l,s),t!==null&&(qt(t,e,s,r),Do(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ct(),r=or(e),s=En(n,r);s.tag=2,t!=null&&(s.callback=t),t=sr(e,s,r),t!==null&&(qt(t,e,r,n),Do(t,e,r))}};function mf(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!El(n,r)||!El(s,l):!0}function Wm(e,t,n){var r=!1,s=dr,l=t.contextType;return typeof l=="object"&&l!==null?l=$t(l):(s=Nt(t)?_r:st.current,r=t.contextTypes,l=(r=r!=null)?Ns(e,s):dr),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ci,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function hf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ci.enqueueReplaceState(t,t.state,null)}function gu(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},cc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=$t(l):(l=Nt(t)?_r:st.current,s.context=Ns(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(hu(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ci.enqueueReplaceState(s,s.state,null),li(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Es(e,t){try{var n="",r=t;do n+=Jg(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Ta(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kv=typeof WeakMap=="function"?WeakMap:Map;function Hm(e,t,n){n=En(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ci||(ci=!0,Cu=r),vu(e,t)},n}function Vm(e,t,n){n=En(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){vu(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){vu(e,t),typeof r!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function gf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Mv.bind(null,e,t,n),t.then(e,e))}function vf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=En(-1,1),t.tag=2,sr(n,t,1))),n.lanes|=1),e)}var jv=In.ReactCurrentOwner,wt=!1;function ut(e,t,n,r){t.child=e===null?wm(t,null,n,r):js(t,e.child,n,r)}function yf(e,t,n,r,s){n=n.render;var l=t.ref;return gs(t,s),r=hc(e,t,n,r,l,s),n=gc(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Rn(e,t,s)):(Ee&&n&&rc(t),t.flags|=1,ut(e,t,r,s),t.child)}function wf(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Ec(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Gm(e,t,l,r,s)):(e=Uo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:El,n(o,r)&&e.ref===t.ref)return Rn(e,t,s)}return t.flags|=1,e=ir(l,r),e.ref=t.ref,e.return=t,t.child=e}function Gm(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(El(l,r)&&e.ref===t.ref)if(wt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,Rn(e,t,s)}return xu(e,t,n,r,s)}function Km(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(ds,_t),_t|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(ds,_t),_t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,we(ds,_t),_t|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,we(ds,_t),_t|=r;return ut(e,t,s,n),t.child}function Qm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xu(e,t,n,r,s){var l=Nt(n)?_r:st.current;return l=Ns(t,l),gs(t,s),n=hc(e,t,n,r,l,s),r=gc(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Rn(e,t,s)):(Ee&&r&&rc(t),t.flags|=1,ut(e,t,n,s),t.child)}function Sf(e,t,n,r,s){if(Nt(n)){var l=!0;ei(t)}else l=!1;if(gs(t,s),t.stateNode===null)Oo(e,t),Wm(t,n,r),gu(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,u=t.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=$t(d):(d=Nt(n)?_r:st.current,d=Ns(t,d));var y=n.getDerivedStateFromProps,N=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function";N||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&hf(t,o,r,d),Yn=!1;var w=t.memoizedState;o.state=w,li(t,r,o,s),c=t.memoizedState,u!==r||w!==c||St.current||Yn?(typeof y=="function"&&(hu(t,n,y,r),c=t.memoizedState),(u=Yn||mf(t,n,u,r,w,c,d))?(N||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Nm(e,t),u=t.memoizedProps,d=t.type===t.elementType?u:Qt(t.type,u),o.props=d,N=t.pendingProps,w=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=$t(c):(c=Nt(n)?_r:st.current,c=Ns(t,c));var j=n.getDerivedStateFromProps;(y=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==N||w!==c)&&hf(t,o,r,c),Yn=!1,w=t.memoizedState,o.state=w,li(t,r,o,s);var b=t.memoizedState;u!==N||w!==b||St.current||Yn?(typeof j=="function"&&(hu(t,n,j,r),b=t.memoizedState),(d=Yn||mf(t,n,d,r,w,b,c)||!1)?(y||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return yu(e,t,n,r,l,s)}function yu(e,t,n,r,s,l){Qm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&lf(t,n,!1),Rn(e,t,l);r=t.stateNode,jv.current=t;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=js(t,e.child,null,l),t.child=js(t,null,u,l)):ut(e,t,u,l),t.memoizedState=r.state,s&&lf(t,n,!0),t.child}function Ym(e){var t=e.stateNode;t.pendingContext?sf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sf(e,t.context,!1),dc(e,t.containerInfo)}function Nf(e,t,n,r,s){return ks(),lc(s),t.flags|=256,ut(e,t,n,r),t.child}var wu={dehydrated:null,treeContext:null,retryLane:0};function Su(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jm(e,t,n){var r=t.pendingProps,s=_e.current,l=!1,o=(t.flags&128)!==0,u;if((u=o)||(u=e!==null&&e.memoizedState===null?!1:(s&2)!==0),u?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),we(_e,s&1),e===null)return pu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Ti(o,r,0,null),e=Cr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Su(n),t.memoizedState=wu,e):yc(t,o));if(s=e.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return bv(e,t,o,r,u,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ir(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?l=ir(u,l):(l=Cr(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?Su(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=wu,r}return l=e.child,e=l.sibling,r=ir(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function yc(e,t){return t=Ti({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function No(e,t,n,r){return r!==null&&lc(r),js(t,e.child,null,n),e=yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bv(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=Ta(Error(I(422))),No(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=Ti({mode:"visible",children:r.children},s,0,null),l=Cr(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&js(t,e.child,null,o),t.child.memoizedState=Su(o),t.memoizedState=wu,l);if(!(t.mode&1))return No(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,l=Error(I(419)),r=Ta(l,r,void 0),No(e,t,o,r)}if(u=(o&e.childLanes)!==0,wt||u){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Tn(e,s),qt(r,e,s,-1))}return bc(),r=Ta(Error(I(421))),No(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Fv.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,Pt=rr(s.nextSibling),Tt=t,Ee=!0,Jt=null,e!==null&&(Mt[Ft++]=jn,Mt[Ft++]=bn,Mt[Ft++]=Pr,jn=e.id,bn=e.overflow,Pr=t),t=yc(t,r.children),t.flags|=4096,t)}function kf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mu(e.return,t,n)}function Ra(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Xm(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(ut(e,t,r.children,n),r=_e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kf(e,n,t);else if(e.tag===19)kf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(_e,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&oi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ra(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&oi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ra(t,!0,n,null,l);break;case"together":Ra(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Rr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=ir(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ir(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ev(e,t,n){switch(t.tag){case 3:Ym(t),ks();break;case 5:km(t);break;case 1:Nt(t.type)&&ei(t);break;case 4:dc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;we(ri,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?Jm(e,t,n):(we(_e,_e.current&1),e=Rn(e,t,n),e!==null?e.sibling:null);we(_e,_e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(_e,_e.current),r)break;return null;case 22:case 23:return t.lanes=0,Km(e,t,n)}return Rn(e,t,n)}var qm,Nu,Zm,eh;qm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nu=function(){};Zm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,jr(fn.current);var l=null;switch(n){case"input":s=Ha(e,s),r=Ha(e,r),l=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),l=[];break;case"textarea":s=Ka(e,s),r=Ka(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=qo)}Ya(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yl.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ne("scroll",e),l||u===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};eh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xs(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Cv(e,t,n){var r=t.pendingProps;switch(sc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return Nt(t.type)&&Zo(),nt(t),null;case 3:return r=t.stateNode,bs(),ke(St),ke(st),pc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(wo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jt!==null&&(Tu(Jt),Jt=null))),Nu(e,t),nt(t),null;case 5:fc(t);var s=jr(Rl.current);if(n=t.type,e!==null&&t.stateNode!=null)Zm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(I(166));return nt(t),null}if(e=jr(fn.current),wo(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[cn]=t,r[Pl]=l,e=(t.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<ll.length;s++)Ne(ll[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Rd(r,l),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ne("invalid",r);break;case"textarea":Dd(r,l),Ne("invalid",r)}Ya(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="children"?typeof u=="string"?r.textContent!==u&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,u,e),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,u,e),s=["children",""+u]):yl.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":co(r),Id(r,l,!0);break;case"textarea":co(r),Ad(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=qo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_p(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[cn]=t,e[Pl]=r,qm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ja(n,r),n){case"dialog":Ne("cancel",e),Ne("close",e),s=r;break;case"iframe":case"object":case"embed":Ne("load",e),s=r;break;case"video":case"audio":for(s=0;s<ll.length;s++)Ne(ll[s],e);s=r;break;case"source":Ne("error",e),s=r;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),s=r;break;case"details":Ne("toggle",e),s=r;break;case"input":Rd(e,r),s=Ha(e,r),Ne("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),Ne("invalid",e);break;case"textarea":Dd(e,r),s=Ka(e,r),Ne("invalid",e);break;default:s=r}Ya(n,s),u=s;for(l in u)if(u.hasOwnProperty(l)){var c=u[l];l==="style"?Rp(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Pp(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wl(e,c):typeof c=="number"&&wl(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(yl.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ne("scroll",e):c!=null&&Wu(e,l,c,o))}switch(n){case"input":co(e),Id(e,r,!1);break;case"textarea":co(e),Ad(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cr(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?fs(e,!!r.multiple,l,!1):r.defaultValue!=null&&fs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=qo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)eh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(I(166));if(n=jr(Rl.current),jr(fn.current),wo(t)){if(r=t.stateNode,n=t.memoizedProps,r[cn]=t,(l=r.nodeValue!==n)&&(e=Tt,e!==null))switch(e.tag){case 3:yo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yo(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=t,t.stateNode=r}return nt(t),null;case 13:if(ke(_e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&Pt!==null&&t.mode&1&&!(t.flags&128))xm(),ks(),t.flags|=98560,l=!1;else if(l=wo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(I(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(I(317));l[cn]=t}else ks(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),l=!1}else Jt!==null&&(Tu(Jt),Jt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?Be===0&&(Be=3):bc())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return bs(),Nu(e,t),e===null&&Cl(t.stateNode.containerInfo),nt(t),null;case 10:return ac(t.type._context),nt(t),null;case 17:return Nt(t.type)&&Zo(),nt(t),null;case 19:if(ke(_e),l=t.memoizedState,l===null)return nt(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Xs(l,!1);else{if(Be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=oi(e),o!==null){for(t.flags|=128,Xs(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(_e,_e.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ae()>Cs&&(t.flags|=128,r=!0,Xs(l,!1),t.lanes=4194304)}else{if(!r)if(e=oi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ee)return nt(t),null}else 2*Ae()-l.renderingStartTime>Cs&&n!==1073741824&&(t.flags|=128,r=!0,Xs(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ae(),t.sibling=null,n=_e.current,we(_e,r?n&1|2:n&1),t):(nt(t),null);case 22:case 23:return jc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_t&1073741824&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function _v(e,t){switch(sc(t),t.tag){case 1:return Nt(t.type)&&Zo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bs(),ke(St),ke(st),pc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fc(t),null;case 13:if(ke(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));ks()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(_e),null;case 4:return bs(),null;case 10:return ac(t.type._context),null;case 22:case 23:return jc(),null;case 24:return null;default:return null}}var ko=!1,rt=!1,Pv=typeof WeakSet=="function"?WeakSet:Set,H=null;function cs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(e,t,r)}else n.current=null}function ku(e,t,n){try{n()}catch(r){Re(e,t,r)}}var jf=!1;function Tv(e,t){if(ou=Yo,e=lm(),nc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,y=0,N=e,w=null;t:for(;;){for(var j;N!==n||s!==0&&N.nodeType!==3||(u=o+s),N!==l||r!==0&&N.nodeType!==3||(c=o+r),N.nodeType===3&&(o+=N.nodeValue.length),(j=N.firstChild)!==null;)w=N,N=j;for(;;){if(N===e)break t;if(w===n&&++d===s&&(u=o),w===l&&++y===r&&(c=o),(j=N.nextSibling)!==null)break;N=w,w=N.parentNode}N=j}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(iu={focusedElem:e,selectionRange:n},Yo=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,Y=b.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?k:Qt(t.type,k),Y);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(C){Re(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return b=jf,jf=!1,b}function hl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&ku(t,n,l)}s=s.next}while(s!==r)}}function _i(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ju(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function th(e){var t=e.alternate;t!==null&&(e.alternate=null,th(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cn],delete t[Pl],delete t[cu],delete t[fv],delete t[pv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nh(e){return e.tag===5||e.tag===3||e.tag===4}function bf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qo));else if(r!==4&&(e=e.child,e!==null))for(bu(e,t,n),e=e.sibling;e!==null;)bu(e,t,n),e=e.sibling}function Eu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Eu(e,t,n),e=e.sibling;e!==null;)Eu(e,t,n),e=e.sibling}var Je=null,Yt=!1;function Kn(e,t,n){for(n=n.child;n!==null;)rh(e,t,n),n=n.sibling}function rh(e,t,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(wi,n)}catch{}switch(n.tag){case 5:rt||cs(n,t);case 6:var r=Je,s=Yt;Je=null,Kn(e,t,n),Je=r,Yt=s,Je!==null&&(Yt?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Yt?(e=Je,n=n.stateNode,e.nodeType===8?ja(e.parentNode,n):e.nodeType===1&&ja(e,n),jl(e)):ja(Je,n.stateNode));break;case 4:r=Je,s=Yt,Je=n.stateNode.containerInfo,Yt=!0,Kn(e,t,n),Je=r,Yt=s;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&ku(n,t,o),s=s.next}while(s!==r)}Kn(e,t,n);break;case 1:if(!rt&&(cs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Re(n,t,u)}Kn(e,t,n);break;case 21:Kn(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,Kn(e,t,n),rt=r):Kn(e,t,n);break;default:Kn(e,t,n)}}function Ef(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pv),t.forEach(function(r){var s=Uv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,u=o;e:for(;u!==null;){switch(u.tag){case 5:Je=u.stateNode,Yt=!1;break e;case 3:Je=u.stateNode.containerInfo,Yt=!0;break e;case 4:Je=u.stateNode.containerInfo,Yt=!0;break e}u=u.return}if(Je===null)throw Error(I(160));rh(l,o,s),Je=null,Yt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Re(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sh(t,e),t=t.sibling}function sh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kt(t,e),on(e),r&4){try{hl(3,e,e.return),_i(3,e)}catch(k){Re(e,e.return,k)}try{hl(5,e,e.return)}catch(k){Re(e,e.return,k)}}break;case 1:Kt(t,e),on(e),r&512&&n!==null&&cs(n,n.return);break;case 5:if(Kt(t,e),on(e),r&512&&n!==null&&cs(n,n.return),e.flags&32){var s=e.stateNode;try{wl(s,"")}catch(k){Re(e,e.return,k)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&l.type==="radio"&&l.name!=null&&Ep(s,l),Ja(u,o);var d=Ja(u,l);for(o=0;o<c.length;o+=2){var y=c[o],N=c[o+1];y==="style"?Rp(s,N):y==="dangerouslySetInnerHTML"?Pp(s,N):y==="children"?wl(s,N):Wu(s,y,N,d)}switch(u){case"input":Va(s,l);break;case"textarea":Cp(s,l);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var j=l.value;j!=null?fs(s,!!l.multiple,j,!1):w!==!!l.multiple&&(l.defaultValue!=null?fs(s,!!l.multiple,l.defaultValue,!0):fs(s,!!l.multiple,l.multiple?[]:"",!1))}s[Pl]=l}catch(k){Re(e,e.return,k)}}break;case 6:if(Kt(t,e),on(e),r&4){if(e.stateNode===null)throw Error(I(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(k){Re(e,e.return,k)}}break;case 3:if(Kt(t,e),on(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jl(t.containerInfo)}catch(k){Re(e,e.return,k)}break;case 4:Kt(t,e),on(e);break;case 13:Kt(t,e),on(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Nc=Ae())),r&4&&Ef(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(d=rt)||y,Kt(t,e),rt=d):Kt(t,e),on(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!y&&e.mode&1)for(H=e,y=e.child;y!==null;){for(N=H=y;H!==null;){switch(w=H,j=w.child,w.tag){case 0:case 11:case 14:case 15:hl(4,w,w.return);break;case 1:cs(w,w.return);var b=w.stateNode;if(typeof b.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(k){Re(r,n,k)}}break;case 5:cs(w,w.return);break;case 22:if(w.memoizedState!==null){_f(N);continue}}j!==null?(j.return=w,H=j):_f(N)}y=y.sibling}e:for(y=null,N=e;;){if(N.tag===5){if(y===null){y=N;try{s=N.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(u=N.stateNode,c=N.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Tp("display",o))}catch(k){Re(e,e.return,k)}}}else if(N.tag===6){if(y===null)try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(k){Re(e,e.return,k)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===e)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===e)break e;for(;N.sibling===null;){if(N.return===null||N.return===e)break e;y===N&&(y=null),N=N.return}y===N&&(y=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:Kt(t,e),on(e),r&4&&Ef(e);break;case 21:break;default:Kt(t,e),on(e)}}function on(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(nh(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wl(s,""),r.flags&=-33);var l=bf(e);Eu(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=bf(e);bu(e,u,o);break;default:throw Error(I(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rv(e,t,n){H=e,lh(e)}function lh(e,t,n){for(var r=(e.mode&1)!==0;H!==null;){var s=H,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ko;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||rt;u=ko;var d=rt;if(ko=o,(rt=c)&&!d)for(H=s;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?Pf(s):c!==null?(c.return=o,H=c):Pf(s);for(;l!==null;)H=l,lh(l),l=l.sibling;H=s,ko=u,rt=d}Cf(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,H=l):Cf(e)}}function Cf(e){for(;H!==null;){var t=H;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||_i(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Qt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&df(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}df(t,o,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var N=y.dehydrated;N!==null&&jl(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}rt||t.flags&512&&ju(t)}catch(w){Re(t,t.return,w)}}if(t===e){H=null;break}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}}function _f(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var n=t.sibling;if(n!==null){n.return=t.return,H=n;break}H=t.return}}function Pf(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_i(4,t)}catch(c){Re(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Re(t,s,c)}}var l=t.return;try{ju(t)}catch(c){Re(t,l,c)}break;case 5:var o=t.return;try{ju(t)}catch(c){Re(t,o,c)}}}catch(c){Re(t,t.return,c)}if(t===e){H=null;break}var u=t.sibling;if(u!==null){u.return=t.return,H=u;break}H=t.return}}var Iv=Math.ceil,ui=In.ReactCurrentDispatcher,wc=In.ReactCurrentOwner,zt=In.ReactCurrentBatchConfig,de=0,Ge=null,Me=null,Xe=0,_t=0,ds=mr(0),Be=0,Ll=null,Rr=0,Pi=0,Sc=0,gl=null,yt=null,Nc=0,Cs=1/0,Nn=null,ci=!1,Cu=null,lr=null,jo=!1,Zn=null,di=0,vl=0,_u=null,Mo=-1,Fo=0;function ct(){return de&6?Ae():Mo!==-1?Mo:Mo=Ae()}function or(e){return e.mode&1?de&2&&Xe!==0?Xe&-Xe:hv.transition!==null?(Fo===0&&(Fo=Wp()),Fo):(e=pe,e!==0||(e=window.event,e=e===void 0?16:Jp(e.type)),e):1}function qt(e,t,n,r){if(50<vl)throw vl=0,_u=null,Error(I(185));Ml(e,n,r),(!(de&2)||e!==Ge)&&(e===Ge&&(!(de&2)&&(Pi|=n),Be===4&&Xn(e,Xe)),kt(e,r),n===1&&de===0&&!(t.mode&1)&&(Cs=Ae()+500,bi&&hr()))}function kt(e,t){var n=e.callbackNode;h0(e,t);var r=Qo(e,e===Ge?Xe:0);if(r===0)n!==null&&Md(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Md(n),t===1)e.tag===0?mv(Tf.bind(null,e)):hm(Tf.bind(null,e)),cv(function(){!(de&6)&&hr()}),n=null;else{switch(Hp(r)){case 1:n=Qu;break;case 4:n=$p;break;case 16:n=Ko;break;case 536870912:n=Bp;break;default:n=Ko}n=ph(n,oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oh(e,t){if(Mo=-1,Fo=0,de&6)throw Error(I(327));var n=e.callbackNode;if(vs()&&e.callbackNode!==n)return null;var r=Qo(e,e===Ge?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=fi(e,r);else{t=r;var s=de;de|=2;var l=ah();(Ge!==e||Xe!==t)&&(Nn=null,Cs=Ae()+500,Er(e,t));do try{Lv();break}catch(u){ih(e,u)}while(!0);ic(),ui.current=l,de=s,Me!==null?t=0:(Ge=null,Xe=0,t=Be)}if(t!==0){if(t===2&&(s=tu(e),s!==0&&(r=s,t=Pu(e,s))),t===1)throw n=Ll,Er(e,0),Xn(e,r),kt(e,Ae()),n;if(t===6)Xn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Dv(s)&&(t=fi(e,r),t===2&&(l=tu(e),l!==0&&(r=l,t=Pu(e,l))),t===1))throw n=Ll,Er(e,0),Xn(e,r),kt(e,Ae()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(I(345));case 2:wr(e,yt,Nn);break;case 3:if(Xn(e,r),(r&130023424)===r&&(t=Nc+500-Ae(),10<t)){if(Qo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ct(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=uu(wr.bind(null,e,yt,Nn),t);break}wr(e,yt,Nn);break;case 4:if(Xn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Xt(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Iv(r/1960))-r,10<r){e.timeoutHandle=uu(wr.bind(null,e,yt,Nn),r);break}wr(e,yt,Nn);break;case 5:wr(e,yt,Nn);break;default:throw Error(I(329))}}}return kt(e,Ae()),e.callbackNode===n?oh.bind(null,e):null}function Pu(e,t){var n=gl;return e.current.memoizedState.isDehydrated&&(Er(e,t).flags|=256),e=fi(e,t),e!==2&&(t=yt,yt=n,t!==null&&Tu(t)),e}function Tu(e){yt===null?yt=e:yt.push.apply(yt,e)}function Dv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Zt(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xn(e,t){for(t&=~Sc,t&=~Pi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xt(t),r=1<<n;e[n]=-1,t&=~r}}function Tf(e){if(de&6)throw Error(I(327));vs();var t=Qo(e,0);if(!(t&1))return kt(e,Ae()),null;var n=fi(e,t);if(e.tag!==0&&n===2){var r=tu(e);r!==0&&(t=r,n=Pu(e,r))}if(n===1)throw n=Ll,Er(e,0),Xn(e,t),kt(e,Ae()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wr(e,yt,Nn),kt(e,Ae()),null}function kc(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(Cs=Ae()+500,bi&&hr())}}function Ir(e){Zn!==null&&Zn.tag===0&&!(de&6)&&vs();var t=de;de|=1;var n=zt.transition,r=pe;try{if(zt.transition=null,pe=1,e)return e()}finally{pe=r,zt.transition=n,de=t,!(de&6)&&hr()}}function jc(){_t=ds.current,ke(ds)}function Er(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uv(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(sc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zo();break;case 3:bs(),ke(St),ke(st),pc();break;case 5:fc(r);break;case 4:bs();break;case 13:ke(_e);break;case 19:ke(_e);break;case 10:ac(r.type._context);break;case 22:case 23:jc()}n=n.return}if(Ge=e,Me=e=ir(e.current,null),Xe=_t=t,Be=0,Ll=null,Sc=Pi=Rr=0,yt=gl=null,kr!==null){for(t=0;t<kr.length;t++)if(n=kr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}kr=null}return e}function ih(e,t){do{var n=Me;try{if(ic(),Ao.current=ai,ii){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ii=!1}if(Tr=0,Ve=$e=Pe=null,ml=!1,Il=0,wc.current=null,n===null||n.return===null){Be=1,Ll=t,Me=null;break}e:{var l=e,o=n.return,u=n,c=t;if(t=Xe,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,y=u,N=y.tag;if(!(y.mode&1)&&(N===0||N===11||N===15)){var w=y.alternate;w?(y.updateQueue=w.updateQueue,y.memoizedState=w.memoizedState,y.lanes=w.lanes):(y.updateQueue=null,y.memoizedState=null)}var j=vf(o);if(j!==null){j.flags&=-257,xf(j,o,u,l,t),j.mode&1&&gf(l,d,t),t=j,c=d;var b=t.updateQueue;if(b===null){var k=new Set;k.add(c),t.updateQueue=k}else b.add(c);break e}else{if(!(t&1)){gf(l,d,t),bc();break e}c=Error(I(426))}}else if(Ee&&u.mode&1){var Y=vf(o);if(Y!==null){!(Y.flags&65536)&&(Y.flags|=256),xf(Y,o,u,l,t),lc(Es(c,u));break e}}l=c=Es(c,u),Be!==4&&(Be=2),gl===null?gl=[l]:gl.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var h=Hm(l,c,t);cf(l,h);break e;case 1:u=c;var p=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(lr===null||!lr.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var C=Vm(l,u,t);cf(l,C);break e}}l=l.return}while(l!==null)}ch(n)}catch(L){t=L,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function ah(){var e=ui.current;return ui.current=ai,e===null?ai:e}function bc(){(Be===0||Be===3||Be===2)&&(Be=4),Ge===null||!(Rr&268435455)&&!(Pi&268435455)||Xn(Ge,Xe)}function fi(e,t){var n=de;de|=2;var r=ah();(Ge!==e||Xe!==t)&&(Nn=null,Er(e,t));do try{Av();break}catch(s){ih(e,s)}while(!0);if(ic(),de=n,ui.current=r,Me!==null)throw Error(I(261));return Ge=null,Xe=0,Be}function Av(){for(;Me!==null;)uh(Me)}function Lv(){for(;Me!==null&&!o0();)uh(Me)}function uh(e){var t=fh(e.alternate,e,_t);e.memoizedProps=e.pendingProps,t===null?ch(e):Me=t,wc.current=null}function ch(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_v(n,t),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,Me=null;return}}else if(n=Cv(n,t,_t),n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Be===0&&(Be=5)}function wr(e,t,n){var r=pe,s=zt.transition;try{zt.transition=null,pe=1,Ov(e,t,n,r)}finally{zt.transition=s,pe=r}return null}function Ov(e,t,n,r){do vs();while(Zn!==null);if(de&6)throw Error(I(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(g0(e,l),e===Ge&&(Me=Ge=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jo||(jo=!0,ph(Ko,function(){return vs(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=zt.transition,zt.transition=null;var o=pe;pe=1;var u=de;de|=4,wc.current=null,Tv(e,n),sh(n,e),nv(iu),Yo=!!ou,iu=ou=null,e.current=n,Rv(n),i0(),de=u,pe=o,zt.transition=l}else e.current=n;if(jo&&(jo=!1,Zn=e,di=s),l=e.pendingLanes,l===0&&(lr=null),c0(n.stateNode),kt(e,Ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ci)throw ci=!1,e=Cu,Cu=null,e;return di&1&&e.tag!==0&&vs(),l=e.pendingLanes,l&1?e===_u?vl++:(vl=0,_u=e):vl=0,hr(),null}function vs(){if(Zn!==null){var e=Hp(di),t=zt.transition,n=pe;try{if(zt.transition=null,pe=16>e?16:e,Zn===null)var r=!1;else{if(e=Zn,Zn=null,di=0,de&6)throw Error(I(331));var s=de;for(de|=4,H=e.current;H!==null;){var l=H,o=l.child;if(H.flags&16){var u=l.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(H=d;H!==null;){var y=H;switch(y.tag){case 0:case 11:case 15:hl(8,y,l)}var N=y.child;if(N!==null)N.return=y,H=N;else for(;H!==null;){y=H;var w=y.sibling,j=y.return;if(th(y),y===d){H=null;break}if(w!==null){w.return=j,H=w;break}H=j}}}var b=l.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var Y=k.sibling;k.sibling=null,k=Y}while(k!==null)}}H=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,H=o;else e:for(;H!==null;){if(l=H,l.flags&2048)switch(l.tag){case 0:case 11:case 15:hl(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,H=h;break e}H=l.return}}var p=e.current;for(H=p;H!==null;){o=H;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,H=v;else e:for(o=p;H!==null;){if(u=H,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:_i(9,u)}}catch(L){Re(u,u.return,L)}if(u===o){H=null;break e}var C=u.sibling;if(C!==null){C.return=u.return,H=C;break e}H=u.return}}if(de=s,hr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(wi,e)}catch{}r=!0}return r}finally{pe=n,zt.transition=t}}return!1}function Rf(e,t,n){t=Es(n,t),t=Hm(e,t,1),e=sr(e,t,1),t=ct(),e!==null&&(Ml(e,1,t),kt(e,t))}function Re(e,t,n){if(e.tag===3)Rf(e,e,n);else for(;t!==null;){if(t.tag===3){Rf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(lr===null||!lr.has(r))){e=Es(n,e),e=Vm(t,e,1),t=sr(t,e,1),e=ct(),t!==null&&(Ml(t,1,e),kt(t,e));break}}t=t.return}}function Mv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ct(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(Xe&n)===n&&(Be===4||Be===3&&(Xe&130023424)===Xe&&500>Ae()-Nc?Er(e,0):Sc|=n),kt(e,t)}function dh(e,t){t===0&&(e.mode&1?(t=mo,mo<<=1,!(mo&130023424)&&(mo=4194304)):t=1);var n=ct();e=Tn(e,t),e!==null&&(Ml(e,t,n),kt(e,n))}function Fv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dh(e,n)}function Uv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(t),dh(e,n)}var fh;fh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)wt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return wt=!1,Ev(e,t,n);wt=!!(e.flags&131072)}else wt=!1,Ee&&t.flags&1048576&&gm(t,ni,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Oo(e,t),e=t.pendingProps;var s=Ns(t,st.current);gs(t,n),s=hc(null,t,r,e,s,n);var l=gc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(r)?(l=!0,ei(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cc(t),s.updater=Ci,t.stateNode=s,s._reactInternals=t,gu(t,r,e,n),t=yu(null,t,r,!0,l,n)):(t.tag=0,Ee&&l&&rc(t),ut(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Oo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=$v(r),e=Qt(r,e),s){case 0:t=xu(null,t,r,e,n);break e;case 1:t=Sf(null,t,r,e,n);break e;case 11:t=yf(null,t,r,e,n);break e;case 14:t=wf(null,t,r,Qt(r.type,e),n);break e}throw Error(I(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Qt(r,s),xu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Qt(r,s),Sf(e,t,r,s,n);case 3:e:{if(Ym(t),e===null)throw Error(I(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Nm(e,t),li(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Es(Error(I(423)),t),t=Nf(e,t,r,n,s);break e}else if(r!==s){s=Es(Error(I(424)),t),t=Nf(e,t,r,n,s);break e}else for(Pt=rr(t.stateNode.containerInfo.firstChild),Tt=t,Ee=!0,Jt=null,n=wm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ks(),r===s){t=Rn(e,t,n);break e}ut(e,t,r,n)}t=t.child}return t;case 5:return km(t),e===null&&pu(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,au(r,s)?o=null:l!==null&&au(r,l)&&(t.flags|=32),Qm(e,t),ut(e,t,o,n),t.child;case 6:return e===null&&pu(t),null;case 13:return Jm(e,t,n);case 4:return dc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=js(t,null,r,n):ut(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Qt(r,s),yf(e,t,r,s,n);case 7:return ut(e,t,t.pendingProps,n),t.child;case 8:return ut(e,t,t.pendingProps.children,n),t.child;case 12:return ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,we(ri,r._currentValue),r._currentValue=o,l!==null)if(Zt(l.value,o)){if(l.children===s.children&&!St.current){t=Rn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var u=l.dependencies;if(u!==null){o=l.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=En(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?c.next=c:(c.next=y.next,y.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),mu(l.return,n,t),u.lanes|=n;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(I(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),mu(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ut(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,gs(t,n),s=$t(s),r=r(s),t.flags|=1,ut(e,t,r,n),t.child;case 14:return r=t.type,s=Qt(r,t.pendingProps),s=Qt(r.type,s),wf(e,t,r,s,n);case 15:return Gm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Qt(r,s),Oo(e,t),t.tag=1,Nt(r)?(e=!0,ei(t)):e=!1,gs(t,n),Wm(t,r,s),gu(t,r,s,n),yu(null,t,r,!0,e,n);case 19:return Xm(e,t,n);case 22:return Km(e,t,n)}throw Error(I(156,t.tag))};function ph(e,t){return zp(e,t)}function zv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,n,r){return new zv(e,t,n,r)}function Ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $v(e){if(typeof e=="function")return Ec(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vu)return 11;if(e===Gu)return 14}return 2}function ir(e,t){var n=e.alternate;return n===null?(n=Ut(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uo(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")Ec(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ts:return Cr(n.children,s,l,t);case Hu:o=8,s|=8;break;case za:return e=Ut(12,n,t,s|2),e.elementType=za,e.lanes=l,e;case $a:return e=Ut(13,n,t,s),e.elementType=$a,e.lanes=l,e;case Ba:return e=Ut(19,n,t,s),e.elementType=Ba,e.lanes=l,e;case kp:return Ti(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sp:o=10;break e;case Np:o=9;break e;case Vu:o=11;break e;case Gu:o=14;break e;case Qn:o=16,r=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=Ut(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Cr(e,t,n,r){return e=Ut(7,e,r,t),e.lanes=n,e}function Ti(e,t,n,r){return e=Ut(22,e,r,t),e.elementType=kp,e.lanes=n,e.stateNode={isHidden:!1},e}function Ia(e,t,n){return e=Ut(6,e,null,t),e.lanes=n,e}function Da(e,t,n){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cc(e,t,n,r,s,l,o,u,c){return e=new Bv(e,t,n,u,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ut(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(l),e}function Wv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function mh(e){if(!e)return dr;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(Nt(n))return mm(e,n,t)}return t}function hh(e,t,n,r,s,l,o,u,c){return e=Cc(n,r,!0,e,s,l,o,u,c),e.context=mh(null),n=e.current,r=ct(),s=or(n),l=En(r,s),l.callback=t??null,sr(n,l,s),e.current.lanes=s,Ml(e,s,r),kt(e,r),e}function Ri(e,t,n,r){var s=t.current,l=ct(),o=or(s);return n=mh(n),t.context===null?t.context=n:t.pendingContext=n,t=En(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sr(s,t,o),e!==null&&(qt(e,s,o,l),Do(e,s,o)),o}function pi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function If(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _c(e,t){If(e,t),(e=e.alternate)&&If(e,t)}function Hv(){return null}var gh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Pc(e){this._internalRoot=e}Ii.prototype.render=Pc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));Ri(e,t,null,null)};Ii.prototype.unmount=Pc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){Ri(null,e,null,null)}),t[Pn]=null}};function Ii(e){this._internalRoot=e}Ii.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jn.length&&t!==0&&t<Jn[n].priority;n++);Jn.splice(n,0,e),n===0&&Yp(e)}};function Tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Di(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Df(){}function Vv(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=pi(o);l.call(d)}}var o=hh(t,r,e,0,null,!1,!1,"",Df);return e._reactRootContainer=o,e[Pn]=o.current,Cl(e.nodeType===8?e.parentNode:e),Ir(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=pi(c);u.call(d)}}var c=Cc(e,0,!1,null,null,!1,!1,"",Df);return e._reactRootContainer=c,e[Pn]=c.current,Cl(e.nodeType===8?e.parentNode:e),Ir(function(){Ri(t,c,n,r)}),c}function Ai(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var u=s;s=function(){var c=pi(o);u.call(c)}}Ri(t,o,e,s)}else o=Vv(n,t,e,s,r);return pi(o)}Vp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=sl(t.pendingLanes);n!==0&&(Yu(t,n|1),kt(t,Ae()),!(de&6)&&(Cs=Ae()+500,hr()))}break;case 13:Ir(function(){var r=Tn(e,1);if(r!==null){var s=ct();qt(r,e,1,s)}}),_c(e,1)}};Ju=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=ct();qt(t,e,134217728,n)}_c(e,134217728)}};Gp=function(e){if(e.tag===13){var t=or(e),n=Tn(e,t);if(n!==null){var r=ct();qt(n,e,t,r)}_c(e,t)}};Kp=function(){return pe};Qp=function(e,t){var n=pe;try{return pe=e,t()}finally{pe=n}};qa=function(e,t,n){switch(t){case"input":if(Va(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ji(r);if(!s)throw Error(I(90));bp(r),Va(r,s)}}}break;case"textarea":Cp(e,n);break;case"select":t=n.value,t!=null&&fs(e,!!n.multiple,t,!1)}};Ap=kc;Lp=Ir;var Gv={usingClientEntryPoint:!1,Events:[Ul,ls,ji,Ip,Dp,kc]},qs={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kv={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fp(e),e===null?null:e.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||Hv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{wi=bo.inject(Kv),dn=bo}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gv;It.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tc(t))throw Error(I(200));return Wv(e,t,null,n)};It.createRoot=function(e,t){if(!Tc(e))throw Error(I(299));var n=!1,r="",s=gh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Cc(e,1,!1,null,null,n,!1,r,s),e[Pn]=t.current,Cl(e.nodeType===8?e.parentNode:e),new Pc(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=Fp(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return Ir(e)};It.hydrate=function(e,t,n){if(!Di(t))throw Error(I(200));return Ai(null,e,t,!0,n)};It.hydrateRoot=function(e,t,n){if(!Tc(e))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=gh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=hh(t,null,e,1,n??null,s,!1,l,o),e[Pn]=t.current,Cl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ii(t)};It.render=function(e,t,n){if(!Di(t))throw Error(I(200));return Ai(null,e,t,!1,n)};It.unmountComponentAtNode=function(e){if(!Di(e))throw Error(I(40));return e._reactRootContainer?(Ir(function(){Ai(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};It.unstable_batchedUpdates=kc;It.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Di(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return Ai(e,t,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function vh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vh)}catch(e){console.error(e)}}vh(),vp.exports=It;var Qv=vp.exports,Af=Qv;Fa.createRoot=Af.createRoot,Fa.hydrateRoot=Af.hydrateRoot;const Yv={1:[{rows:1,cols:1}],2:[{rows:1,cols:2},{rows:2,cols:1}],3:[{rows:2,cols:2},{rows:1,cols:3},{rows:3,cols:1}],4:[{rows:2,cols:2},{rows:1,cols:4},{rows:4,cols:1}],5:[{rows:2,cols:3},{rows:3,cols:2},{rows:1,cols:5},{rows:5,cols:1}],6:[{rows:2,cols:3},{rows:3,cols:2},{rows:1,cols:6},{rows:6,cols:1}],7:[{rows:2,cols:4},{rows:4,cols:2}],8:[{rows:2,cols:4},{rows:4,cols:2},{rows:3,cols:3}],9:[{rows:3,cols:3},{rows:2,cols:5},{rows:5,cols:2}],10:[{rows:2,cols:5},{rows:5,cols:2}]},xs=(e,t)=>{if(!Number.isFinite(e))return t;const n=Math.floor(e);return n>0?n:t};function Jv(e){const t=xs(e,1);return(Yv[t]||[]).map(r=>({...r}))}function Ru(e,t){if(!e)return null;const n=xs(t,1),r=xs(e.rows,1),s=xs(e.cols,1),l=r*s;if(l<n)return null;let o=e.emptySeatIndex??null;return l>n?(o==null||o<0||o>=l)&&(o=l-1):o=null,{rows:r,cols:s,emptySeatIndex:o}}const Lf=(e,t)=>{const n=xs(e,1),r=(t||0)===90,s=Math.ceil(Math.sqrt(n)),l=r?s:Math.ceil(n/s),o=Math.ceil(n/l);return Ru({rows:l,cols:o},n)||{rows:1,cols:n}};function xh(e,t,n){const r=xs(e,1),s=Ru(n,r);if(s)return s;const l=Jv(r);if(!l.length)return Lf(r,t);const o=(t||0)===90,c=l.filter(d=>o?d.rows>=d.cols:d.cols>=d.rows)[0]||l[0];return Ru(c,r)||Lf(r,t)}const Xv="newui_app_state",Iu=1;function qv(e){const t=Math.max(0,e.capacity||0),n=Array.isArray(e.preferredSeatIndexes)?e.preferredSeatIndexes:[],r=[];for(const s of n){const l=typeof s=="number"?s:parseInt(String(s),10);!Number.isFinite(l)||!Number.isInteger(l)||l<0||l>=t||r.push(l)}return Array.from(new Set(r)).sort((s,l)=>s-l)}function Zv(e){const t=(e.seatIds??[]).slice(),n=Math.max(0,e.capacity||0);if(t.length<n)for(let l=t.length;l<n;l++)t[l]=String(e.id)+"_s"+l;else t.length>n&&(t.length=n);const r=qv(e),s=xh(n,e.rotation||0,e.seatLayout);return{...e,seatIds:t,preferredSeatIndexes:r,seatLayout:s}}function ex(e){return{...e,tables:e.tables.map(Zv)}}function tx(e){const n=((e||{layouts:[]}).layouts||[]).map(ex);return{version:Iu,layouts:n}}function nx(){try{const e=localStorage.getItem(Xv);if(!e)return{version:Iu,layouts:[]};const t=JSON.parse(e);return tx(t)}catch{return{version:Iu,layouts:[]}}}function rx(){return nx().layouts}const sx="newui_periods_state";function lx(){try{const e=localStorage.getItem(sx);if(!e)return{periods:[],currentId:null};const t=JSON.parse(e);return{periods:t.periods??[],currentId:t.currentId??null}}catch{return{periods:[],currentId:null}}}function Du(){return lx()}const ox="newui_tags_state_v1";function ix(){try{const e=localStorage.getItem(ox);return e?{version:1,tags:JSON.parse(e).tags??[]}:{version:1,tags:[]}}catch{return{version:1,tags:[]}}}function ax(){return ix().tags}const ux=f.createContext(null),cx="newui_students_state_v1";function dx(){try{const e=localStorage.getItem(cx);return e?{version:1,students:JSON.parse(e).students??[]}:{version:1,students:[]}}catch{return{version:1,students:[]}}}function fx(){return dx().students}function px(){return"pro"}function mx(e=px()){return{tier:e,canUseDriveSync:e!=="free",canUseLocalSave:!0,canExportPDF:e!=="free",canUseAdvancedReports:e==="school"||e==="pro",canUseImports:!0,canUseMobile:!0}}function hx({studentId:e,hasPhoto:t=!1,src:n=null,onClick:r,widthPx:s,heightPx:l,sizePx:o=44}){const d={width:s??o,height:l??o};return i.jsx("button",{type:"button","aria-label":t?"Update student photo":"Add student photo",className:"flex-shrink-0 rounded-xl border border-slate-200 bg-white/60 overflow-hidden active:scale-[0.98]",style:d,onClick:y=>{y.stopPropagation(),r==null||r(e)},children:t&&n?i.jsx("img",{src:n,alt:"Student photo",className:"w-full h-full object-cover",draggable:!1}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18","aria-hidden":"true",className:"text-slate-500",children:i.jsx("path",{fill:"currentColor",d:"M9.5 4.5h5l1.2 1.8H19a2.5 2.5 0 0 1 2.5 2.5v8.7A2.5 2.5 0 0 1 19 20H5a2.5 2.5 0 0 1-2.5-2.5V8.8A2.5 2.5 0 0 1 5 6.3h3.3l1.2-1.8ZM12 9a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm0 1.7a2.3 2.3 0 1 1 0 4.6 2.3 2.3 0 0 1 0-4.6Z"})})})})}function gx(e){const t=(e||"").trim();if(!t)return{first:"Unknown",last:"Unknown"};if(t.includes(",")){const[l,o]=t.split(",",2),u=(l||"").trim()||"Unknown";return{first:(o||"").trim().split(/\s+/).filter(Boolean)[0]||"Unknown",last:u}}const n=t.split(/\s+/).filter(Boolean);if(n.length===1)return{first:n[0],last:"Unknown"};const r=n[0]||"Unknown",s=n[n.length-1]||"Unknown";return{first:r,last:s}}function Of(e){return(e||"").trim().replace(/\s+/g,"_").replace(/[^A-Za-z0-9_-]/g,"").replace(/_+/g,"_")||"Unknown"}function Rc(e,t){const n=gx(t),r=Of(n.first);return`${Of(n.last)}_${r}__id_${e}.jpg`}var sp,lp;const Au=((lp=(sp=import.meta)==null?void 0:sp.env)==null?void 0:lp.VITE_GOOGLE_CLIENT_ID)??"403722152172-rm3rvd6kba8s10a8svv60jbj2s93kv1e.apps.googleusercontent.com",vx="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/userinfo.email",Mf="ClassSeats",yh="classseats_mobile_drive_session_v2",Ic="classseats_mobile_drive_folder_v1",Dc="classseats_student_docs_folder_v1",xx={classseats:"data_v1"},Ff="Student Docs",Uf="studentPhotos",wh="https://us-east1-classseats-sync.cloudfunctions.net/exchangecode",zo="classseats_mobile_drive_pkce_verifier",xl="classseats_mobile_drive_return_to",$o="classseats_mobile_drive_redirect_uri",Sh="https://app.classseats.app/ClassSeatsMobile";function yx(){if(typeof window>"u")return Sh;const e=window.location.origin;return e==="https://app.classseats.app"?"https://app.classseats.app/ClassSeatsMobile":e==="https://mifish3474.github.io"?"https://mifish3474.github.io/ClassSeats-Mobile-Testing/ClassSeatsMobile":`${e}/ClassSeatsMobile`}const wx=45*60*1e3,Sx="classseats_auth",Nx=1,fr="driveSession",mi="singleton";let Sr=null,un=null,ol=!1,Bo="none";function kx(e){const{sessionLoaded:t}=e,n=(e.lastWriteReason||"").trim();return t?"ok":n?n==="explicit-disconnect"?"user-logged-out":n==="fatal-oauth-error"?"oauth-failure":n==="login-success"?"device-storage-wipe":"unknown":"no-session-yet"}function Ac(){return new Promise((e,t)=>{const n=indexedDB.open(Sx,Nx);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(fr)||r.createObjectStore(fr,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error||new Error("IndexedDB open failed"))})}async function jx(){const e=await Ac();return new Promise((t,n)=>{const l=e.transaction(fr,"readonly").objectStore(fr).get(mi);l.onsuccess=()=>{const o=l.result;if(o){un={lastWriteAt:o.lastWriteAt,lastWriteReason:o.lastWriteReason};const{id:u,lastWriteAt:c,lastWriteReason:d,...y}=o;t(y)}else t(null)},l.onerror=()=>n(l.error||new Error("IDB get failed"))})}async function Nh(e,t){const n=await Ac();return new Promise((r,s)=>{const l=n.transaction(fr,"readwrite"),o=l.objectStore(fr);if(!e)console.info("[Drive][IDB] CLEAR session",{reason:t}),o.delete(mi),un={lastWriteAt:Date.now(),lastWriteReason:t};else{const u={id:mi,...e,lastWriteAt:Date.now(),lastWriteReason:t};console.info("[Drive][IDB] WRITE session",{reason:t,hasRefresh:!!e.refreshToken,expiresAt:e.expiresAt}),o.put(u),un={lastWriteAt:u.lastWriteAt,lastWriteReason:u.lastWriteReason}}l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB put/delete failed"))})}async function bx(){try{const e=await Ac();return await new Promise((t,n)=>{const l=e.transaction(fr,"readonly").objectStore(fr).get(mi);l.onsuccess=()=>{const o=l.result;o?(un={lastWriteAt:o.lastWriteAt,lastWriteReason:o.lastWriteReason},t(o)):t(null)},l.onerror=()=>n(l.error||new Error("IDB get failed"))})}catch(e){return console.warn("[Drive][IDB] getDriveSessionRecord failed",e),null}}async function Ex(){const e=await bx(),t=!!e,n=!!(e!=null&&e.refreshToken),r=(e==null?void 0:e.expiresAt)??null,s=(e==null?void 0:e.lastWriteAt)??(un==null?void 0:un.lastWriteAt)??null,l=(e==null?void 0:e.lastWriteReason)??(un==null?void 0:un.lastWriteReason)??null,o=e?"idb":"none",u=e==null?void 0:e.profile,c=kx({sessionLoaded:t,lastWriteReason:l}),d={sessionLoaded:t,hasRefresh:n,expiresAt:r,source:o,lastWriteAt:s,lastWriteReason:l,state:c,profile:u};return console.info("startup:",d),console.info("[Drive] startupSessionState",{state:c,lastWriteReason:l}),d}function Cx(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(yh);return e?JSON.parse(e):null}catch{return null}}function _x(){typeof window>"u"||window.localStorage.removeItem(yh)}async function Li(){if(ol)return Sr;try{const t=await jx();if(t)return Sr=t,Bo="idb",ol=!0,Sr}catch{}const e=Cx();if(e){Sr=e,Bo="legacy",ol=!0;try{await Nh(e,"startup-migration")}catch{}return Sr}return Sr=null,Bo="none",ol=!0,null}async function Lc(e,t){Sr=e,ol=!0,Bo=e?"idb":"none";try{await Nh(e,t)}catch(n){console.warn("[Drive][IDB] persistSession failed",n)}}async function kh(e){await Lc(null,e),_x()}async function Px(){return Li()}function Tx(e,t=5*60*1e3){return!e||e.expiresAt<=Date.now()+t}function Rx(e){return e.replace(/^#/,"").split("&").map(t=>t.split("=")).reduce((t,[n,r])=>(n&&(t[decodeURIComponent(n)]=decodeURIComponent(r||"")),t),{})}function jh(e,t,n,r){const s=t?t*1e3:wx;return{accessToken:e,expiresAt:Date.now()+s-60*1e3,refreshToken:n,profile:r}}async function bh(e){try{const t=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)return;const n=await t.json();return{email:n.email,name:n.name,picture:n.picture}}catch{return}}async function Ix(){const e=new Uint8Array(32);return crypto.getRandomValues(e),btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dx(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=Array.from(new Uint8Array(r));return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ax(e,t){const n=await Ix(),r=await Dx(n),s=btoa(JSON.stringify({v:n,r:t||null}));return window.localStorage.setItem(zo,n),t?window.localStorage.setItem(xl,t):window.localStorage.removeItem(xl),window.localStorage.setItem($o,e),`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:Au,redirect_uri:e,response_type:"code",scope:vx,include_granted_scopes:"true",state:s,prompt:"consent",access_type:"offline",code_challenge:r,code_challenge_method:"S256"}).toString()}`}async function Lx(e,t,n){const r={grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:n,client_id:Au};console.info("[Drive] Exchanging code",{redirect_uri:n,client_id:Au,code_preview:e?`${e.slice(0,4)}...${e.slice(-4)}`:"none"});const s=await fetch(wh,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const l=await s.text().catch(()=>"");throw new Error(l||"Failed to exchange code for tokens.")}return s.json()}async function Ox(){if(typeof window>"u")return null;const e=window.location.search||"",t=new URLSearchParams(e);let n=t.get("code"),r=t.get("state");if(!n&&window.location.hash){const u=Rx(window.location.hash);n=u.code||n,r=u.state||r}if(!n)return null;let s=null,l=null,o=null;if(r)try{const u=JSON.parse(atob(r));u!=null&&u.v&&typeof u.v=="string"&&(s=u.v),u!=null&&u.r&&typeof u.r=="string"&&(l=u.r),u!=null&&u.d&&typeof u.d=="string"&&(o=u.d)}catch{}if(s||(s=window.localStorage.getItem(zo)),l||(l=window.localStorage.getItem(xl)),o||(o=window.localStorage.getItem($o)||Sh),!s)return null;try{const u=await Lx(n,s,o),c=await bh(u.access_token),d=jh(u.access_token,u.expires_in,u.refresh_token,c||void 0);return await Lc(d,"login-success"),window.localStorage.removeItem(zo),window.localStorage.removeItem(xl),window.localStorage.removeItem($o),l&&l!==o?window.location.replace(l):window.history.replaceState(null,document.title,o),d}catch{return window.localStorage.removeItem(zo),window.localStorage.removeItem(xl),window.localStorage.removeItem($o),null}}async function Mx(e,t){if(typeof window>"u")throw new Error("Browser required.");const n=yx(),r=await Ax(n,window.location.href);return window.location.href=r,new Promise(()=>{})}async function Eh(){const e=await Li();if(!e)return console.warn("[Drive] refreshDriveSession: no stored session"),null;if(e.expiresAt>Date.now()+60*1e3)return console.debug("[Drive] refreshDriveSession: not expiring soon; skipping refresh",{expiresAt:e.expiresAt}),e;if(!e.refreshToken)return console.warn("[Drive] refreshDriveSession: missing refresh token; cannot refresh; keeping existing session",{expiresAt:e.expiresAt}),e;try{const t=await fetch(wh,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:e.refreshToken})});if(!t.ok){const l=await t.text().catch(()=>"");throw console.warn("[Drive] refreshDriveSession: HTTP error from token endpoint",{status:t.status,statusText:t.statusText,bodySnippet:l.slice(0,200)}),new Error("Refresh failed: "+t.status)}const n=await t.json(),r=await bh(n.access_token),s=jh(n.access_token,n.expires_in,e.refreshToken,r||e.profile);return await Lc(s,"refresh-success"),s}catch(t){const n=String((t==null?void 0:t.message)||"");return console.warn("[Drive] refreshDriveSession: caught error",{message:n}),/invalid_grant|invalid_client/i.test(n)?(console.warn("[Drive] refreshDriveSession: treating as fatal OAuth error; clearing session"),await kh("fatal-oauth-error")):console.warn("[Drive] refreshDriveSession: non-fatal error; keeping stored session in IDB"),null}}async function ys(e){let t=e??await Li();return t?Tx(t)?await Eh():t:null}async function Fx(){const e=await Ox();if(e)return e;const t=await Li();return t&&t.expiresAt>Date.now()+60*1e3?t:Eh()}async function Ux(){await kh("explicit-disconnect")}async function jt(e,t,n){const r=await fetch(t,{...n,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",...(n==null?void 0:n.headers)||{}}});if(!r.ok){const s=await r.text().catch(()=>"");throw new Error(s||"Google Drive request failed.")}return r}function hi(e){return e.replace(/'/g,"\\'")}async function Oi(e){const t=zx();if(t){if(await Ch(e,t))return t;$x()}const n=new URLSearchParams({q:`name='${Mf}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await jt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return zf(s.files[0].id),s.files[0].id;const o=await(await jt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Mf,mimeType:"application/vnd.google-apps.folder"})})).json();return zf(o.id),o.id}function zf(e){typeof window>"u"||window.localStorage.setItem(Ic,e)}function zx(){return typeof window>"u"?null:window.localStorage.getItem(Ic)}function $x(){typeof window>"u"||window.localStorage.removeItem(Ic)}function $f(e){typeof window>"u"||window.localStorage.setItem(Dc,e)}function Bx(){return typeof window>"u"?null:window.localStorage.getItem(Dc)}function Wx(){typeof window>"u"||window.localStorage.removeItem(Dc)}async function Ch(e,t){try{return(await jt(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id`)).ok}catch{return!1}}async function Hx(e){const t=Bx();if(t){if(await Ch(e,t))return t;Wx()}const n=await Oi(e),r=new URLSearchParams({q:`'${n}' in parents and name='${hi(Ff)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),l=await(await jt(e,`https://www.googleapis.com/drive/v3/files?${r.toString()}`)).json();if(Array.isArray(l.files)&&l.files.length>0)return $f(l.files[0].id),l.files[0].id;const u=await(await jt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Ff,mimeType:"application/vnd.google-apps.folder",parents:[n]})})).json();if(!(u!=null&&u.id))throw new Error("Unable to create Student Docs folder.");return $f(u.id),u.id}async function Vx(e){const t=await Oi(e),n=new URLSearchParams({q:`'${t}' in parents and name='${hi(Uf)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),s=await(await jt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json();if(Array.isArray(s.files)&&s.files.length>0)return s.files[0].id;const o=await(await jt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Uf,mimeType:"application/vnd.google-apps.folder",parents:[t]})})).json();if(!(o!=null&&o.id))throw new Error("Unable to create student photos folder.");return o.id}async function Gx(e,t,n){const r=(n||"").trim();if(!r)throw new Error("Document title is required.");const l=await(await jt(e,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:r,mimeType:"application/vnd.google-apps.document",parents:[t]})})).json();if(!(l!=null&&l.id))throw new Error("Unable to create Google Doc.");return{fileId:l.id,title:l.name||r}}async function Kx(e){const t=await ys();if(!(t!=null&&t.accessToken))throw new Error("Sign in with Google Drive first.");const n=t.accessToken,r=await Vx(n),s=Rc(e.studentId,e.studentFullName);let l=e.fileId?String(e.fileId):null;if(!l){const N=`name='${hi(s)}' and '${r}' in parents and trashed=false`,w=new URLSearchParams({q:N,fields:"files(id)",spaces:"drive"}),b=await(await jt(n,`https://www.googleapis.com/drive/v3/files?${w.toString()}`)).json();l=Array.isArray(b.files)&&b.files.length>0?b.files[0].id:null}if(!l){const N=`student_${e.studentId}.jpg`,w=`name='${hi(N)}' and '${r}' in parents and trashed=false`,j=new URLSearchParams({q:w,fields:"files(id)",spaces:"drive"}),k=await(await jt(n,`https://www.googleapis.com/drive/v3/files?${j.toString()}`)).json();l=Array.isArray(k.files)&&k.files.length>0?k.files[0].id:null}const o=l?{name:s,mimeType:"image/jpeg"}:{name:s,parents:[r],mimeType:"image/jpeg"},u=new FormData;u.append("metadata",new Blob([JSON.stringify(o)],{type:"application/json"})),u.append("file",e.jpegBlob,s);const c=l?`https://www.googleapis.com/upload/drive/v3/files/${l}?uploadType=multipart&fields=id,name,modifiedTime`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime",d=await fetch(c,{method:l?"PATCH":"POST",headers:{Authorization:`Bearer ${n}`},body:u,signal:e.signal});if(!d.ok){const N=await d.text().catch(()=>"");throw new Error(N||"Failed to upload student photo.")}const y=await d.json();if(!(y!=null&&y.id))throw new Error("Unable to upload student photo.");return{fileId:y.id,folderId:r,fileName:y.name||s,modifiedTime:y.modifiedTime}}async function Bf(e){const t=await Oi(e),n=new URLSearchParams({q:`'${t}' in parents and trashed=false`,fields:"files(id,name,modifiedTime,size,headRevisionId)",orderBy:"modifiedTime desc",spaces:"drive"});return((await(await jt(e,`https://www.googleapis.com/drive/v3/files?${n.toString()}`)).json()).files||[]).map(Mi)}async function Qx(e,t,n){const r=await Oi(e),s="classseats_drive_boundary",l={name:t,mimeType:"application/json",parents:[r],appProperties:xx},o=[`--${s}`,"Content-Type: application/json; charset=UTF-8","",JSON.stringify(l),`--${s}`,"Content-Type: application/json","",n,`--${s}--`,""].join(`\r
`),u=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,modifiedTime,size,headRevisionId",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":`multipart/related; boundary=${s}`},body:o});if(!u.ok){const d=await u.text().catch(()=>"");throw new Error(d||"Failed to create Google Drive file.")}const c=await u.json();return Mi(c)}async function Aa(e,t){return(await jt(e,`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{method:"GET"})).text()}async function Yx(e,t,n){const r=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:n});if(!r.ok){const o=await r.text().catch(()=>"");throw new Error(o||"Failed to upload file to Google Drive.")}const l=await(await jt(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime,size,headRevisionId`,{method:"GET"})).json();return Mi(l)}function Mi(e){var t;return e?{id:e.id,name:e.name,modifiedTime:e.modifiedTime,size:e.size,revisionId:e.headRevisionId||e.revisionId||((t=e==null?void 0:e.appProperties)==null?void 0:t.revisionId)}:{id:"",name:""}}async function Jx(e){const t=new URLSearchParams({q:"mimeType='application/json' and trashed=false",fields:"files(id,name,modifiedTime,size,headRevisionId)",orderBy:"modifiedTime desc",spaces:"drive"});return((await(await jt(e,`https://www.googleapis.com/drive/v3/files?${t.toString()}`)).json()).files||[]).map(Mi)}const br=new Map;function _h(e,t){const n=br.get(e);if((n==null?void 0:n.value)!==void 0)return Promise.resolve(n.value);if(n!=null&&n.promise)return n.promise;const r=t().then(s=>(br.set(e,{value:s}),s)).catch(s=>{throw br.delete(e),s});return br.set(e,{promise:r}),r}function _s(e){if(!e){br.clear();return}for(const t of br.keys())t.startsWith(e)&&br.delete(t)}const Xx="classseats-cache",qx=1,Cn="driveFolders",ar="studentPhotoMap",ur="photoBlobs";function Fi(){return typeof indexedDB>"u"?Promise.resolve(null):new Promise((e,t)=>{const n=indexedDB.open(Xx,qx);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Cn)||r.createObjectStore(Cn,{keyPath:"key"}),r.objectStoreNames.contains(ar)||r.createObjectStore(ar,{keyPath:"studentId"}),r.objectStoreNames.contains(ur)||r.createObjectStore(ur,{keyPath:"fileId"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error||new Error("IndexedDB open failed"))})}function Oc(e,t){return t?Date.now()-e>t:!1}async function As(e,t){const n=await Fi();return n?new Promise((r,s)=>{const u=n.transaction(e,"readonly").objectStore(e).get(t);u.onsuccess=()=>r(u.result||null),u.onerror=()=>s(u.error||new Error("IDB get failed"))}):null}async function Ui(e,t){const n=await Fi();if(n)return new Promise((r,s)=>{const l=n.transaction(e,"readwrite");l.objectStore(e).put(t),l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB put failed"))})}async function Ps(e,t){const n=await Fi();if(n)return new Promise((r,s)=>{const l=n.transaction(e,"readwrite");l.objectStore(e).delete(t),l.oncomplete=()=>r(),l.onerror=()=>s(l.error||new Error("IDB delete failed"))})}async function La(e){const t=await Fi();if(t)return new Promise((n,r)=>{const s=t.transaction(e,"readwrite");s.objectStore(e).clear(),s.oncomplete=()=>n(),s.onerror=()=>r(s.error||new Error("IDB clear failed"))})}async function Ph(e,t,n){const r=await As(Cn,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Ps(Cn,e),null):Oc(r.updatedAt,t)?(await Ps(Cn,e),null):r:null}async function Th(e){await Ui(Cn,e)}async function Zx(e,t,n){const r=await As(ar,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Ps(ar,e),null):Oc(r.fetchedAt,t)?(await Ps(ar,e),null):r:null}async function ey(e,t){const n=await As(ar,e);return!n||t&&n.accountKey&&n.accountKey!==t?null:n}async function ty(e){await Ui(ar,e)}async function ny(e,t,n){const r=await As(ur,e);return r?n&&r.accountKey&&r.accountKey!==n?(await Ps(ur,e),null):Oc(r.fetchedAt,t)?(await Ps(ur,e),null):r:null}async function ry(e,t){const n=await As(ur,e);return!n||t&&n.accountKey&&n.accountKey!==t?null:n}async function Rh(e){await Ui(ur,e)}async function sy(){await Promise.all([La(Cn),La(ar),La(ur)])}const Ih="driveAccountKey";async function ly(){const e=await As(Cn,Ih);return(e==null?void 0:e.value)||null}async function oy(e){const t={key:Ih,value:e,updatedAt:Date.now(),accountKey:e};await Ui(Cn,t)}const Wf="ClassSeats",Hf="studentPhotos",Dh=30*24*60*60*1e3,iy=7*24*60*60*1e3,ay=7*24*60*60*1e3,uy=5*60*1e3,cy="classseats_studentPhotoRefs_v1",dy=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("classseats_debug_drive")==="1"}catch{return!1}},Ah=(e,t)=>{dy()&&console.debug(`[PhotoService] ${e}`,t)},Oa={folderLookups:0,photoMetaLookups:0,mediaDownloads:0};function Ts(e){Oa[e]+=1,Ah(`${e}=${Oa[e]}`,{count:Oa[e]})}const gi=new Map,vi=new Map,Dr=new Map;let Wo=null;const Lh=(e,t)=>`${e}:${t||0}`;function Oh(e){return e.replace(/'/g,"\\'")}function fy(e){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(cy);if(!t)return null;const n=JSON.parse(t);if(!n||typeof n!="object")return null;const r=n[e];return!r||typeof r.fileId!="string"?null:r.fileId}catch{return null}}function Mh(e){let t=0;const n=[],r=()=>{if(t>=e)return;const s=n.shift();s&&s()};return async function(l){t>=e&&await new Promise(o=>n.push(o)),t+=1;try{return await l()}finally{t-=1,r()}}}const Mc=Mh(4),Vf=Mh(3);async function Ar(e,t,n){const r={Authorization:`Bearer ${e}`},s=(n==null?void 0:n.body)instanceof FormData;n!=null&&n.body&&!s&&(r["Content-Type"]="application/json");const l=await fetch(t,{...n,headers:{...r,...(n==null?void 0:n.headers)||{}}});if(!l.ok){const o=await l.text().catch(()=>"");throw new Error(o||"Google Drive request failed.")}return l}async function py(e){var n,r,s,l,o;if((r=(n=e.driveSession)==null?void 0:n.profile)!=null&&r.email)return e.driveSession.profile.email;if((s=e.driveClient)!=null&&s.getStatus)try{const u=await e.driveClient.getStatus();if(u.connected)return((l=u.profile)==null?void 0:l.email)||null}catch{}const t=await ys(e.driveSession);return((o=t==null?void 0:t.profile)==null?void 0:o.email)||null}async function $l(e){const t=await py(e);if(!t)return null;Wo&&Wo!==t&&await xi("account-change");const n=await ly();return n&&n!==t&&await xi("account-change"),Wo=t,n!==t&&await oy(t),t}async function zi(e){var n,r;if((n=e.driveSession)!=null&&n.accessToken)return e.driveSession.accessToken;if(((r=e.driveClient)==null?void 0:r.kind)==="desktop")return null;const t=await ys(e.driveSession);return(t==null?void 0:t.accessToken)||null}async function Fc(e,t){const n=await _h(e,t);return n==null&&_s(e),n}function il(e,t){const n=Dr.get(e);n!=null&&n.url&&URL.revokeObjectURL(n.url);const r=URL.createObjectURL(t);return Dr.set(e,{url:r}),r}function my(e){const t=Dr.get(e);return(t==null?void 0:t.url)||null}function Fh(e,t){const n=`${e}:`;for(const[r,s]of Dr.entries())r!==e&&!r.startsWith(n)||t&&r===t||(s!=null&&s.url&&URL.revokeObjectURL(s.url),Dr.delete(r))}function hy(e){const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),t}function gy(e){const t=e.replace(/\s+/g,"");return t.length<32||t.length%4!==0?!1:/^[A-Za-z0-9+/=]+$/.test(t)}function Gf(e,t){try{const n=e.replace(/\s+/g,""),r=atob(n),s=new Uint8Array(r.length);for(let l=0;l<r.length;l+=1)s[l]=r.charCodeAt(l);return new Blob([s],{type:t||"image/jpeg"})}catch{return null}}function vy(e){if(!e)return null;if(e instanceof Blob)return e;if(e instanceof ArrayBuffer)return new Blob([e]);if(ArrayBuffer.isView(e))return new Blob([hy(e)]);if(typeof e=="string"){if(e.startsWith("data:")){const t=e.split(",",2);if(t.length===2){const n=t[0].match(/data:([^;]+)/),r=Gf(t[1],n==null?void 0:n[1]);if(r)return r}}if(gy(e)){const t=Gf(e);if(t)return t}return new Blob([e])}return null}async function Kf(e,t,n,r){const s=`name='${Oh(n)}' and '${t}' in parents and trashed=false`,l=new URLSearchParams({q:s,fields:"files(id,name,modifiedTime)",spaces:"drive"});return Ts("photoMetaLookups"),Mc(async()=>{const u=await(await Ar(e,`https://www.googleapis.com/drive/v3/files?${l.toString()}`,{method:"GET",signal:r})).json();return!Array.isArray(u.files)||u.files.length===0?null:u.files[0]})}async function xy(e,t,n){return Ts("photoMetaLookups"),Mc(async()=>{const s=await(await Ar(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime`,{method:"GET",signal:n})).json();return s!=null&&s.id?{id:s.id,name:s.name,modifiedTime:s.modifiedTime}:null})}async function yy(e,t,n,r){return Mc(async()=>{const l=await(await Ar(e,`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,modifiedTime`,{method:"PATCH",body:JSON.stringify({name:n}),signal:r})).json();return l!=null&&l.id?{id:l.id,name:l.name,modifiedTime:l.modifiedTime}:null})}async function wy(e){return Fc("driveFolder:classSeats",async()=>{const t=await $l(e),n=await Ph("classSeatsFolderId",Dh,t||void 0);if(n!=null&&n.value)return n.value;const r=await zi(e);if(!r)return null;Ts("folderLookups");const s=new URLSearchParams({q:`name='${Wf}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),o=await(await Ar(r,`https://www.googleapis.com/drive/v3/files?${s.toString()}`,{method:"GET"})).json();let u=null;if(Array.isArray(o.files)&&o.files.length>0&&(u=o.files[0].id),!u){const d=await(await Ar(r,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Wf,mimeType:"application/vnd.google-apps.folder"})})).json();u=(d==null?void 0:d.id)||null}return u?(await Th({key:"classSeatsFolderId",value:u,updatedAt:Date.now(),accountKey:t||void 0}),u):null})}async function Sy(e){return Fc("driveFolder:studentPhotos",async()=>{const t=await $l(e),n=await Ph("studentPhotosFolderId",Dh,t||void 0);if(n!=null&&n.value)return n.value;const r=await zi(e);if(!r)return null;const s=await wy(e);if(!s)return null;Ts("folderLookups");const l=new URLSearchParams({q:`'${s}' in parents and name='${Oh(Hf)}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id)",spaces:"drive"}),u=await(await Ar(r,`https://www.googleapis.com/drive/v3/files?${l.toString()}`,{method:"GET"})).json();let c=null;if(Array.isArray(u.files)&&u.files.length>0&&(c=u.files[0].id),!c){const y=await(await Ar(r,"https://www.googleapis.com/drive/v3/files",{method:"POST",body:JSON.stringify({name:Hf,mimeType:"application/vnd.google-apps.folder",parents:[s]})})).json();c=(y==null?void 0:y.id)||null}return c?(await Th({key:"studentPhotosFolderId",value:c,updatedAt:Date.now(),accountKey:t||void 0}),c):null})}async function al(e){gi.set(e.studentId,e),vi.delete(e.studentId),_s(`studentPhoto:${e.studentId}`),await ty(e)}async function Ny(e,t,n,r){const s=String(e),l=await $l(n),o=gi.get(s);if(o&&(!l||o.accountKey===l))return o;const u=await Zx(s,iy,l||void 0);if(u)return gi.set(s,u),u;const c=await ey(s,l||void 0),d=vi.get(s);if(d&&Date.now()-d<uy)return c||null;const y=await zi(n);if(!y)return c||null;if(c!=null&&c.fileId)try{const b=await xy(y,c.fileId,r);if(b){const k={studentId:s,fileId:b.id,fileName:b.name,updatedTime:b.modifiedTime,fetchedAt:Date.now(),accountKey:l||void 0};return await al(k),k}}catch{}const N=await Sy(n);if(!N)return c||null;const w=t?Rc(e,t):c==null?void 0:c.fileName;if(w)try{const b=await Kf(y,N,w,r);if(b){const k={studentId:s,fileId:b.id,fileName:b.name,updatedTime:b.modifiedTime,fetchedAt:Date.now(),accountKey:l||void 0};return await al(k),k}}catch{return c||null}try{const b=`student_${e}.jpg`,k=await Kf(y,N,b,r);if(k){let Y=k.name,h=k.modifiedTime;if(w&&k.name!==w){const v=await yy(y,k.id,w,r);v!=null&&v.name&&(Y=v.name,h=v.modifiedTime)}const p={studentId:s,fileId:k.id,fileName:Y,updatedTime:h,fetchedAt:Date.now(),accountKey:l||void 0};return await al(p),p}}catch{return c||null}const j=fy(s);if(j){const b={studentId:s,fileId:j,fileName:w||void 0,fetchedAt:Date.now(),accountKey:l||void 0};return await al(b),b}return vi.set(s,Date.now()),c||null}async function ky(e,t,n){var s;if(((s=t.driveClient)==null?void 0:s.kind)==="desktop"&&t.driveClient.downloadFile)return Ts("mediaDownloads"),Vf(async()=>{var o,u;const l=await((u=(o=t.driveClient)==null?void 0:o.downloadFile)==null?void 0:u.call(o,e));return vy(l==null?void 0:l.data)});const r=await zi(t);return r?(Ts("mediaDownloads"),Vf(async()=>{const l=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{method:"GET",headers:{Authorization:`Bearer ${r}`},signal:n});return l.ok?l.blob():null})):null}async function jy(e,t,n,r){const s=Lh(e,t);Fh(e,s);const l=my(s);if(l)return l;const o=await $l(n),u=await ny(s,ay,o||void 0);if(u)return il(s,u.blob);const c=await ry(s,o||void 0);try{const d=await _h(`photoBlob:${s}`,async()=>ky(e,n,r));if(!d)return _s(`photoBlob:${s}`),c?il(s,c.blob):null;const y={fileId:s,blob:d,fetchedAt:Date.now(),accountKey:o||void 0};return await Rh(y),il(s,d)}catch{return _s(`photoBlob:${s}`),c?il(s,c.blob):null}}async function by(e){const t=e.photoFileId?String(e.photoFileId):"";if(!t)return{fileId:null,url:null};const n=await jy(t,e.photoUpdatedAt,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal);return{fileId:t,url:n}}async function Ey(e){const t=`studentPhoto:${String(e.studentId)}`;return Fc(t,async()=>Ny(e.studentId,e.fullName,{driveClient:e.driveClient,driveSession:e.driveSession},e.signal))}async function Cy(e){const t=Lh(e.fileId,e.photoUpdatedAt);_s(`photoBlob:${t}`);const n=String(e.studentId),r=await $l({driveClient:e.driveClient,driveSession:e.driveSession}),s=Rc(e.studentId,e.fullName),l={studentId:n,fileId:e.fileId,fileName:s,updatedTime:e.updatedTime,fetchedAt:Date.now(),accountKey:r||void 0};await al(l);const o={fileId:t,blob:e.blob,updatedTime:e.updatedTime,fetchedAt:Date.now(),accountKey:r||void 0};await Rh(o),Fh(e.fileId,t),il(t,e.blob)}async function xi(e){e&&Ah("cache clear",{reason:e});for(const t of Dr.values())URL.revokeObjectURL(t.url);Dr.clear(),gi.clear(),vi.clear(),Wo=null,_s(),await sy()}function Uh({studentId:e,fullName:t,photoFileId:n,photoUpdatedAt:r,driveClient:s,driveSession:l,driveAccountKey:o}){const[u,c]=f.useState(null),[d,y]=f.useState(null),[N,w]=f.useState(!1),j=f.useMemo(()=>String(e),[e]),b=f.useMemo(()=>n?String(n):"",[n]),k=(l==null?void 0:l.accessToken)||"",Y=o||"";return f.useEffect(()=>{let h=!0;const p=new AbortController;return b?(w(!0),c(null),by({photoFileId:b,photoUpdatedAt:r,driveClient:s,driveSession:l,signal:p.signal}).then(v=>{h&&(c(v.url),y(v.fileId))}).catch(()=>{h&&(c(null),y(null))}).finally(()=>{h&&w(!1)}),()=>{h=!1,p.abort()}):(c(null),y(null),w(!1),()=>{h=!1,p.abort()})},[j,b,r,s,l,k,Y,t]),{photoUrl:u,fileId:d,loading:N}}const Qf=72,_y=64,Py={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","6xl":"max-w-6xl","7xl":"max-w-7xl"};function Ty({isOpen:e,onRequestClose:t,title:n,subtitle:r,headerRight:s,footer:l,children:o,maxWidth:u="6xl",bodyClassName:c,bodyPadding:d=!0,showCloseX:y=!1}){if(f.useEffect(()=>{if(!e)return;const j=b=>{b.key==="Escape"&&t()};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[e,t]),!e)return null;const N=l?`max-h-[calc(90vh-${Qf}px-${_y}px)]`:`max-h-[calc(90vh-${Qf}px)]`,w=d?"px-5 py-4":"";return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",style:{width:"100dvw",height:"100dvh"},onMouseDown:t}),i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{width:"100dvw",height:"100dvh"},children:i.jsxs("div",{role:"dialog","aria-modal":"true",className:`relative w-full rounded-xl bg-white shadow-xl border border-slate-200 max-h-[90vh] overflow-hidden ${Py[u]}`,onMouseDown:j=>j.stopPropagation(),children:[i.jsx("div",{className:"border-b border-slate-200 px-5 py-4 bg-white",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"min-w-0",children:[n&&i.jsx("div",{className:"text-lg font-semibold text-slate-900",children:n}),r&&i.jsx("div",{className:"text-sm text-slate-500",children:r})]}),(s||y)&&i.jsxs("div",{className:"flex items-center gap-2",children:[s,y&&i.jsx("button",{type:"button","aria-label":"Close",onClick:t,className:"rounded-md p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:i.jsx("span",{"aria-hidden":"true",className:"text-lg leading-none",children:""})})]})]})}),i.jsx("div",{className:`overflow-y-auto overscroll-contain ${N} ${w} ${c??""}`,children:o}),l&&i.jsx("div",{className:"border-t border-slate-200 px-5 py-4 bg-slate-50",children:l})]})})]})}const Ry="newui_constraints_v1";function Iy(){try{const e=localStorage.getItem(Ry);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function Dy(){return Iy()}const zh=f.createContext(null);function Ay({children:e}){const[t,n]=f.useState([]),r=f.useCallback(o=>{n(u=>u.filter(c=>c.id!==o))},[]),s=f.useCallback(o=>{const u=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,c=o.tone||"info",d=o.duration??4e3;n(y=>[...y,{...o,id:u,tone:c}]),d>0&&typeof window<"u"&&window.setTimeout(()=>r(u),d)},[r]),l=f.useMemo(()=>s,[s]);return i.jsxs(zh.Provider,{value:l,children:[e,i.jsx("div",{className:"pointer-events-none fixed top-6 left-1/2 -translate-x-1/2 z-[1000] flex flex-col gap-4 w-full max-w-lg items-center",children:t.map(o=>{const u=o.tone==="success"?"bg-emerald-600 text-white shadow-emerald-500/40":o.tone==="error"?"bg-rose-600 text-white shadow-rose-500/40":o.tone==="warning"?"bg-amber-500 text-slate-900 shadow-amber-400/40":"bg-slate-800 text-white shadow-slate-900/40";return i.jsxs("div",{className:`pointer-events-auto rounded-3xl px-5 py-4 shadow-2xl flex items-start gap-4 text-base font-semibold w-full ${u}`,children:[i.jsx("div",{className:"flex-1 text-sm font-semibold",children:o.message}),i.jsx("button",{className:"text-base font-bold opacity-80 hover:opacity-100",onClick:()=>r(o.id),"aria-label":"Dismiss notification",children:""})]},o.id)})})]})}function $h(){const e=f.useContext(zh);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}const Ly="newui_history_v1";function Oy(){try{const e=localStorage.getItem(Ly);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function My(){return Oy()}console.log(" GroupingAlgorithm.js (FIXED v2) file loaded!");console.log(" GroupingAlgorithm v2 loaded successfully!");const Fy="newui_groupings_v1";function Uy(){try{const e=localStorage.getItem(Fy);return e?{byPeriod:JSON.parse(e).byPeriod||{}}:{byPeriod:{}}}catch{return{byPeriod:{}}}}function zy(){return Uy()}const $y="newui_print_settings_v1",By={seatingChartEditor:{lastUpdated:new Date(0).toISOString()}};function Wy(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Zs(e,t,n,r){const s=typeof e=="number"?e:parseFloat(String(e));return Number.isFinite(s)?Math.min(r,Math.max(n,s)):t}function Hy(e){return e==="a4"||e==="legal"||e==="tabloid"?e:"letter"}function Vy(e){return Array.isArray(e)?e.filter(t=>typeof t=="string"||typeof t=="number"):null}function Gy(){const e=Wy(localStorage.getItem($y)),t=(e==null?void 0:e.seatingChartEditor)??{};return{seatingChartEditor:{paper:Hy(t.paper),orientation:t.orientation==="portrait"?"portrait":"landscape",marginMode:t.marginMode==="max"?"max":"safe",showPhotos:t.showPhotos!==!1,showTags:t.showTags!==!1,showSeatNumbers:t.showSeatNumbers===!0,selectedTagIds:Vy(t.selectedTagIds),textScale:Zs(t.textScale,1,.5,2.5),photoScale:Zs(t.photoScale,1,.5,2),zoom:Zs(t.zoom,1,.1,4),offsetX:Zs(t.offsetX,0,-5e3,5e3),offsetY:Zs(t.offsetY,0,-5e3,5e3),lastUpdated:typeof t.lastUpdated=="string"?t.lastUpdated:By.seatingChartEditor.lastUpdated}}}function Bh(e,t=50){const n=t>0?t:50,r=Math.ceil(n*.9),s=Math.ceil(n*.7),l=Math.ceil(n*.5);return e>=r?{label:"Good Standing",color:"green",emoji:"",min:r}:e>=s?{label:"Caution",color:"yellow",emoji:"",min:s,max:r-1}:e>=l?{label:"Warning",color:"orange",emoji:"",min:l,max:s-1}:{label:"Alert",color:"red",emoji:"",min:0,max:l-1}}function Ky(){return{periods:Du().periods.map(t=>({id:t.id,behaviorNotes:t.behaviorNotes||{},pointsByStudent:t.pointsByStudent||{},pointsHistory:t.pointsHistory||[],pointsEnabled:t.pointsEnabled,startingPoints:t.startingPoints}))}}const Qy=e=>{const[t,n,r]=e.split("-").map(s=>Number(s));return!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(r)?null:new Date(Date.UTC(t,n-1,r))},Yy=e=>{const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return`${t}-${n}-${r}`},Jy=e=>{const t=Qy(e);return t?(t.setUTCDate(t.getUTCDate()-1),Yy(t)):e},Wh=(e,t,n)=>{if(!e)return null;const r=e[String(t)];return r&&r[n]||null},Xy=e=>{if(!e)return null;const t=Object.keys(e);return t.length===0?null:t.reduce((n,r)=>r<n?r:n,t[0])};function el(e){var y;const{attendance:t,studentId:n,date:r,status:s,resets:l}=e;if(!t)return 0;const o=String(n),c=Wh(l,n,s==="left_early"?"leftEarly":s==="tardy"?"tardy":"absent");let d=0;for(const N of Object.keys(t))N>r||c&&N<c||((y=t[N])==null?void 0:y[o])===s&&(d+=1);return d}function qy(e){var N,w;const{attendance:t,studentId:n,date:r,resets:s}=e;if(!t)return 0;const l=String(n);if((((N=t[r])==null?void 0:N[l])||"unmarked")!=="absent")return 0;const u=Wh(s,n,"absent");if(u&&r<u)return 0;const c=Xy(t);let d=r,y=0;for(;!(u&&d<u);){const j=((w=t[d])==null?void 0:w[l])||"unmarked";if(j==="absent")y+=1;else if(j!=="unmarked")break;if(!c||d<=c)break;d=Jy(d)}return y}const Hh="https://www.classseats.com/updates",Uc="https://classseats.com",Zy=`${Uc}/privacy.html`,ew=`${Uc}/terms.html`;function tw({variant:e="floating",className:t}){const n=new Date().getFullYear(),r=i.jsxs("div",{className:"w-full max-w-[420px] rounded-xl border border-indigo-100 bg-white/95 px-3 py-3 text-left text-slate-800 shadow-lg backdrop-blur",children:[i.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-700 flex flex-wrap items-center gap-1",children:["Early Access   ",n," ClassSeats "," ",i.jsx("a",{href:Hh,target:"_blank",rel:"noreferrer",className:"text-indigo-700 underline decoration-indigo-300 decoration-2 underline-offset-4 hover:text-indigo-800",children:"Get updates"})]}),i.jsx("p",{className:"mt-1 text-[11px] leading-snug text-slate-700",children:"ClassSeats is in active development. Features and pricing may change."})]});return e==="floating"?i.jsx("div",{className:`pointer-events-none fixed bottom-3 left-3 right-3 z-40 flex justify-end md:left-auto md:right-4 md:max-w-[420px] ${t??""}`,children:i.jsx("div",{className:"pointer-events-auto w-full md:w-auto",children:r})}):i.jsx("div",{className:t,children:r})}const nw="0.1.0",rw=new Date().toLocaleDateString();function sw({open:e,onClose:t,buildRevision:n}){const r=new Date().getFullYear();return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),i.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl bg-white p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-indigo-700",children:"ClassSeats (Early Access)"}),i.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"About"})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:t,"aria-label":"Close about",children:""})]}),i.jsx("p",{className:"mt-2 text-sm leading-relaxed text-slate-700",children:"ClassSeats is in active development. Features and pricing may change. Data is stored in your Google Drive or locally on your device  ClassSeats does not store student data on its servers."}),i.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-800 space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"App version"}),i.jsx("span",{children:nw})]}),n&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Build revision"}),i.jsxs("span",{children:["Rev ",n]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Build date"}),i.jsx("span",{children:rw})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[i.jsx(Eo,{href:Uc,label:"Home"}),i.jsx(Eo,{href:Zy,label:"Privacy"}),i.jsx(Eo,{href:ew,label:"Terms"}),i.jsx(Eo,{href:Hh,label:"Get updates"})]}),i.jsxs("p",{className:"mt-4 text-[11px] text-slate-500",children:[" ",r," ClassSeats. All rights reserved."]}),i.jsx("p",{className:"mt-1 text-[10px] text-slate-400",children:"Google Drive is a trademark of Google LLC"})]})]}):null}function Eo({href:e,label:t}){return i.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-800 shadow-sm hover:border-indigo-200 hover:text-indigo-700",children:[t,i.jsx("span",{"aria-hidden":"true",children:""})]})}function lw({current:e,onGoDesktop:t,onGoMobile:n}){const r="px-3 py-1.5 text-xs font-semibold rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500",s="bg-slate-900 text-white",l="bg-white text-slate-700 border border-slate-200 hover:bg-slate-50";return i.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white/80 p-1 shadow-sm",children:[i.jsx("button",{type:"button","aria-pressed":e==="desktop",className:`${r} ${e==="desktop"?s:l}`,onClick:t,children:"Desktop"}),i.jsx("button",{type:"button","aria-pressed":e==="mobile",className:`${r} ${e==="mobile"?s:l}`,onClick:n,children:"Mobile"})]})}function ow(){var n;if(typeof navigator>"u")return!1;const e=(n=navigator.userAgentData)==null?void 0:n.mobile;if(typeof e=="boolean")return e;const t=navigator.userAgent||"";return/iPhone|Android.+Mobile|Windows Phone|iPod/i.test(t)}function iw(e,t,n){const r=Du().currentId,s=r!=null?String(r):null,l=new Date().toISOString();return{schemaVersion:1,version:1,exportedAt:l,updatedAt:l,lastWriter:"unknown",layouts:rx(),periodsState:Du(),lastEditedPeriodId:s,lastEditedDate:null,students:n||fx(),tags:ax(),behaviorState:Ky(),constraintsState:Dy(),historyState:My(),groupingsState:zy(),printSettings:Gy()}}const Zr=e=>!!e&&typeof e=="object",aw=e=>e===!0||e==="true"||e===1||e==="1",Vh=e=>{const t=typeof e=="number"?e:parseInt(String(e),10);return Number.isFinite(t)&&Number.isInteger(t)?t:null};function uw(e,t){if(!Array.isArray(e))return[];const n=[];for(const r of e){const s=Vh(r);s!=null&&(s<0||s>=t||n.push(s))}return Array.from(new Set(n)).sort((r,s)=>r-s)}function cw(e){var u;if(!e||typeof e!="object"||(e.schemaVersion??(e.version===1?1:void 0))!==1)return null;const n=typeof e.exportedAt=="string"?e.exportedAt:new Date().toISOString(),r=typeof e.updatedAt=="string"?e.updatedAt:n,s=e.lastWriter==="desktop"||e.lastWriter==="mobile"||e.lastWriter==="unknown"?e.lastWriter:"unknown",l={...e,schemaVersion:1,version:e.version??1,exportedAt:n,updatedAt:r,lastWriter:s};if(l.behaviorState=Zr(e.behaviorState)?e.behaviorState:{},!Zr(l.periodsState)||!Array.isArray((u=l.periodsState)==null?void 0:u.periods)||!Array.isArray(l.students)||!Array.isArray(l.layouts)||!Zr(l.behaviorState)||!Zr(l.constraintsState)||!Zr(l.historyState)||!Zr(l.groupingsState))return null;switch((e.schemaVersion!==l.schemaVersion||e.updatedAt!==l.updatedAt||e.exportedAt!==l.exportedAt||e.lastWriter!==l.lastWriter)&&console.log("[Payload] migrated to schema v1",{hadSchemaVersion:e.schemaVersion,hadVersion:e.version,addedUpdatedAt:e.updatedAt!==l.updatedAt,addedLastWriter:e.lastWriter!==l.lastWriter}),l.schemaVersion){case 1:return l.students=(l.students||[]).map(c=>({...c,needsPreferredSeating:aw(c.needsPreferredSeating),quickNote:(typeof c.quickNote=="string",c.quickNote),quickNoteUpdatedAt:(typeof c.quickNoteUpdatedAt=="string",c.quickNoteUpdatedAt),photoFileId:typeof c.photoFileId=="string"?c.photoFileId:c.photoFileId==null?null:String(c.photoFileId),photoUpdatedAt:Vh(c.photoUpdatedAt)})),l.layouts=(l.layouts||[]).map(c=>({...c,tables:(c.tables||[]).map(d=>{const y=Math.max(0,d.capacity||0);return{...d,preferredSeatIndexes:uw(d.preferredSeatIndexes,y),seatLayout:xh(y||1,d.rotation||0,d.seatLayout||null)}})})),l;default:return null}}function dw(e){return e.isOffline?{action:"skip",reason:"offline"}:e.isLocked?{action:"skip",reason:"locked"}:e.inFlight?{action:"skip",reason:"in-flight"}:e.hasFile?e.dirty?{action:"upload",reason:"ready"}:{action:"skip",reason:"clean"}:{action:"skip",reason:"no-file"}}function fw(e){const t=e.graceMs;return e.isOffline?{action:"skip",reason:"offline"}:e.isLocked?{action:"skip",reason:"locked"}:e.inFlight?{action:"skip",reason:"in-flight"}:e.dirty?{action:"skip",reason:"dirty"}:e.lastLocalEditAt&&e.now-e.lastLocalEditAt<t?{action:"skip",reason:"grace-window"}:{action:"pull",reason:"ready"}}function pw(e){if(e.incomingRevisionId&&e.lastRevisionId)return e.incomingRevisionId===e.lastRevisionId?{action:"skip",reason:"same-revision"}:{action:"apply",reason:"revision-changed"};if(e.incomingRevisionId&&!e.lastRevisionId)return{action:"apply",reason:"revision-unknown"};const t=e.incomingUpdatedAt?Date.parse(e.incomingUpdatedAt):NaN,n=e.lastAppliedUpdatedAt?Date.parse(e.lastAppliedUpdatedAt):NaN;return Number.isFinite(t)&&Number.isFinite(n)&&t<=n?{action:"skip",reason:"stale-updatedAt"}:{action:"apply",reason:"fresh"}}const mw=new Set(["students","periodsState","layouts","tags","constraintsState","historyState","groupingsState","behaviorNotes","attendance","notes","alerts","payload"]),Lu=(e,t,n)=>{if(mw.has(t))return"[omitted]";if(typeof e=="string")return e.length>200?`[string ${e.length}]`:e;if(Array.isArray(e)){const r=e.slice(0,5).map(s=>Lu(s,"",n+1));return e.length>5&&r.push(`[+${e.length-5} more]`),n>1?`[array len=${e.length}]`:r}if(e&&typeof e=="object"){if(n>1)return"[object]";const r=Object.entries(e).slice(0,10).map(([s,l])=>[s,Lu(l,s,n+1)]);return r.length===0?e:Object.fromEntries(r)}return e};function tl(e,t){if(!(typeof console>"u"))try{const n=t?Lu(t,"",0):void 0;n!==void 0?console.log(e,n):console.log(e)}catch{console.log(e)}}function hw({children:e}){return i.jsx(i.Fragment,{children:e})}function gw(e){const t=e.slice();for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function Ot(e){return String(e)}function Yf(e){try{const t=localStorage.getItem(e);if(!t)return new Set;const n=JSON.parse(t);return Array.isArray(n)?new Set(n.map(String)):new Set}catch{return new Set}}function Ma(e,t){try{localStorage.setItem(e,JSON.stringify(Array.from(t)))}catch{}}function Jf({open:e,title:t,body:n,confirmText:r,cancelText:s,onConfirm:l,onCancel:o,danger:u}){return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center p-4 sm:items-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:o}),i.jsxs("div",{className:"relative w-full max-w-md overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-2xl",children:[i.jsxs("div",{className:"space-y-2 p-5",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:t}),i.jsx("div",{className:"text-sm text-slate-600",children:n})]}),i.jsxs("div",{className:"flex gap-2 p-4 pt-0",children:[i.jsx("button",{className:"flex-1 rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 hover:bg-slate-50",onClick:o,children:s}),i.jsx("button",{className:`flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold text-white ${u?"bg-rose-600 hover:bg-rose-700":"bg-violet-600 hover:bg-violet-700"}`,onClick:l,children:r})]})]})]}):null}function vw({students:e,periodId:t,driveFileId:n,driveClient:r,driveSession:s}){const l=n??"local",o=`cs_mobile_flashcards_learned_v1:${l}:${t}`,[u,c]=f.useState(!1),[d,y]=f.useState(()=>Yf(o)),N=f.useRef(d);f.useEffect(()=>{N.current=d},[d]),f.useEffect(()=>{const V=Yf(o);N.current=V,y(V),c(!1)},[o]);const w=e.length,[j,b]=f.useState([]),[k,Y]=f.useState(0),[h,p]=f.useState(!1),[v,C]=f.useState(null),[L,O]=f.useState(null),F=f.useMemo(()=>{if(u)return e;const V=d;return e.filter(se=>!V.has(Ot(se.id))||Ot(se.id)===v)},[e,u,d,v]),B=f.useMemo(()=>e.map(V=>Ot(V.id)).join("|"),[e]),fe=f.useMemo(()=>F.map(V=>Ot(V.id)).join("|"),[F]),Z=f.useMemo(()=>{const V=new Set(e.map(ae=>Ot(ae.id)));let se=0;return d.forEach(ae=>{V.has(ae)&&se++}),se},[e,d]),je=Math.max(0,w-Z),[Ze,et]=f.useState(!1),[ne,Fe]=f.useState(!1);f.useEffect(()=>{const V=N.current,se=(u?e:e.filter(ae=>!V.has(Ot(ae.id)))).map(ae=>Ot(ae.id));b(se),Y(0),p(!1),C(null),O(null)},[u,t,l,B]),f.useEffect(()=>{const V=new Set(F.map(se=>Ot(se.id)));b(se=>{const ae=se.filter(Le=>V.has(Le));return ae.length===se.length?se:(Y(Le=>Math.min(Le,Math.max(0,ae.length-1))),ae)})},[fe]);const $=f.useMemo(()=>new Map(F.map(V=>[Ot(V.id),V])),[F]),he=j[k]??null,R=he?$.get(he)??null:null,{photoUrl:K}=Uh({studentId:(R==null?void 0:R.id)??"unknown",fullName:(R==null?void 0:R.fullName)??null,photoFileId:(R==null?void 0:R.photoFileId)??null,photoUpdatedAt:(R==null?void 0:R.photoUpdatedAt)??null,driveClient:r,driveSession:s}),q=V=>!he||v!==he||u?!1:(b(se=>{const ae=se.filter(Le=>Le!==he);return Y(Le=>ae.length===0?0:V==="prev"?Math.max(0,Le-1):Math.min(Le,ae.length-1)),ae}),C(null),!0),me=()=>{p(!1),O(null),!q("next")&&Y(V=>j.length===0?0:Math.min(V+1,j.length-1))},ge=()=>{p(!1),O(null),!q("prev")&&Y(V=>Math.max(0,V-1))},Wt=()=>{if(!R)return;const V=Ot(R.id);O(null),y(se=>{const ae=new Set(se);return ae.add(V),Ma(o,ae),ae}),C(V)},A=()=>{if(!R)return;const V=Ot(R.id);C(null),O(se=>se===V?null:V),y(se=>{if(!se.has(V))return se;const ae=new Set(se);return ae.delete(V),Ma(o,ae),ae})},Ke=()=>{et(!1),p(!1),C(null),O(null),b(V=>gw(V)),Y(0)},Ue=()=>{Fe(!1),p(!1),C(null),O(null);const V=new Set;y(V),Ma(o,V);const se=e.map(ae=>Ot(ae.id));b(se),Y(0)},We=!u&&je===0&&w>0;return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Flashcards"}),i.jsxs("div",{className:"text-xs text-slate-600",children:["Learned ",Z," / ",w,"  Remaining ",je]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:j.length<2,onClick:()=>et(!0),children:"Shuffle"}),i.jsx("button",{className:`rounded-xl border px-3 py-2 text-xs font-semibold ${u?"border-violet-200 bg-violet-50 text-violet-900":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}`,onClick:()=>{c(V=>!V),p(!1),C(null),O(null)},children:u?"Including learned":"Include learned"}),i.jsx("button",{className:"rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>Fe(!0),children:"Clear learned"})]})]}),We?i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center space-y-2",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:"All learned!"}),i.jsx("div",{className:"text-sm text-slate-600",children:"Youve marked everyone in this period as learned."}),i.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[i.jsx("button",{className:"rounded-xl bg-violet-600 px-4 py-3 text-sm font-semibold text-white hover:bg-violet-700",onClick:()=>c(!0),children:"Review learned students"}),i.jsx("button",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>Fe(!0),children:"Clear learned for this period"})]})]}):i.jsx("div",{className:"space-y-3",children:R?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative w-full",style:{perspective:1200},children:i.jsx("button",{type:"button",onClick:()=>p(V=>!V),className:"w-full text-left","aria-label":"Flip flashcard",children:i.jsxs("div",{className:"relative h-[380px] w-full",style:{transformStyle:"preserve-3d",transition:"transform 420ms cubic-bezier(0.2, 0.8, 0.2, 1)",transform:h?"rotateY(180deg)":"rotateY(0deg)"},children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-xl",style:{backfaceVisibility:"hidden"},children:i.jsxs("div",{className:"h-full w-full bg-slate-50 flex items-center justify-center",children:[K?i.jsx("img",{src:K,alt:"",className:"h-full w-full object-cover"}):i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-slate-200 text-2xl font-bold text-slate-700",children:R.fullName.split(" ").slice(0,2).map(V=>{var se;return((se=V[0])==null?void 0:se.toUpperCase())??""}).join("")}),i.jsx("div",{className:"mt-3 text-sm text-slate-500",children:"No photo"})]}),i.jsx("div",{className:"absolute bottom-3 left-0 right-0 text-center text-xs font-semibold text-slate-500",children:"Tap to flip"})]})}),i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-xl",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:i.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center p-6 text-center",children:[i.jsx("div",{className:"text-2xl font-bold leading-tight text-slate-900",children:R.fullName}),i.jsx("div",{className:"mt-2 text-sm text-slate-600",children:"Tap again to see photo"}),i.jsxs("div",{className:"mt-6 w-full max-w-sm space-y-2",children:[i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${v===he?"bg-emerald-600 text-white hover:bg-emerald-700":"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,onClick:V=>{V.preventDefault(),V.stopPropagation(),Wt()},children:" Ive learned this"}),i.jsx("button",{className:`w-full rounded-2xl px-4 py-3 text-sm font-semibold transition ${L===he?"bg-violet-600 text-white hover:bg-violet-700":"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,onClick:V=>{V.preventDefault(),V.stopPropagation(),A()},children:" Still learning"})]})]})})]})})}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("button",{className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:k===0,onClick:ge,children:"Prev"}),i.jsx("div",{className:"px-2 text-xs font-semibold text-slate-500",children:j.length===0?"0 / 0":`${k+1} / ${j.length}`}),i.jsx("button",{className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:j.length===0||k>=j.length-1,onClick:me,children:"Next"})]})]}):i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center space-y-2",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900",children:"No students found."}),i.jsx("div",{className:"text-sm text-slate-600",children:"This period doesnt have any students yet."})]})}),i.jsx(Jf,{open:Ze,title:"Shuffle deck?",body:"This will randomize the order of the current deck once.",confirmText:"Shuffle",cancelText:"Cancel",onConfirm:Ke,onCancel:()=>et(!1)}),i.jsx(Jf,{open:ne,title:"Clear learned students?",body:"This resets learned progress for this period on this device.",confirmText:"Clear",cancelText:"Cancel",danger:!0,onConfirm:Ue,onCancel:()=>Fe(!1)})]})}const xw=.85,yw=900,ww=1200,Sw=4,Nw=60,kw=160;function jw({studentId:e,studentFullName:t,existingPhotoFileId:n,open:r,onClose:s,onAccept:l,onUploadComplete:o,title:u="Take Photo"}){const c=$h(),d=f.useRef(null),y=f.useRef(null),N=f.useRef(null),w=f.useRef(null),j=f.useRef(null),b=f.useRef(!1),k=f.useRef(new Map),Y=f.useRef(null),h=f.useRef(null),p=f.useRef(1),v=f.useRef(null),C=f.useRef(null),[L,O]=f.useState(null),[F,B]=f.useState(!1),[fe,Z]=f.useState(!1),[je,Ze]=f.useState(!1),[et,ne]=f.useState(1),[Fe,$]=f.useState(!1),[he,R]=f.useState(!1),K=f.useRef(null),q=f.useMemo(()=>{if(typeof navigator>"u")return{isIOS:!1,isAndroid:!1};const M=navigator.userAgent||"",U=/iPad|iPhone|iPod/i.test(M)||M.includes("Mac")&&typeof document<"u"&&"ontouchend"in document,G=/Android/i.test(M);return{isIOS:U,isAndroid:G}},[]),me=()=>{k.current.clear(),Y.current=null,v.current&&(cancelAnimationFrame(v.current),v.current=null),C.current=null},ge=()=>{w.current=null,h.current=null,p.current=1,ne(1),Ze(!1),me()},Wt=()=>(K.current||(K.current=document.createElement("canvas")),K.current),A=M=>{const U=Wt(),G=U.getContext("2d");if(!G)return 0;const Q=kw,ue=Math.max(M.width,M.height)/Q,ce=Math.max(1,Math.round(M.width/(ue||1))),Ce=Math.max(1,Math.round(M.height/(ue||1)));U.width=ce,U.height=Ce,G.drawImage(M,0,0,ce,Ce);const be=G.getImageData(0,0,ce,Ce).data;let ze=0;for(let Qe=0;Qe<Ce;Qe++){const Fr=Qe*ce*4;for(let At=0;At<ce;At++){const pt=Fr+At*4,Ln=(be[pt]+be[pt+1]+be[pt+2])/3;if(At<ce-1){const tn=pt+4,On=(be[tn]+be[tn+1]+be[tn+2])/3;ze+=Math.abs(Ln-On)}if(Qe<Ce-1){const tn=pt+ce*4,On=(be[tn]+be[tn+1]+be[tn+2])/3;ze+=Math.abs(Ln-On)}}}return ze},Ke=M=>{const{width:U,height:G}=M;if(!U||!G)return M;const Q=yw/U,ue=ww/G,ce=Math.min(1,Q,ue);if(ce>=.999)return M;const Ce=Math.max(1,Math.round(U*ce)),be=Math.max(1,Math.round(G*ce)),ze=document.createElement("canvas");ze.width=Ce,ze.height=be;const Qe=ze.getContext("2d");return Qe?(Qe.drawImage(M,0,0,Ce,be),ze):M},Ue=async M=>new Promise(U=>{M.toBlob(G=>{if(G){U(G);return}M.toBlob(Q=>U(Q),"image/png")},"image/jpeg",xw)}),We=async M=>{const U=Ke(M);return Ue(U)},V=async M=>{try{const U=await createImageBitmap(M),G=document.createElement("canvas");G.width=U.width,G.height=U.height;const Q=G.getContext("2d");if(!Q)return null;if(Q.drawImage(U,0,0),"close"in U)try{U.close()}catch{}return G}catch{return new Promise(U=>{const G=URL.createObjectURL(M),Q=new Image;Q.onload=()=>{const ue=document.createElement("canvas");ue.width=Q.naturalWidth||Q.width,ue.height=Q.naturalHeight||Q.height;const ce=ue.getContext("2d");if(URL.revokeObjectURL(G),!ce){U(null);return}ce.drawImage(Q,0,0),U(ue)},Q.onerror=()=>{URL.revokeObjectURL(G),U(null)},Q.src=G})}},se=async(M,U)=>{const G=d.current,Q=y.current;if(!G||!Q)return null;const ue=G.videoWidth,ce=G.videoHeight;if(!ue||!ce)return null;Q.width=ue,Q.height=ce;const Ce=Q.getContext("2d");if(!Ce)return null;let be=-1/0,ze=null;for(let Qe=0;Qe<M;Qe++){if(!b.current)return null;Qe===0?await new Promise(At=>requestAnimationFrame(()=>At())):U>0&&await new Promise(At=>setTimeout(At,U)),Ce.drawImage(G,0,0,ue,ce);const Fr=A(Q);if(Fr>=be){be=Fr,ze||(ze=document.createElement("canvas")),ze.width=ue,ze.height=ce;const At=ze.getContext("2d");At&&At.drawImage(Q,0,0,ue,ce)}}return ze||Q},ae=async()=>{if(typeof window>"u")return null;const M=w.current,U=window.ImageCapture;if(!M||!U)return null;try{const G=new U(M);return typeof G.takePhoto!="function"?null:await G.takePhoto()}catch{return null}},Le=()=>{N.current&&(N.current.getTracks().forEach(M=>M.stop()),N.current=null),d.current&&(d.current.srcObject=null),ge()},bt=()=>{L&&URL.revokeObjectURL(L),j.current=null,O(null)},pn=()=>{Le(),bt(),B(!1),$(!1),R(!1),s()},Dn=M=>{const U=h.current;if(!U)return M;let G=Math.min(U.max,Math.max(U.min,M));if(typeof U.step=="number"&&U.step>0){const Q=Math.round((G-U.min)/U.step);G=U.min+Q*U.step,G=Math.min(U.max,Math.max(U.min,G))}return G},gr=M=>{const U=w.current;if(!U)return;const G=Dn(M);C.current=G,!v.current&&(v.current=requestAnimationFrame(()=>{v.current=null;const Q=C.current;C.current=null,typeof Q=="number"&&U.applyConstraints({advanced:[{zoom:Q}]}).then(()=>{p.current=Q,ne(Q)}).catch(()=>{})}))},An=async M=>{var U,G;Z(!0),B(!1),ge();try{let Q;try{Q=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"},width:{ideal:1280},height:{ideal:960},frameRate:{ideal:30}},audio:!1})}catch{Q=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}if(!M()){Q.getTracks().forEach(ce=>ce.stop());return}N.current=Q;const ue=Q.getVideoTracks()[0]||null;if(w.current=ue,ue){const ce=(U=ue.getCapabilities)==null?void 0:U.call(ue),Ce=ce==null?void 0:ce.zoom;if(Ce&&typeof Ce.min=="number"&&typeof Ce.max=="number"){h.current={min:Ce.min,max:Ce.max,step:typeof Ce.step=="number"?Ce.step:void 0};const be=(G=ue.getSettings)==null?void 0:G.call(ue),ze=typeof(be==null?void 0:be.zoom)=="number"?be.zoom:Ce.min,Qe=Dn(ze);p.current=Qe,ne(Qe),Ze(!0)}}if(d.current){d.current.srcObject=Q;try{await d.current.play()}catch{}}}catch{M()&&B(!0),Le()}finally{M()&&Z(!1)}};f.useEffect(()=>{let M=!0;return b.current=r,r?An(()=>M):(Le(),bt(),B(!1),R(!1)),()=>{M=!1,b.current=!1,Le(),bt(),B(!1),R(!1)}},[r]);const en=async()=>{if(!he){R(!0);try{let M=null;if(q.isAndroid){const G=await ae();if(G){const Q=await V(G);Q&&(M=await We(Q))}}if(!M){const G=q.isIOS?Sw:1,Q=q.isIOS?Nw:0,ue=await se(G,Q);ue&&(M=await We(ue))}if(!M)return;j.current=M;const U=URL.createObjectURL(M);O(U),Le()}finally{R(!1)}}},mn=async()=>{if(Fe)return;const M=j.current;if(M){l(M),$(!0);try{const U=n?null:await Ey({studentId:e,fullName:t}),G=await Kx({studentId:e,studentFullName:t,jpegBlob:M,fileId:n||(U==null?void 0:U.fileId)}),Q=Date.now();await Cy({studentId:e,fullName:t,fileId:G.fileId,updatedTime:G.modifiedTime,photoUpdatedAt:Q,blob:M}),o==null||o({fileId:G.fileId,photoUpdatedAt:Q}),pn()}catch(U){$(!1);const Q=(U instanceof Error?U.message:"").toLowerCase();Q.includes("sign in")&&Q.includes("drive")?c({message:"Please reconnect Google Drive to upload photos.",tone:"error"}):c({message:"Couldn't upload the photo. Your preview is still saved here - try again.",tone:"error"})}}},Mr=()=>{bt(),R(!1),An(()=>b.current)},Bl=M=>{if(!(!je||L)&&(M.preventDefault(),M.currentTarget.setPointerCapture(M.pointerId),k.current.set(M.pointerId,{x:M.clientX,y:M.clientY}),k.current.size===2)){const U=Array.from(k.current.values()),G=Math.hypot(U[0].x-U[1].x,U[0].y-U[1].y);Y.current={initialDistance:G,initialZoom:p.current}}},lt=M=>{if(!je||L||!k.current.has(M.pointerId)||(M.preventDefault(),k.current.set(M.pointerId,{x:M.clientX,y:M.clientY}),k.current.size<2||!Y.current))return;const U=Array.from(k.current.values()),G=Math.hypot(U[0].x-U[1].x,U[0].y-U[1].y);if(Y.current.initialDistance<=0)return;const Q=G/Y.current.initialDistance,ue=Y.current.initialZoom*Q;gr(ue)},Wl=M=>{je&&(k.current.delete(M.pointerId),k.current.size<2&&(Y.current=null))};if(!r)return null;const hn=je&&!L;return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:pn}),i.jsxs("div",{className:"relative w-full max-w-md rounded-2xl bg-white p-4 shadow-2xl space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-800",children:u}),i.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700",onClick:pn,"aria-label":"Close",children:""})]}),F?i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Camera unavailable. Check permissions and try again."}),i.jsx("button",{type:"button",className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:pn,children:"Close"})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full aspect-[3/4] rounded-xl bg-slate-100 overflow-hidden flex items-center justify-center",onPointerDown:hn?Bl:void 0,onPointerMove:hn?lt:void 0,onPointerUp:hn?Wl:void 0,onPointerCancel:hn?Wl:void 0,style:hn?{touchAction:"none"}:void 0,children:L?i.jsx("img",{src:L,alt:"",className:"w-full h-full object-cover"}):i.jsx("video",{ref:d,className:"w-full h-full object-cover",playsInline:!0,muted:!0})}),L?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2 text-sm disabled:opacity-50",onClick:Mr,disabled:Fe,children:"Retake"}),i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2 text-sm disabled:opacity-50",onClick:mn,disabled:Fe,children:Fe?"Uploading...":"Accept"})]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2 text-sm disabled:opacity-50",onClick:en,disabled:fe||he,children:he?"Capturing...":"Take Photo"}),i.jsx("button",{type:"button",className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2 text-sm",onClick:pn,children:"Cancel"})]})]})]}),i.jsx("canvas",{ref:y,className:"hidden"})]})}const Xf=!1,qf="592",bw="https://app.classseats.app",Co="cs_mobile_last_drive_file",Zf="cs_mobile_students_mode_v1",ep="cs_mobile_notes_sort_v1",tp="cs_mobile_table_sort_v1",np="cs_mobile_seat_number_sort_v1",Ew="cs_mobile_attendance_edits";function Cw({student:e,attendance:t,points:n,pointsEnabled:r,maxPoints:s,hasNote:l,absenceStreak:o,tardyCount:u,leftEarlyCount:c,onShowAbsenceHelp:d,onShowTardyHelp:y,onShowLeftEarlyHelp:N,seatNumber:w,showSeatNumber:j=!1,statusBg:b,statusLabel:k,tempPhotoUrl:Y,onOpenPhoto:h,onOpenMenu:p,driveClient:v,driveSession:C}){const L=Bh(n,s),{photoUrl:O}=Uh({studentId:e.id,fullName:e.fullName,photoFileId:e.photoFileId,photoUpdatedAt:e.photoUpdatedAt,driveClient:v,driveSession:C}),[F,...B]=(e.fullName||"").split(" "),fe=B.join(" "),Z=(()=>{switch(t){case"present":return"";case"absent":return"";case"tardy":return"";case"left_early":return"";default:return""}})(),je=k(t),Ze=Y||O,et=t==="absent"&&(o||0)>=2,ne=t==="tardy"&&(u||0)>0,Fe=t==="left_early"&&(c||0)>0;return i.jsx("div",{className:`w-full rounded-2xl border px-4 py-3 shadow-sm ${b(t)}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[j&&i.jsx("div",{className:"flex h-[80px] w-8 shrink-0 items-center justify-center text-sm font-semibold text-slate-500",children:w||""}),i.jsx(hx,{studentId:e.id,hasPhoto:!!Ze,src:Ze,onClick:h,widthPx:60,heightPx:80}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"text-left min-w-0 flex-1",children:[i.jsx("div",{className:"text-base font-bold text-slate-900 leading-tight break-words",children:F}),i.jsx("div",{className:"text-base font-bold text-slate-900 leading-tight break-words",children:fe||""})]}),i.jsx("button",{className:"text-xl text-slate-600 px-3 py-2 rounded-full hover:bg-slate-200 flex-shrink-0",onClick:$=>{$.stopPropagation(),p()},children:""})]}),i.jsxs("div",{className:"mt-1 flex items-center justify-between text-sm px-1",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:Z}),i.jsx("span",{className:"text-slate-700",children:je})]}),(et||ne||Fe)&&i.jsxs("div",{className:"flex items-center gap-2",children:[et&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-rose-700 bg-rose-100 border border-rose-200 rounded px-1.5 py-0.5",onClick:d,children:["A",o]}),ne&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-amber-700 bg-amber-100 border border-amber-200 rounded px-1.5 py-0.5",onClick:y,children:["T",u]}),Fe&&i.jsxs("button",{type:"button",className:"text-[11px] font-semibold text-orange-700 bg-orange-100 border border-orange-200 rounded px-1.5 py-0.5",onClick:N,children:["LE",c]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[r&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-lg",children:L.emoji}),i.jsx("span",{className:"text-emerald-700 font-semibold",children:n})]}),l&&i.jsx("span",{className:"text-indigo-600 text-lg",children:""})]})]})]})]})})}function _w(e,t,n){var N,w,j;if(!(e!=null&&e.activeGrouping)||!(e!=null&&e.tableAssignments))return null;let r=-1,s=-1;if(e.activeGrouping.forEach((b,k)=>{const Y=b==null?void 0:b.findIndex(h=>String(h)===String(n));Y!==-1&&(r=k,s=Y)}),r===-1||s===-1)return null;const l=e.tableAssignments[String(r)];if(!l)return null;const o=String(l),u=((N=e.tableNumbering)==null?void 0:N.perTableSeatNumbers)&&e.tableNumbering.perTableSeatNumbers[o],c=(j=(w=t==null?void 0:t.tables)==null?void 0:w.find(b=>String(b.id)===o))==null?void 0:j.seatNumbers,d=u||c;if(!d)return null;const y=d[s];return y!=null?String(y):null}function Pw(){var yd,wd,Sd;const e=$h(),t=ow(),n=f.useMemo(()=>mx(),[]),r=f.useMemo(()=>({kind:"web",openExternal:a=>typeof window<"u"?window.open(a,"_blank","noopener,noreferrer"):null}),[]),s=!n.canUseDriveSync,l="Drive sync is disabled.",[o,u]=f.useState(null),[c,d]=f.useState([]),[y,N]=f.useState(!1),[w,j]=f.useState(null),[b,k]=f.useState(()=>s?l:null),[Y,h]=f.useState(!1),[p,v]=f.useState(null),[C,L]=f.useState(!1),[O,F]=f.useState([]),[B,fe]=f.useState(""),[Z,je]=f.useState(!1),[Ze,et]=f.useState(!1),[ne,Fe]=f.useState(null),[$,he]=f.useState(null),[R,K]=f.useState(!1),[q,me]=f.useState(!1),[ge,Wt]=f.useState(null),[A,Ke]=f.useState(null),[Ue,We]=f.useState({}),V=f.useRef({}),[se,ae]=f.useState({}),[Le,bt]=f.useState({}),[pn,Dn]=f.useState({}),[gr,An]=f.useState(null),[en,mn]=f.useState({note:"",delta:0,reason:""}),[Mr,Bl]=f.useState(""),[lt,Wl]=f.useState({pointsEnabled:!1,startingPoints:50,currentPoints:0,predictedPoints:0}),[hn,M]=f.useState(null),[U,G]=f.useState(""),[Q,ue]=f.useState(null),[ce,Ce]=f.useState(null),[be,ze]=f.useState({}),Qe=f.useRef({}),[Fr,At]=f.useState({}),[pt,Ln]=f.useState(null),[tn,On]=f.useState(0),[zc,Hl]=f.useState(null),[$c,$i]=f.useState(""),[mt,Vl]=f.useState(null),[zw,Gh]=f.useState([]),[$w,Bc]=f.useState(!1),[Bw,Bi]=f.useState(null),[Ww,Hw]=f.useState(!1),[Oe,Ht]=f.useState(null),[Lt,Wc]=f.useState(null),[Hc,Vc]=f.useState(null),[Mn,Ls]=f.useState(null),[Wi,Ur]=f.useState(null),[Os,Gc]=f.useState(!1),[Gl,Ms]=f.useState(null),[gn,ot]=f.useState(!1),[Vw,vn]=f.useState(null),Hi=typeof navigator<"u"?navigator.onLine:!0,[Kc,Fs]=f.useState(Hi),[Qc,Vi]=f.useState(Hi),[He,Us]=f.useState(!Hi),Kh=f.useRef(null),Qh=f.useRef(!1),Fn=f.useRef(!1),Yh=f.useRef(15e3),Jh=f.useRef(0),Yc=f.useRef(!1),Un=f.useRef(!1),zr=f.useRef(!1),Gi=f.useRef(new Set),Et=f.useRef(null),Jc=f.useRef(null),Xc=f.useRef(void 0),qc=f.useRef(null),Ki=()=>{const a=new Date,m=a.getFullYear(),g=String(a.getMonth()+1).padStart(2,"0"),S=String(a.getDate()).padStart(2,"0");return`${m}-${g}-${S}`},[re,Kl]=f.useState(Ki()),[vr,Xh]=f.useState("table"),[Ct,Qi]=f.useState(()=>{try{const a=localStorage.getItem(Zf);return a==="notes"||a==="flashcards"?a:"attendance"}catch{return"attendance"}});f.useEffect(()=>{try{localStorage.setItem(Zf,Ct)}catch{}},[Ct]);const[Ql,qh]=f.useState(()=>{try{return localStorage.getItem(ep)==="last-first"?"last-first":"first-last"}catch{return"first-last"}});f.useEffect(()=>{try{localStorage.setItem(ep,Ql)}catch{}},[Ql]);const[zs,Zh]=f.useState(()=>{try{return localStorage.getItem(tp)==="desc"?"desc":"asc"}catch{return"asc"}});f.useEffect(()=>{try{localStorage.setItem(tp,zs)}catch{}},[zs]);const[Yl,eg]=f.useState(()=>{try{return localStorage.getItem(np)==="desc"?"desc":"asc"}catch{return"asc"}});f.useEffect(()=>{try{localStorage.setItem(np,Yl)}catch{}},[Yl]);const tg=f.useMemo(()=>new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),[]);f.useEffect(()=>{Qe.current=be},[be]),f.useEffect(()=>()=>{Object.values(Qe.current).forEach(a=>URL.revokeObjectURL(a))},[]);const[ht,zn]=f.useState(!1),$n=f.useRef(0),it=f.useRef(null),Zc=f.useRef({}),ed=f.useRef({}),Yi=f.useRef(null),Jl=f.useRef(!1),Ji=f.useRef(!1),[td,$s]=f.useState(!1),Xl=f.useRef(0),xn=f.useRef(null),nd=1500,$r=f.useRef(null),Xi=f.useCallback(a=>a?Zc.current[a]??null:null,[]),gt=f.useCallback((a,m)=>{a&&(Zc.current[a]=m||null)},[]),ql=f.useCallback(a=>a||"__local__",[]),rd=f.useCallback(a=>ed.current[ql(a)]??null,[ql]),Zl=f.useCallback((a,m)=>{m&&(ed.current[ql(a)]=m)},[ql]),Br=f.useCallback(a=>a?`${Ew}:${a}`:null,[]),sd=f.useCallback(a=>{const m=Br(a);if(!m)return{};try{const g=localStorage.getItem(m);if(!g)return{};const S=JSON.parse(g);if(!S||typeof S!="object")return{};const x={};return Object.entries(S).forEach(([_,P])=>{!P||typeof P!="object"||Object.entries(P).forEach(([D,W])=>{!W||typeof W!="object"||Object.entries(W).forEach(([ee,J])=>{let T;if(J==null?T=null:typeof J=="string"?T=J:typeof J=="object"&&(J.status==null&&(T=null),typeof J.status=="string"&&(T=J.status)),T===void 0)return;const X=typeof J=="object"&&typeof J.ts=="number"?J.ts:Date.now();x[_]||(x[_]={}),x[_][D]||(x[_][D]={}),x[_][D][ee]={status:T==="unmarked"?null:T,ts:X}})})}),x}catch{return{}}},[Br]),ld=f.useCallback((a,m)=>{const g=Br(a);if(g)try{localStorage.setItem(g,JSON.stringify(m))}catch{}},[Br]),Wr=f.useCallback(a=>{const m=Br(a);if(m)try{localStorage.removeItem(m)}catch{}},[Br]),Hr=f.useCallback((a,m,g)=>{const S=re;V.current[a]||(V.current[a]={}),V.current[a][S]||(V.current[a][S]={}),V.current[a][S][m]={status:g==="unmarked"?null:g,ts:Date.now()},ld(it.current,V.current)},[ld,re]),eo=f.useCallback((a,m,g)=>{var _;const S=(_=V.current[a])==null?void 0:_[m];if(!S)return g;const x={...g};return Object.entries(S).forEach(([P,D])=>{const W=(D==null?void 0:D.status)??null;!W||W==="unmarked"?delete x[P]:x[P]=W}),x},[]),od=a=>{var m;return JSON.stringify({periodsState:((m=a.periodsState)==null?void 0:m.periods)||[],students:a.students||[]})},xr=f.useRef(0),[Gw,Bs]=f.useState("unknown"),[Kw,qi]=f.useState(0);f.useCallback(async()=>{const a=await ys(o);return a&&u(a),a},[o]);const nn=f.useCallback(a=>{const m=`${new Date().toISOString()} ${a}`;F(g=>[m,...g].slice(0,200))},[]);f.useEffect(()=>{s&&k(l)},[l,s]);const ng=f.useCallback(async()=>{var m;const a=await Ex();if(v(a),nn(`startup info: state=${a.state} sessionLoaded=${a.sessionLoaded} hasRefresh=${a.hasRefresh} expiresAt=${a.expiresAt} source=${a.source} lastWriteAt=${a.lastWriteAt} lastWriteReason=${a.lastWriteReason}`),a.state==="ok"){const g=await Px();g&&(u(g),(m=g.profile)!=null&&m.email&&k(null))}return a},[nn]),Vr=f.useCallback(async a=>{const m=(o==null?void 0:o.expiresAt)||null,g=await ys(o);return nn(`${a}: ensureFreshDriveSession ok=${!!g} before=${m} new=${g==null?void 0:g.expiresAt} hasRefresh=${!!(g!=null&&g.refreshToken)}`),g&&(u(g),h(!1)),g},[o,nn]),rg=f.useCallback(()=>{Xl.current+=1,xn.current&&window.clearTimeout(xn.current),xn.current=window.setTimeout(()=>{Xl.current=0,xn.current=null},2e3),Xl.current>=5&&(L(a=>!a),Xl.current=0,xn.current&&(window.clearTimeout(xn.current),xn.current=null))},[]),sg=()=>{const a=new URL(bw);new URL(window.location.href).searchParams.forEach((g,S)=>a.searchParams.set(S,g)),a.searchParams.set("from","mobile"),window.location.assign(a.toString())},lg=a=>{var S,x;if(!A)return;const m=A.students.find(_=>String(_.id)===String(a));if(!m)return;const g=((S=m.periodIds)==null?void 0:S[0])||mt||((x=A.periods[0])!=null&&x.id?String(A.periods[0].id):"");Ls({name:m.fullName,gender:m.gender||"F",periodId:g?String(g):""}),Vc({id:String(a)})},to=()=>{Vc(null),Ls(null)},og=a=>{if(!A)return;const m=A.students.find(S=>String(S.id)===String(a));!m||!window.confirm(`Delete ${m.fullName}? This removes them from this class list.`)||(Gi.current.add(String(a)),Ke(S=>{if(!S)return S;const x=S.students.filter(P=>String(P.id)!==String(a)),_=S.periods.map(P=>{const D={...P.attendance||{}};Object.keys(D).forEach(X=>{const E={...D[X]||{}};delete E[String(a)],Object.keys(E).length===0?delete D[X]:D[X]=E});const W={...P.behaviorNotes||{}};Object.keys(W).forEach(X=>{const E={...W[X]||{}};delete E[String(a)],Object.keys(E).length===0?delete W[X]:W[X]=E});const ee={...P.pointsByStudent||{}};delete ee[String(a)];const J={...P.attendanceResets||{}};delete J[String(a)];const T=P.activeGrouping?P.activeGrouping.map(X=>X.filter(E=>String(E)!==String(a))):P.activeGrouping;return{...P,attendance:D,behaviorNotes:W,pointsByStudent:ee,attendanceResets:J,activeGrouping:T}});return{...S,students:x,periods:_}}),We(S=>{const x={...S||{}};return Object.keys(x).forEach(_=>{if(x[_]){const P={...x[_]||{}};delete P[String(a)],x[_]=P}}),x}),ae(S=>{const x={...S||{}};return Object.keys(x).forEach(_=>{if(x[_]){const P={...x[_]||{}};delete P[String(a)],x[_]=P}}),x}),bt(S=>{const x={...S||{}};return Object.keys(x).forEach(_=>{if(x[_]){const P={...x[_]||{}};delete P[String(a)],x[_]=P}}),x}),Dn(S=>{const x={...S||{}};return Object.keys(x).forEach(_=>{x[_]=(x[_]||[]).filter(P=>String(P.studentId)!==String(a))}),x}),at(),vt({silent:!0}),Ht(null),Wc(null),to())};f.useEffect(()=>()=>{xn.current&&window.clearTimeout(xn.current)},[]),f.useEffect(()=>{Us(!Kc||!Qc)},[Kc,Qc]);const id=f.useCallback(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("classseats_debug_drive")==="1"}catch{return!1}},[]),Ws=f.useCallback(a=>{id()&&console.debug(a.startsWith("[Ping]")?a:`[Ping] ${a}`)},[id]);f.useEffect(()=>{Fn.current=!1;const a=Kh,m=Qh,g=Yh,S=Jh,x=()=>{a.current&&(window.clearTimeout(a.current),a.current=null)},_=J=>{if(Fn.current)return;x();const T=typeof J=="number"?J:g.current;Ws(`[Ping] next ${T}`),a.current=window.setTimeout(()=>{a.current=null,P()},T)},P=async()=>{if(Fn.current)return;if(S.current=Date.now(),Ws("[Ping] tick"),typeof document<"u"&&document.visibilityState!=="visible"){_(5e3);return}if(m.current){_(2e3);return}m.current=!0;const J=new AbortController,T=window.setTimeout(()=>J.abort(),5e3),X=(()=>{try{return new URL(`/ping.txt?t=${Date.now()}`,window.location.origin).toString()}catch{return`/ping.txt?t=${Date.now()}`}})();let E=!1;try{const z=await fetch(X,{cache:"no-store",signal:J.signal});E=!!(z!=null&&z.ok),E?(Fs(!0),Vi(!0),Us(!1),g.current=15e3,Ws("[Ping] ok")):(Fs(!1),Vi(!1),Us(!0),g.current=Math.min(6e4,g.current*2),Ws(`[Ping] fail status=${z==null?void 0:z.status}`))}catch(z){Fs(!1),Vi(!1),Us(!0),g.current=Math.min(6e4,g.current*2),Ws(`[Ping] fail ${(z==null?void 0:z.message)||z}`)}finally{window.clearTimeout(T),m.current=!1,Fn.current||_()}},D=()=>{Fn.current||(Fs(!0),P())},W=()=>{Fn.current||(Fs(!1),Us(!0),_(2e3))},ee=()=>{Fn.current||typeof document<"u"&&document.visibilityState==="visible"&&P()};return P(),window.addEventListener("online",D),window.addEventListener("offline",W),document.addEventListener("visibilitychange",ee),()=>{Fn.current=!0,x(),window.removeEventListener("online",D),window.removeEventListener("offline",W),document.removeEventListener("visibilitychange",ee)}},[]),f.useEffect(()=>{if(!A)return;const a=Xc.current!==A.periods,m=qc.current!==re;!a&&!m||(Xc.current=A.periods,qc.current=re,We(A.periods.reduce((g,S)=>{var _;const x=(_=S.attendance)!=null&&_[re]?{...S.attendance[re]}:{};return g[S.id]=eo(String(S.id),re,x),g},{})),ae(A.periods.reduce((g,S)=>(g[S.id]=Zi(S.behaviorNotes,re),g),{})))},[A,re,eo]);const ad=f.useCallback(a=>{const m={};return!a||typeof a!="object"||Object.entries(a).forEach(([g,S])=>{if(!S||typeof S!="object")return;const x={},_=S.note&&typeof S.note=="object"?S.note:S;Object.entries(_).forEach(([P,D])=>{D&&typeof D=="object"&&typeof D.note=="string"&&(x[String(P)]={note:D.note,timestamp:D.timestamp||new Date().toISOString()})}),Object.keys(x).length>0&&(m[g]=x)}),m},[]),Gr=a=>e({tone:"success",message:a}),Ye=a=>e({tone:"error",message:a}),Kr=a=>e({tone:"info",message:a}),Hs=["unmarked","absent","tardy","left_early","present"],no=f.useCallback(a=>{if(!a)return!1;const m=a.toLowerCase();return m.includes("401")||m.includes("unauthorized")||m.includes("403")||m.includes("sign in with google drive first")},[]),ig=a=>{switch(a){case"present":return"bg-emerald-50 border-emerald-100";case"absent":return"bg-rose-50 border-rose-100";case"tardy":return"bg-amber-50 border-amber-100";case"left_early":return"bg-blue-50 border-blue-100";default:return"bg-slate-50 border-slate-200"}},Zi=(a,m)=>{const g=a==null?void 0:a[m];if(!g||typeof g!="object")return{};const S=g.note&&typeof g.note=="object"?g.note:g,x={};return Object.entries(S||{}).forEach(([_,P])=>{P&&typeof P=="object"&&typeof P.note=="string"&&(x[String(_)]=P.note)}),x},ud=a=>{switch(a){case"present":return"Present";case"absent":return"Absent";case"tardy":return"Tardy";case"left_early":return"Left Early";default:return"Unmarked"}},ea=(a,m)=>Bh(a,m).emoji,ag=()=>`${Date.now()}-${Math.random().toString(36).slice(2)}`,ug=a=>{const m=String(a.getMonth()+1).padStart(2,"0"),g=String(a.getDate()).padStart(2,"0");return`${m}-${g}-${a.getFullYear()}`},ta=a=>`https://docs.google.com/document/d/${a}/edit`,na=f.useCallback(a=>{if(!a)return;const m=Date.now(),g=Jc.current;if(g&&g.url===a&&m-g.at<600)return;Jc.current={url:a,at:m};try{if(r!=null&&r.openExternal){r.openExternal(a);return}}catch{}window.open(a,"_blank","noopener,noreferrer")||k==null||k("Pop-up blocked  please allow pop-ups to open Google Docs.")},[r]),Bn=f.useCallback(a=>cw(a),[]),Ie=f.useCallback(async(a,m="preflight")=>{if(s)return k(l),null;if(He)return k("Offline  will sync when back online."),h(!0),nn(`${m}: offline; skipping refresh`),null;try{const g=await Vr(m);if(g)return g}catch(g){console.warn("[Drive] refresh failed",g),nn(`${m}: refresh failed ${(g==null?void 0:g.message)||g}`)}if(!a)return h(!0),k("Reconnect to Google Drive to continue syncing."),nn(`${m}: interactive=false; would trigger OAuth if allowed`),null;nn(`triggerOAuth: reason=${m} hadSession=${!!o} hasRefresh=${!!(o!=null&&o.refreshToken)}`);try{await Mx()}catch(g){Ye((g==null?void 0:g.message)||"Google sign-in was cancelled.")}return null},[l,o,s,Ye,He,nn,Vr]),ro=f.useCallback(async(a,m,g)=>{let S=!1;const x=async()=>{let _=g;if(_||(_=await Ie(!0,`${m}-download`)),!_)throw new Error("Reconnect to Google Drive to continue.");try{return{data:await Aa(_.accessToken,a)}}catch(P){const D=(P==null?void 0:P.message)||"";if(!S&&no(D))return S=!0,tl("[Drive][Mobile] auth error on download, retrying once",{context:m,error:D}),g=null,x();throw P}};return x()},[Ie,no]),cd=f.useCallback(async(a,m,g,S)=>{let x=!1;const _=async()=>{let P=S;if(P||(P=await Ie(!0,`${g}-upload`)),!P)throw new Error("Reconnect to Google Drive to continue.");try{return await Yx(P.accessToken,a,m)}catch(D){const W=(D==null?void 0:D.message)||"";if(!x&&no(W))return x=!0,tl("[Drive][Mobile] auth error on upload, retrying once",{context:g,error:W}),S=null,_();throw D}};return _()},[Ie,no]),Wn=f.useCallback((a,m,g)=>{var J;if(!((J=a==null?void 0:a.periodsState)!=null&&J.periods)||!(a!=null&&a.students))return"failed";const S=od(a),x=(m==null?void 0:m.id)||it.current;if(x&&!(g!=null&&g.forceApply)){const T=pw({incomingUpdatedAt:a.updatedAt,lastAppliedUpdatedAt:rd(x),incomingRevisionId:(m==null?void 0:m.revisionId)||null,lastRevisionId:Xi(x)??null});if(tl("[Sync][Mobile] apply decision",{fileKey:x,decision:T}),T.action==="skip")return m&&(it.current=m.id,he(m),gt(m.id,m.revisionId||null)),xr.current=Date.now(),"skipped"}$n.current=0,Un.current=!1,zr.current=!1,zn(!1),ot(!1),vn(null),$s(!1),Et.current&&(window.clearTimeout(Et.current),Et.current=null);let _=!1,P=0;g!=null&&g.clearAttendanceEdits&&x?(V.current={},Wr(x)):(V.current=sd(x),Object.values(V.current).forEach(T=>{Object.values(T||{}).forEach(X=>{Object.values(X||{}).forEach(E=>{E&&(_=!0,typeof E.ts=="number"&&(P=Math.max(P,E.ts)))})})}),P&&($r.current=P));const D=(a.layouts||[]).reduce((T,X)=>(T[String(X.id)]={id:String(X.id),name:X.name,tables:(X.tables||[]).map(E=>({id:String(E.id),name:E.name||"Table",seatNumbers:Array.isArray(E.seatNumbers)?E.seatNumbers:void 0}))},T),{}),W=a.periodsState.periods.map(T=>({id:String(T.id),name:T.name,layoutId:T.layoutId||null,tableAssignments:T.tableAssignments||{},activeGrouping:T.activeGrouping||[],tableNumbering:T.tableNumbering||void 0,attendance:T.attendance||{},attendanceResets:T.attendanceResets||{},behaviorNotes:ad(T.behaviorNotes),pointsByStudent:T.pointsByStudent||{},pointsEnabled:T.pointsEnabled??!1,startingPoints:T.startingPoints??50,pointsHistory:T.pointsHistory||[]})),ee=(a.students||[]).map(T=>{var X;return{id:String(T.id),fullName:T.fullName||T.name||"Student",gender:typeof T.gender=="string"?T.gender:void 0,periodIds:((X=T.periodIds)==null?void 0:X.map(E=>String(E)))||[],profileUpdatedAt:typeof T.profileUpdatedAt=="string"?T.profileUpdatedAt:void 0,quickNote:typeof T.quickNote=="string"?T.quickNote:void 0,quickNoteUpdatedAt:typeof T.quickNoteUpdatedAt=="string"?T.quickNoteUpdatedAt:void 0,photoFileId:typeof T.photoFileId=="string"?T.photoFileId:T.photoFileId==null?null:String(T.photoFileId),photoUpdatedAt:(()=>{if(typeof T.photoUpdatedAt=="number")return T.photoUpdatedAt;if(typeof T.photoUpdatedAt=="string"){const E=Number.parseInt(T.photoUpdatedAt,10);return Number.isFinite(E)?E:null}return null})(),docs:Array.isArray(T.docs)?T.docs.map(E=>({...E,id:String(E.id),driveFileId:String(E.driveFileId)})):[]}});return Ke({periods:W,students:ee,layouts:D}),Vl(T=>{var te;const X=T?String(T):null,E=a.periodsState.currentId?String(a.periodsState.currentId):null;return[X,E,((te=W[0])==null?void 0:te.id)||null].filter(Boolean).find(ve=>W.some(De=>String(De.id)===ve))||null}),We(W.reduce((T,X)=>{var z;const E=(z=X.attendance)!=null&&z[re]?{...X.attendance[re]}:{};return T[X.id]=eo(String(X.id),re,E),T},{})),ae(W.reduce((T,X)=>(T[X.id]=Zi(X.behaviorNotes,re),T),{})),bt(W.reduce((T,X)=>{var z;const E=X.pointsByStudent?{...X.pointsByStudent}:{};return X.pointsEnabled&&((z=X.studentsIds)==null||z.forEach(le=>{E[le]===void 0&&(E[le]=X.startingPoints??50)})),T[X.id]=E,T},{})),_&&(zn(!0),ot(!0)),Yi.current=S,Bs(a.lastWriter||"unknown"),m?(it.current=m.id,he(m),gt(m.id,m.revisionId||null)):gt(it.current,null),Ms(null),qi(T=>T+1),Zl(x,a.updatedAt),xr.current=Date.now(),"applied"},[re,rd,ad,Zi,eo,sd,Wr,We,ae,bt,Vl,Ke,zn,ot,he,gt,vn,$s,Bs,Ms,qi,Zl]),at=f.useCallback(()=>{$n.current+=1,$r.current=Date.now(),zn(!0),ot(!0)},[]),ra=f.useCallback((a,m,g)=>{Ke(S=>S&&{...S,periods:S.periods.map(x=>{if(String(x.id)!==String(a))return x;const _={...x.attendanceResets||{}},P={..._[String(m)]||{}};return P[g]=re,_[String(m)]=P,{...x,attendanceResets:_}})}),at()},[at,re]),sa=f.useCallback((a,m,g)=>{We(S=>{const x={...S||{}};return x[a]={...x[a]||{}},g==="unmarked"?delete x[a][m]:x[a][m]=g,x}),Hr(a,m,g),at()},[Hr,at]);f.useCallback((a,m)=>{var _;const g=((_=Ue[a])==null?void 0:_[m])||"unmarked",S=Hs.indexOf(g),x=Hs[(S+1)%Hs.length];sa(a,m,x)},[Ue,sa,Hs]);const so=f.useCallback((a,m)=>{We(g=>{const S={...g||{}};return S[a]={...S[a]||{}},m.forEach(x=>{S[a][x]||(S[a][x]="present",Hr(a,x,"present"))}),S}),at()},[Hr,at]),cg=f.useCallback((a,m,g,S)=>{if(g===0||m.length===0)return;const x=(S==null?void 0:S.trim())||"Bulk points update",_=A==null?void 0:A.periods.find(D=>D.id===a),P=(_==null?void 0:_.startingPoints)??50;bt(D=>{const W={...D||{}};return W[a]={...W[a]||{}},m.forEach(ee=>{const J=W[a][ee]??P;W[a][ee]=Math.max(0,J+g)}),W}),Dn(D=>{const W={...D||{}},ee=W[a]?[...W[a]]:[];return m.forEach(J=>ee.push({studentId:J,delta:g,reason:x,date:re})),W[a]=ee,W}),at()},[A==null?void 0:A.periods,re,at]),dd=f.useCallback(a=>{We(g=>{const S={...g||{}};return S[a]={},S}),((A==null?void 0:A.students.filter(g=>(g.periodIds||[]).some(S=>String(S)===String(a))))||[]).forEach(g=>{Hr(a,String(g.id),"unmarked")}),Kr("Reset attendance to unmarked for this date."),at()},[A==null?void 0:A.students,Hr,Kr,at]),dg=f.useCallback(()=>{if(!gr)return;const{periodId:a,studentId:m}=gr,{note:g,delta:S,reason:x}=en,_=lt;if(_.pointsEnabled&&S!==0&&!x.trim()){Ye("Please provide a reason when changing points.");return}ae(P=>{const D={...P||{}};return D[a]={...D[a]||{}},g.trim()?D[a][m]=g.trim():delete D[a][m],D}),_.pointsEnabled&&S!==0&&(bt(P=>{const D={...P||{}};D[a]={...D[a]||{}};const W=D[a][m]??_.startingPoints??0,ee=Math.max(0,W+S);return D[a][m]=ee,D}),Dn(P=>{const D={...P||{}},W=D[a]?[...D[a]]:[];return W.push({studentId:m,delta:S,reason:x||"Behavior note",date:re}),D[a]=W,D})),at(),An(null),mn({note:"",delta:0,reason:""})},[gr,en,lt,at,ae,bt,Ye]),fd=f.useCallback((a,m,g)=>{var D,W;const S=((D=se[a])==null?void 0:D[m])||"",x=A==null?void 0:A.periods.find(ee=>ee.id===a),_=(x==null?void 0:x.startingPoints)??50,P=((W=Le[a])==null?void 0:W[m])??_;mn({note:S,delta:0,reason:""}),Wl({pointsEnabled:!!(x!=null&&x.pointsEnabled),startingPoints:_,currentPoints:P,predictedPoints:P}),An({periodId:a,studentId:m,studentName:g})},[se,Le,A]),fg=f.useCallback((a,m,g)=>{fd(a,m,g)},[fd]);f.useEffect(()=>{if(s){k(l);return}let a=!0;return(async()=>{await ng();const g=await Fx().catch(()=>null);if(!g||!a)return;const S=await ys(g),x=S||g;if(nn(`startup refresh result: ok=${!!S} expiresAt=${S==null?void 0:S.expiresAt}`),!!a&&(u(x),!Yc.current)){Yc.current=!0;try{const _=localStorage.getItem(Co);if(!_){Jl.current=!0;return}const P=JSON.parse(_);if(P!=null&&P.id&&(P!=null&&P.name)){Ji.current=!0;const D={id:P.id,name:P.name,modifiedTime:P.modifiedTime,size:P.size,revisionId:P.revisionId};Fe(D),k(`Restoring ${D.name}`);const W=await Aa(g.accessToken,D.id),ee=typeof W=="string"?JSON.parse(W):W,J=Bn(ee);if(!J)throw new Error("Drive file could not be parsed.");const T=Wn(J,D);T==="applied"?(he(D),k(`Loaded ${D.name} from Drive.`),Ms(new Date().toISOString())):T==="skipped"&&(he(D),k("Drive file is older than current data  keeping existing state."))}Jl.current=!0}catch(_){console.error("[Drive] Restore failed",_),k("Google sign-in failed. Please try again."),Ji.current=!1,Jl.current=!0}}})(),()=>{a=!1}},[]),f.useEffect(()=>{s||o&&(R||A||$!=null&&$.id||Jl.current&&(Ji.current||K(!0)))},[$,o,s,A,R]),f.useEffect(()=>{const a=window.setInterval(async()=>{if(!o)return;const m=await Vr("timer");m&&u(m)},3e5);return()=>window.clearInterval(a)},[o,Vr]),f.useEffect(()=>{const a=async()=>{if(!o)return;const m=await Vr("visibility");m&&u(m)};return document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)},[o,Vr]),f.useEffect(()=>{if(y){const a=window.setTimeout(()=>{N(!1),j("Still loading Drive files. Try Sign in with Google then tap Refresh Cloud Files.")},12e3);return Wt(a),()=>window.clearTimeout(a)}ge&&(window.clearTimeout(ge),Wt(null)),Et.current&&(window.clearTimeout(Et.current),Et.current=null)},[y,ge]);const pg=f.useCallback(()=>{Ux(),u(null),d([]),Fe(null),he(null),k(null),Kr("Signed out of Google Drive."),xi("drive-disconnect")},[Kr,xi]),mg=f.useCallback(async()=>{var a;!$||!((a=window.desktopBridge)!=null&&a.uploadDriveFile)||confirm(`Delete ${$.name} from Drive? This cannot be undone.`)&&(await window.desktopBridge.uploadDriveFile({fileId:$.id,content:JSON.stringify({deleted:!0,message:"File deleted by user."})}),Wr($.id),V.current={},Ke(null),We({}),ae({}),bt({}),Dn({}),he(null),Vl(null),k("Deleted active file from Drive."))},[$,Wr]);f.useCallback(async()=>{},[Wn,Bn,he,gt]);const hg=f.useCallback(async(a=!0,m=!1)=>{if(!(y&&!m)){N(!0),j(null);try{const g=await Ie(a,"refreshFiles");if(!g){j("Sign in with Google to view cloud files.");return}const S=await Bf(g.accessToken);d(S),k(null)}catch(g){const S=(g==null?void 0:g.message)||"Unable to load Drive files.";j(S),Ye(S)}finally{N(!1)}}},[Ie,Ye,y]);f.useCallback(async()=>{Bc(!0),Bi(null);try{const a=await Ie(!0,"importList");if(!a){Bi("Sign in first to import.");return}const m=await Jx(a.accessToken);Gh(m)}catch(a){const m=(a==null?void 0:a.message)||"Unable to list Drive files.";Bi(m),Ye(m)}finally{Bc(!1)}},[Ie,Ye]);const gg=f.useCallback(async()=>{if(!ne){j("Select a cloud file first.");return}if(Un.current){j("Sync in progress. Please wait.");return}if(ht||gn)if(window.confirm("You have unsynced changes. Sync them to Drive before switching files? Click OK to sync, Cancel to discard changes.")){if(await vt({silent:!0}),ht||gn){j("Sync did not complete. Try again before switching files.");return}}else{if(!window.confirm("Discard unsynced changes and load the selected file?"))return;$n.current=0,zn(!1),ot(!1),vn(null);const S=($==null?void 0:$.id)||it.current;S&&Wr(S),V.current={}}if(await Ie(!0,"loadSelected")){et(!0);try{const m=await ro(ne.id,"loadSelected"),g=typeof m.data=="string"?JSON.parse(m.data):m.data,S=Bn(g);if(!S)throw new Error("File could not be parsed.");const x=Wn(S,ne);if(x==="applied")k(`Loaded ${ne.name}. Data available locally.`);else if(x==="skipped")k("Drive file is older than current data. Keeping existing data.");else throw new Error("File could not be parsed.");localStorage.setItem(Co,JSON.stringify({id:ne.id,name:ne.name,modifiedTime:ne.modifiedTime,size:ne.size,revisionId:ne.revisionId})),Gr(`Loaded ${ne.name} from Drive.`)}catch(m){const g=(m==null?void 0:m.message)||"Unable to load Drive file.";j(g),Ye(g)}finally{et(!1)}}},[Ie,ne,Ye,Gr,Wn,Bn,ht,gn,ro,Wr,$]),vg=f.useCallback(async()=>{const a=B.trim();if(!a){j("Enter a file name first.");return}const m=await Ie(!0,"createFile");if(m){je(!0),j(null);try{const S={...iw(void 0,void 0,A==null?void 0:A.students),lastWriter:"mobile",updatedAt:new Date().toISOString()},x=await Qx(m.accessToken,a,JSON.stringify(S,null,2));d(_=>[x,..._]),he(x),it.current=x.id,gt(x.id,x.revisionId||null),Zl(x.id,S.updatedAt),Fe(x),fe(""),localStorage.setItem(Co,JSON.stringify({id:x.id,name:x.name,modifiedTime:x.modifiedTime,size:x.size,revisionId:x.revisionId})),Gr(`Created ${x.name} in Drive.`)}catch(g){const S=(g==null?void 0:g.message)||"Unable to create Drive file.";j(S),Ye(S)}finally{je(!1)}}},[B,Ie,A,Zl,Ye,Gr]),pd=f.useCallback((a,m)=>{const g={...a||{}};return Object.entries(m||{}).forEach(([S,x])=>{if(!x||typeof x!="object")return;const _=g[S]||{},P={..._};["absent","tardy","leftEarly"].forEach(D=>{const W=x[D],ee=_[D];W&&(!ee||W>ee)?P[D]=W:ee&&(P[D]=ee)}),g[S]=P}),g},[]),vt=f.useCallback(async a=>{var g,S,x;if(s){k(l);return}if(Un.current||a!=null&&a.silent&&!ht)return;if(!((g=A==null?void 0:A.periods)!=null&&g.length)||!((S=A==null?void 0:A.students)!=null&&S.length)){k("Cannot sync until data is loaded. Open a file first.");return}if(He){ot(!0),vn("Offline - changes will sync when back online."),$s(!0);return}if(zr.current){k("Sync already running.");return}const m=$n.current;try{const _=await Ie(!(a!=null&&a.silent),"syncUpload");if(!_){vn("Reconnect to Google Drive to continue syncing."),ot(!0);return}if(!$){k("Select a cloud file before syncing."),vn("Select a cloud file before syncing."),ot(!0);return}const P=dw({isOffline:He,isLocked:zr.current,inFlight:Un.current,hasSession:!0,hasFile:!!$,dirty:ht,now:Date.now(),lastLocalEditAt:$r.current,graceMs:nd});if(tl("[Sync][Mobile] upload decision",P),P.action==="skip"&&!(P.reason==="clean"&&!(a!=null&&a.silent))){P.reason==="no-file"&&(k("Select a cloud file before syncing."),vn("Select a cloud file before syncing."),ot(!0));return}zr.current=!0,Un.current=!0,Gc(!0);const D=await ro($.id,"syncUpload",_),W=typeof D.data=="string"?JSON.parse(D.data):D.data,ee=Bn(W);if(!((x=ee==null?void 0:ee.periodsState)!=null&&x.periods))throw new Error("Drive file missing periods.");const J=Gi.current,T=(ee.periodsState.periods||[]).map(ie=>{const xe=String(ie.id),sn=Ue[xe]||{},Hn=se[xe]||{},yn=Le[xe]||{},wn=Array.isArray(ie.pointsHistory)?[...ie.pointsHistory]:[],Vn=pn[xe]||[],ln=A==null?void 0:A.periods.find(ye=>String(ye.id)===xe),io=pd(ie.attendanceResets||{},(ln==null?void 0:ln.attendanceResets)||{}),Gn={...ie.attendance||{}},xg=V.current[xe]||{};Object.entries(xg).forEach(([ye,xt])=>{const Gt={...Gn[ye]||{}};Object.entries(xt).forEach(([jd,oa])=>{const ia=(oa==null?void 0:oa.status)??null;!ia||ia==="unmarked"?delete Gt[jd]:Gt[jd]=ia}),Object.keys(Gt).length>0?Gn[ye]=Gt:delete Gn[ye]}),J.size&&Object.keys(Gn).forEach(ye=>{const xt={...Gn[ye]||{}};J.forEach(Gt=>{delete xt[Gt]}),Object.keys(xt).length===0?delete Gn[ye]:Gn[ye]=xt});const Sn={...ie.behaviorNotes||{}};if(Object.keys(Hn).length>0){const ye=Sn[re]?{...Sn[re]}:{};Object.entries(Hn).forEach(([xt,Gt])=>{Gt?ye[xt]={note:Gt,timestamp:new Date().toISOString()}:delete ye[xt]}),Object.keys(ye).length>0?Sn[re]=ye:delete Sn[re]}J.size&&Object.keys(Sn).forEach(ye=>{const xt={...Sn[ye]||{}};J.forEach(Gt=>{delete xt[Gt]}),Object.keys(xt).length===0?delete Sn[ye]:Sn[ye]=xt});const yg=[...wn,...Vn].filter(ye=>!J.has(String(ye.studentId))),Nd={...yn};J.forEach(ye=>{delete Nd[ye]});const kd={...io||{}};J.forEach(ye=>{delete kd[ye]});const wg=ie.activeGrouping?ie.activeGrouping.map(ye=>ye.filter(xt=>!J.has(String(xt)))):ie.activeGrouping;return{...ie,attendance:Gn,attendanceResets:kd,behaviorNotes:Sn,pointsByStudent:Nd,pointsHistory:yg,activeGrouping:wg}}),X=new Date().toISOString(),E=ee.students||[],z=(A==null?void 0:A.students)||[],le=new Map(z.map(ie=>[String(ie.id),ie])),te=E.filter(ie=>!J.has(String(ie.id))).map(ie=>{const xe=le.get(String(ie.id));if(!xe)return ie;let sn={...ie};const Hn=xe.profileUpdatedAt||"",yn=ie.profileUpdatedAt||"";Hn&&(!yn||Hn>yn)&&(sn={...sn,fullName:xe.fullName,gender:xe.gender,periodIds:xe.periodIds,profileUpdatedAt:Hn});const wn=xe.quickNoteUpdatedAt||"",Vn=ie.quickNoteUpdatedAt||"";wn&&(!Vn||wn>Vn)&&(sn={...sn,quickNote:xe.quickNote,quickNoteUpdatedAt:xe.quickNoteUpdatedAt});const ln=typeof xe.photoUpdatedAt=="number"?xe.photoUpdatedAt:0,io=typeof ie.photoUpdatedAt=="number"?ie.photoUpdatedAt:0;return ln&&(!io||ln>io)&&(sn={...sn,photoFileId:xe.photoFileId??null,photoUpdatedAt:ln}),sn}),ve=new Set(E.map(ie=>String(ie.id)));z.forEach(ie=>{J.has(String(ie.id))||ve.has(String(ie.id))||te.push(ie)});const De={...ee,schemaVersion:1,version:1,lastWriter:"mobile",lastEditedPeriodId:mt?String(mt):null,lastEditedDate:re,updatedAt:X,students:te,periodsState:{...ee.periodsState,periods:T}},Vt=JSON.stringify(De,null,2),rn=await cd($.id,Vt,"syncUpload",_);Dn(ie=>{const xe={...ie||{}};return delete xe[mt||""],xe});const Se=rn||$||void 0;Gi.current.clear(),$n.current===m?Wn(De,Se,{forceApply:!0,clearAttendanceEdits:!0}):Se&&(gt(Se.id,Se.revisionId||null),it.current=Se.id,he(Se),xr.current=Date.now()),Bs("mobile"),a!=null&&a.silent||(k("Synced with Google Drive."),Gr("Synced with Google Drive.")),Ms(new Date().toISOString()),localStorage.setItem(Co,JSON.stringify({id:(Se==null?void 0:Se.id)||$.id,name:(Se==null?void 0:Se.name)||$.name,modifiedTime:(Se==null?void 0:Se.modifiedTime)||$.modifiedTime,size:(Se==null?void 0:Se.size)||$.size,revisionId:(Se==null?void 0:Se.revisionId)||$.revisionId})),$n.current===m&&(zn(!1),ot(!1))}catch(_){const P=(_==null?void 0:_.message)||"Failed to sync with Drive.";k(P),Ye(P),ot(!0)}finally{Gc(!1),Un.current=!1,zr.current=!1}},[$,Ie,Ye,Gr,Ue,se,Le,pn,A,re,mt,ht,l,s,He,Bn,Wn,he,gt,ro,cd,pd]),lo=f.useCallback(()=>{s||He||ht&&$&&o&&(ot(!0),vt({silent:!0}))},[ht,$,o,s,vt,He]);f.useEffect(()=>{const a=()=>{document.visibilityState==="visible"&&lo()};return window.addEventListener("online",lo),document.addEventListener("visibilitychange",a),()=>{window.removeEventListener("online",lo),document.removeEventListener("visibilitychange",a)}},[lo]),f.useEffect(()=>{if(He){$s(!0);return}if(!td||!$||!o)return;(async()=>{ot(!0),vn("Reconnected  refreshing data"),await vt({silent:!0}),$s(!1),vn(null)})()},[He,td,$,o,vt]),f.useEffect(()=>{if(!$||!ht||Un.current)return;const a=window.setTimeout(()=>{vt({silent:!0})},1500);return()=>window.clearTimeout(a)},[ht,$,vt]),f.useEffect(()=>{$&&gt($.id,$.revisionId||null)},[$,gt]),f.useEffect(()=>{it.current=($==null?void 0:$.id)||null},[$]);const oo=f.useCallback(async()=>{if(s)return;const a=it.current;if(!a)return;const m=fw({isOffline:He,isLocked:zr.current||gn||Os,inFlight:Un.current,dirty:ht,now:Date.now(),lastLocalEditAt:$r.current,lastPullAt:xr.current,graceMs:nd});if(tl("[Sync][Mobile] pull decision",m),m.action==="skip")return;const g=await Ie(!1,"pull");if(g&&it.current===a)try{const S=await Bf(g.accessToken);if(it.current!==a)return;const x=S.find(_=>_.id===a);if(x!=null&&x.revisionId&&x.revisionId!==Xi(a)){const _=await Aa(g.accessToken,a);if(it.current!==a)return;const P=typeof _=="string"?JSON.parse(_):_,D=Bn(P);if(!D)return;const W=od(D);if(Yi.current&&W===Yi.current){gt(a,x.revisionId||null),xr.current=Date.now(),Bs(D.lastWriter||"unknown");return}const ee=Wn(D,x);ee==="applied"&&it.current===a?(Ms(new Date().toISOString()),gt(a,x.revisionId||null),xr.current=Date.now(),Bs(D.lastWriter||"unknown"),qi(J=>J+1),Kr("Updated from Drive.")):ee==="skipped"&&(gt(a,x.revisionId||null),xr.current=Date.now())}}catch{}},[Wn,Ie,Bn,Kr,ht,Os,gn,He,s,Xi,gt]);f.useEffect(()=>{if(s)return;let a=null;const m=async()=>{await oo(),a=window.setTimeout(m,15e3)};return a=window.setTimeout(m,15e3),()=>{a&&window.clearTimeout(a)}},[s,oo]),f.useEffect(()=>{if(Et.current&&(window.clearTimeout(Et.current),Et.current=null),!s&&!(ht||gn||Os||He||!$))return Et.current=window.setTimeout(()=>{oo()},5e3),()=>{Et.current&&(window.clearTimeout(Et.current),Et.current=null)}},[ht,gn,Os,He,$,s,oo]);const md=(p==null?void 0:p.state)??"unknown";let hd=md==="ok"&&o?"Connected to Google Drive":"Google Drive Sync",Qr="Link Google Drive to save and sync. Files stay in your Drive.",Yr=o?"Manage Files":"Connect to Drive";switch(md){case"no-session-yet":Yr=o?"Manage Files":"Connect to Google Drive",Qr="Store your seating data in a private folder in your Google Drive.";break;case"device-storage-wipe":Yr=o?"Manage Files":"Reconnect Google Drive",Qr="Your device cleared your Google connection. Tap below to reconnect; your files are still in your Drive.";break;case"oauth-failure":Yr=o?"Manage Files":"Reconnect Google Drive",Qr="There was a Google sign-in problem. Reconnect to continue syncing.";break;case"user-logged-out":Yr=o?"Manage Files":"Connect to Google Drive",Qr="You disconnected from Google Drive.";break}s&&(hd="Drive sync disabled",Qr=l,Yr="Drive disabled");const Jr=Oe&&Lt&&(A!=null&&A.periods)&&A.periods.find(a=>String(a.id)===String(Lt))||null,Xr=Jr?{...Jr.attendance||{},[re]:Ue[Jr.id]||{}}:null,la=(Jr==null?void 0:Jr.attendanceResets)||{},gd=Xr&&Oe?el({attendance:Xr,studentId:Oe.id,date:re,status:"absent",resets:la}):null,vd=Xr&&Oe?el({attendance:Xr,studentId:Oe.id,date:re,status:"tardy",resets:la}):null,xd=Xr&&Oe?el({attendance:Xr,studentId:Oe.id,date:re,status:"left_early",resets:la}):null;return i.jsx(hw,{children:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-violet-900 to-indigo-800 text-white flex flex-col relative",children:[i.jsxs("div",{className:"bg-emerald-50 text-emerald-900 text-xs px-4 py-1 text-center",children:[i.jsx("span",{role:"img","aria-label":"lock",className:"mr-1",children:""}),"Privacy: Data stays on this device and in your Google Drive. Use your school Google account. No data is sent to our servers."]}),He&&i.jsx("div",{className:"bg-slate-900 text-white text-xs px-4 py-1 text-center",children:"Offline  edits are saved locally and will sync when youre back online."}),i.jsxs("div",{className:"px-4 pt-2 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{className:"text-[11px] px-2 py-1 rounded bg-white/80 text-slate-800 shadow",onClick:rg,title:"Version",type:"button",children:["Rev ",qf]}),i.jsx("button",{className:"text-[11px] px-2 py-1 rounded border border-white/60 bg-white/20 text-white shadow hover:bg-white/30",onClick:()=>me(!0),type:"button",children:"About"})]}),!t&&i.jsx(lw,{current:"mobile",onGoDesktop:sg,onGoMobile:()=>{}})]}),i.jsx("header",{className:"px-6 pt-10 pb-4 text-center",children:i.jsx("h1",{className:"text-3xl font-black tracking-wide drop-shadow",children:"ClassSeats Mobile"})}),Xf,Ct==="attendance"&&A&&mt&&(()=>{const a=A.periods.find(T=>T.id===mt);if(!a)return null;const m=A.students.filter(T=>{var X;return(X=T.periodIds)==null?void 0:X.includes(String(a.id))}),g=Ue[a.id]||{},S=m.length||1,x=m.filter(T=>g[T.id]==="present").length,_=m.filter(T=>g[T.id]==="absent").length,P=m.filter(T=>g[T.id]==="tardy").length,D=m.filter(T=>g[T.id]==="left_early").length,W=x+_+P+D,ee=Math.round(W/S*100),J=Math.round(x/S*100);return i.jsx("div",{className:"fixed left-0 right-0 z-40 px-4 pt-2",style:{top:"64px"},children:i.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow px-3 py-2 flex flex-wrap items-center gap-2 text-xs text-slate-800",children:[i.jsxs("span",{className:"font-semibold",children:["Progress: ",ee,"%  Present: ",J,"%"]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-emerald-100 text-emerald-800 font-semibold",children:[" Present: ",x]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-rose-100 text-rose-800 font-semibold",children:[" Absent: ",_]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-amber-100 text-amber-800 font-semibold",children:[" Tardy: ",P]}),i.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-800 font-semibold",children:[" Left Early: ",D]})]})})})(),i.jsxs("main",{className:"flex-1 overflow-y-auto px-4 pb-28 pt-20 space-y-6 relative",children:[i.jsx(tw,{variant:"inline"}),i.jsx("section",{className:"max-w-2xl mx-auto bg-white/95 text-slate-900 rounded-3xl shadow-xl p-5",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-base font-semibold text-slate-900",children:hd}),i.jsx("p",{className:"text-xs text-slate-600",children:Qr}),i.jsxs("p",{className:"text-[11px] text-slate-500",children:[o?((yd=o.profile)==null?void 0:yd.email)||"Signed in":"Not signed in"," "," ",($==null?void 0:$.name)||(ne==null?void 0:ne.name)||"No file selected",He&&"  Offline"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[gn&&i.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-amber-100 text-amber-800",children:"Pending sync"}),He&&i.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-slate-200 text-slate-700",children:"Offline"}),i.jsx("button",{className:"rounded-full bg-slate-900 text-white font-semibold px-4 py-2 text-sm disabled:opacity-50",disabled:s||!o||!$,onClick:()=>{if(s){k(l);return}vt()},title:s?l:void 0,children:"Sync Now"}),i.jsx("button",{className:"rounded-full bg-emerald-600 text-white font-semibold px-4 py-2 text-sm",onClick:()=>{if(s){k(l);return}return o?K(!0):void Ie(!0,"cta")},disabled:s,title:s?l:void 0,children:Yr})]})]})}),s&&i.jsx("p",{className:"max-w-2xl mx-auto text-sm text-rose-100 text-left",children:"Drive sync is disabled."}),C&&i.jsxs("section",{className:"max-w-2xl mx-auto bg-slate-900 text-slate-100 rounded-2xl shadow-inner p-3 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold",children:"Drive Debug"}),i.jsx("button",{className:"text-slate-200 underline",onClick:()=>L(!1),children:"Close"})]}),i.jsx("button",{className:"text-slate-200 underline",onClick:()=>F([]),children:"Clear"})]}),i.jsxs("div",{className:"border border-slate-700 rounded p-2 h-48 overflow-y-auto space-y-1 bg-slate-800/70",children:[O.length===0&&i.jsx("div",{className:"text-slate-400",children:"No debug entries yet."}),O.map((a,m)=>i.jsx("div",{className:"font-mono text-[11px] whitespace-pre-wrap break-all",children:a},m))]})]}),i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsx("div",{className:"mt-3",children:i.jsx("div",{className:"inline-flex w-full rounded-xl border border-slate-200 bg-slate-50 p-1",children:i.jsxs("div",{className:"grid w-full grid-cols-3 gap-1",children:[i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${Ct==="attendance"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Qi("attendance"),children:"Attendance"}),i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${Ct==="notes"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Qi("notes"),children:"Notes"}),i.jsx("button",{className:`rounded-lg px-2 py-2 text-sm font-semibold transition ${Ct==="flashcards"?"bg-violet-100 text-violet-900 shadow-sm ring-1 ring-violet-200":"text-slate-600"}`,onClick:()=>Qi("flashcards"),children:"Flashcards"})]})})})}),i.jsxs("section",{className:"max-w-2xl mx-auto bg-white/95 text-slate-900 rounded-3xl shadow-xl p-6 space-y-6",children:[A&&i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 text-left",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsx("div",{children:i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:Ct==="attendance"?"Attendance & Behavior":Ct==="notes"?"Student Notes":"Flashcards"})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[Ct==="attendance"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Date:"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 text-sm",onClick:()=>{const a=new Date(re);a.setDate(a.getDate()-1),Kl(a.toISOString().slice(0,10))},children:""}),i.jsx("input",{type:"date",className:"rounded border border-slate-300 px-2 py-1 text-sm",value:re,onChange:a=>Kl(a.target.value||Ki())}),i.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 text-sm",onClick:()=>{const a=new Date(re);a.setDate(a.getDate()+1),Kl(a.toISOString().slice(0,10))},children:""}),i.jsx("button",{className:"px-2 py-1 rounded border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm font-semibold",onClick:()=>Kl(Ki()),children:"Today"})]})]}),Ct==="notes"&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Sort:"}),i.jsxs("select",{className:"rounded border border-slate-300 bg-white text-slate-900 px-3 py-2 text-sm shadow-sm",value:Ql,onChange:a=>qh(a.target.value),children:[i.jsx("option",{value:"first-last",children:"First Last"}),i.jsx("option",{value:"last-first",children:"Last, First"})]})]}),Ct==="attendance"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"View:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:vr,onChange:a=>Xh(a.target.value),children:[i.jsx("option",{value:"table",children:"Table View"}),i.jsx("option",{value:"list-last-first",children:"List (Last, First)"}),i.jsx("option",{value:"list-first-last",children:"List (First Last)"}),i.jsx("option",{value:"list-seat-number",children:"List (Seat Number)"})]}),vr==="table"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Table Order:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:zs,onChange:a=>Zh(a.target.value),children:[i.jsx("option",{value:"asc",children:"Ascending (1, 2, 3 / A, B, C)"}),i.jsx("option",{value:"desc",children:"Descending (3, 2, 1 / C, B, A)"})]})]}),vr==="list-seat-number"&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Seat Order:"}),i.jsxs("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:Yl,onChange:a=>eg(a.target.value),children:[i.jsx("option",{value:"asc",children:"Ascending (1, 2, 3)"}),i.jsx("option",{value:"desc",children:"Descending (3, 2, 1)"})]})]})]}),A.periods.length>0&&i.jsx("select",{className:"rounded border border-slate-300 px-2 py-1 text-sm",value:mt||"",onChange:a=>Vl(a.target.value||null),children:A.periods.map(a=>i.jsx("option",{value:a.id,children:a.name},a.id))})]})]}),mt?(()=>{const a=A.periods.find(E=>E.id===mt);if(!a)return i.jsx("p",{className:"text-sm text-slate-500",children:"Period not found."});if(Ct==="notes"){const E=A.students.filter(z=>{var le;return(le=z.periodIds)==null?void 0:le.includes(String(mt))}).slice().sort((z,le)=>{const[te,...ve]=z.fullName.split(" "),[De,...Vt]=le.fullName.split(" ");return Ql==="last-first"?ve.join(" ").localeCompare(Vt.join(" ")):te.localeCompare(De)});return i.jsx("div",{className:"space-y-3",children:E.length===0?i.jsx("p",{className:"text-sm text-slate-500",children:"No students found."}):E.map(z=>{var te;const le=(te=z.docs)==null?void 0:te.find(ve=>ve.pinned);return i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800 truncate",children:[z.fullName,"  QuickNote"]}),z.quickNote&&i.jsxs("div",{className:"relative mt-1",children:[i.jsx("div",{className:"text-xs text-slate-600 whitespace-pre-wrap break-words max-h-28 overflow-hidden pr-2",children:z.quickNote}),z.quickNote.length>180&&i.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-white to-transparent"}),i.jsx("div",{className:"mt-1 text-[11px] text-slate-400",children:"Open Quick Note to view/edit more."})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>{G(z.quickNote||""),M({studentId:z.id,studentName:z.fullName})},children:"Quick Note"}),i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",disabled:!le,onClick:ve=>{ve.preventDefault(),ve.stopPropagation(),le&&na(ta(le.driveFileId))},children:"Pinned Note"}),i.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>ue({studentId:z.id,studentName:z.fullName}),children:"Docs"})]})]})})},z.id)})})}if(Ct==="flashcards"){const E=A.students.filter(z=>{var le;return(le=z.periodIds)==null?void 0:le.includes(String(mt))});return i.jsx(vw,{students:E,periodId:String(mt),driveFileId:it.current,driveClient:r,driveSession:o})}const m=a.layoutId?A.layouts[a.layoutId]:null,g=A.students.filter(E=>{var z;return(z=E.periodIds)==null?void 0:z.includes(String(a.id))}),S=g.reduce((E,z)=>(E[String(z.id)]=z,E),{}),x={};m==null||m.tables.forEach(E=>x[E.id]={id:E.id,name:E.name,students:[]});const _=[],P=a.tableAssignments||{};Array.isArray(a.activeGrouping)&&Object.keys(P||{}).length>0?(a.activeGrouping.forEach((E,z)=>{const le=P[String(z)]||P[z],te=le?x[le]:null;E==null||E.forEach(ve=>{const De=S[String(ve)];De&&(te?te.students.push(De):_.push(De))})}),g.forEach(E=>{(a.activeGrouping||[]).some(le=>le==null?void 0:le.some(te=>String(te)===String(E.id)))||_.push(E)})):g.forEach(E=>{const z=P[String(E.id)]||P[E.id];z&&x[z]?x[z].students.push(E):_.push(E)});const D=Object.values(x).sort((E,z)=>{const le=E.name||"",te=z.name||"",ve=tg.compare(le,te);if(ve!==0)return zs==="asc"?ve:-ve;const De=String(E.id).localeCompare(String(z.id));return zs==="asc"?De:-De}),W=Ue[a.id]||{},ee=(()=>{const E={...a.attendance||{}},z=V.current[String(a.id)]||{};return Object.entries(z).forEach(([le,te])=>{const ve={...E[le]||{}};Object.entries(te).forEach(([De,Vt])=>{const rn=(Vt==null?void 0:Vt.status)??null;!rn||rn==="unmarked"?delete ve[De]:ve[De]=rn}),Object.keys(ve).length>0?E[le]=ve:delete E[le]}),Object.keys(W).length>0&&(E[re]={...E[re]||{},...W}),E})(),J=a.attendanceResets||{};se[a.id];const T=Le[a.id]||{};Fr[a.id];const X=(E,z,le)=>{var xe;const te=W[E.id],ve=qy({attendance:ee,studentId:E.id,date:re,resets:J}),De=el({attendance:ee,studentId:E.id,date:re,status:"tardy",resets:J}),Vt=el({attendance:ee,studentId:E.id,date:re,status:"left_early",resets:J}),rn=typeof T[E.id]=="number"?T[E.id]:a.startingPoints??50,Se=!!((xe=se[a.id])!=null&&xe[E.id]),ie=be[String(E.id)]||null;return i.jsx(Cw,{student:E,attendance:te,points:rn,pointsEnabled:!!a.pointsEnabled,maxPoints:a.startingPoints??50,hasNote:Se,absenceStreak:ve,tardyCount:De,leftEarlyCount:Vt,onShowAbsenceHelp:()=>Ur("absent"),onShowTardyHelp:()=>Ur("tardy"),onShowLeftEarlyHelp:()=>Ur("leftEarly"),seatNumber:z,showSeatNumber:le,statusBg:ig,statusLabel:ud,tempPhotoUrl:ie,onOpenPhoto:()=>{Ce({id:String(E.id),fullName:E.fullName,photoFileId:E.photoFileId??null})},onOpenMenu:()=>{Ht({id:E.id,name:E.fullName}),Wc(a.id)},driveClient:r,driveSession:o},E.id)};if(vr!=="table"){const E=new Map;g.forEach(te=>{E.set(String(te.id),_w(a,m,te.id))});const z=vr==="list-seat-number",le=[...g].sort((te,ve)=>{const[De,...Vt]=te.fullName.split(" "),[rn,...Se]=ve.fullName.split(" "),ie=Vt.join(" "),xe=Se.join(" ");if(vr==="list-seat-number"){const sn=E.get(String(te.id)),Hn=E.get(String(ve.id)),yn=parseInt(String(sn??""),10),wn=parseInt(String(Hn??""),10),Vn=Number.isFinite(yn),ln=Number.isFinite(wn);return Vn!==ln?Vn?-1:1:Vn&&ln&&yn!==wn?Yl==="asc"?yn-wn:wn-yn:`${te.fullName||""}`.localeCompare(`${ve.fullName||""}`)}return vr==="list-last-first"?`${ie} ${De}`.localeCompare(`${xe} ${rn}`):`${De} ${ie}`.localeCompare(`${rn} ${xe}`)});return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{className:"rounded bg-emerald-500 text-white text-xs font-semibold px-3 py-2",onClick:()=>so(a.id,g.map(te=>te.id)),children:"Mark Rest Present (All)"}),i.jsx("button",{className:"rounded bg-rose-100 text-rose-800 text-xs font-semibold px-3 py-2 border border-rose-200",onClick:()=>dd(a.id),children:"Reset Today"})]}),i.jsx("div",{className:"space-y-2",children:le.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No students found."}):le.map(te=>X(te,z?E.get(String(te.id)):null,z))})]})}return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{className:"rounded bg-emerald-500 text-white text-xs font-semibold px-3 py-2",onClick:()=>so(a.id,g.map(E=>E.id)),children:"Mark Rest Present (All)"}),i.jsx("button",{className:"rounded bg-rose-100 text-rose-800 text-xs font-semibold px-3 py-2 border border-rose-200",onClick:()=>dd(a.id),children:"Reset Today"})]}),D.map(E=>{const z=E.students.filter(te=>W[te.id]!=="absent").map(te=>te.id),le=E.name.replace("Table","").trim()||E.name;return i.jsxs("div",{className:"rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200 gap-3",children:[i.jsxs("div",{className:"flex flex-col leading-tight text-center min-w-[54px]",children:[i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Table"}),i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:le})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-xs rounded bg-emerald-100 text-emerald-800 px-2 py-1",onClick:()=>so(a.id,E.students.map(te=>te.id)),children:"Mark Rest Present"}),a.pointsEnabled&&i.jsx("button",{className:"text-[11px] rounded bg-amber-600 text-white px-3 py-2 font-semibold",onClick:()=>{Hl(null),On(0),$i(""),Ln({periodId:a.id,tableName:E.name,studentIds:z})},children:"Table Points"})]})]}),i.jsx("div",{className:"p-3 flex flex-wrap gap-2",children:E.students.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No students assigned."}):E.students.map(te=>X(te))})]},E.id)}),i.jsxs("div",{className:"rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Unassigned"}),i.jsx("button",{className:"text-xs rounded bg-emerald-100 text-emerald-800 px-2 py-1",onClick:()=>so(a.id,_.map(E=>E.id)),children:"Mark Rest Present"})]}),i.jsx("div",{className:"p-3 flex flex-wrap gap-2",children:_.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"No unassigned students."}):_.map(E=>X(E))})]})]})})():i.jsx("p",{className:"text-sm text-slate-500",children:"Load and select a period to begin."})]}),ce&&i.jsx(jw,{open:!0,studentId:ce.id,studentFullName:ce.fullName,existingPhotoFileId:ce.photoFileId,onClose:()=>Ce(null),onAccept:a=>{const m=ce.id;if(!m)return;const g=URL.createObjectURL(a);ze(S=>{const x=S[m];return x&&URL.revokeObjectURL(x),{...S,[m]:g}})},onUploadComplete:({fileId:a,photoUpdatedAt:m})=>{const g=ce.id;Ke(S=>S&&{...S,students:S.students.map(x=>x.id===g?{...x,photoFileId:a,photoUpdatedAt:m}:x)}),at(),vt({silent:!0})}}),Hc&&Mn&&i.jsx(Ty,{isOpen:!0,onRequestClose:to,title:"Edit Student",maxWidth:"md",showCloseX:!0,footer:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{className:"rounded border px-4 py-2 text-sm text-slate-600",onClick:to,children:"Cancel"}),i.jsx("button",{className:"rounded bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",onClick:()=>{const a=Mn.name.trim();if(!a||!Mn.periodId){alert("Name and period are required.");return}const m=Hc.id;Ke(g=>g&&{...g,students:g.students.map(S=>String(S.id)===String(m)?{...S,fullName:a,gender:Mn.gender,periodIds:[String(Mn.periodId)],profileUpdatedAt:new Date().toISOString()}:S)}),at(),vt({silent:!0}),to()},children:"Save"})]}),children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Full Name"}),i.jsx("input",{className:"mt-1 w-full rounded border px-3 py-2",value:Mn.name,onChange:a=>Ls(m=>m&&{...m,name:a.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Gender"}),i.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2",value:Mn.gender,onChange:a=>Ls(m=>m&&{...m,gender:a.target.value}),children:[i.jsx("option",{value:"F",children:"Female"}),i.jsx("option",{value:"M",children:"Male"}),i.jsx("option",{value:"O",children:"Other/Prefer not"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Class Period"}),i.jsx("select",{className:"mt-1 w-full rounded border px-3 py-2",value:Mn.periodId,onChange:a=>Ls(m=>m&&{...m,periodId:a.target.value}),children:((A==null?void 0:A.periods)||[]).map(a=>i.jsx("option",{value:String(a.id),children:a.name},String(a.id)))})]})]})}),Oe&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center px-4",onClick:()=>Ht(null),children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-4 w-full max-w-sm space-y-3",onClick:a=>a.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:Oe.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Actions"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-600 hover:text-slate-800",onClick:()=>{Ht(null),lg(Oe.id)},"aria-label":"Edit student",children:""}),i.jsx("button",{type:"button",className:"rounded-md p-1 text-rose-600 hover:text-rose-700",onClick:()=>og(Oe.id),"aria-label":"Delete student",children:""}),i.jsx("button",{className:"rounded-md p-1 text-slate-500 hover:text-slate-700",onClick:()=>Ht(null),children:""})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Hs.map(a=>i.jsx("button",{className:"rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{Lt&&sa(Lt,Oe.id,a),Ht(null)},children:ud(a)},a))}),gd!==null&&vd!==null&&xd!==null&&i.jsxs("div",{className:"rounded-lg border border-slate-200 px-3 py-2 text-xs text-slate-600",children:[i.jsx("div",{className:"font-semibold text-slate-700",children:"Counters (since reset)"}),i.jsxs("div",{children:["Absent ",gd,"  Tardy ",vd,"  Left early ",xd]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-lg border border-rose-200 px-2 py-2 text-xs text-left hover:bg-rose-50 text-rose-700",onClick:()=>{Lt&&Oe&&ra(Lt,Oe.id,"absent"),Ht(null)},children:" Reset absence streak"}),i.jsx("button",{className:"w-full rounded-lg border border-amber-200 px-2 py-2 text-xs text-left hover:bg-amber-50 text-amber-700",onClick:()=>{Lt&&Oe&&ra(Lt,Oe.id,"tardy"),Ht(null)},children:" Reset tardy counter"}),i.jsx("button",{className:"w-full rounded-lg border border-orange-200 px-2 py-2 text-xs text-left hover:bg-orange-50 text-orange-700",onClick:()=>{Lt&&Oe&&ra(Lt,Oe.id,"leftEarly"),Ht(null)},children:" Reset left early counter"})]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{className:"w-full rounded-lg border border-slate-200 px-2 py-2 text-xs text-left hover:bg-slate-50",onClick:()=>{Lt&&fg(Lt,Oe.id,Oe.name),Ht(null)},children:" Notes and Points"})}),i.jsx("button",{className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:()=>Ht(null),children:"Close"})]})}),Wi&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Ur(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-sm p-5 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"About this badge"}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Ur(null),children:""})]}),Wi==="absent"?i.jsx("p",{className:"text-sm text-slate-700",children:"A# shows the absence streak since the last present or reset. Unmarked days are skipped."}):Wi==="tardy"?i.jsx("p",{className:"text-sm text-slate-700",children:"T# shows the tardy count since the last reset."}):i.jsx("p",{className:"text-sm text-slate-700",children:"LE# shows the left early count since the last reset."}),i.jsx("button",{className:"w-full rounded-lg bg-slate-900 text-white font-semibold py-2 text-sm",onClick:()=>Ur(null),children:"Got it"})]})]}),gr&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>An(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:["Behavior for ",gr.studentName]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Today  Points ",lt.pointsEnabled?`${ea(lt.currentPoints,lt.startingPoints)} ${lt.currentPoints}`:"disabled"]})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>An(null),children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note"}),i.jsx("textarea",{value:en.note,onChange:a=>mn(m=>({...m,note:a.target.value})),className:"w-full border-2 border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none",rows:4,placeholder:"Enter behavior note...",autoFocus:!0,onMouseDown:a=>a.stopPropagation(),onClick:a=>a.stopPropagation()}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[" Excellent participation"," Needs redirection"," Academic progress"," Positive peer interactions"].map(a=>i.jsx("button",{onClick:()=>mn(m=>({...m,note:m.note?m.note+" "+a:a})),className:"text-[11px] px-2.5 py-1 rounded-lg bg-slate-100 hover:bg-slate-200 border border-slate-200 text-slate-700",children:a},a))}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded px-3 py-2 text-sm",placeholder:"Custom snippet",value:Mr,onChange:a=>Bl(a.target.value)}),i.jsx("button",{className:"text-xs rounded bg-indigo-600 text-white px-3 py-2",onClick:()=>{Mr.trim()&&(mn(a=>({...a,note:a.note?`${a.note} ${Mr}`:Mr})),Bl(""))},children:"Insert"})]})]}),lt.pointsEnabled&&i.jsxs("div",{className:"space-y-3 border border-slate-200 rounded-xl p-3 bg-slate-50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Points"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsxs("span",{children:[ea(lt.currentPoints,lt.startingPoints)," ",lt.currentPoints]}),i.jsx("span",{className:"text-slate-400",children:""}),i.jsxs("span",{children:[ea(Math.max(0,lt.currentPoints+en.delta),lt.startingPoints)," ",Math.max(0,lt.currentPoints+en.delta)]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[2,1,0,-1,-2].map(a=>i.jsx("button",{onClick:()=>mn(m=>({...m,delta:a,reason:m.reason})),className:`px-3 py-1.5 rounded border text-sm font-semibold ${en.delta===a?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-indigo-50"}`,children:a>0?`+${a}`:a},a))}),en.delta!==0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-[11px] font-semibold text-slate-700",children:"Reason (required)"}),i.jsx("input",{value:en.reason,onChange:a=>mn(m=>({...m,reason:a.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1 text-sm",placeholder:"Enter reason for point change"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2",onClick:dg,children:"Save"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>An(null),children:"Cancel"})]})]})]}),hn&&A&&(()=>{const a=A.students.find(m=>m.id===hn.studentId);return a?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>M(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Quick Note"}),i.jsx("p",{className:"text-xs text-slate-500",children:a.fullName})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>M(null),children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note"}),i.jsx("textarea",{value:U,onChange:m=>G(m.target.value),className:"w-full border-2 border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none",rows:5,placeholder:"Add a quick note...",autoFocus:!0,onMouseDown:m=>m.stopPropagation(),onClick:m=>m.stopPropagation()})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-indigo-600 text-white font-semibold py-2",onClick:()=>{const m=hn.studentId,g=U;Ke(S=>S&&{...S,students:S.students.map(x=>x.id===m?{...x,quickNote:g,quickNoteUpdatedAt:new Date().toISOString()}:x)}),$n.current+=1,zn(!0),ot(!0),$r.current=Date.now(),vt({silent:!0}),M(null)},children:"Save"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>M(null),children:"Cancel"})]})]})]}):null})(),Q&&A&&(()=>{const a=A.students.find(x=>x.id===Q.studentId);if(!a)return null;const m=A.periods.find(x=>x.id===mt),S=(a.docs||[]).slice().sort((x,_)=>{if(x.pinned&&!_.pinned)return-1;if(!x.pinned&&_.pinned)return 1;const P=x.createdAt?new Date(x.createdAt).getTime():0;return(_.createdAt?new Date(_.createdAt).getTime():0)-P});return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>ue(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Student Docs"}),i.jsx("p",{className:"text-xs text-slate-500",children:a.fullName})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>ue(null),children:""})]}),i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Tap a doc to open it in Google Docs."}),i.jsx("p",{className:"text-[11px] leading-snug text-slate-500",children:"To protect privacy, ClassSeats can only see the documents it helps create."}),i.jsx("p",{className:"text-[11px] leading-snug text-slate-500",children:"All documents are created in the ClassSeats/Student Docs folder in your Google Drive."})]}),i.jsx("button",{className:"rounded-lg bg-emerald-600 text-white text-xs font-semibold px-3 py-2 disabled:opacity-50",disabled:!n.canUseDriveSync,onClick:async()=>{if(n.canUseDriveSync)try{const x=await Ie(!0,"studentDocCreate");if(!x)return;const _=(m==null?void 0:m.name)||"Period",P=`Notes - ${a.fullName} - ${_} ${ug(new Date)}`,D=window.prompt("Name this Doc:",P);if(!D||!D.trim())return;const W=D.trim(),ee=await Hx(x.accessToken),J=await Gx(x.accessToken,ee,W),T=new Date().toISOString(),X={id:ag(),driveFileId:J.fileId,title:J.title||W,createdAt:T,lastOpenedAt:T};Ke(E=>E&&{...E,students:E.students.map(z=>z.id===a.id?{...z,docs:[...z.docs||[],X]}:z)}),$n.current+=1,zn(!0),ot(!0),$r.current=Date.now(),na(ta(J.fileId))}catch(x){Ye((x==null?void 0:x.message)||"Unable to create Google Doc.")}},children:"+ New Doc"})]}),i.jsx("div",{className:"max-h-72 overflow-y-auto space-y-2",children:S.length===0?i.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-600",children:"No Docs yet."}):S.map(x=>i.jsx("button",{className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-left text-sm text-slate-700 hover:bg-slate-50",onClick:_=>{_.preventDefault(),_.stopPropagation(),na(ta(x.driveFileId))},children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-900",children:x.title}),x.pinned&&i.jsx("span",{className:"text-[10px] font-semibold text-emerald-700 bg-emerald-100 px-2 py-0.5 rounded-full",children:"PINNED"})]})},x.id))}),i.jsx("button",{className:"w-full rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>ue(null),children:"Close"})]})]})})(),!A&&i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 text-left",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"No class file loaded yet."}),i.jsx("p",{className:"text-sm text-slate-600",children:"To take attendance or track points, open a class file from your Google Drive."}),i.jsx("button",{className:"w-full rounded-lg bg-emerald-600 text-white font-semibold py-2",onClick:()=>{if(s){k(l);return}return o?K(!0):void Ie(!0,"empty-state")},disabled:s,title:s?l:void 0,children:"Manage Files"})]}),pt&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Ln(null)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:pt.tableName}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Apply points to ",pt.studentIds.length," present student",pt.studentIds.length===1?"":"s"]})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>Ln(null),children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Note (required)"}),i.jsx("textarea",{className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Describe why youre adjusting points",value:$c,onChange:a=>$i(a.target.value),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Choose points"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[2,1,-1,-2].map(a=>{const m=zc===a;return i.jsxs("button",{className:`px-3 py-2 rounded-lg text-sm font-semibold border ${m?"bg-amber-600 text-white border-amber-600":"bg-white text-amber-800 border-amber-300"}`,onClick:()=>{Hl(a),On(0)},children:[a>0?`+${a}`:a," pts"]},a)}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("input",{type:"number",className:"w-24 rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"Custom",value:tn,onFocus:()=>Hl(null),onChange:a=>On(Number(a.target.value)||0)})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"flex-1 rounded-lg bg-amber-600 text-white font-semibold py-2",onClick:()=>{const a=$c.trim(),m=zc??tn;if(!a){Ye("Enter a note for the point change.");return}if(!m){Ye("Select a point value.");return}cg(pt.periodId,pt.studentIds,m,a),Hl(null),On(0),$i(""),Ln(null)},children:"Apply"}),i.jsx("button",{className:"flex-1 rounded-lg bg-slate-200 text-slate-800 font-semibold py-2",onClick:()=>Ln(null),children:"Cancel"})]}),i.jsx("p",{className:"text-[11px] text-slate-500",children:"Only present students at this table receive the adjustment. Absent students are skipped."}),(()=>{const a=(pn[pt.periodId]||[]).filter(g=>{var S;return((S=g.date)==null?void 0:S.startsWith(re))&&pt.studentIds.includes(String(g.studentId))});if(a.length===0)return null;const m=g=>{var S;return((S=A==null?void 0:A.students.find(x=>String(x.id)===String(g)))==null?void 0:S.fullName)||`Student ${g}`};return i.jsxs("div",{className:"border-t border-slate-200 pt-2 space-y-1",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Todays table adjustments"}),i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:a.map((g,S)=>i.jsxs("div",{className:"text-xs text-slate-700 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:m(g.studentId)}),i.jsxs("span",{children:[g.delta>0?"+":"",g.delta,"  ",g.reason||"No note"]})]},`${g.studentId}-${S}`))})]})})()]})]})]}),R&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>K(!1)}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-5 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Manage Files"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Sign in, load, create, or import ClassSeats files."})]}),i.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>K(!1),children:""})]}),s?i.jsx("div",{className:"space-y-2 text-sm text-rose-700",children:i.jsx("p",{children:l})}):o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-600",children:[i.jsxs("div",{children:[i.jsxs("p",{children:["Signed in as ",i.jsx("span",{className:"font-semibold text-slate-900",children:((wd=o.profile)==null?void 0:wd.email)||"your account"})]}),i.jsxs("p",{children:["Active file: ",i.jsx("span",{className:"font-semibold text-slate-900",children:($==null?void 0:$.name)||(ne==null?void 0:ne.name)||"None selected"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[$&&i.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white font-semibold",onClick:()=>void mg(),children:" Delete Active File"}),i.jsx("button",{className:"text-rose-600 underline",onClick:pg,children:"Sign out"})]})]}),Xf,i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full rounded-2xl bg-slate-900 text-white font-semibold py-2",onClick:()=>void hg(!0),children:" Refresh Cloud Files"}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-3 max-h-64 overflow-auto space-y-2",children:[y&&i.jsx("p",{className:"text-sm text-slate-500",children:"Loading Drive files"}),w&&i.jsx("p",{className:"text-sm text-rose-600",children:w}),!y&&!w&&c.length===0&&i.jsxs("div",{className:"text-sm text-slate-700 space-y-1",children:[i.jsx("p",{className:"font-semibold",children:"Youre signed into Google Drive, but no class file is loaded yet."}),i.jsx("p",{className:"text-slate-500",children:"Choose an existing class file or create a new one linked to your desktop setup."})]}),!y&&!w&&c.length>0&&c.map(a=>{const m=(ne==null?void 0:ne.id)===a.id,g=($==null?void 0:$.id)===a.id;return i.jsxs("button",{className:`w-full text-left rounded-xl border px-3 py-2 transition ${m?"border-indigo-400 bg-indigo-50 text-indigo-900":g?"border-emerald-400 bg-emerald-50 text-emerald-900":"border-slate-200 bg-white hover:bg-slate-100"}`,onClick:()=>Fe(a),children:[i.jsx("p",{className:"text-sm font-semibold",children:a.name}),i.jsxs("p",{className:"text-[11px] text-slate-500",children:["Updated ",a.modifiedTime?new Date(a.modifiedTime).toLocaleString():"",a.size?`  ${(Number(a.size)/1024).toFixed(1)} KB`:""]}),g&&i.jsx("p",{className:"text-[11px] text-emerald-700 font-semibold",children:"Active"})]},a.id)})]}),i.jsx("button",{className:"w-full rounded-2xl bg-emerald-600 text-white font-semibold py-2 disabled:opacity-50",onClick:gg,disabled:!ne||Ze,children:Ze?"Loading":ne?`Load "${ne.name}"`:"Load Selected File"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("button",{className:"w-full rounded-2xl bg-emerald-600 text-white font-semibold py-2 disabled:opacity-50",onClick:()=>void vt(),disabled:!$,children:" Sync (pull latest, then save)"}),i.jsx("p",{className:"text-[11px] text-slate-500 text-center",children:"Uses the selected cloud file. Select or create one first."})]})]}),i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"space-y-2 border-b border-slate-200 pb-3",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Create a new cloud file"}),i.jsx("input",{type:"text",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"e.g., Semester 2 24-25",value:B,onChange:a=>fe(a.target.value)}),i.jsx("button",{className:"w-full rounded-2xl bg-slate-900 text-white font-semibold py-2 disabled:opacity-50",onClick:vg,disabled:Z,children:Z?"Creating":"Create Cloud File"})]})})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-slate-700",children:"Sign in with Google to access Drive."}),i.jsx("p",{className:"text-[11px] text-amber-700",children:"Use your school Google account. Files stay in your Drive (ClassSeats folder)."}),i.jsx("button",{className:"w-full rounded-2xl bg-indigo-600 text-white font-semibold py-2",onClick:()=>{K(!1),Ie(!0)},children:" Sign in with Google"})]})]})]})]})]}),i.jsx("div",{className:"fixed inset-x-0 bottom-0 px-4 pb-[env(safe-area-inset-bottom)]",children:i.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow-lg px-4 py-3 flex flex-wrap items-center gap-2 text-xs text-slate-700",children:[i.jsxs("div",{className:"flex-1 min-w-[180px]",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:Os?"Saving":Gl?`Synced ${new Date(Gl).toLocaleTimeString()}`:"Ready"}),i.jsxs("p",{className:"text-[11px] text-slate-500 truncate",children:[o?((Sd=o.profile)==null?void 0:Sd.email)||"Signed in":"Not signed in"," "," ",($==null?void 0:$.name)||(ne==null?void 0:ne.name)||"No file selected",He&&"  Offline"]}),gn&&i.jsx("p",{className:"text-[11px] text-amber-700",children:"Pending sync"})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[i.jsx("button",{className:"rounded-full bg-emerald-600 text-white px-3 py-2 text-xs font-semibold disabled:opacity-50 flex-none",disabled:!o||!$,onClick:()=>void vt(),children:"Sync Now"}),i.jsx("button",{className:"rounded-full bg-slate-900 text-white px-3 py-2 text-xs font-semibold flex-none",onClick:()=>o?K(!0):void Ie(!0,"cta"),children:"Manage Files"})]})]})}),i.jsx(sw,{open:q,onClose:()=>me(!1),buildRevision:qf})]}),He&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center px-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-4 text-center space-y-2 text-slate-900",children:[i.jsx("p",{className:"text-base font-semibold",children:"Mobile paused while offline"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Edits are disabled while offline. Reconnect to resume."}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Last sync: ",Gl?new Date(Gl).toLocaleTimeString():"No sync yet"]})]})})]})})}function Tw({toasts:e}){return i.jsx("div",{className:"fixed right-4 top-4 z-[1000] flex w-[320px] max-w-[calc(100vw-2rem)] flex-col gap-2",children:e.map(t=>{const n=t.kind==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":t.kind==="error"?"border-rose-200 bg-rose-50 text-rose-900":t.kind==="warning"?"border-amber-200 bg-amber-50 text-amber-900":"border-slate-200 bg-slate-50 text-slate-800",r=t.kind==="success"?"":t.kind==="error"?"":t.kind==="warning"?"":"";return i.jsx("div",{className:`rounded-xl border px-3 py-2 shadow-sm ${n}`,children:i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx("span",{"aria-hidden":"true",children:r}),i.jsx("div",{className:"leading-snug",children:t.message})]})},t.id)})})}function Rw({open:e,opts:t,onCancel:n,onConfirm:r}){if(!e||!t)return null;const s=t.tone??"default",l=t.confirmText??"Confirm",o=t.cancelText===null,u=t.cancelText??"Cancel",c=s==="danger"?"bg-rose-600 hover:bg-rose-700 text-white":"bg-indigo-600 hover:bg-indigo-700 text-white";return i.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/40 p-4",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl border border-slate-200",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.title}),i.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t.message})]}),i.jsxs("div",{className:"p-5 flex items-center justify-end gap-2",children:[!o&&i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:n,children:u}),i.jsx("button",{className:`rounded-xl px-4 py-2 text-sm font-semibold ${c}`,onClick:r,children:l})]})]})})}function Iw({open:e,opts:t,onCancel:n,onConfirm:r}){const[s,l]=f.useState("");if(f.useEffect(()=>{e&&t&&l(t.defaultValue??"")},[e,t]),!e||!t)return null;const o=t.confirmText??"OK",u=t.cancelText??"Cancel",c=t.inputType??"text";return i.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/40 p-4",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl border border-slate-200",children:[i.jsxs("div",{className:"p-5 border-b border-slate-100",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.title}),t.message&&i.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t.message})]}),i.jsxs("div",{className:"p-5 space-y-3",children:[i.jsx("input",{autoFocus:!0,type:c,value:s,onChange:d=>l(d.target.value),placeholder:t.placeholder??"",className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-200"}),i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:n,children:u}),i.jsx("button",{className:"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700",onClick:()=>r(s),children:o})]})]})]})})}function Dw(){return Math.random().toString(16).slice(2)+Date.now().toString(16)}function Aw({children:e}){const[t,n]=f.useState([]),r=f.useRef(null),[s,l]=f.useState(!1),[o,u]=f.useState(null),c=f.useRef(null),[d,y]=f.useState(!1),[N,w]=f.useState(null),j=f.useCallback((h,p,v=2500)=>{const C=Dw(),L={id:C,kind:h,message:p,durationMs:v};n(O=>[...O,L]),window.setTimeout(()=>{n(O=>O.filter(F=>F.id!==C))},v)},[]),b=f.useCallback(h=>(u(h),l(!0),new Promise(p=>{r.current=p})),[]),k=f.useCallback(h=>(w(h),y(!0),new Promise(p=>{c.current=p})),[]),Y=f.useMemo(()=>({toast:j,confirm:b,prompt:k}),[j,b,k]);return i.jsxs(ux.Provider,{value:Y,children:[e,i.jsx(Tw,{toasts:t}),i.jsx(Rw,{open:s,opts:o,onCancel:()=>{l(!1);const h=r.current;r.current=null,h==null||h(!1)},onConfirm:()=>{l(!1);const h=r.current;r.current=null,h==null||h(!0)}}),i.jsx(Iw,{open:d,opts:N,onCancel:()=>{y(!1);const h=c.current;c.current=null,h==null||h(null)},onConfirm:h=>{y(!1);const p=c.current;c.current=null,p==null||p(h)}})]})}const ws={waiting:!1,registration:null},Ou=new Set;function rp(){for(const e of Ou)e({...ws})}function Lw(e){return Ou.add(e),e({...ws}),()=>{Ou.delete(e)}}async function Ow(){if("serviceWorker"in navigator&&!window.__cs_sw_registered){window.__cs_sw_registered=!0;try{const t=await navigator.serviceWorker.register("/service-worker.js",{updateViaCache:"none"});ws.registration=t,t.waiting&&navigator.serviceWorker.controller&&(ws.waiting=!0),t.addEventListener("updatefound",()=>{const s=t.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&navigator.serviceWorker.controller&&(ws.waiting=!0,rp())})});const n=()=>t.update().catch(()=>{});window.addEventListener("focus",n),window.setInterval(n,6e4),rp();let r=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{r||(r=!0,window.location.reload())})}catch(e){console.warn("[PWA] SW registration failed",e)}}}async function Mw(){const e=ws.registration;e!=null&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"})}function Fw(){const[e,t]=f.useState({waiting:!1,registration:null});return f.useEffect(()=>Lw(t),[]),e.waiting?i.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-[9999]",children:i.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-slate-900 text-white px-4 py-3 shadow-xl",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Update available"}),i.jsx("button",{className:"rounded-xl bg-white/15 hover:bg-white/25 px-3 py-1 text-sm font-semibold",onClick:async()=>{await Mw()},children:"Refresh"})]})}):null}const Uw=document.getElementById("root");Fa.createRoot(Uw).render(i.jsx(Mg.StrictMode,{children:i.jsx(Ay,{children:i.jsxs(Aw,{children:[i.jsx(Pw,{}),i.jsx(Fw,{})]})})})),Ow();
